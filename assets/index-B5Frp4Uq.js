(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function bT(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var pg={exports:{}},pu={};var ub;function PI(){if(ub)return pu;ub=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,o,l){var d=null;if(l!==void 0&&(d=""+l),o.key!==void 0&&(d=""+o.key),"key"in o){l={};for(var m in o)m!=="key"&&(l[m]=o[m])}else l=o;return o=l.ref,{$$typeof:s,type:a,key:d,ref:o!==void 0?o:null,props:l}}return pu.Fragment=e,pu.jsx=t,pu.jsxs=t,pu}var db;function UI(){return db||(db=1,pg.exports=PI()),pg.exports}var u=UI(),gg={exports:{}},qe={};var hb;function VI(){if(hb)return qe;hb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),S=Symbol.iterator;function N(M){return M===null||typeof M!="object"?null:(M=S&&M[S]||M["@@iterator"],typeof M=="function"?M:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,k={};function H(M,F,J){this.props=M,this.context=F,this.refs=k,this.updater=J||z}H.prototype.isReactComponent={},H.prototype.setState=function(M,F){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,F,"setState")},H.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function q(){}q.prototype=H.prototype;function G(M,F,J){this.props=M,this.context=F,this.refs=k,this.updater=J||z}var O=G.prototype=new q;O.constructor=G,V(O,H.prototype),O.isPureReactComponent=!0;var se=Array.isArray;function he(){}var D={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function C(M,F,J){var ie=J.ref;return{$$typeof:s,type:M,key:F,ref:ie!==void 0?ie:null,props:J}}function P(M,F){return C(M.type,F,M.props)}function j(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function U(M){var F={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(J){return F[J]})}var A=/\/+/g;function pe(M,F){return typeof M=="object"&&M!==null&&M.key!=null?U(""+M.key):F.toString(36)}function be(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(he,he):(M.status="pending",M.then(function(F){M.status==="pending"&&(M.status="fulfilled",M.value=F)},function(F){M.status==="pending"&&(M.status="rejected",M.reason=F)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function W(M,F,J,ie,de){var ye=typeof M;(ye==="undefined"||ye==="boolean")&&(M=null);var ke=!1;if(M===null)ke=!0;else switch(ye){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(M.$$typeof){case s:case e:ke=!0;break;case y:return ke=M._init,W(ke(M._payload),F,J,ie,de)}}if(ke)return de=de(M),ke=ie===""?"."+pe(M,0):ie,se(de)?(J="",ke!=null&&(J=ke.replace(A,"$&/")+"/"),W(de,F,J,"",function(Ce){return Ce})):de!=null&&(j(de)&&(de=P(de,J+(de.key==null||M&&M.key===de.key?"":(""+de.key).replace(A,"$&/")+"/")+ke)),F.push(de)),1;ke=0;var oe=ie===""?".":ie+":";if(se(M))for(var fe=0;fe<M.length;fe++)ie=M[fe],ye=oe+pe(ie,fe),ke+=W(ie,F,J,ye,de);else if(fe=N(M),typeof fe=="function")for(M=fe.call(M),fe=0;!(ie=M.next()).done;)ie=ie.value,ye=oe+pe(ie,fe++),ke+=W(ie,F,J,ye,de);else if(ye==="object"){if(typeof M.then=="function")return W(be(M),F,J,ie,de);throw F=String(M),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return ke}function me(M,F,J){if(M==null)return M;var ie=[],de=0;return W(M,ie,"","",function(ye){return F.call(J,ye,de++)}),ie}function Ae(M){if(M._status===-1){var F=M._result;F=F(),F.then(function(J){(M._status===0||M._status===-1)&&(M._status=1,M._result=J)},function(J){(M._status===0||M._status===-1)&&(M._status=2,M._result=J)}),M._status===-1&&(M._status=0,M._result=F)}if(M._status===1)return M._result.default;throw M._result}var ue=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},we={map:me,forEach:function(M,F,J){me(M,function(){F.apply(this,arguments)},J)},count:function(M){var F=0;return me(M,function(){F++}),F},toArray:function(M){return me(M,function(F){return F})||[]},only:function(M){if(!j(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return qe.Activity=b,qe.Children=we,qe.Component=H,qe.Fragment=t,qe.Profiler=o,qe.PureComponent=G,qe.StrictMode=a,qe.Suspense=g,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,qe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return D.H.useMemoCache(M)}},qe.cache=function(M){return function(){return M.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(M,F,J){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ie=V({},M.props),de=M.key;if(F!=null)for(ye in F.key!==void 0&&(de=""+F.key),F)!I.call(F,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&F.ref===void 0||(ie[ye]=F[ye]);var ye=arguments.length-2;if(ye===1)ie.children=J;else if(1<ye){for(var ke=Array(ye),oe=0;oe<ye;oe++)ke[oe]=arguments[oe+2];ie.children=ke}return C(M.type,de,ie)},qe.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},qe.createElement=function(M,F,J){var ie,de={},ye=null;if(F!=null)for(ie in F.key!==void 0&&(ye=""+F.key),F)I.call(F,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(de[ie]=F[ie]);var ke=arguments.length-2;if(ke===1)de.children=J;else if(1<ke){for(var oe=Array(ke),fe=0;fe<ke;fe++)oe[fe]=arguments[fe+2];de.children=oe}if(M&&M.defaultProps)for(ie in ke=M.defaultProps,ke)de[ie]===void 0&&(de[ie]=ke[ie]);return C(M,ye,de)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(M){return{$$typeof:m,render:M}},qe.isValidElement=j,qe.lazy=function(M){return{$$typeof:y,_payload:{_status:-1,_result:M},_init:Ae}},qe.memo=function(M,F){return{$$typeof:_,type:M,compare:F===void 0?null:F}},qe.startTransition=function(M){var F=D.T,J={};D.T=J;try{var ie=M(),de=D.S;de!==null&&de(J,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(he,ue)}catch(ye){ue(ye)}finally{F!==null&&J.types!==null&&(F.types=J.types),D.T=F}},qe.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},qe.use=function(M){return D.H.use(M)},qe.useActionState=function(M,F,J){return D.H.useActionState(M,F,J)},qe.useCallback=function(M,F){return D.H.useCallback(M,F)},qe.useContext=function(M){return D.H.useContext(M)},qe.useDebugValue=function(){},qe.useDeferredValue=function(M,F){return D.H.useDeferredValue(M,F)},qe.useEffect=function(M,F){return D.H.useEffect(M,F)},qe.useEffectEvent=function(M){return D.H.useEffectEvent(M)},qe.useId=function(){return D.H.useId()},qe.useImperativeHandle=function(M,F,J){return D.H.useImperativeHandle(M,F,J)},qe.useInsertionEffect=function(M,F){return D.H.useInsertionEffect(M,F)},qe.useLayoutEffect=function(M,F){return D.H.useLayoutEffect(M,F)},qe.useMemo=function(M,F){return D.H.useMemo(M,F)},qe.useOptimistic=function(M,F){return D.H.useOptimistic(M,F)},qe.useReducer=function(M,F,J){return D.H.useReducer(M,F,J)},qe.useRef=function(M){return D.H.useRef(M)},qe.useState=function(M){return D.H.useState(M)},qe.useSyncExternalStore=function(M,F,J){return D.H.useSyncExternalStore(M,F,J)},qe.useTransition=function(){return D.H.useTransition()},qe.version="19.2.4",qe}var fb;function A_(){return fb||(fb=1,gg.exports=VI()),gg.exports}var w=A_();const uo=bT(w);var _g={exports:{}},gu={},yg={exports:{}},vg={};var mb;function BI(){return mb||(mb=1,(function(s){function e(W,me){var Ae=W.length;W.push(me);e:for(;0<Ae;){var ue=Ae-1>>>1,we=W[ue];if(0<o(we,me))W[ue]=me,W[Ae]=we,Ae=ue;else break e}}function t(W){return W.length===0?null:W[0]}function a(W){if(W.length===0)return null;var me=W[0],Ae=W.pop();if(Ae!==me){W[0]=Ae;e:for(var ue=0,we=W.length,M=we>>>1;ue<M;){var F=2*(ue+1)-1,J=W[F],ie=F+1,de=W[ie];if(0>o(J,Ae))ie<we&&0>o(de,J)?(W[ue]=de,W[ie]=Ae,ue=ie):(W[ue]=J,W[F]=Ae,ue=F);else if(ie<we&&0>o(de,Ae))W[ue]=de,W[ie]=Ae,ue=ie;else break e}}return me}function o(W,me){var Ae=W.sortIndex-me.sortIndex;return Ae!==0?Ae:W.id-me.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var d=Date,m=d.now();s.unstable_now=function(){return d.now()-m}}var g=[],_=[],y=1,b=null,S=3,N=!1,z=!1,V=!1,k=!1,H=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function O(W){for(var me=t(_);me!==null;){if(me.callback===null)a(_);else if(me.startTime<=W)a(_),me.sortIndex=me.expirationTime,e(g,me);else break;me=t(_)}}function se(W){if(V=!1,O(W),!z)if(t(g)!==null)z=!0,he||(he=!0,U());else{var me=t(_);me!==null&&be(se,me.startTime-W)}}var he=!1,D=-1,I=5,C=-1;function P(){return k?!0:!(s.unstable_now()-C<I)}function j(){if(k=!1,he){var W=s.unstable_now();C=W;var me=!0;try{e:{z=!1,V&&(V=!1,q(D),D=-1),N=!0;var Ae=S;try{t:{for(O(W),b=t(g);b!==null&&!(b.expirationTime>W&&P());){var ue=b.callback;if(typeof ue=="function"){b.callback=null,S=b.priorityLevel;var we=ue(b.expirationTime<=W);if(W=s.unstable_now(),typeof we=="function"){b.callback=we,O(W),me=!0;break t}b===t(g)&&a(g),O(W)}else a(g);b=t(g)}if(b!==null)me=!0;else{var M=t(_);M!==null&&be(se,M.startTime-W),me=!1}}break e}finally{b=null,S=Ae,N=!1}me=void 0}}finally{me?U():he=!1}}}var U;if(typeof G=="function")U=function(){G(j)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,pe=A.port2;A.port1.onmessage=j,U=function(){pe.postMessage(null)}}else U=function(){H(j,0)};function be(W,me){D=H(function(){W(s.unstable_now())},me)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(W){W.callback=null},s.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<W?Math.floor(1e3/W):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(W){switch(S){case 1:case 2:case 3:var me=3;break;default:me=S}var Ae=S;S=me;try{return W()}finally{S=Ae}},s.unstable_requestPaint=function(){k=!0},s.unstable_runWithPriority=function(W,me){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Ae=S;S=W;try{return me()}finally{S=Ae}},s.unstable_scheduleCallback=function(W,me,Ae){var ue=s.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?ue+Ae:ue):Ae=ue,W){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=Ae+we,W={id:y++,callback:me,priorityLevel:W,startTime:Ae,expirationTime:we,sortIndex:-1},Ae>ue?(W.sortIndex=Ae,e(_,W),t(g)===null&&W===t(_)&&(V?(q(D),D=-1):V=!0,be(se,Ae-ue))):(W.sortIndex=we,e(g,W),z||N||(z=!0,he||(he=!0,U()))),W},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(W){var me=S;return function(){var Ae=S;S=me;try{return W.apply(this,arguments)}finally{S=Ae}}}})(vg)),vg}var pb;function qI(){return pb||(pb=1,yg.exports=BI()),yg.exports}var bg={exports:{}},Cn={};var gb;function HI(){if(gb)return Cn;gb=1;var s=A_();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)_+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(g,_,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:_,implementation:y}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Cn.createPortal=function(g,_){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return l(g,_,null,y)},Cn.flushSync=function(g){var _=d.T,y=a.p;try{if(d.T=null,a.p=2,g)return g()}finally{d.T=_,a.p=y,a.d.f()}},Cn.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,a.d.C(g,_))},Cn.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},Cn.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var y=_.as,b=m(y,_.crossOrigin),S=typeof _.integrity=="string"?_.integrity:void 0,N=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;y==="style"?a.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:N}):y==="script"&&a.d.X(g,{crossOrigin:b,integrity:S,fetchPriority:N,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Cn.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var y=m(_.as,_.crossOrigin);a.d.M(g,{crossOrigin:y,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&a.d.M(g)},Cn.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var y=_.as,b=m(y,_.crossOrigin);a.d.L(g,y,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Cn.preloadModule=function(g,_){if(typeof g=="string")if(_){var y=m(_.as,_.crossOrigin);a.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:y,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else a.d.m(g)},Cn.requestFormReset=function(g){a.d.r(g)},Cn.unstable_batchedUpdates=function(g,_){return g(_)},Cn.useFormState=function(g,_,y){return d.H.useFormState(g,_,y)},Cn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Cn.version="19.2.4",Cn}var _b;function ET(){if(_b)return bg.exports;_b=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),bg.exports=HI(),bg.exports}var yb;function $I(){if(yb)return gu;yb=1;var s=qI(),e=A_(),t=ET();function a(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,r=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(r=i.return),n=i.return;while(n)}return i.tag===3?r:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(a(188))}function _(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(a(188));return i!==n?null:n}for(var r=n,c=i;;){var f=r.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){r=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===r)return g(f),n;if(p===c)return g(f),i;p=p.sibling}throw Error(a(188))}if(r.return!==c.return)r=f,c=p;else{for(var E=!1,x=f.child;x;){if(x===r){E=!0,r=f,c=p;break}if(x===c){E=!0,c=f,r=p;break}x=x.sibling}if(!E){for(x=p.child;x;){if(x===r){E=!0,r=p,c=f;break}if(x===c){E=!0,c=p,r=f;break}x=x.sibling}if(!E)throw Error(a(189))}}if(r.alternate!==c)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?n:i}function y(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=y(n),i!==null)return i;n=n.sibling}return null}var b=Object.assign,S=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),G=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=j&&n[j]||n["@@iterator"],typeof n=="function"?n:null)}var A=Symbol.for("react.client.reference");function pe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===A?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case H:return"Profiler";case k:return"StrictMode";case se:return"Suspense";case he:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case z:return"Portal";case G:return n.displayName||"Context";case q:return(n._context.displayName||"Context")+".Consumer";case O:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return i=n.displayName||null,i!==null?i:pe(n.type)||"Memo";case I:i=n._payload,n=n._init;try{return pe(n(i))}catch{}}return null}var be=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae={pending:!1,data:null,method:null,action:null},ue=[],we=-1;function M(n){return{current:n}}function F(n){0>we||(n.current=ue[we],ue[we]=null,we--)}function J(n,i){we++,ue[we]=n.current,n.current=i}var ie=M(null),de=M(null),ye=M(null),ke=M(null);function oe(n,i){switch(J(ye,i),J(de,n),J(ie,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?D0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=D0(i),n=O0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}F(ie),J(ie,n)}function fe(){F(ie),F(de),F(ye)}function Ce(n){n.memoizedState!==null&&J(ke,n);var i=ie.current,r=O0(i,n.type);i!==r&&(J(de,n),J(ie,r))}function ht(n){de.current===n&&(F(ie),F(de)),ke.current===n&&(F(ke),du._currentValue=Ae)}var an,Hn;function Nn(n){if(an===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);an=i&&i[1]||"",Hn=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+an+n+Hn}var kr=!1;function jr(n,i){if(!n||kr)return"";kr=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ee){var X=ee}Reflect.construct(n,[],le)}else{try{le.call()}catch(ee){X=ee}n.call(le.prototype)}}else{try{throw Error()}catch(ee){X=ee}(le=n())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ee){if(ee&&X&&typeof ee.stack=="string")return[ee.stack,X.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),E=p[0],x=p[1];if(E&&x){var L=E.split(`
`),Y=x.split(`
`);for(f=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;f<Y.length&&!Y[f].includes("DetermineComponentFrameRoot");)f++;if(c===L.length||f===Y.length)for(c=L.length-1,f=Y.length-1;1<=c&&0<=f&&L[c]!==Y[f];)f--;for(;1<=c&&0<=f;c--,f--)if(L[c]!==Y[f]){if(c!==1||f!==1)do if(c--,f--,0>f||L[c]!==Y[f]){var ne=`
`+L[c].replace(" at new "," at ");return n.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",n.displayName)),ne}while(1<=c&&0<=f);break}}}finally{kr=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?Nn(r):""}function hc(n,i){switch(n.tag){case 26:case 27:case 5:return Nn(n.type);case 16:return Nn("Lazy");case 13:return n.child!==i&&i!==null?Nn("Suspense Fallback"):Nn("Suspense");case 19:return Nn("SuspenseList");case 0:case 15:return jr(n.type,!1);case 11:return jr(n.type.render,!1);case 1:return jr(n.type,!0);case 31:return Nn("Activity");default:return""}}function fc(n){try{var i="",r=null;do i+=hc(n,r),r=n,n=n.return;while(n);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ft=Object.prototype.hasOwnProperty,rn=s.unstable_scheduleCallback,_a=s.unstable_cancelCallback,_m=s.unstable_shouldYield,pd=s.unstable_requestPaint,Pn=s.unstable_now,Dr=s.unstable_getCurrentPriorityLevel,mc=s.unstable_ImmediatePriority,pc=s.unstable_UserBlockingPriority,ya=s.unstable_NormalPriority,ym=s.unstable_LowPriority,gd=s.unstable_IdlePriority,_d=s.log,yd=s.unstable_setDisableYieldValue,Ps=null,pn=null;function bs(n){if(typeof _d=="function"&&yd(n),pn&&typeof pn.setStrictMode=="function")try{pn.setStrictMode(Ps,n)}catch{}}var Pt=Math.clz32?Math.clz32:bd,vd=Math.log,Bo=Math.LN2;function bd(n){return n>>>=0,n===0?32:31-(vd(n)/Bo|0)|0}var ni=256,Or=262144,Gt=4194304;function si(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ii(n,i,r){var c=n.pendingLanes;if(c===0)return 0;var f=0,p=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var x=c&134217727;return x!==0?(c=x&~p,c!==0?f=si(c):(E&=x,E!==0?f=si(E):r||(r=x&~n,r!==0&&(f=si(r))))):(x=c&~p,x!==0?f=si(x):E!==0?f=si(E):r||(r=c&~n,r!==0&&(f=si(r)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,r=i&-i,p>=r||p===32&&(r&4194048)!==0)?i:f}function Us(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function vm(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ed(){var n=Gt;return Gt<<=1,(Gt&62914560)===0&&(Gt=4194304),n}function ai(n){for(var i=[],r=0;31>r;r++)i.push(n);return i}function Mr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function bm(n,i,r,c,f,p){var E=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var x=n.entanglements,L=n.expirationTimes,Y=n.hiddenUpdates;for(r=E&~r;0<r;){var ne=31-Pt(r),le=1<<ne;x[ne]=0,L[ne]=-1;var X=Y[ne];if(X!==null)for(Y[ne]=null,ne=0;ne<X.length;ne++){var ee=X[ne];ee!==null&&(ee.lane&=-536870913)}r&=~le}c!==0&&zr(n,c,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(E&~i))}function zr(n,i,r){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-Pt(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|r&261930}function gc(n,i){var r=n.entangledLanes|=i;for(n=n.entanglements;r;){var c=31-Pt(r),f=1<<c;f&i|n[c]&i&&(n[c]|=i),r&=~f}}function _c(n,i){var r=i&-i;return r=(r&42)!==0?1:Lr(r),(r&(n.suspendedLanes|i))!==0?0:r}function Lr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ui(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Td(){var n=me.p;return n!==0?n:(n=window.event,n===void 0?32:sb(n.type))}function Vs(n,i){var r=me.p;try{return me.p=n,i()}finally{me.p=r}}var Bs=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Bs,un="__reactProps$"+Bs,ri="__reactContainer$"+Bs,qo="__reactEvents$"+Bs,Em="__reactListeners$"+Bs,Sd="__reactHandles$"+Bs,Ad="__reactResources$"+Bs,oi="__reactMarker$"+Bs;function Ho(n){delete n[Qt],delete n[un],delete n[qo],delete n[Em],delete n[Sd]}function li(n){var i=n[Qt];if(i)return i;for(var r=n.parentNode;r;){if(i=r[ri]||r[Qt]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(n=B0(n);n!==null;){if(r=n[Qt])return r;n=B0(n)}return i}n=r,r=n.parentNode}return null}function Es(n){if(n=n[Qt]||n[ri]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function ns(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(a(33))}function ci(n){var i=n[Ad];return i||(i=n[Ad]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Kt(n){n[oi]=!0}var yc=new Set,vc={};function ui(n,i){di(n,i),di(n+"Capture",i)}function di(n,i){for(vc[n]=i,n=0;n<i.length;n++)yc.add(i[n])}var bc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ec={},Tc={};function xd(n){return Ft.call(Tc,n)?!0:Ft.call(Ec,n)?!1:bc.test(n)?Tc[n]=!0:(Ec[n]=!0,!1)}function $o(n,i,r){if(xd(i))if(r===null)n.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+r)}}function ss(n,i,r){if(r===null)n.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+r)}}function Yt(n,i,r,c){if(c===null)n.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(i,r,""+c)}}function dn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function va(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Sc(n,i,r){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,p=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){r=""+E,p.call(this,E)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(E){r=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ft(n){if(!n._valueTracker){var i=va(n)?"checked":"value";n._valueTracker=Sc(n,i,""+n[i])}}function Pr(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var r=i.getValue(),c="";return n&&(c=va(n)?n.checked?"true":"false":n.value),n=c,n!==r?(i.setValue(n),!0):!1}function hi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ur=/[\n"\\]/g;function $n(n){return n.replace(Ur,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Fo(n,i,r,c,f,p,E,x){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),i!=null?E==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+dn(i)):n.value!==""+dn(i)&&(n.value=""+dn(i)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),i!=null?Ac(n,E,dn(i)):r!=null?Ac(n,E,dn(r)):c!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.name=""+dn(x):n.removeAttribute("name")}function wd(n,i,r,c,f,p,E,x){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),i!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){ft(n);return}r=r!=null?""+dn(r):"",i=i!=null?""+dn(i):r,x||i===n.value||(n.value=i),n.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=x?n.checked:!!c,n.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E),ft(n)}function Ac(n,i,r){i==="number"&&hi(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function ba(n,i,r,c){if(n=n.options,i){i={};for(var f=0;f<r.length;f++)i["$"+r[f]]=!0;for(r=0;r<n.length;r++)f=i.hasOwnProperty("$"+n[r].value),n[r].selected!==f&&(n[r].selected=f),f&&c&&(n[r].defaultSelected=!0)}else{for(r=""+dn(r),i=null,f=0;f<n.length;f++){if(n[f].value===r){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Id(n,i,r){if(i!=null&&(i=""+dn(i),i!==n.value&&(n.value=i),r==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=r!=null?""+dn(r):""}function Ea(n,i,r,c){if(i==null){if(c!=null){if(r!=null)throw Error(a(92));if(be(c)){if(1<c.length)throw Error(a(93));c=c[0]}r=c}r==null&&(r=""),i=r}r=dn(i),n.defaultValue=r,c=n.textContent,c===r&&c!==""&&c!==null&&(n.value=c),ft(n)}function Fn(n,i){if(i){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=i;return}}n.textContent=i}var Rd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xc(n,i,r){var c=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,r):typeof r!="number"||r===0||Rd.has(i)?i==="float"?n.cssFloat=r:n[i]=(""+r).trim():n[i]=r+"px"}function wc(n,i,r){if(i!=null&&typeof i!="object")throw Error(a(62));if(n=n.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&r[f]!==c&&xc(n,f,c)}else for(var p in i)i.hasOwnProperty(p)&&xc(n,p,i[p])}function Go(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ta=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qo(n){return Ta.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function qs(){}var Ic=null;function Ts(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Sa=null,fi=null;function Vr(n){var i=Es(n);if(i&&(n=i.stateNode)){var r=n[un]||null;e:switch(n=i.stateNode,i.type){case"input":if(Fo(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+$n(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var c=r[i];if(c!==n&&c.form===n.form){var f=c[un]||null;if(!f)throw Error(a(90));Fo(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<r.length;i++)c=r[i],c.form===n.form&&Pr(c)}break e;case"textarea":Id(n,r.value,r.defaultValue);break e;case"select":i=r.value,i!=null&&ba(n,!!r.multiple,i,!1)}}}var Ko=!1;function Aa(n,i,r){if(Ko)return n(i,r);Ko=!0;try{var c=n(i);return c}finally{if(Ko=!1,(Sa!==null||fi!==null)&&(Th(),Sa&&(i=Sa,n=fi,fi=Sa=null,Vr(i),n)))for(i=0;i<n.length;i++)Vr(n[i])}}function Hs(n,i){var r=n.stateNode;if(r===null)return null;var c=r[un]||null;if(c===null)return null;r=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(a(231,i,typeof r));return r}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Br=!1;if(Ss)try{var gt={};Object.defineProperty(gt,"passive",{get:function(){Br=!0}}),window.addEventListener("test",gt,gt),window.removeEventListener("test",gt,gt)}catch{Br=!1}var mi=null,Rc=null,qr=null;function Nc(){if(qr)return qr;var n,i=Rc,r=i.length,c,f="value"in mi?mi.value:mi.textContent,p=f.length;for(n=0;n<r&&i[n]===f[n];n++);var E=r-n;for(c=1;c<=E&&i[r-c]===f[p-c];c++);return qr=f.slice(n,1<c?1-c:void 0)}function Hr(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Vi(){return!0}function $s(){return!1}function gn(n){function i(r,c,f,p,E){this._reactName=r,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(r=n[x],this[x]=r?r(p):p[x]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Vi:$s,this.isPropagationStopped=$s,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),i}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pi=gn(Bi),xa=b({},Bi,{view:0,detail:0}),Cc=gn(xa),wa,Yo,gi,Wo=b({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ia,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==gi&&(gi&&n.type==="mousemove"?(wa=n.screenX-gi.screenX,Yo=n.screenY-gi.screenY):Yo=wa=0,gi=n),wa)},movementY:function(n){return"movementY"in n?n.movementY:Yo}}),kc=gn(Wo),$r=b({},Wo,{dataTransfer:0}),Cd=gn($r),kd=b({},xa,{relatedTarget:0}),Fr=gn(kd),jc=b({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),jd=gn(jc),Xo=b({},Bi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Dd=gn(Xo),Od=b({},Bi,{data:0}),_i=gn(Od),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ld={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Ld[n])?!!i[n]:!1}function Ia(){return Pd}var Un=b({},xa,{key:function(n){if(n.key){var i=Md[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Hr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zd[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ia,charCode:function(n){return n.type==="keypress"?Hr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Hr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ud=gn(Un),Vd=b({},Wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qi=gn(Vd),h=b({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ia}),v=gn(h),T=b({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=gn(T),Q=b({},Wo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=gn(Q),_e=b({},Bi,{newState:0,oldState:0}),$e=gn(_e),Ut=[9,13,27,32],lt=Ss&&"CompositionEvent"in window,Rt=null;Ss&&"documentMode"in document&&(Rt=document.documentMode);var As=Ss&&"TextEvent"in window&&!Rt,yi=Ss&&(!lt||Rt&&8<Rt&&11>=Rt),Fs=" ",Gs=!1;function Gr(n,i){switch(n){case"keyup":return Ut.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Jo=!1;function lw(n,i){switch(n){case"compositionend":return Zo(i);case"keypress":return i.which!==32?null:(Gs=!0,Fs);case"textInput":return n=i.data,n===Fs&&Gs?null:n;default:return null}}function cw(n,i){if(Jo)return n==="compositionend"||!lt&&Gr(n,i)?(n=Nc(),qr=Rc=mi=null,Jo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return yi&&i.locale!=="ko"?null:i.data;default:return null}}var uw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $y(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!uw[n.type]:i==="textarea"}function Fy(n,i,r,c){Sa?fi?fi.push(c):fi=[c]:Sa=c,i=Nh(i,"onChange"),0<i.length&&(r=new pi("onChange","change",null,r,c),n.push({event:r,listeners:i}))}var Dc=null,Oc=null;function dw(n){I0(n,0)}function Bd(n){var i=ns(n);if(Pr(i))return n}function Gy(n,i){if(n==="change")return i}var Qy=!1;if(Ss){var Tm;if(Ss){var Sm="oninput"in document;if(!Sm){var Ky=document.createElement("div");Ky.setAttribute("oninput","return;"),Sm=typeof Ky.oninput=="function"}Tm=Sm}else Tm=!1;Qy=Tm&&(!document.documentMode||9<document.documentMode)}function Yy(){Dc&&(Dc.detachEvent("onpropertychange",Wy),Oc=Dc=null)}function Wy(n){if(n.propertyName==="value"&&Bd(Oc)){var i=[];Fy(i,Oc,n,Ts(n)),Aa(dw,i)}}function hw(n,i,r){n==="focusin"?(Yy(),Dc=i,Oc=r,Dc.attachEvent("onpropertychange",Wy)):n==="focusout"&&Yy()}function fw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Bd(Oc)}function mw(n,i){if(n==="click")return Bd(i)}function pw(n,i){if(n==="input"||n==="change")return Bd(i)}function gw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var is=typeof Object.is=="function"?Object.is:gw;function Mc(n,i){if(is(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var r=Object.keys(n),c=Object.keys(i);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var f=r[c];if(!Ft.call(i,f)||!is(n[f],i[f]))return!1}return!0}function Xy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Zy(n,i){var r=Xy(n);n=0;for(var c;r;){if(r.nodeType===3){if(c=n+r.textContent.length,n<=i&&c>=i)return{node:r,offset:i-n};n=c}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xy(r)}}function Jy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Jy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function ev(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=hi(n.document);i instanceof n.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)n=i.contentWindow;else break;i=hi(n.document)}return i}function Am(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var _w=Ss&&"documentMode"in document&&11>=document.documentMode,el=null,xm=null,zc=null,wm=!1;function tv(n,i,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;wm||el==null||el!==hi(c)||(c=el,"selectionStart"in c&&Am(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),zc&&Mc(zc,c)||(zc=c,c=Nh(xm,"onSelect"),0<c.length&&(i=new pi("onSelect","select",null,i,r),n.push({event:i,listeners:c}),i.target=el)))}function Qr(n,i){var r={};return r[n.toLowerCase()]=i.toLowerCase(),r["Webkit"+n]="webkit"+i,r["Moz"+n]="moz"+i,r}var tl={animationend:Qr("Animation","AnimationEnd"),animationiteration:Qr("Animation","AnimationIteration"),animationstart:Qr("Animation","AnimationStart"),transitionrun:Qr("Transition","TransitionRun"),transitionstart:Qr("Transition","TransitionStart"),transitioncancel:Qr("Transition","TransitionCancel"),transitionend:Qr("Transition","TransitionEnd")},Im={},nv={};Ss&&(nv=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function Kr(n){if(Im[n])return Im[n];if(!tl[n])return n;var i=tl[n],r;for(r in i)if(i.hasOwnProperty(r)&&r in nv)return Im[n]=i[r];return n}var sv=Kr("animationend"),iv=Kr("animationiteration"),av=Kr("animationstart"),yw=Kr("transitionrun"),vw=Kr("transitionstart"),bw=Kr("transitioncancel"),rv=Kr("transitionend"),ov=new Map,Rm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rm.push("scrollEnd");function Qs(n,i){ov.set(n,i),ui(i,[n])}var qd=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},xs=[],nl=0,Nm=0;function Hd(){for(var n=nl,i=Nm=nl=0;i<n;){var r=xs[i];xs[i++]=null;var c=xs[i];xs[i++]=null;var f=xs[i];xs[i++]=null;var p=xs[i];if(xs[i++]=null,c!==null&&f!==null){var E=c.pending;E===null?f.next=f:(f.next=E.next,E.next=f),c.pending=f}p!==0&&lv(r,f,p)}}function $d(n,i,r,c){xs[nl++]=n,xs[nl++]=i,xs[nl++]=r,xs[nl++]=c,Nm|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Cm(n,i,r,c){return $d(n,i,r,c),Fd(n)}function Yr(n,i){return $d(n,null,null,i),Fd(n)}function lv(n,i,r){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r);for(var f=!1,p=n.return;p!==null;)p.childLanes|=r,c=p.alternate,c!==null&&(c.childLanes|=r),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&i!==null&&(f=31-Pt(r),n=p.hiddenUpdates,c=n[f],c===null?n[f]=[i]:c.push(i),i.lane=r|536870912),p):null}function Fd(n){if(50<iu)throw iu=0,Up=null,Error(a(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var sl={};function Ew(n,i,r,c){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function as(n,i,r,c){return new Ew(n,i,r,c)}function km(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Hi(n,i){var r=n.alternate;return r===null?(r=as(n.tag,i,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=i,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,i=n.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function cv(n,i){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,i=r.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Gd(n,i,r,c,f,p){var E=0;if(c=n,typeof n=="function")km(n)&&(E=1);else if(typeof n=="string")E=wI(n,r,ie.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=as(31,r,i,f),n.elementType=C,n.lanes=p,n;case V:return Wr(r.children,f,p,i);case k:E=8,f|=24;break;case H:return n=as(12,r,i,f|2),n.elementType=H,n.lanes=p,n;case se:return n=as(13,r,i,f),n.elementType=se,n.lanes=p,n;case he:return n=as(19,r,i,f),n.elementType=he,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case G:E=10;break e;case q:E=9;break e;case O:E=11;break e;case D:E=14;break e;case I:E=16,c=null;break e}E=29,r=Error(a(130,n===null?"null":typeof n,"")),c=null}return i=as(E,r,i,f),i.elementType=n,i.type=c,i.lanes=p,i}function Wr(n,i,r,c){return n=as(7,n,c,i),n.lanes=r,n}function jm(n,i,r){return n=as(6,n,null,i),n.lanes=r,n}function uv(n){var i=as(18,null,null,0);return i.stateNode=n,i}function Dm(n,i,r){return i=as(4,n.children!==null?n.children:[],n.key,i),i.lanes=r,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var dv=new WeakMap;function ws(n,i){if(typeof n=="object"&&n!==null){var r=dv.get(n);return r!==void 0?r:(i={value:n,source:i,stack:fc(i)},dv.set(n,i),i)}return{value:n,source:i,stack:fc(i)}}var il=[],al=0,Qd=null,Lc=0,Is=[],Rs=0,Ra=null,vi=1,bi="";function $i(n,i){il[al++]=Lc,il[al++]=Qd,Qd=n,Lc=i}function hv(n,i,r){Is[Rs++]=vi,Is[Rs++]=bi,Is[Rs++]=Ra,Ra=n;var c=vi;n=bi;var f=32-Pt(c)-1;c&=~(1<<f),r+=1;var p=32-Pt(i)+f;if(30<p){var E=f-f%5;p=(c&(1<<E)-1).toString(32),c>>=E,f-=E,vi=1<<32-Pt(i)+f|r<<f|c,bi=p+n}else vi=1<<p|r<<f|c,bi=n}function Om(n){n.return!==null&&($i(n,1),hv(n,1,0))}function Mm(n){for(;n===Qd;)Qd=il[--al],il[al]=null,Lc=il[--al],il[al]=null;for(;n===Ra;)Ra=Is[--Rs],Is[Rs]=null,bi=Is[--Rs],Is[Rs]=null,vi=Is[--Rs],Is[Rs]=null}function fv(n,i){Is[Rs++]=vi,Is[Rs++]=bi,Is[Rs++]=Ra,vi=i.id,bi=i.overflow,Ra=n}var _n=null,xt=null,st=!1,Na=null,Ns=!1,zm=Error(a(519));function Ca(n){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pc(ws(i,n)),zm}function mv(n){var i=n.stateNode,r=n.type,c=n.memoizedProps;switch(i[Qt]=n,i[un]=c,r){case"dialog":Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":case"embed":Ye("load",i);break;case"video":case"audio":for(r=0;r<ru.length;r++)Ye(ru[r],i);break;case"source":Ye("error",i);break;case"img":case"image":case"link":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"input":Ye("invalid",i),wd(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ye("invalid",i);break;case"textarea":Ye("invalid",i),Ea(i,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||c.suppressHydrationWarning===!0||k0(i.textContent,r)?(c.popover!=null&&(Ye("beforetoggle",i),Ye("toggle",i)),c.onScroll!=null&&Ye("scroll",i),c.onScrollEnd!=null&&Ye("scrollend",i),c.onClick!=null&&(i.onclick=qs),i=!0):i=!1,i||Ca(n,!0)}function pv(n){for(_n=n.return;_n;)switch(_n.tag){case 5:case 31:case 13:Ns=!1;return;case 27:case 3:Ns=!0;return;default:_n=_n.return}}function rl(n){if(n!==_n)return!1;if(!st)return pv(n),st=!0,!1;var i=n.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||eg(n.type,n.memoizedProps)),r=!r),r&&xt&&Ca(n),pv(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));xt=V0(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));xt=V0(n)}else i===27?(i=xt,$a(n.type)?(n=ag,ag=null,xt=n):xt=i):xt=_n?ks(n.stateNode.nextSibling):null;return!0}function Xr(){xt=_n=null,st=!1}function Lm(){var n=Na;return n!==null&&(Yn===null?Yn=n:Yn.push.apply(Yn,n),Na=null),n}function Pc(n){Na===null?Na=[n]:Na.push(n)}var Pm=M(null),Zr=null,Fi=null;function ka(n,i,r){J(Pm,i._currentValue),i._currentValue=r}function Gi(n){n._currentValue=Pm.current,F(Pm)}function Um(n,i,r){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===r)break;n=n.return}}function Vm(n,i,r,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var E=f.child;p=p.firstContext;e:for(;p!==null;){var x=p;p=f;for(var L=0;L<i.length;L++)if(x.context===i[L]){p.lanes|=r,x=p.alternate,x!==null&&(x.lanes|=r),Um(p.return,r,n),c||(E=null);break e}p=x.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(a(341));E.lanes|=r,p=E.alternate,p!==null&&(p.lanes|=r),Um(E,r,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function ol(n,i,r,c){n=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(a(387));if(E=E.memoizedProps,E!==null){var x=f.type;is(f.pendingProps.value,E.value)||(n!==null?n.push(x):n=[x])}}else if(f===ke.current){if(E=f.alternate,E===null)throw Error(a(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(du):n=[du])}f=f.return}n!==null&&Vm(i,n,r,c),i.flags|=262144}function Kd(n){for(n=n.firstContext;n!==null;){if(!is(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Jr(n){Zr=n,Fi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function yn(n){return gv(Zr,n)}function Yd(n,i){return Zr===null&&Jr(n),gv(n,i)}function gv(n,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},Fi===null){if(n===null)throw Error(a(308));Fi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Fi=Fi.next=i;return r}var Tw=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(r,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(r){return r()})}},Sw=s.unstable_scheduleCallback,Aw=s.unstable_NormalPriority,Wt={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bm(){return{controller:new Tw,data:new Map,refCount:0}}function Uc(n){n.refCount--,n.refCount===0&&Sw(Aw,function(){n.controller.abort()})}var Vc=null,qm=0,ll=0,cl=null;function xw(n,i){if(Vc===null){var r=Vc=[];qm=0,ll=Fp(),cl={status:"pending",value:void 0,then:function(c){r.push(c)}}}return qm++,i.then(_v,_v),i}function _v(){if(--qm===0&&Vc!==null){cl!==null&&(cl.status="fulfilled");var n=Vc;Vc=null,ll=0,cl=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function ww(n,i){var r=[],c={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<r.length;f++)(0,r[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),c}var yv=W.S;W.S=function(n,i){t0=Pn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&xw(n,i),yv!==null&&yv(n,i)};var eo=M(null);function Hm(){var n=eo.current;return n!==null?n:Et.pooledCache}function Wd(n,i){i===null?J(eo,eo.current):J(eo,i.pool)}function vv(){var n=Hm();return n===null?null:{parent:Wt._currentValue,pool:n}}var ul=Error(a(460)),$m=Error(a(474)),Xd=Error(a(542)),Zd={then:function(){}};function bv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ev(n,i,r){switch(r=n[r],r===void 0?n.push(i):r!==i&&(i.then(qs,qs),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Sv(n),n;default:if(typeof i.status=="string")i.then(qs,qs);else{if(n=Et,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Sv(n),n}throw no=i,ul}}function to(n){try{var i=n._init;return i(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(no=r,ul):r}}var no=null;function Tv(){if(no===null)throw Error(a(459));var n=no;return no=null,n}function Sv(n){if(n===ul||n===Xd)throw Error(a(483))}var dl=null,Bc=0;function Jd(n){var i=Bc;return Bc+=1,dl===null&&(dl=[]),Ev(dl,n,i)}function qc(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function eh(n,i){throw i.$$typeof===S?Error(a(525)):(n=Object.prototype.toString.call(i),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Av(n){function i($,B){if(n){var K=$.deletions;K===null?($.deletions=[B],$.flags|=16):K.push(B)}}function r($,B){if(!n)return null;for(;B!==null;)i($,B),B=B.sibling;return null}function c($){for(var B=new Map;$!==null;)$.key!==null?B.set($.key,$):B.set($.index,$),$=$.sibling;return B}function f($,B){return $=Hi($,B),$.index=0,$.sibling=null,$}function p($,B,K){return $.index=K,n?(K=$.alternate,K!==null?(K=K.index,K<B?($.flags|=67108866,B):K):($.flags|=67108866,B)):($.flags|=1048576,B)}function E($){return n&&$.alternate===null&&($.flags|=67108866),$}function x($,B,K,ae){return B===null||B.tag!==6?(B=jm(K,$.mode,ae),B.return=$,B):(B=f(B,K),B.return=$,B)}function L($,B,K,ae){var je=K.type;return je===V?ne($,B,K.props.children,ae,K.key):B!==null&&(B.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===I&&to(je)===B.type)?(B=f(B,K.props),qc(B,K),B.return=$,B):(B=Gd(K.type,K.key,K.props,null,$.mode,ae),qc(B,K),B.return=$,B)}function Y($,B,K,ae){return B===null||B.tag!==4||B.stateNode.containerInfo!==K.containerInfo||B.stateNode.implementation!==K.implementation?(B=Dm(K,$.mode,ae),B.return=$,B):(B=f(B,K.children||[]),B.return=$,B)}function ne($,B,K,ae,je){return B===null||B.tag!==7?(B=Wr(K,$.mode,ae,je),B.return=$,B):(B=f(B,K),B.return=$,B)}function le($,B,K){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=jm(""+B,$.mode,K),B.return=$,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case N:return K=Gd(B.type,B.key,B.props,null,$.mode,K),qc(K,B),K.return=$,K;case z:return B=Dm(B,$.mode,K),B.return=$,B;case I:return B=to(B),le($,B,K)}if(be(B)||U(B))return B=Wr(B,$.mode,K,null),B.return=$,B;if(typeof B.then=="function")return le($,Jd(B),K);if(B.$$typeof===G)return le($,Yd($,B),K);eh($,B)}return null}function X($,B,K,ae){var je=B!==null?B.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return je!==null?null:x($,B,""+K,ae);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case N:return K.key===je?L($,B,K,ae):null;case z:return K.key===je?Y($,B,K,ae):null;case I:return K=to(K),X($,B,K,ae)}if(be(K)||U(K))return je!==null?null:ne($,B,K,ae,null);if(typeof K.then=="function")return X($,B,Jd(K),ae);if(K.$$typeof===G)return X($,B,Yd($,K),ae);eh($,K)}return null}function ee($,B,K,ae,je){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return $=$.get(K)||null,x(B,$,""+ae,je);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case N:return $=$.get(ae.key===null?K:ae.key)||null,L(B,$,ae,je);case z:return $=$.get(ae.key===null?K:ae.key)||null,Y(B,$,ae,je);case I:return ae=to(ae),ee($,B,K,ae,je)}if(be(ae)||U(ae))return $=$.get(K)||null,ne(B,$,ae,je,null);if(typeof ae.then=="function")return ee($,B,K,Jd(ae),je);if(ae.$$typeof===G)return ee($,B,K,Yd(B,ae),je);eh(B,ae)}return null}function Ie($,B,K,ae){for(var je=null,rt=null,Re=B,Ge=B=0,Ze=null;Re!==null&&Ge<K.length;Ge++){Re.index>Ge?(Ze=Re,Re=null):Ze=Re.sibling;var ot=X($,Re,K[Ge],ae);if(ot===null){Re===null&&(Re=Ze);break}n&&Re&&ot.alternate===null&&i($,Re),B=p(ot,B,Ge),rt===null?je=ot:rt.sibling=ot,rt=ot,Re=Ze}if(Ge===K.length)return r($,Re),st&&$i($,Ge),je;if(Re===null){for(;Ge<K.length;Ge++)Re=le($,K[Ge],ae),Re!==null&&(B=p(Re,B,Ge),rt===null?je=Re:rt.sibling=Re,rt=Re);return st&&$i($,Ge),je}for(Re=c(Re);Ge<K.length;Ge++)Ze=ee(Re,$,Ge,K[Ge],ae),Ze!==null&&(n&&Ze.alternate!==null&&Re.delete(Ze.key===null?Ge:Ze.key),B=p(Ze,B,Ge),rt===null?je=Ze:rt.sibling=Ze,rt=Ze);return n&&Re.forEach(function(Ya){return i($,Ya)}),st&&$i($,Ge),je}function Le($,B,K,ae){if(K==null)throw Error(a(151));for(var je=null,rt=null,Re=B,Ge=B=0,Ze=null,ot=K.next();Re!==null&&!ot.done;Ge++,ot=K.next()){Re.index>Ge?(Ze=Re,Re=null):Ze=Re.sibling;var Ya=X($,Re,ot.value,ae);if(Ya===null){Re===null&&(Re=Ze);break}n&&Re&&Ya.alternate===null&&i($,Re),B=p(Ya,B,Ge),rt===null?je=Ya:rt.sibling=Ya,rt=Ya,Re=Ze}if(ot.done)return r($,Re),st&&$i($,Ge),je;if(Re===null){for(;!ot.done;Ge++,ot=K.next())ot=le($,ot.value,ae),ot!==null&&(B=p(ot,B,Ge),rt===null?je=ot:rt.sibling=ot,rt=ot);return st&&$i($,Ge),je}for(Re=c(Re);!ot.done;Ge++,ot=K.next())ot=ee(Re,$,Ge,ot.value,ae),ot!==null&&(n&&ot.alternate!==null&&Re.delete(ot.key===null?Ge:ot.key),B=p(ot,B,Ge),rt===null?je=ot:rt.sibling=ot,rt=ot);return n&&Re.forEach(function(LI){return i($,LI)}),st&&$i($,Ge),je}function vt($,B,K,ae){if(typeof K=="object"&&K!==null&&K.type===V&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case N:e:{for(var je=K.key;B!==null;){if(B.key===je){if(je=K.type,je===V){if(B.tag===7){r($,B.sibling),ae=f(B,K.props.children),ae.return=$,$=ae;break e}}else if(B.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===I&&to(je)===B.type){r($,B.sibling),ae=f(B,K.props),qc(ae,K),ae.return=$,$=ae;break e}r($,B);break}else i($,B);B=B.sibling}K.type===V?(ae=Wr(K.props.children,$.mode,ae,K.key),ae.return=$,$=ae):(ae=Gd(K.type,K.key,K.props,null,$.mode,ae),qc(ae,K),ae.return=$,$=ae)}return E($);case z:e:{for(je=K.key;B!==null;){if(B.key===je)if(B.tag===4&&B.stateNode.containerInfo===K.containerInfo&&B.stateNode.implementation===K.implementation){r($,B.sibling),ae=f(B,K.children||[]),ae.return=$,$=ae;break e}else{r($,B);break}else i($,B);B=B.sibling}ae=Dm(K,$.mode,ae),ae.return=$,$=ae}return E($);case I:return K=to(K),vt($,B,K,ae)}if(be(K))return Ie($,B,K,ae);if(U(K)){if(je=U(K),typeof je!="function")throw Error(a(150));return K=je.call(K),Le($,B,K,ae)}if(typeof K.then=="function")return vt($,B,Jd(K),ae);if(K.$$typeof===G)return vt($,B,Yd($,K),ae);eh($,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,B!==null&&B.tag===6?(r($,B.sibling),ae=f(B,K),ae.return=$,$=ae):(r($,B),ae=jm(K,$.mode,ae),ae.return=$,$=ae),E($)):r($,B)}return function($,B,K,ae){try{Bc=0;var je=vt($,B,K,ae);return dl=null,je}catch(Re){if(Re===ul||Re===Xd)throw Re;var rt=as(29,Re,null,$.mode);return rt.lanes=ae,rt.return=$,rt}}}var so=Av(!0),xv=Av(!1),ja=!1;function Fm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gm(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Da(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Oa(n,i,r){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ct&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=Fd(n),lv(n,null,r),i}return $d(n,c,i,r),Fd(n)}function Hc(n,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,r|=c,i.lanes=r,gc(n,r)}}function Qm(n,i){var r=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var f=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var E={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?f=p=E:p=p.next=E,r=r.next}while(r!==null);p===null?f=p=i:p=p.next=i}else f=p=i;r={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=i:n.next=i,r.lastBaseUpdate=i}var Km=!1;function $c(){if(Km){var n=cl;if(n!==null)throw n}}function Fc(n,i,r,c){Km=!1;var f=n.updateQueue;ja=!1;var p=f.firstBaseUpdate,E=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var L=x,Y=L.next;L.next=null,E===null?p=Y:E.next=Y,E=L;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,x=ne.lastBaseUpdate,x!==E&&(x===null?ne.firstBaseUpdate=Y:x.next=Y,ne.lastBaseUpdate=L))}if(p!==null){var le=f.baseState;E=0,ne=Y=L=null,x=p;do{var X=x.lane&-536870913,ee=X!==x.lane;if(ee?(Xe&X)===X:(c&X)===X){X!==0&&X===ll&&(Km=!0),ne!==null&&(ne=ne.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var Ie=n,Le=x;X=i;var vt=r;switch(Le.tag){case 1:if(Ie=Le.payload,typeof Ie=="function"){le=Ie.call(vt,le,X);break e}le=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Le.payload,X=typeof Ie=="function"?Ie.call(vt,le,X):Ie,X==null)break e;le=b({},le,X);break e;case 2:ja=!0}}X=x.callback,X!==null&&(n.flags|=64,ee&&(n.flags|=8192),ee=f.callbacks,ee===null?f.callbacks=[X]:ee.push(X))}else ee={lane:X,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ne===null?(Y=ne=ee,L=le):ne=ne.next=ee,E|=X;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;ee=x,x=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);ne===null&&(L=le),f.baseState=L,f.firstBaseUpdate=Y,f.lastBaseUpdate=ne,p===null&&(f.shared.lanes=0),Ua|=E,n.lanes=E,n.memoizedState=le}}function wv(n,i){if(typeof n!="function")throw Error(a(191,n));n.call(i)}function Iv(n,i){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)wv(r[n],i)}var hl=M(null),th=M(0);function Rv(n,i){n=ta,J(th,n),J(hl,i),ta=n|i.baseLanes}function Ym(){J(th,ta),J(hl,hl.current)}function Wm(){ta=th.current,F(hl),F(th)}var rs=M(null),Cs=null;function Ma(n){var i=n.alternate;J(Vt,Vt.current&1),J(rs,n),Cs===null&&(i===null||hl.current!==null||i.memoizedState!==null)&&(Cs=n)}function Xm(n){J(Vt,Vt.current),J(rs,n),Cs===null&&(Cs=n)}function Nv(n){n.tag===22?(J(Vt,Vt.current),J(rs,n),Cs===null&&(Cs=n)):za()}function za(){J(Vt,Vt.current),J(rs,rs.current)}function os(n){F(rs),Cs===n&&(Cs=null),F(Vt)}var Vt=M(0);function nh(n){for(var i=n;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||sg(r)||ig(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Qi=0,Fe=null,_t=null,Xt=null,sh=!1,fl=!1,io=!1,ih=0,Gc=0,ml=null,Iw=0;function Ot(){throw Error(a(321))}function Zm(n,i){if(i===null)return!1;for(var r=0;r<i.length&&r<n.length;r++)if(!is(n[r],i[r]))return!1;return!0}function Jm(n,i,r,c,f,p){return Qi=p,Fe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,W.H=n===null||n.memoizedState===null?h1:mp,io=!1,p=r(c,f),io=!1,fl&&(p=kv(i,r,c,f)),Cv(n),p}function Cv(n){W.H=Yc;var i=_t!==null&&_t.next!==null;if(Qi=0,Xt=_t=Fe=null,sh=!1,Gc=0,ml=null,i)throw Error(a(300));n===null||Zt||(n=n.dependencies,n!==null&&Kd(n)&&(Zt=!0))}function kv(n,i,r,c){Fe=n;var f=0;do{if(fl&&(ml=null),Gc=0,fl=!1,25<=f)throw Error(a(301));if(f+=1,Xt=_t=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}W.H=f1,p=i(r,c)}while(fl);return p}function Rw(){var n=W.H,i=n.useState()[0];return i=typeof i.then=="function"?Qc(i):i,n=n.useState()[0],(_t!==null?_t.memoizedState:null)!==n&&(Fe.flags|=1024),i}function ep(){var n=ih!==0;return ih=0,n}function tp(n,i,r){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~r}function np(n){if(sh){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}sh=!1}Qi=0,Xt=_t=Fe=null,fl=!1,Gc=ih=0,ml=null}function Vn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?Fe.memoizedState=Xt=n:Xt=Xt.next=n,Xt}function Bt(){if(_t===null){var n=Fe.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var i=Xt===null?Fe.memoizedState:Xt.next;if(i!==null)Xt=i,_t=n;else{if(n===null)throw Fe.alternate===null?Error(a(467)):Error(a(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Xt===null?Fe.memoizedState=Xt=n:Xt=Xt.next=n}return Xt}function ah(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qc(n){var i=Gc;return Gc+=1,ml===null&&(ml=[]),n=Ev(ml,n,i),i=Fe,(Xt===null?i.memoizedState:Xt.next)===null&&(i=i.alternate,W.H=i===null||i.memoizedState===null?h1:mp),n}function rh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Qc(n);if(n.$$typeof===G)return yn(n)}throw Error(a(438,String(n)))}function sp(n){var i=null,r=Fe.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var c=Fe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=ah(),Fe.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(n),c=0;c<n;c++)r[c]=P;return i.index++,r}function Ki(n,i){return typeof i=="function"?i(n):i}function oh(n){var i=Bt();return ip(i,_t,n)}function ip(n,i,r){var c=n.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=r;var f=n.baseQueue,p=c.pending;if(p!==null){if(f!==null){var E=f.next;f.next=p.next,p.next=E}i.baseQueue=f=p,c.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{i=f.next;var x=E=null,L=null,Y=i,ne=!1;do{var le=Y.lane&-536870913;if(le!==Y.lane?(Xe&le)===le:(Qi&le)===le){var X=Y.revertLane;if(X===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),le===ll&&(ne=!0);else if((Qi&X)===X){Y=Y.next,X===ll&&(ne=!0);continue}else le={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(x=L=le,E=p):L=L.next=le,Fe.lanes|=X,Ua|=X;le=Y.action,io&&r(p,le),p=Y.hasEagerState?Y.eagerState:r(p,le)}else X={lane:le,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(x=L=X,E=p):L=L.next=X,Fe.lanes|=le,Ua|=le;Y=Y.next}while(Y!==null&&Y!==i);if(L===null?E=p:L.next=x,!is(p,n.memoizedState)&&(Zt=!0,ne&&(r=cl,r!==null)))throw r;n.memoizedState=p,n.baseState=E,n.baseQueue=L,c.lastRenderedState=p}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function ap(n){var i=Bt(),r=i.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=n;var c=r.dispatch,f=r.pending,p=i.memoizedState;if(f!==null){r.pending=null;var E=f=f.next;do p=n(p,E.action),E=E.next;while(E!==f);is(p,i.memoizedState)||(Zt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),r.lastRenderedState=p}return[p,c]}function jv(n,i,r){var c=Fe,f=Bt(),p=st;if(p){if(r===void 0)throw Error(a(407));r=r()}else r=i();var E=!is((_t||f).memoizedState,r);if(E&&(f.memoizedState=r,Zt=!0),f=f.queue,lp(Mv.bind(null,c,f,n),[n]),f.getSnapshot!==i||E||Xt!==null&&Xt.memoizedState.tag&1){if(c.flags|=2048,pl(9,{destroy:void 0},Ov.bind(null,c,f,r,i),null),Et===null)throw Error(a(349));p||(Qi&127)!==0||Dv(c,i,r)}return r}function Dv(n,i,r){n.flags|=16384,n={getSnapshot:i,value:r},i=Fe.updateQueue,i===null?(i=ah(),Fe.updateQueue=i,i.stores=[n]):(r=i.stores,r===null?i.stores=[n]:r.push(n))}function Ov(n,i,r,c){i.value=r,i.getSnapshot=c,zv(i)&&Lv(n)}function Mv(n,i,r){return r(function(){zv(i)&&Lv(n)})}function zv(n){var i=n.getSnapshot;n=n.value;try{var r=i();return!is(n,r)}catch{return!0}}function Lv(n){var i=Yr(n,2);i!==null&&Wn(i,n,2)}function rp(n){var i=Vn();if(typeof n=="function"){var r=n;if(n=r(),io){bs(!0);try{r()}finally{bs(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:n},i}function Pv(n,i,r,c){return n.baseState=r,ip(n,_t,typeof c=="function"?c:Ki)}function Nw(n,i,r,c,f){if(uh(n))throw Error(a(485));if(n=i.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};W.T!==null?r(!0):p.isTransition=!1,c(p),r=i.pending,r===null?(p.next=i.pending=p,Uv(i,p)):(p.next=r.next,i.pending=r.next=p)}}function Uv(n,i){var r=i.action,c=i.payload,f=n.state;if(i.isTransition){var p=W.T,E={};W.T=E;try{var x=r(f,c),L=W.S;L!==null&&L(E,x),Vv(n,i,x)}catch(Y){op(n,i,Y)}finally{p!==null&&E.types!==null&&(p.types=E.types),W.T=p}}else try{p=r(f,c),Vv(n,i,p)}catch(Y){op(n,i,Y)}}function Vv(n,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){Bv(n,i,c)},function(c){return op(n,i,c)}):Bv(n,i,r)}function Bv(n,i,r){i.status="fulfilled",i.value=r,qv(i),n.state=r,i=n.pending,i!==null&&(r=i.next,r===i?n.pending=null:(r=r.next,i.next=r,Uv(n,r)))}function op(n,i,r){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=r,qv(i),i=i.next;while(i!==c)}n.action=null}function qv(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Hv(n,i){return i}function $v(n,i){if(st){var r=Et.formState;if(r!==null){e:{var c=Fe;if(st){if(xt){t:{for(var f=xt,p=Ns;f.nodeType!==8;){if(!p){f=null;break t}if(f=ks(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){xt=ks(f.nextSibling),c=f.data==="F!";break e}}Ca(c)}c=!1}c&&(i=r[0])}}return r=Vn(),r.memoizedState=r.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hv,lastRenderedState:i},r.queue=c,r=c1.bind(null,Fe,c),c.dispatch=r,c=rp(!1),p=fp.bind(null,Fe,!1,c.queue),c=Vn(),f={state:i,dispatch:null,action:n,pending:null},c.queue=f,r=Nw.bind(null,Fe,f,p,r),f.dispatch=r,c.memoizedState=n,[i,r,!1]}function Fv(n){var i=Bt();return Gv(i,_t,n)}function Gv(n,i,r){if(i=ip(n,i,Hv)[0],n=oh(Ki)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Qc(i)}catch(E){throw E===ul?Xd:E}else c=i;i=Bt();var f=i.queue,p=f.dispatch;return r!==i.memoizedState&&(Fe.flags|=2048,pl(9,{destroy:void 0},Cw.bind(null,f,r),null)),[c,p,n]}function Cw(n,i){n.action=i}function Qv(n){var i=Bt(),r=_t;if(r!==null)return Gv(i,r,n);Bt(),i=i.memoizedState,r=Bt();var c=r.queue.dispatch;return r.memoizedState=n,[i,c,!1]}function pl(n,i,r,c){return n={tag:n,create:r,deps:c,inst:i,next:null},i=Fe.updateQueue,i===null&&(i=ah(),Fe.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=n.next=n:(c=r.next,r.next=n,n.next=c,i.lastEffect=n),n}function Kv(){return Bt().memoizedState}function lh(n,i,r,c){var f=Vn();Fe.flags|=n,f.memoizedState=pl(1|i,{destroy:void 0},r,c===void 0?null:c)}function ch(n,i,r,c){var f=Bt();c=c===void 0?null:c;var p=f.memoizedState.inst;_t!==null&&c!==null&&Zm(c,_t.memoizedState.deps)?f.memoizedState=pl(i,p,r,c):(Fe.flags|=n,f.memoizedState=pl(1|i,p,r,c))}function Yv(n,i){lh(8390656,8,n,i)}function lp(n,i){ch(2048,8,n,i)}function kw(n){Fe.flags|=4;var i=Fe.updateQueue;if(i===null)i=ah(),Fe.updateQueue=i,i.events=[n];else{var r=i.events;r===null?i.events=[n]:r.push(n)}}function Wv(n){var i=Bt().memoizedState;return kw({ref:i,nextImpl:n}),function(){if((ct&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Xv(n,i){return ch(4,2,n,i)}function Zv(n,i){return ch(4,4,n,i)}function Jv(n,i){if(typeof i=="function"){n=n();var r=i(n);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function e1(n,i,r){r=r!=null?r.concat([n]):null,ch(4,4,Jv.bind(null,i,n),r)}function cp(){}function t1(n,i){var r=Bt();i=i===void 0?null:i;var c=r.memoizedState;return i!==null&&Zm(i,c[1])?c[0]:(r.memoizedState=[n,i],n)}function n1(n,i){var r=Bt();i=i===void 0?null:i;var c=r.memoizedState;if(i!==null&&Zm(i,c[1]))return c[0];if(c=n(),io){bs(!0);try{n()}finally{bs(!1)}}return r.memoizedState=[c,i],c}function up(n,i,r){return r===void 0||(Qi&1073741824)!==0&&(Xe&261930)===0?n.memoizedState=i:(n.memoizedState=r,n=s0(),Fe.lanes|=n,Ua|=n,r)}function s1(n,i,r,c){return is(r,i)?r:hl.current!==null?(n=up(n,r,c),is(n,i)||(Zt=!0),n):(Qi&42)===0||(Qi&1073741824)!==0&&(Xe&261930)===0?(Zt=!0,n.memoizedState=r):(n=s0(),Fe.lanes|=n,Ua|=n,i)}function i1(n,i,r,c,f){var p=me.p;me.p=p!==0&&8>p?p:8;var E=W.T,x={};W.T=x,fp(n,!1,i,r);try{var L=f(),Y=W.S;if(Y!==null&&Y(x,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ne=ww(L,c);Kc(n,i,ne,us(n))}else Kc(n,i,c,us(n))}catch(le){Kc(n,i,{then:function(){},status:"rejected",reason:le},us())}finally{me.p=p,E!==null&&x.types!==null&&(E.types=x.types),W.T=E}}function jw(){}function dp(n,i,r,c){if(n.tag!==5)throw Error(a(476));var f=a1(n).queue;i1(n,f,i,Ae,r===null?jw:function(){return r1(n),r(c)})}function a1(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Ae,baseState:Ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:Ae},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:r},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function r1(n){var i=a1(n);i.next===null&&(i=n.alternate.memoizedState),Kc(n,i.next.queue,{},us())}function hp(){return yn(du)}function o1(){return Bt().memoizedState}function l1(){return Bt().memoizedState}function Dw(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var r=us();n=Da(r);var c=Oa(i,n,r);c!==null&&(Wn(c,i,r),Hc(c,i,r)),i={cache:Bm()},n.payload=i;return}i=i.return}}function Ow(n,i,r){var c=us();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},uh(n)?u1(i,r):(r=Cm(n,i,r,c),r!==null&&(Wn(r,n,c),d1(r,i,c)))}function c1(n,i,r){var c=us();Kc(n,i,r,c)}function Kc(n,i,r,c){var f={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(uh(n))u1(i,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var E=i.lastRenderedState,x=p(E,r);if(f.hasEagerState=!0,f.eagerState=x,is(x,E))return $d(n,i,f,0),Et===null&&Hd(),!1}catch{}if(r=Cm(n,i,f,c),r!==null)return Wn(r,n,c),d1(r,i,c),!0}return!1}function fp(n,i,r,c){if(c={lane:2,revertLane:Fp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},uh(n)){if(i)throw Error(a(479))}else i=Cm(n,r,c,2),i!==null&&Wn(i,n,2)}function uh(n){var i=n.alternate;return n===Fe||i!==null&&i===Fe}function u1(n,i){fl=sh=!0;var r=n.pending;r===null?i.next=i:(i.next=r.next,r.next=i),n.pending=i}function d1(n,i,r){if((r&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,r|=c,i.lanes=r,gc(n,r)}}var Yc={readContext:yn,use:rh,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot};Yc.useEffectEvent=Ot;var h1={readContext:yn,use:rh,useCallback:function(n,i){return Vn().memoizedState=[n,i===void 0?null:i],n},useContext:yn,useEffect:Yv,useImperativeHandle:function(n,i,r){r=r!=null?r.concat([n]):null,lh(4194308,4,Jv.bind(null,i,n),r)},useLayoutEffect:function(n,i){return lh(4194308,4,n,i)},useInsertionEffect:function(n,i){lh(4,2,n,i)},useMemo:function(n,i){var r=Vn();i=i===void 0?null:i;var c=n();if(io){bs(!0);try{n()}finally{bs(!1)}}return r.memoizedState=[c,i],c},useReducer:function(n,i,r){var c=Vn();if(r!==void 0){var f=r(i);if(io){bs(!0);try{r(i)}finally{bs(!1)}}}else f=i;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=Ow.bind(null,Fe,n),[c.memoizedState,n]},useRef:function(n){var i=Vn();return n={current:n},i.memoizedState=n},useState:function(n){n=rp(n);var i=n.queue,r=c1.bind(null,Fe,i);return i.dispatch=r,[n.memoizedState,r]},useDebugValue:cp,useDeferredValue:function(n,i){var r=Vn();return up(r,n,i)},useTransition:function(){var n=rp(!1);return n=i1.bind(null,Fe,n.queue,!0,!1),Vn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,r){var c=Fe,f=Vn();if(st){if(r===void 0)throw Error(a(407));r=r()}else{if(r=i(),Et===null)throw Error(a(349));(Xe&127)!==0||Dv(c,i,r)}f.memoizedState=r;var p={value:r,getSnapshot:i};return f.queue=p,Yv(Mv.bind(null,c,p,n),[n]),c.flags|=2048,pl(9,{destroy:void 0},Ov.bind(null,c,p,r,i),null),r},useId:function(){var n=Vn(),i=Et.identifierPrefix;if(st){var r=bi,c=vi;r=(c&~(1<<32-Pt(c)-1)).toString(32)+r,i="_"+i+"R_"+r,r=ih++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=Iw++,i="_"+i+"r_"+r.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:hp,useFormState:$v,useActionState:$v,useOptimistic:function(n){var i=Vn();i.memoizedState=i.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=fp.bind(null,Fe,!0,r),r.dispatch=i,[n,i]},useMemoCache:sp,useCacheRefresh:function(){return Vn().memoizedState=Dw.bind(null,Fe)},useEffectEvent:function(n){var i=Vn(),r={impl:n};return i.memoizedState=r,function(){if((ct&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},mp={readContext:yn,use:rh,useCallback:t1,useContext:yn,useEffect:lp,useImperativeHandle:e1,useInsertionEffect:Xv,useLayoutEffect:Zv,useMemo:n1,useReducer:oh,useRef:Kv,useState:function(){return oh(Ki)},useDebugValue:cp,useDeferredValue:function(n,i){var r=Bt();return s1(r,_t.memoizedState,n,i)},useTransition:function(){var n=oh(Ki)[0],i=Bt().memoizedState;return[typeof n=="boolean"?n:Qc(n),i]},useSyncExternalStore:jv,useId:o1,useHostTransitionStatus:hp,useFormState:Fv,useActionState:Fv,useOptimistic:function(n,i){var r=Bt();return Pv(r,_t,n,i)},useMemoCache:sp,useCacheRefresh:l1};mp.useEffectEvent=Wv;var f1={readContext:yn,use:rh,useCallback:t1,useContext:yn,useEffect:lp,useImperativeHandle:e1,useInsertionEffect:Xv,useLayoutEffect:Zv,useMemo:n1,useReducer:ap,useRef:Kv,useState:function(){return ap(Ki)},useDebugValue:cp,useDeferredValue:function(n,i){var r=Bt();return _t===null?up(r,n,i):s1(r,_t.memoizedState,n,i)},useTransition:function(){var n=ap(Ki)[0],i=Bt().memoizedState;return[typeof n=="boolean"?n:Qc(n),i]},useSyncExternalStore:jv,useId:o1,useHostTransitionStatus:hp,useFormState:Qv,useActionState:Qv,useOptimistic:function(n,i){var r=Bt();return _t!==null?Pv(r,_t,n,i):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:sp,useCacheRefresh:l1};f1.useEffectEvent=Wv;function pp(n,i,r,c){i=n.memoizedState,r=r(c,i),r=r==null?i:b({},i,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var gp={enqueueSetState:function(n,i,r){n=n._reactInternals;var c=us(),f=Da(c);f.payload=i,r!=null&&(f.callback=r),i=Oa(n,f,c),i!==null&&(Wn(i,n,c),Hc(i,n,c))},enqueueReplaceState:function(n,i,r){n=n._reactInternals;var c=us(),f=Da(c);f.tag=1,f.payload=i,r!=null&&(f.callback=r),i=Oa(n,f,c),i!==null&&(Wn(i,n,c),Hc(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var r=us(),c=Da(r);c.tag=2,i!=null&&(c.callback=i),i=Oa(n,c,r),i!==null&&(Wn(i,n,r),Hc(i,n,r))}};function m1(n,i,r,c,f,p,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,E):i.prototype&&i.prototype.isPureReactComponent?!Mc(r,c)||!Mc(f,p):!0}function p1(n,i,r,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,c),i.state!==n&&gp.enqueueReplaceState(i,i.state,null)}function ao(n,i){var r=i;if("ref"in i){r={};for(var c in i)c!=="ref"&&(r[c]=i[c])}if(n=n.defaultProps){r===i&&(r=b({},r));for(var f in n)r[f]===void 0&&(r[f]=n[f])}return r}function g1(n){qd(n)}function _1(n){console.error(n)}function y1(n){qd(n)}function dh(n,i){try{var r=n.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function v1(n,i,r){try{var c=n.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function _p(n,i,r){return r=Da(r),r.tag=3,r.payload={element:null},r.callback=function(){dh(n,i)},r}function b1(n){return n=Da(n),n.tag=3,n}function E1(n,i,r,c){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var p=c.value;n.payload=function(){return f(p)},n.callback=function(){v1(i,r,c)}}var E=r.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){v1(i,r,c),typeof f!="function"&&(Va===null?Va=new Set([this]):Va.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})})}function Mw(n,i,r,c,f){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=r.alternate,i!==null&&ol(i,r,f,!0),r=rs.current,r!==null){switch(r.tag){case 31:case 13:return Cs===null?Sh():r.alternate===null&&Mt===0&&(Mt=3),r.flags&=-257,r.flags|=65536,r.lanes=f,c===Zd?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([c]):i.add(c),qp(n,c,f)),!1;case 22:return r.flags|=65536,c===Zd?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([c]):r.add(c)),qp(n,c,f)),!1}throw Error(a(435,r.tag))}return qp(n,c,f),Sh(),!1}if(st)return i=rs.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==zm&&(n=Error(a(422),{cause:c}),Pc(ws(n,r)))):(c!==zm&&(i=Error(a(423),{cause:c}),Pc(ws(i,r))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=ws(c,r),f=_p(n.stateNode,c,f),Qm(n,f),Mt!==4&&(Mt=2)),!1;var p=Error(a(520),{cause:c});if(p=ws(p,r),su===null?su=[p]:su.push(p),Mt!==4&&(Mt=2),i===null)return!0;c=ws(c,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,n=f&-f,r.lanes|=n,n=_p(r.stateNode,c,n),Qm(r,n),!1;case 1:if(i=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Va===null||!Va.has(p))))return r.flags|=65536,f&=-f,r.lanes|=f,f=b1(f),E1(f,n,r,c),Qm(r,f),!1}r=r.return}while(r!==null);return!1}var yp=Error(a(461)),Zt=!1;function vn(n,i,r,c){i.child=n===null?xv(i,null,r,c):so(i,n.child,r,c)}function T1(n,i,r,c,f){r=r.render;var p=i.ref;if("ref"in c){var E={};for(var x in c)x!=="ref"&&(E[x]=c[x])}else E=c;return Jr(i),c=Jm(n,i,r,E,p,f),x=ep(),n!==null&&!Zt?(tp(n,i,f),Yi(n,i,f)):(st&&x&&Om(i),i.flags|=1,vn(n,i,c,f),i.child)}function S1(n,i,r,c,f){if(n===null){var p=r.type;return typeof p=="function"&&!km(p)&&p.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=p,A1(n,i,p,c,f)):(n=Gd(r.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,!wp(n,f)){var E=p.memoizedProps;if(r=r.compare,r=r!==null?r:Mc,r(E,c)&&n.ref===i.ref)return Yi(n,i,f)}return i.flags|=1,n=Hi(p,c),n.ref=i.ref,n.return=i,i.child=n}function A1(n,i,r,c,f){if(n!==null){var p=n.memoizedProps;if(Mc(p,c)&&n.ref===i.ref)if(Zt=!1,i.pendingProps=c=p,wp(n,f))(n.flags&131072)!==0&&(Zt=!0);else return i.lanes=n.lanes,Yi(n,i,f)}return vp(n,i,r,c,f)}function x1(n,i,r,c){var f=c.children,p=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,n!==null){for(c=i.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~p}else c=0,i.child=null;return w1(n,i,p,r,c)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Wd(i,p!==null?p.cachePool:null),p!==null?Rv(i,p):Ym(),Nv(i);else return c=i.lanes=536870912,w1(n,i,p!==null?p.baseLanes|r:r,r,c)}else p!==null?(Wd(i,p.cachePool),Rv(i,p),za(),i.memoizedState=null):(n!==null&&Wd(i,null),Ym(),za());return vn(n,i,f,r),i.child}function Wc(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function w1(n,i,r,c,f){var p=Hm();return p=p===null?null:{parent:Wt._currentValue,pool:p},i.memoizedState={baseLanes:r,cachePool:p},n!==null&&Wd(i,null),Ym(),Nv(i),n!==null&&ol(n,i,c,!0),i.childLanes=f,null}function hh(n,i){return i=mh({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function I1(n,i,r){return so(i,n.child,null,r),n=hh(i,i.pendingProps),n.flags|=2,os(i),i.memoizedState=null,n}function zw(n,i,r){var c=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(st){if(c.mode==="hidden")return n=hh(i,c),i.lanes=536870912,Wc(null,n);if(Xm(i),(n=xt)?(n=U0(n,Ns),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ra!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},r=uv(n),r.return=i,i.child=r,_n=i,xt=null)):n=null,n===null)throw Ca(i);return i.lanes=536870912,null}return hh(i,c)}var p=n.memoizedState;if(p!==null){var E=p.dehydrated;if(Xm(i),f)if(i.flags&256)i.flags&=-257,i=I1(n,i,r);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(a(558));else if(Zt||ol(n,i,r,!1),f=(r&n.childLanes)!==0,Zt||f){if(c=Et,c!==null&&(E=_c(c,r),E!==0&&E!==p.retryLane))throw p.retryLane=E,Yr(n,E),Wn(c,n,E),yp;Sh(),i=I1(n,i,r)}else n=p.treeContext,xt=ks(E.nextSibling),_n=i,st=!0,Na=null,Ns=!1,n!==null&&fv(i,n),i=hh(i,c),i.flags|=4096;return i}return n=Hi(n.child,{mode:c.mode,children:c.children}),n.ref=i.ref,i.child=n,n.return=i,n}function fh(n,i){var r=i.ref;if(r===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(n===null||n.ref!==r)&&(i.flags|=4194816)}}function vp(n,i,r,c,f){return Jr(i),r=Jm(n,i,r,c,void 0,f),c=ep(),n!==null&&!Zt?(tp(n,i,f),Yi(n,i,f)):(st&&c&&Om(i),i.flags|=1,vn(n,i,r,f),i.child)}function R1(n,i,r,c,f,p){return Jr(i),i.updateQueue=null,r=kv(i,c,r,f),Cv(n),c=ep(),n!==null&&!Zt?(tp(n,i,p),Yi(n,i,p)):(st&&c&&Om(i),i.flags|=1,vn(n,i,r,p),i.child)}function N1(n,i,r,c,f){if(Jr(i),i.stateNode===null){var p=sl,E=r.contextType;typeof E=="object"&&E!==null&&(p=yn(E)),p=new r(c,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=gp,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=c,p.state=i.memoizedState,p.refs={},Fm(i),E=r.contextType,p.context=typeof E=="object"&&E!==null?yn(E):sl,p.state=i.memoizedState,E=r.getDerivedStateFromProps,typeof E=="function"&&(pp(i,r,E,c),p.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&gp.enqueueReplaceState(p,p.state,null),Fc(i,c,p,f),$c(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){p=i.stateNode;var x=i.memoizedProps,L=ao(r,x);p.props=L;var Y=p.context,ne=r.contextType;E=sl,typeof ne=="object"&&ne!==null&&(E=yn(ne));var le=r.getDerivedStateFromProps;ne=typeof le=="function"||typeof p.getSnapshotBeforeUpdate=="function",x=i.pendingProps!==x,ne||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x||Y!==E)&&p1(i,p,c,E),ja=!1;var X=i.memoizedState;p.state=X,Fc(i,c,p,f),$c(),Y=i.memoizedState,x||X!==Y||ja?(typeof le=="function"&&(pp(i,r,le,c),Y=i.memoizedState),(L=ja||m1(i,r,L,c,X,Y,E))?(ne||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=Y),p.props=c,p.state=Y,p.context=E,c=L):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{p=i.stateNode,Gm(n,i),E=i.memoizedProps,ne=ao(r,E),p.props=ne,le=i.pendingProps,X=p.context,Y=r.contextType,L=sl,typeof Y=="object"&&Y!==null&&(L=yn(Y)),x=r.getDerivedStateFromProps,(Y=typeof x=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==le||X!==L)&&p1(i,p,c,L),ja=!1,X=i.memoizedState,p.state=X,Fc(i,c,p,f),$c();var ee=i.memoizedState;E!==le||X!==ee||ja||n!==null&&n.dependencies!==null&&Kd(n.dependencies)?(typeof x=="function"&&(pp(i,r,x,c),ee=i.memoizedState),(ne=ja||m1(i,r,ne,c,X,ee,L)||n!==null&&n.dependencies!==null&&Kd(n.dependencies))?(Y||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,ee,L),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,ee,L)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=ee),p.props=c,p.state=ee,p.context=L,c=ne):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&X===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&X===n.memoizedState||(i.flags|=1024),c=!1)}return p=c,fh(n,i),c=(i.flags&128)!==0,p||c?(p=i.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,n!==null&&c?(i.child=so(i,n.child,null,f),i.child=so(i,null,r,f)):vn(n,i,r,f),i.memoizedState=p.state,n=i.child):n=Yi(n,i,f),n}function C1(n,i,r,c){return Xr(),i.flags|=256,vn(n,i,r,c),i.child}var bp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ep(n){return{baseLanes:n,cachePool:vv()}}function Tp(n,i,r){return n=n!==null?n.childLanes&~r:0,i&&(n|=cs),n}function k1(n,i,r){var c=i.pendingProps,f=!1,p=(i.flags&128)!==0,E;if((E=p)||(E=n!==null&&n.memoizedState===null?!1:(Vt.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,n===null){if(st){if(f?Ma(i):za(),(n=xt)?(n=U0(n,Ns),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ra!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},r=uv(n),r.return=i,i.child=r,_n=i,xt=null)):n=null,n===null)throw Ca(i);return ig(n)?i.lanes=32:i.lanes=536870912,null}var x=c.children;return c=c.fallback,f?(za(),f=i.mode,x=mh({mode:"hidden",children:x},f),c=Wr(c,f,r,null),x.return=i,c.return=i,x.sibling=c,i.child=x,c=i.child,c.memoizedState=Ep(r),c.childLanes=Tp(n,E,r),i.memoizedState=bp,Wc(null,c)):(Ma(i),Sp(i,x))}var L=n.memoizedState;if(L!==null&&(x=L.dehydrated,x!==null)){if(p)i.flags&256?(Ma(i),i.flags&=-257,i=Ap(n,i,r)):i.memoizedState!==null?(za(),i.child=n.child,i.flags|=128,i=null):(za(),x=c.fallback,f=i.mode,c=mh({mode:"visible",children:c.children},f),x=Wr(x,f,r,null),x.flags|=2,c.return=i,x.return=i,c.sibling=x,i.child=c,so(i,n.child,null,r),c=i.child,c.memoizedState=Ep(r),c.childLanes=Tp(n,E,r),i.memoizedState=bp,i=Wc(null,c));else if(Ma(i),ig(x)){if(E=x.nextSibling&&x.nextSibling.dataset,E)var Y=E.dgst;E=Y,c=Error(a(419)),c.stack="",c.digest=E,Pc({value:c,source:null,stack:null}),i=Ap(n,i,r)}else if(Zt||ol(n,i,r,!1),E=(r&n.childLanes)!==0,Zt||E){if(E=Et,E!==null&&(c=_c(E,r),c!==0&&c!==L.retryLane))throw L.retryLane=c,Yr(n,c),Wn(E,n,c),yp;sg(x)||Sh(),i=Ap(n,i,r)}else sg(x)?(i.flags|=192,i.child=n.child,i=null):(n=L.treeContext,xt=ks(x.nextSibling),_n=i,st=!0,Na=null,Ns=!1,n!==null&&fv(i,n),i=Sp(i,c.children),i.flags|=4096);return i}return f?(za(),x=c.fallback,f=i.mode,L=n.child,Y=L.sibling,c=Hi(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,Y!==null?x=Hi(Y,x):(x=Wr(x,f,r,null),x.flags|=2),x.return=i,c.return=i,c.sibling=x,i.child=c,Wc(null,c),c=i.child,x=n.child.memoizedState,x===null?x=Ep(r):(f=x.cachePool,f!==null?(L=Wt._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=vv(),x={baseLanes:x.baseLanes|r,cachePool:f}),c.memoizedState=x,c.childLanes=Tp(n,E,r),i.memoizedState=bp,Wc(n.child,c)):(Ma(i),r=n.child,n=r.sibling,r=Hi(r,{mode:"visible",children:c.children}),r.return=i,r.sibling=null,n!==null&&(E=i.deletions,E===null?(i.deletions=[n],i.flags|=16):E.push(n)),i.child=r,i.memoizedState=null,r)}function Sp(n,i){return i=mh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function mh(n,i){return n=as(22,n,null,i),n.lanes=0,n}function Ap(n,i,r){return so(i,n.child,null,r),n=Sp(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function j1(n,i,r){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Um(n.return,i,r)}function xp(n,i,r,c,f,p){var E=n.memoizedState;E===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:f,treeForkCount:p}:(E.isBackwards=i,E.rendering=null,E.renderingStartTime=0,E.last=c,E.tail=r,E.tailMode=f,E.treeForkCount=p)}function D1(n,i,r){var c=i.pendingProps,f=c.revealOrder,p=c.tail;c=c.children;var E=Vt.current,x=(E&2)!==0;if(x?(E=E&1|2,i.flags|=128):E&=1,J(Vt,E),vn(n,i,c,r),c=st?Lc:0,!x&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&j1(n,r,i);else if(n.tag===19)j1(n,r,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(r=i.child,f=null;r!==null;)n=r.alternate,n!==null&&nh(n)===null&&(f=r),r=r.sibling;r=f,r===null?(f=i.child,i.child=null):(f=r.sibling,r.sibling=null),xp(i,!1,f,r,p,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&nh(n)===null){i.child=f;break}n=f.sibling,f.sibling=r,r=f,f=n}xp(i,!0,r,null,p,c);break;case"together":xp(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function Yi(n,i,r){if(n!==null&&(i.dependencies=n.dependencies),Ua|=i.lanes,(r&i.childLanes)===0)if(n!==null){if(ol(n,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(a(153));if(i.child!==null){for(n=i.child,r=Hi(n,n.pendingProps),i.child=r,r.return=i;n.sibling!==null;)n=n.sibling,r=r.sibling=Hi(n,n.pendingProps),r.return=i;r.sibling=null}return i.child}function wp(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Kd(n)))}function Lw(n,i,r){switch(i.tag){case 3:oe(i,i.stateNode.containerInfo),ka(i,Wt,n.memoizedState.cache),Xr();break;case 27:case 5:Ce(i);break;case 4:oe(i,i.stateNode.containerInfo);break;case 10:ka(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Xm(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Ma(i),i.flags|=128,null):(r&i.child.childLanes)!==0?k1(n,i,r):(Ma(i),n=Yi(n,i,r),n!==null?n.sibling:null);Ma(i);break;case 19:var f=(n.flags&128)!==0;if(c=(r&i.childLanes)!==0,c||(ol(n,i,r,!1),c=(r&i.childLanes)!==0),f){if(c)return D1(n,i,r);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),J(Vt,Vt.current),c)break;return null;case 22:return i.lanes=0,x1(n,i,r,i.pendingProps);case 24:ka(i,Wt,n.memoizedState.cache)}return Yi(n,i,r)}function O1(n,i,r){if(n!==null)if(n.memoizedProps!==i.pendingProps)Zt=!0;else{if(!wp(n,r)&&(i.flags&128)===0)return Zt=!1,Lw(n,i,r);Zt=(n.flags&131072)!==0}else Zt=!1,st&&(i.flags&1048576)!==0&&hv(i,Lc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(n=to(i.elementType),i.type=n,typeof n=="function")km(n)?(c=ao(n,c),i.tag=1,i=N1(null,i,n,c,r)):(i.tag=0,i=vp(null,i,n,c,r));else{if(n!=null){var f=n.$$typeof;if(f===O){i.tag=11,i=T1(null,i,n,c,r);break e}else if(f===D){i.tag=14,i=S1(null,i,n,c,r);break e}}throw i=pe(n)||n,Error(a(306,i,""))}}return i;case 0:return vp(n,i,i.type,i.pendingProps,r);case 1:return c=i.type,f=ao(c,i.pendingProps),N1(n,i,c,f,r);case 3:e:{if(oe(i,i.stateNode.containerInfo),n===null)throw Error(a(387));c=i.pendingProps;var p=i.memoizedState;f=p.element,Gm(n,i),Fc(i,c,null,r);var E=i.memoizedState;if(c=E.cache,ka(i,Wt,c),c!==p.cache&&Vm(i,[Wt],r,!0),$c(),c=E.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=C1(n,i,c,r);break e}else if(c!==f){f=ws(Error(a(424)),i),Pc(f),i=C1(n,i,c,r);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,xt=ks(n.firstChild),_n=i,st=!0,Na=null,Ns=!0,r=xv(i,null,c,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xr(),c===f){i=Yi(n,i,r);break e}vn(n,i,c,r)}i=i.child}return i;case 26:return fh(n,i),n===null?(r=F0(i.type,null,i.pendingProps,null))?i.memoizedState=r:st||(r=i.type,n=i.pendingProps,c=Ch(ye.current).createElement(r),c[Qt]=i,c[un]=n,bn(c,r,n),Kt(c),i.stateNode=c):i.memoizedState=F0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Ce(i),n===null&&st&&(c=i.stateNode=q0(i.type,i.pendingProps,ye.current),_n=i,Ns=!0,f=xt,$a(i.type)?(ag=f,xt=ks(c.firstChild)):xt=f),vn(n,i,i.pendingProps.children,r),fh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&st&&((f=c=xt)&&(c=fI(c,i.type,i.pendingProps,Ns),c!==null?(i.stateNode=c,_n=i,xt=ks(c.firstChild),Ns=!1,f=!0):f=!1),f||Ca(i)),Ce(i),f=i.type,p=i.pendingProps,E=n!==null?n.memoizedProps:null,c=p.children,eg(f,p)?c=null:E!==null&&eg(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=Jm(n,i,Rw,null,null,r),du._currentValue=f),fh(n,i),vn(n,i,c,r),i.child;case 6:return n===null&&st&&((n=r=xt)&&(r=mI(r,i.pendingProps,Ns),r!==null?(i.stateNode=r,_n=i,xt=null,n=!0):n=!1),n||Ca(i)),null;case 13:return k1(n,i,r);case 4:return oe(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=so(i,null,c,r):vn(n,i,c,r),i.child;case 11:return T1(n,i,i.type,i.pendingProps,r);case 7:return vn(n,i,i.pendingProps,r),i.child;case 8:return vn(n,i,i.pendingProps.children,r),i.child;case 12:return vn(n,i,i.pendingProps.children,r),i.child;case 10:return c=i.pendingProps,ka(i,i.type,c.value),vn(n,i,c.children,r),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,Jr(i),f=yn(f),c=c(f),i.flags|=1,vn(n,i,c,r),i.child;case 14:return S1(n,i,i.type,i.pendingProps,r);case 15:return A1(n,i,i.type,i.pendingProps,r);case 19:return D1(n,i,r);case 31:return zw(n,i,r);case 22:return x1(n,i,r,i.pendingProps);case 24:return Jr(i),c=yn(Wt),n===null?(f=Hm(),f===null&&(f=Et,p=Bm(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=r),f=p),i.memoizedState={parent:c,cache:f},Fm(i),ka(i,Wt,f)):((n.lanes&r)!==0&&(Gm(n,i),Fc(i,null,null,r),$c()),f=n.memoizedState,p=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),ka(i,Wt,c)):(c=p.cache,ka(i,Wt,c),c!==f.cache&&Vm(i,[Wt],r,!0))),vn(n,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Wi(n){n.flags|=4}function Ip(n,i,r,c,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(o0())n.flags|=8192;else throw no=Zd,$m}else n.flags&=-16777217}function M1(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!W0(i))if(o0())n.flags|=8192;else throw no=Zd,$m}function ph(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Ed():536870912,n.lanes|=i,vl|=i)}function Xc(n,i){if(!st)switch(n.tailMode){case"hidden":i=n.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function wt(n){var i=n.alternate!==null&&n.alternate.child===n.child,r=0,c=0;if(i)for(var f=n.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=r,i}function Pw(n,i,r){var c=i.pendingProps;switch(Mm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(i),null;case 1:return wt(i),null;case 3:return r=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Gi(Wt),fe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(rl(i)?Wi(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Lm())),wt(i),null;case 26:var f=i.type,p=i.memoizedState;return n===null?(Wi(i),p!==null?(wt(i),M1(i,p)):(wt(i),Ip(i,f,null,c,r))):p?p!==n.memoizedState?(Wi(i),wt(i),M1(i,p)):(wt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==c&&Wi(i),wt(i),Ip(i,f,n,c,r)),null;case 27:if(ht(i),r=ye.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&Wi(i);else{if(!c){if(i.stateNode===null)throw Error(a(166));return wt(i),null}n=ie.current,rl(i)?mv(i):(n=q0(f,c,r),i.stateNode=n,Wi(i))}return wt(i),null;case 5:if(ht(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&Wi(i);else{if(!c){if(i.stateNode===null)throw Error(a(166));return wt(i),null}if(p=ie.current,rl(i))mv(i);else{var E=Ch(ye.current);switch(p){case 1:p=E.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=E.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=E.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=E.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=E.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?E.createElement("select",{is:c.is}):E.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?E.createElement(f,{is:c.is}):E.createElement(f)}}p[Qt]=i,p[un]=c;e:for(E=i.child;E!==null;){if(E.tag===5||E.tag===6)p.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===i)break e;for(;E.sibling===null;){if(E.return===null||E.return===i)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}i.stateNode=p;e:switch(bn(p,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Wi(i)}}return wt(i),Ip(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,r),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&Wi(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(a(166));if(n=ye.current,rl(i)){if(n=i.stateNode,r=i.memoizedProps,c=null,f=_n,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Qt]=i,n=!!(n.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||k0(n.nodeValue,r)),n||Ca(i,!0)}else n=Ch(n).createTextNode(c),n[Qt]=i,i.stateNode=n}return wt(i),null;case 31:if(r=i.memoizedState,n===null||n.memoizedState!==null){if(c=rl(i),r!==null){if(n===null){if(!c)throw Error(a(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[Qt]=i}else Xr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;wt(i),n=!1}else r=Lm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return i.flags&256?(os(i),i):(os(i),null);if((i.flags&128)!==0)throw Error(a(558))}return wt(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=rl(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Qt]=i}else Xr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;wt(i),f=!1}else f=Lm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(os(i),i):(os(i),null)}return os(i),(i.flags&128)!==0?(i.lanes=r,i):(r=c!==null,n=n!==null&&n.memoizedState!==null,r&&(c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048)),r!==n&&r&&(i.child.flags|=8192),ph(i,i.updateQueue),wt(i),null);case 4:return fe(),n===null&&Yp(i.stateNode.containerInfo),wt(i),null;case 10:return Gi(i.type),wt(i),null;case 19:if(F(Vt),c=i.memoizedState,c===null)return wt(i),null;if(f=(i.flags&128)!==0,p=c.rendering,p===null)if(f)Xc(c,!1);else{if(Mt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(p=nh(n),p!==null){for(i.flags|=128,Xc(c,!1),n=p.updateQueue,i.updateQueue=n,ph(i,n),i.subtreeFlags=0,n=r,r=i.child;r!==null;)cv(r,n),r=r.sibling;return J(Vt,Vt.current&1|2),st&&$i(i,c.treeForkCount),i.child}n=n.sibling}c.tail!==null&&Pn()>bh&&(i.flags|=128,f=!0,Xc(c,!1),i.lanes=4194304)}else{if(!f)if(n=nh(p),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,ph(i,n),Xc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!st)return wt(i),null}else 2*Pn()-c.renderingStartTime>bh&&r!==536870912&&(i.flags|=128,f=!0,Xc(c,!1),i.lanes=4194304);c.isBackwards?(p.sibling=i.child,i.child=p):(n=c.last,n!==null?n.sibling=p:i.child=p,c.last=p)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Pn(),n.sibling=null,r=Vt.current,J(Vt,f?r&1|2:r&1),st&&$i(i,c.treeForkCount),n):(wt(i),null);case 22:case 23:return os(i),Wm(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(r&536870912)!==0&&(i.flags&128)===0&&(wt(i),i.subtreeFlags&6&&(i.flags|=8192)):wt(i),r=i.updateQueue,r!==null&&ph(i,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==r&&(i.flags|=2048),n!==null&&F(eo),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),Gi(Wt),wt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function Uw(n,i){switch(Mm(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Gi(Wt),fe(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return ht(i),null;case 31:if(i.memoizedState!==null){if(os(i),i.alternate===null)throw Error(a(340));Xr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(os(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Xr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return F(Vt),null;case 4:return fe(),null;case 10:return Gi(i.type),null;case 22:case 23:return os(i),Wm(),n!==null&&F(eo),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Gi(Wt),null;case 25:return null;default:return null}}function z1(n,i){switch(Mm(i),i.tag){case 3:Gi(Wt),fe();break;case 26:case 27:case 5:ht(i);break;case 4:fe();break;case 31:i.memoizedState!==null&&os(i);break;case 13:os(i);break;case 19:F(Vt);break;case 10:Gi(i.type);break;case 22:case 23:os(i),Wm(),n!==null&&F(eo);break;case 24:Gi(Wt)}}function Zc(n,i){try{var r=i.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var f=c.next;r=f;do{if((r.tag&n)===n){c=void 0;var p=r.create,E=r.inst;c=p(),E.destroy=c}r=r.next}while(r!==f)}}catch(x){pt(i,i.return,x)}}function La(n,i,r){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&n)===n){var E=c.inst,x=E.destroy;if(x!==void 0){E.destroy=void 0,f=i;var L=r,Y=x;try{Y()}catch(ne){pt(f,L,ne)}}}c=c.next}while(c!==p)}}catch(ne){pt(i,i.return,ne)}}function L1(n){var i=n.updateQueue;if(i!==null){var r=n.stateNode;try{Iv(i,r)}catch(c){pt(n,n.return,c)}}}function P1(n,i,r){r.props=ao(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(c){pt(n,i,c)}}function Jc(n,i){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof r=="function"?n.refCleanup=r(c):r.current=c}}catch(f){pt(n,i,f)}}function Ei(n,i){var r=n.ref,c=n.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(f){pt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){pt(n,i,f)}else r.current=null}function U1(n){var i=n.type,r=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break e;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(f){pt(n,n.return,f)}}function Rp(n,i,r){try{var c=n.stateNode;oI(c,n.type,r,i),c[un]=i}catch(f){pt(n,n.return,f)}}function V1(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&$a(n.type)||n.tag===4}function Np(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||V1(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&$a(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Cp(n,i,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(n),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=qs));else if(c!==4&&(c===27&&$a(n.type)&&(r=n.stateNode,i=null),n=n.child,n!==null))for(Cp(n,i,r),n=n.sibling;n!==null;)Cp(n,i,r),n=n.sibling}function gh(n,i,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?r.insertBefore(n,i):r.appendChild(n);else if(c!==4&&(c===27&&$a(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(gh(n,i,r),n=n.sibling;n!==null;)gh(n,i,r),n=n.sibling}function B1(n){var i=n.stateNode,r=n.memoizedProps;try{for(var c=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);bn(i,c,r),i[Qt]=n,i[un]=r}catch(p){pt(n,n.return,p)}}var Xi=!1,Jt=!1,kp=!1,q1=typeof WeakSet=="function"?WeakSet:Set,hn=null;function Vw(n,i){if(n=n.containerInfo,Zp=Lh,n=ev(n),Am(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var E=0,x=-1,L=-1,Y=0,ne=0,le=n,X=null;t:for(;;){for(var ee;le!==r||f!==0&&le.nodeType!==3||(x=E+f),le!==p||c!==0&&le.nodeType!==3||(L=E+c),le.nodeType===3&&(E+=le.nodeValue.length),(ee=le.firstChild)!==null;)X=le,le=ee;for(;;){if(le===n)break t;if(X===r&&++Y===f&&(x=E),X===p&&++ne===c&&(L=E),(ee=le.nextSibling)!==null)break;le=X,X=le.parentNode}le=ee}r=x===-1||L===-1?null:{start:x,end:L}}else r=null}r=r||{start:0,end:0}}else r=null;for(Jp={focusedElem:n,selectionRange:r},Lh=!1,hn=i;hn!==null;)if(i=hn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,hn=n;else for(;hn!==null;){switch(i=hn,p=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)f=n[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,r=i,f=p.memoizedProps,p=p.memoizedState,c=r.stateNode;try{var Ie=ao(r.type,f);n=c.getSnapshotBeforeUpdate(Ie,p),c.__reactInternalSnapshotBeforeUpdate=n}catch(Le){pt(r,r.return,Le)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,r=n.nodeType,r===9)ng(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":ng(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=i.sibling,n!==null){n.return=i.return,hn=n;break}hn=i.return}}function H1(n,i,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:Ji(n,r),c&4&&Zc(5,r);break;case 1:if(Ji(n,r),c&4)if(n=r.stateNode,i===null)try{n.componentDidMount()}catch(E){pt(r,r.return,E)}else{var f=ao(r.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(E){pt(r,r.return,E)}}c&64&&L1(r),c&512&&Jc(r,r.return);break;case 3:if(Ji(n,r),c&64&&(n=r.updateQueue,n!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{Iv(n,i)}catch(E){pt(r,r.return,E)}}break;case 27:i===null&&c&4&&B1(r);case 26:case 5:Ji(n,r),i===null&&c&4&&U1(r),c&512&&Jc(r,r.return);break;case 12:Ji(n,r);break;case 31:Ji(n,r),c&4&&G1(n,r);break;case 13:Ji(n,r),c&4&&Q1(n,r),c&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=Yw.bind(null,r),pI(n,r))));break;case 22:if(c=r.memoizedState!==null||Xi,!c){i=i!==null&&i.memoizedState!==null||Jt,f=Xi;var p=Jt;Xi=c,(Jt=i)&&!p?ea(n,r,(r.subtreeFlags&8772)!==0):Ji(n,r),Xi=f,Jt=p}break;case 30:break;default:Ji(n,r)}}function $1(n){var i=n.alternate;i!==null&&(n.alternate=null,$1(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ho(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Nt=null,Gn=!1;function Zi(n,i,r){for(r=r.child;r!==null;)F1(n,i,r),r=r.sibling}function F1(n,i,r){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Ps,r)}catch{}switch(r.tag){case 26:Jt||Ei(r,i),Zi(n,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Jt||Ei(r,i);var c=Nt,f=Gn;$a(r.type)&&(Nt=r.stateNode,Gn=!1),Zi(n,i,r),lu(r.stateNode),Nt=c,Gn=f;break;case 5:Jt||Ei(r,i);case 6:if(c=Nt,f=Gn,Nt=null,Zi(n,i,r),Nt=c,Gn=f,Nt!==null)if(Gn)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(r.stateNode)}catch(p){pt(r,i,p)}else try{Nt.removeChild(r.stateNode)}catch(p){pt(r,i,p)}break;case 18:Nt!==null&&(Gn?(n=Nt,L0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),Il(n)):L0(Nt,r.stateNode));break;case 4:c=Nt,f=Gn,Nt=r.stateNode.containerInfo,Gn=!0,Zi(n,i,r),Nt=c,Gn=f;break;case 0:case 11:case 14:case 15:La(2,r,i),Jt||La(4,r,i),Zi(n,i,r);break;case 1:Jt||(Ei(r,i),c=r.stateNode,typeof c.componentWillUnmount=="function"&&P1(r,i,c)),Zi(n,i,r);break;case 21:Zi(n,i,r);break;case 22:Jt=(c=Jt)||r.memoizedState!==null,Zi(n,i,r),Jt=c;break;default:Zi(n,i,r)}}function G1(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Il(n)}catch(r){pt(i,i.return,r)}}}function Q1(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Il(n)}catch(r){pt(i,i.return,r)}}function Bw(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new q1),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new q1),i;default:throw Error(a(435,n.tag))}}function _h(n,i){var r=Bw(n);i.forEach(function(c){if(!r.has(c)){r.add(c);var f=Ww.bind(null,n,c);c.then(f,f)}})}function Qn(n,i){var r=i.deletions;if(r!==null)for(var c=0;c<r.length;c++){var f=r[c],p=n,E=i,x=E;e:for(;x!==null;){switch(x.tag){case 27:if($a(x.type)){Nt=x.stateNode,Gn=!1;break e}break;case 5:Nt=x.stateNode,Gn=!1;break e;case 3:case 4:Nt=x.stateNode.containerInfo,Gn=!0;break e}x=x.return}if(Nt===null)throw Error(a(160));F1(p,E,f),Nt=null,Gn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)K1(i,n),i=i.sibling}var Ks=null;function K1(n,i){var r=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Qn(i,n),Kn(n),c&4&&(La(3,n,n.return),Zc(3,n),La(5,n,n.return));break;case 1:Qn(i,n),Kn(n),c&512&&(Jt||r===null||Ei(r,r.return)),c&64&&Xi&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var f=Ks;if(Qn(i,n),Kn(n),c&512&&(Jt||r===null||Ei(r,r.return)),c&4){var p=r!==null?r.memoizedState:null;if(c=n.memoizedState,r===null)if(c===null)if(n.stateNode===null){e:{c=n.type,r=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":p=f.getElementsByTagName("title")[0],(!p||p[oi]||p[Qt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(c),f.head.insertBefore(p,f.querySelector("head > title"))),bn(p,c,r),p[Qt]=n,Kt(p),c=p;break e;case"link":var E=K0("link","href",f).get(c+(r.href||""));if(E){for(var x=0;x<E.length;x++)if(p=E[x],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){E.splice(x,1);break t}}p=f.createElement(c),bn(p,c,r),f.head.appendChild(p);break;case"meta":if(E=K0("meta","content",f).get(c+(r.content||""))){for(x=0;x<E.length;x++)if(p=E[x],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){E.splice(x,1);break t}}p=f.createElement(c),bn(p,c,r),f.head.appendChild(p);break;default:throw Error(a(468,c))}p[Qt]=n,Kt(p),c=p}n.stateNode=c}else Y0(f,n.type,n.stateNode);else n.stateNode=Q0(f,c,n.memoizedProps);else p!==c?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,c===null?Y0(f,n.type,n.stateNode):Q0(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Rp(n,n.memoizedProps,r.memoizedProps)}break;case 27:Qn(i,n),Kn(n),c&512&&(Jt||r===null||Ei(r,r.return)),r!==null&&c&4&&Rp(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Qn(i,n),Kn(n),c&512&&(Jt||r===null||Ei(r,r.return)),n.flags&32){f=n.stateNode;try{Fn(f,"")}catch(Ie){pt(n,n.return,Ie)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Rp(n,f,r!==null?r.memoizedProps:f)),c&1024&&(kp=!0);break;case 6:if(Qn(i,n),Kn(n),c&4){if(n.stateNode===null)throw Error(a(162));c=n.memoizedProps,r=n.stateNode;try{r.nodeValue=c}catch(Ie){pt(n,n.return,Ie)}}break;case 3:if(Dh=null,f=Ks,Ks=kh(i.containerInfo),Qn(i,n),Ks=f,Kn(n),c&4&&r!==null&&r.memoizedState.isDehydrated)try{Il(i.containerInfo)}catch(Ie){pt(n,n.return,Ie)}kp&&(kp=!1,Y1(n));break;case 4:c=Ks,Ks=kh(n.stateNode.containerInfo),Qn(i,n),Kn(n),Ks=c;break;case 12:Qn(i,n),Kn(n);break;case 31:Qn(i,n),Kn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,_h(n,c)));break;case 13:Qn(i,n),Kn(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(vh=Pn()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,_h(n,c)));break;case 22:f=n.memoizedState!==null;var L=r!==null&&r.memoizedState!==null,Y=Xi,ne=Jt;if(Xi=Y||f,Jt=ne||L,Qn(i,n),Jt=ne,Xi=Y,Kn(n),c&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(r===null||L||Xi||Jt||ro(n)),r=null,i=n;;){if(i.tag===5||i.tag===26){if(r===null){L=r=i;try{if(p=L.stateNode,f)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{x=L.stateNode;var le=L.memoizedProps.style,X=le!=null&&le.hasOwnProperty("display")?le.display:null;x.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Ie){pt(L,L.return,Ie)}}}else if(i.tag===6){if(r===null){L=i;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(Ie){pt(L,L.return,Ie)}}}else if(i.tag===18){if(r===null){L=i;try{var ee=L.stateNode;f?P0(ee,!0):P0(L.stateNode,!1)}catch(Ie){pt(L,L.return,Ie)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,_h(n,r))));break;case 19:Qn(i,n),Kn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,_h(n,c)));break;case 30:break;case 21:break;default:Qn(i,n),Kn(n)}}function Kn(n){var i=n.flags;if(i&2){try{for(var r,c=n.return;c!==null;){if(V1(c)){r=c;break}c=c.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var f=r.stateNode,p=Np(n);gh(n,p,f);break;case 5:var E=r.stateNode;r.flags&32&&(Fn(E,""),r.flags&=-33);var x=Np(n);gh(n,x,E);break;case 3:case 4:var L=r.stateNode.containerInfo,Y=Np(n);Cp(n,Y,L);break;default:throw Error(a(161))}}catch(ne){pt(n,n.return,ne)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Y1(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Y1(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Ji(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)H1(n,i.alternate,i),i=i.sibling}function ro(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:La(4,i,i.return),ro(i);break;case 1:Ei(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&P1(i,i.return,r),ro(i);break;case 27:lu(i.stateNode);case 26:case 5:Ei(i,i.return),ro(i);break;case 22:i.memoizedState===null&&ro(i);break;case 30:ro(i);break;default:ro(i)}n=n.sibling}}function ea(n,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=n,p=i,E=p.flags;switch(p.tag){case 0:case 11:case 15:ea(f,p,r),Zc(4,p);break;case 1:if(ea(f,p,r),c=p,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Y){pt(c,c.return,Y)}if(c=p,f=c.updateQueue,f!==null){var x=c.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)wv(L[f],x)}catch(Y){pt(c,c.return,Y)}}r&&E&64&&L1(p),Jc(p,p.return);break;case 27:B1(p);case 26:case 5:ea(f,p,r),r&&c===null&&E&4&&U1(p),Jc(p,p.return);break;case 12:ea(f,p,r);break;case 31:ea(f,p,r),r&&E&4&&G1(f,p);break;case 13:ea(f,p,r),r&&E&4&&Q1(f,p);break;case 22:p.memoizedState===null&&ea(f,p,r),Jc(p,p.return);break;case 30:break;default:ea(f,p,r)}i=i.sibling}}function jp(n,i){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&Uc(r))}function Dp(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Uc(n))}function Ys(n,i,r,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)W1(n,i,r,c),i=i.sibling}function W1(n,i,r,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Ys(n,i,r,c),f&2048&&Zc(9,i);break;case 1:Ys(n,i,r,c);break;case 3:Ys(n,i,r,c),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Uc(n)));break;case 12:if(f&2048){Ys(n,i,r,c),n=i.stateNode;try{var p=i.memoizedProps,E=p.id,x=p.onPostCommit;typeof x=="function"&&x(E,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(L){pt(i,i.return,L)}}else Ys(n,i,r,c);break;case 31:Ys(n,i,r,c);break;case 13:Ys(n,i,r,c);break;case 23:break;case 22:p=i.stateNode,E=i.alternate,i.memoizedState!==null?p._visibility&2?Ys(n,i,r,c):eu(n,i):p._visibility&2?Ys(n,i,r,c):(p._visibility|=2,gl(n,i,r,c,(i.subtreeFlags&10256)!==0||!1)),f&2048&&jp(E,i);break;case 24:Ys(n,i,r,c),f&2048&&Dp(i.alternate,i);break;default:Ys(n,i,r,c)}}function gl(n,i,r,c,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=n,E=i,x=r,L=c,Y=E.flags;switch(E.tag){case 0:case 11:case 15:gl(p,E,x,L,f),Zc(8,E);break;case 23:break;case 22:var ne=E.stateNode;E.memoizedState!==null?ne._visibility&2?gl(p,E,x,L,f):eu(p,E):(ne._visibility|=2,gl(p,E,x,L,f)),f&&Y&2048&&jp(E.alternate,E);break;case 24:gl(p,E,x,L,f),f&&Y&2048&&Dp(E.alternate,E);break;default:gl(p,E,x,L,f)}i=i.sibling}}function eu(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=n,c=i,f=c.flags;switch(c.tag){case 22:eu(r,c),f&2048&&jp(c.alternate,c);break;case 24:eu(r,c),f&2048&&Dp(c.alternate,c);break;default:eu(r,c)}i=i.sibling}}var tu=8192;function _l(n,i,r){if(n.subtreeFlags&tu)for(n=n.child;n!==null;)X1(n,i,r),n=n.sibling}function X1(n,i,r){switch(n.tag){case 26:_l(n,i,r),n.flags&tu&&n.memoizedState!==null&&II(r,Ks,n.memoizedState,n.memoizedProps);break;case 5:_l(n,i,r);break;case 3:case 4:var c=Ks;Ks=kh(n.stateNode.containerInfo),_l(n,i,r),Ks=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=tu,tu=16777216,_l(n,i,r),tu=c):_l(n,i,r));break;default:_l(n,i,r)}}function Z1(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function nu(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];hn=c,e0(c,n)}Z1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)J1(n),n=n.sibling}function J1(n){switch(n.tag){case 0:case 11:case 15:nu(n),n.flags&2048&&La(9,n,n.return);break;case 3:nu(n);break;case 12:nu(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,yh(n)):nu(n);break;default:nu(n)}}function yh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];hn=c,e0(c,n)}Z1(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:La(8,i,i.return),yh(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,yh(i));break;default:yh(i)}n=n.sibling}}function e0(n,i){for(;hn!==null;){var r=hn;switch(r.tag){case 0:case 11:case 15:La(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Uc(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,hn=c;else e:for(r=n;hn!==null;){c=hn;var f=c.sibling,p=c.return;if($1(c),c===r){hn=null;break e}if(f!==null){f.return=p,hn=f;break e}hn=p}}}var qw={getCacheForType:function(n){var i=yn(Wt),r=i.data.get(n);return r===void 0&&(r=n(),i.data.set(n,r)),r},cacheSignal:function(){return yn(Wt).controller.signal}},Hw=typeof WeakMap=="function"?WeakMap:Map,ct=0,Et=null,Ke=null,Xe=0,mt=0,ls=null,Pa=!1,yl=!1,Op=!1,ta=0,Mt=0,Ua=0,oo=0,Mp=0,cs=0,vl=0,su=null,Yn=null,zp=!1,vh=0,t0=0,bh=1/0,Eh=null,Va=null,on=0,Ba=null,bl=null,na=0,Lp=0,Pp=null,n0=null,iu=0,Up=null;function us(){return(ct&2)!==0&&Xe!==0?Xe&-Xe:W.T!==null?Fp():Td()}function s0(){if(cs===0)if((Xe&536870912)===0||st){var n=Or;Or<<=1,(Or&3932160)===0&&(Or=262144),cs=n}else cs=536870912;return n=rs.current,n!==null&&(n.flags|=32),cs}function Wn(n,i,r){(n===Et&&(mt===2||mt===9)||n.cancelPendingCommit!==null)&&(El(n,0),qa(n,Xe,cs,!1)),Mr(n,r),((ct&2)===0||n!==Et)&&(n===Et&&((ct&2)===0&&(oo|=r),Mt===4&&qa(n,Xe,cs,!1)),Ti(n))}function i0(n,i,r){if((ct&6)!==0)throw Error(a(327));var c=!r&&(i&127)===0&&(i&n.expiredLanes)===0||Us(n,i),f=c?Gw(n,i):Bp(n,i,!0),p=c;do{if(f===0){yl&&!c&&qa(n,i,0,!1);break}else{if(r=n.current.alternate,p&&!$w(r)){f=Bp(n,i,!1),p=!1;continue}if(f===2){if(p=i,n.errorRecoveryDisabledLanes&p)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var x=n;f=su;var L=x.current.memoizedState.isDehydrated;if(L&&(El(x,E).flags|=256),E=Bp(x,E,!1),E!==2){if(Op&&!L){x.errorRecoveryDisabledLanes|=p,oo|=p,f=4;break e}p=Yn,Yn=f,p!==null&&(Yn===null?Yn=p:Yn.push.apply(Yn,p))}f=E}if(p=!1,f!==2)continue}}if(f===1){El(n,0),qa(n,i,0,!0);break}e:{switch(c=n,p=f,p){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:qa(c,i,cs,!Pa);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=vh+300-Pn(),10<f)){if(qa(c,i,cs,!Pa),ii(c,0,!0)!==0)break e;na=i,c.timeoutHandle=M0(a0.bind(null,c,r,Yn,Eh,zp,i,cs,oo,vl,Pa,p,"Throttled",-0,0),f);break e}a0(c,r,Yn,Eh,zp,i,cs,oo,vl,Pa,p,null,-0,0)}}break}while(!0);Ti(n)}function a0(n,i,r,c,f,p,E,x,L,Y,ne,le,X,ee){if(n.timeoutHandle=-1,le=i.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qs},X1(i,p,le);var Ie=(p&62914560)===p?vh-Pn():(p&4194048)===p?t0-Pn():0;if(Ie=RI(le,Ie),Ie!==null){na=p,n.cancelPendingCommit=Ie(f0.bind(null,n,i,p,r,c,f,E,x,L,ne,le,null,X,ee)),qa(n,p,E,!Y);return}}f0(n,i,p,r,c,f,E,x,L)}function $w(n){for(var i=n;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var f=r[c],p=f.getSnapshot;f=f.value;try{if(!is(p(),f))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function qa(n,i,r,c){i&=~Mp,i&=~oo,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var f=i;0<f;){var p=31-Pt(f),E=1<<p;c[p]=-1,f&=~E}r!==0&&zr(n,r,i)}function Th(){return(ct&6)===0?(au(0),!1):!0}function Vp(){if(Ke!==null){if(mt===0)var n=Ke.return;else n=Ke,Fi=Zr=null,np(n),dl=null,Bc=0,n=Ke;for(;n!==null;)z1(n.alternate,n),n=n.return;Ke=null}}function El(n,i){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,uI(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),na=0,Vp(),Et=n,Ke=r=Hi(n.current,null),Xe=i,mt=0,ls=null,Pa=!1,yl=Us(n,i),Op=!1,vl=cs=Mp=oo=Ua=Mt=0,Yn=su=null,zp=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var f=31-Pt(c),p=1<<f;i|=n[f],c&=~p}return ta=i,Hd(),r}function r0(n,i){Fe=null,W.H=Yc,i===ul||i===Xd?(i=Tv(),mt=3):i===$m?(i=Tv(),mt=4):mt=i===yp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ls=i,Ke===null&&(Mt=1,dh(n,ws(i,n.current)))}function o0(){var n=rs.current;return n===null?!0:(Xe&4194048)===Xe?Cs===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?n===Cs:!1}function l0(){var n=W.H;return W.H=Yc,n===null?Yc:n}function c0(){var n=W.A;return W.A=qw,n}function Sh(){Mt=4,Pa||(Xe&4194048)!==Xe&&rs.current!==null||(yl=!0),(Ua&134217727)===0&&(oo&134217727)===0||Et===null||qa(Et,Xe,cs,!1)}function Bp(n,i,r){var c=ct;ct|=2;var f=l0(),p=c0();(Et!==n||Xe!==i)&&(Eh=null,El(n,i)),i=!1;var E=Mt;e:do try{if(mt!==0&&Ke!==null){var x=Ke,L=ls;switch(mt){case 8:Vp(),E=6;break e;case 3:case 2:case 9:case 6:rs.current===null&&(i=!0);var Y=mt;if(mt=0,ls=null,Tl(n,x,L,Y),r&&yl){E=0;break e}break;default:Y=mt,mt=0,ls=null,Tl(n,x,L,Y)}}Fw(),E=Mt;break}catch(ne){r0(n,ne)}while(!0);return i&&n.shellSuspendCounter++,Fi=Zr=null,ct=c,W.H=f,W.A=p,Ke===null&&(Et=null,Xe=0,Hd()),E}function Fw(){for(;Ke!==null;)u0(Ke)}function Gw(n,i){var r=ct;ct|=2;var c=l0(),f=c0();Et!==n||Xe!==i?(Eh=null,bh=Pn()+500,El(n,i)):yl=Us(n,i);e:do try{if(mt!==0&&Ke!==null){i=Ke;var p=ls;t:switch(mt){case 1:mt=0,ls=null,Tl(n,i,p,1);break;case 2:case 9:if(bv(p)){mt=0,ls=null,d0(i);break}i=function(){mt!==2&&mt!==9||Et!==n||(mt=7),Ti(n)},p.then(i,i);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:bv(p)?(mt=0,ls=null,d0(i)):(mt=0,ls=null,Tl(n,i,p,7));break;case 5:var E=null;switch(Ke.tag){case 26:E=Ke.memoizedState;case 5:case 27:var x=Ke;if(E?W0(E):x.stateNode.complete){mt=0,ls=null;var L=x.sibling;if(L!==null)Ke=L;else{var Y=x.return;Y!==null?(Ke=Y,Ah(Y)):Ke=null}break t}}mt=0,ls=null,Tl(n,i,p,5);break;case 6:mt=0,ls=null,Tl(n,i,p,6);break;case 8:Vp(),Mt=6;break e;default:throw Error(a(462))}}Qw();break}catch(ne){r0(n,ne)}while(!0);return Fi=Zr=null,W.H=c,W.A=f,ct=r,Ke!==null?0:(Et=null,Xe=0,Hd(),Mt)}function Qw(){for(;Ke!==null&&!_m();)u0(Ke)}function u0(n){var i=O1(n.alternate,n,ta);n.memoizedProps=n.pendingProps,i===null?Ah(n):Ke=i}function d0(n){var i=n,r=i.alternate;switch(i.tag){case 15:case 0:i=R1(r,i,i.pendingProps,i.type,void 0,Xe);break;case 11:i=R1(r,i,i.pendingProps,i.type.render,i.ref,Xe);break;case 5:np(i);default:z1(r,i),i=Ke=cv(i,ta),i=O1(r,i,ta)}n.memoizedProps=n.pendingProps,i===null?Ah(n):Ke=i}function Tl(n,i,r,c){Fi=Zr=null,np(i),dl=null,Bc=0;var f=i.return;try{if(Mw(n,f,i,r,Xe)){Mt=1,dh(n,ws(r,n.current)),Ke=null;return}}catch(p){if(f!==null)throw Ke=f,p;Mt=1,dh(n,ws(r,n.current)),Ke=null;return}i.flags&32768?(st||c===1?n=!0:yl||(Xe&536870912)!==0?n=!1:(Pa=n=!0,(c===2||c===9||c===3||c===6)&&(c=rs.current,c!==null&&c.tag===13&&(c.flags|=16384))),h0(i,n)):Ah(i)}function Ah(n){var i=n;do{if((i.flags&32768)!==0){h0(i,Pa);return}n=i.return;var r=Pw(i.alternate,i,ta);if(r!==null){Ke=r;return}if(i=i.sibling,i!==null){Ke=i;return}Ke=i=n}while(i!==null);Mt===0&&(Mt=5)}function h0(n,i){do{var r=Uw(n.alternate,n);if(r!==null){r.flags&=32767,Ke=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(n=n.sibling,n!==null)){Ke=n;return}Ke=n=r}while(n!==null);Mt=6,Ke=null}function f0(n,i,r,c,f,p,E,x,L){n.cancelPendingCommit=null;do xh();while(on!==0);if((ct&6)!==0)throw Error(a(327));if(i!==null){if(i===n.current)throw Error(a(177));if(p=i.lanes|i.childLanes,p|=Nm,bm(n,r,p,E,x,L),n===Et&&(Ke=Et=null,Xe=0),bl=i,Ba=n,na=r,Lp=p,Pp=f,n0=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Xw(ya,function(){return y0(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=W.T,W.T=null,f=me.p,me.p=2,E=ct,ct|=4;try{Vw(n,i,r)}finally{ct=E,me.p=f,W.T=c}}on=1,m0(),p0(),g0()}}function m0(){if(on===1){on=0;var n=Ba,i=bl,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=W.T,W.T=null;var c=me.p;me.p=2;var f=ct;ct|=4;try{K1(i,n);var p=Jp,E=ev(n.containerInfo),x=p.focusedElem,L=p.selectionRange;if(E!==x&&x&&x.ownerDocument&&Jy(x.ownerDocument.documentElement,x)){if(L!==null&&Am(x)){var Y=L.start,ne=L.end;if(ne===void 0&&(ne=Y),"selectionStart"in x)x.selectionStart=Y,x.selectionEnd=Math.min(ne,x.value.length);else{var le=x.ownerDocument||document,X=le&&le.defaultView||window;if(X.getSelection){var ee=X.getSelection(),Ie=x.textContent.length,Le=Math.min(L.start,Ie),vt=L.end===void 0?Le:Math.min(L.end,Ie);!ee.extend&&Le>vt&&(E=vt,vt=Le,Le=E);var $=Zy(x,Le),B=Zy(x,vt);if($&&B&&(ee.rangeCount!==1||ee.anchorNode!==$.node||ee.anchorOffset!==$.offset||ee.focusNode!==B.node||ee.focusOffset!==B.offset)){var K=le.createRange();K.setStart($.node,$.offset),ee.removeAllRanges(),Le>vt?(ee.addRange(K),ee.extend(B.node,B.offset)):(K.setEnd(B.node,B.offset),ee.addRange(K))}}}}for(le=[],ee=x;ee=ee.parentNode;)ee.nodeType===1&&le.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<le.length;x++){var ae=le[x];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Lh=!!Zp,Jp=Zp=null}finally{ct=f,me.p=c,W.T=r}}n.current=i,on=2}}function p0(){if(on===2){on=0;var n=Ba,i=bl,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=W.T,W.T=null;var c=me.p;me.p=2;var f=ct;ct|=4;try{H1(n,i.alternate,i)}finally{ct=f,me.p=c,W.T=r}}on=3}}function g0(){if(on===4||on===3){on=0,pd();var n=Ba,i=bl,r=na,c=n0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?on=5:(on=0,bl=Ba=null,_0(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Va=null),Ui(r),i=i.stateNode,pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Ps,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=W.T,f=me.p,me.p=2,W.T=null;try{for(var p=n.onRecoverableError,E=0;E<c.length;E++){var x=c[E];p(x.value,{componentStack:x.stack})}}finally{W.T=i,me.p=f}}(na&3)!==0&&xh(),Ti(n),f=n.pendingLanes,(r&261930)!==0&&(f&42)!==0?n===Up?iu++:(iu=0,Up=n):iu=0,au(0)}}function _0(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Uc(i)))}function xh(){return m0(),p0(),g0(),y0()}function y0(){if(on!==5)return!1;var n=Ba,i=Lp;Lp=0;var r=Ui(na),c=W.T,f=me.p;try{me.p=32>r?32:r,W.T=null,r=Pp,Pp=null;var p=Ba,E=na;if(on=0,bl=Ba=null,na=0,(ct&6)!==0)throw Error(a(331));var x=ct;if(ct|=4,J1(p.current),W1(p,p.current,E,r),ct=x,au(0,!1),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Ps,p)}catch{}return!0}finally{me.p=f,W.T=c,_0(n,i)}}function v0(n,i,r){i=ws(r,i),i=_p(n.stateNode,i,2),n=Oa(n,i,2),n!==null&&(Mr(n,2),Ti(n))}function pt(n,i,r){if(n.tag===3)v0(n,n,r);else for(;i!==null;){if(i.tag===3){v0(i,n,r);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Va===null||!Va.has(c))){n=ws(r,n),r=b1(2),c=Oa(i,r,2),c!==null&&(E1(r,c,i,n),Mr(c,2),Ti(c));break}}i=i.return}}function qp(n,i,r){var c=n.pingCache;if(c===null){c=n.pingCache=new Hw;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(r)||(Op=!0,f.add(r),n=Kw.bind(null,n,i,r),i.then(n,n))}function Kw(n,i,r){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,Et===n&&(Xe&r)===r&&(Mt===4||Mt===3&&(Xe&62914560)===Xe&&300>Pn()-vh?(ct&2)===0&&El(n,0):Mp|=r,vl===Xe&&(vl=0)),Ti(n)}function b0(n,i){i===0&&(i=Ed()),n=Yr(n,i),n!==null&&(Mr(n,i),Ti(n))}function Yw(n){var i=n.memoizedState,r=0;i!==null&&(r=i.retryLane),b0(n,r)}function Ww(n,i){var r=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(r=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(i),b0(n,r)}function Xw(n,i){return rn(n,i)}var wh=null,Sl=null,Hp=!1,Ih=!1,$p=!1,Ha=0;function Ti(n){n!==Sl&&n.next===null&&(Sl===null?wh=Sl=n:Sl=Sl.next=n),Ih=!0,Hp||(Hp=!0,Jw())}function au(n,i){if(!$p&&Ih){$p=!0;do for(var r=!1,c=wh;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var p=0;else{var E=c.suspendedLanes,x=c.pingedLanes;p=(1<<31-Pt(42|n)+1)-1,p&=f&~(E&~x),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,A0(c,p))}else p=Xe,p=ii(c,c===Et?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||Us(c,p)||(r=!0,A0(c,p));c=c.next}while(r);$p=!1}}function Zw(){E0()}function E0(){Ih=Hp=!1;var n=0;Ha!==0&&cI()&&(n=Ha);for(var i=Pn(),r=null,c=wh;c!==null;){var f=c.next,p=T0(c,i);p===0?(c.next=null,r===null?wh=f:r.next=f,f===null&&(Sl=r)):(r=c,(n!==0||(p&3)!==0)&&(Ih=!0)),c=f}on!==0&&on!==5||au(n),Ha!==0&&(Ha=0)}function T0(n,i){for(var r=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var E=31-Pt(p),x=1<<E,L=f[E];L===-1?((x&r)===0||(x&c)!==0)&&(f[E]=vm(x,i)):L<=i&&(n.expiredLanes|=x),p&=~x}if(i=Et,r=Xe,r=ii(n,n===i?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,r===0||n===i&&(mt===2||mt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&_a(c),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||Us(n,r)){if(i=r&-r,i===n.callbackPriority)return i;switch(c!==null&&_a(c),Ui(r)){case 2:case 8:r=pc;break;case 32:r=ya;break;case 268435456:r=gd;break;default:r=ya}return c=S0.bind(null,n),r=rn(r,c),n.callbackPriority=i,n.callbackNode=r,i}return c!==null&&c!==null&&_a(c),n.callbackPriority=2,n.callbackNode=null,2}function S0(n,i){if(on!==0&&on!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(xh()&&n.callbackNode!==r)return null;var c=Xe;return c=ii(n,n===Et?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(i0(n,c,i),T0(n,Pn()),n.callbackNode!=null&&n.callbackNode===r?S0.bind(null,n):null)}function A0(n,i){if(xh())return null;i0(n,i,!0)}function Jw(){dI(function(){(ct&6)!==0?rn(mc,Zw):E0()})}function Fp(){if(Ha===0){var n=ll;n===0&&(n=ni,ni<<=1,(ni&261888)===0&&(ni=256)),Ha=n}return Ha}function x0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Qo(""+n)}function w0(n,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,n.id&&r.setAttribute("form",n.id),i.parentNode.insertBefore(r,i),n=new FormData(n),r.parentNode.removeChild(r),n}function eI(n,i,r,c,f){if(i==="submit"&&r&&r.stateNode===f){var p=x0((f[un]||null).action),E=c.submitter;E&&(i=(i=E[un]||null)?x0(i.formAction):E.getAttribute("formAction"),i!==null&&(p=i,E=null));var x=new pi("action","action",null,c,f);n.push({event:x,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ha!==0){var L=E?w0(f,E):new FormData(f);dp(r,{pending:!0,data:L,method:f.method,action:p},null,L)}}else typeof p=="function"&&(x.preventDefault(),L=E?w0(f,E):new FormData(f),dp(r,{pending:!0,data:L,method:f.method,action:p},p,L))},currentTarget:f}]})}}for(var Gp=0;Gp<Rm.length;Gp++){var Qp=Rm[Gp],tI=Qp.toLowerCase(),nI=Qp[0].toUpperCase()+Qp.slice(1);Qs(tI,"on"+nI)}Qs(sv,"onAnimationEnd"),Qs(iv,"onAnimationIteration"),Qs(av,"onAnimationStart"),Qs("dblclick","onDoubleClick"),Qs("focusin","onFocus"),Qs("focusout","onBlur"),Qs(yw,"onTransitionRun"),Qs(vw,"onTransitionStart"),Qs(bw,"onTransitionCancel"),Qs(rv,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ru));function I0(n,i){i=(i&4)!==0;for(var r=0;r<n.length;r++){var c=n[r],f=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var E=c.length-1;0<=E;E--){var x=c[E],L=x.instance,Y=x.currentTarget;if(x=x.listener,L!==p&&f.isPropagationStopped())break e;p=x,f.currentTarget=Y;try{p(f)}catch(ne){qd(ne)}f.currentTarget=null,p=L}else for(E=0;E<c.length;E++){if(x=c[E],L=x.instance,Y=x.currentTarget,x=x.listener,L!==p&&f.isPropagationStopped())break e;p=x,f.currentTarget=Y;try{p(f)}catch(ne){qd(ne)}f.currentTarget=null,p=L}}}}function Ye(n,i){var r=i[qo];r===void 0&&(r=i[qo]=new Set);var c=n+"__bubble";r.has(c)||(R0(i,n,2,!1),r.add(c))}function Kp(n,i,r){var c=0;i&&(c|=4),R0(r,n,c,i)}var Rh="_reactListening"+Math.random().toString(36).slice(2);function Yp(n){if(!n[Rh]){n[Rh]=!0,yc.forEach(function(r){r!=="selectionchange"&&(sI.has(r)||Kp(r,!1,n),Kp(r,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Rh]||(i[Rh]=!0,Kp("selectionchange",!1,i))}}function R0(n,i,r,c){switch(sb(i)){case 2:var f=kI;break;case 8:f=jI;break;default:f=ug}r=f.bind(null,i,r,n),f=void 0,!Br||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,r,{capture:!0,passive:f}):n.addEventListener(i,r,!0):f!==void 0?n.addEventListener(i,r,{passive:f}):n.addEventListener(i,r,!1)}function Wp(n,i,r,c,f){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var x=c.stateNode.containerInfo;if(x===f)break;if(E===4)for(E=c.return;E!==null;){var L=E.tag;if((L===3||L===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;x!==null;){if(E=li(x),E===null)return;if(L=E.tag,L===5||L===6||L===26||L===27){c=p=E;continue e}x=x.parentNode}}c=c.return}Aa(function(){var Y=p,ne=Ts(r),le=[];e:{var X=ov.get(n);if(X!==void 0){var ee=pi,Ie=n;switch(n){case"keypress":if(Hr(r)===0)break e;case"keydown":case"keyup":ee=Ud;break;case"focusin":Ie="focus",ee=Fr;break;case"focusout":Ie="blur",ee=Fr;break;case"beforeblur":case"afterblur":ee=Fr;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=kc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Cd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=v;break;case sv:case iv:case av:ee=jd;break;case rv:ee=R;break;case"scroll":case"scrollend":ee=Cc;break;case"wheel":ee=Z;break;case"copy":case"cut":case"paste":ee=Dd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=qi;break;case"toggle":case"beforetoggle":ee=$e}var Le=(i&4)!==0,vt=!Le&&(n==="scroll"||n==="scrollend"),$=Le?X!==null?X+"Capture":null:X;Le=[];for(var B=Y,K;B!==null;){var ae=B;if(K=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||K===null||$===null||(ae=Hs(B,$),ae!=null&&Le.push(ou(B,ae,K))),vt)break;B=B.return}0<Le.length&&(X=new ee(X,Ie,null,r,ne),le.push({event:X,listeners:Le}))}}if((i&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",ee=n==="mouseout"||n==="pointerout",X&&r!==Ic&&(Ie=r.relatedTarget||r.fromElement)&&(li(Ie)||Ie[ri]))break e;if((ee||X)&&(X=ne.window===ne?ne:(X=ne.ownerDocument)?X.defaultView||X.parentWindow:window,ee?(Ie=r.relatedTarget||r.toElement,ee=Y,Ie=Ie?li(Ie):null,Ie!==null&&(vt=l(Ie),Le=Ie.tag,Ie!==vt||Le!==5&&Le!==27&&Le!==6)&&(Ie=null)):(ee=null,Ie=Y),ee!==Ie)){if(Le=kc,ae="onMouseLeave",$="onMouseEnter",B="mouse",(n==="pointerout"||n==="pointerover")&&(Le=qi,ae="onPointerLeave",$="onPointerEnter",B="pointer"),vt=ee==null?X:ns(ee),K=Ie==null?X:ns(Ie),X=new Le(ae,B+"leave",ee,r,ne),X.target=vt,X.relatedTarget=K,ae=null,li(ne)===Y&&(Le=new Le($,B+"enter",Ie,r,ne),Le.target=K,Le.relatedTarget=vt,ae=Le),vt=ae,ee&&Ie)t:{for(Le=iI,$=ee,B=Ie,K=0,ae=$;ae;ae=Le(ae))K++;ae=0;for(var je=B;je;je=Le(je))ae++;for(;0<K-ae;)$=Le($),K--;for(;0<ae-K;)B=Le(B),ae--;for(;K--;){if($===B||B!==null&&$===B.alternate){Le=$;break t}$=Le($),B=Le(B)}Le=null}else Le=null;ee!==null&&N0(le,X,ee,Le,!1),Ie!==null&&vt!==null&&N0(le,vt,Ie,Le,!0)}}e:{if(X=Y?ns(Y):window,ee=X.nodeName&&X.nodeName.toLowerCase(),ee==="select"||ee==="input"&&X.type==="file")var rt=Gy;else if($y(X))if(Qy)rt=pw;else{rt=fw;var Re=hw}else ee=X.nodeName,!ee||ee.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Y&&Go(Y.elementType)&&(rt=Gy):rt=mw;if(rt&&(rt=rt(n,Y))){Fy(le,rt,r,ne);break e}Re&&Re(n,X,Y),n==="focusout"&&Y&&X.type==="number"&&Y.memoizedProps.value!=null&&Ac(X,"number",X.value)}switch(Re=Y?ns(Y):window,n){case"focusin":($y(Re)||Re.contentEditable==="true")&&(el=Re,xm=Y,zc=null);break;case"focusout":zc=xm=el=null;break;case"mousedown":wm=!0;break;case"contextmenu":case"mouseup":case"dragend":wm=!1,tv(le,r,ne);break;case"selectionchange":if(_w)break;case"keydown":case"keyup":tv(le,r,ne)}var Ge;if(lt)e:{switch(n){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Jo?Gr(n,r)&&(Ze="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(Ze="onCompositionStart");Ze&&(yi&&r.locale!=="ko"&&(Jo||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Jo&&(Ge=Nc()):(mi=ne,Rc="value"in mi?mi.value:mi.textContent,Jo=!0)),Re=Nh(Y,Ze),0<Re.length&&(Ze=new _i(Ze,n,null,r,ne),le.push({event:Ze,listeners:Re}),Ge?Ze.data=Ge:(Ge=Zo(r),Ge!==null&&(Ze.data=Ge)))),(Ge=As?lw(n,r):cw(n,r))&&(Ze=Nh(Y,"onBeforeInput"),0<Ze.length&&(Re=new _i("onBeforeInput","beforeinput",null,r,ne),le.push({event:Re,listeners:Ze}),Re.data=Ge)),eI(le,n,Y,r,ne)}I0(le,i)})}function ou(n,i,r){return{instance:n,listener:i,currentTarget:r}}function Nh(n,i){for(var r=i+"Capture",c=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Hs(n,r),f!=null&&c.unshift(ou(n,f,p)),f=Hs(n,i),f!=null&&c.push(ou(n,f,p))),n.tag===3)return c;n=n.return}return[]}function iI(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function N0(n,i,r,c,f){for(var p=i._reactName,E=[];r!==null&&r!==c;){var x=r,L=x.alternate,Y=x.stateNode;if(x=x.tag,L!==null&&L===c)break;x!==5&&x!==26&&x!==27||Y===null||(L=Y,f?(Y=Hs(r,p),Y!=null&&E.unshift(ou(r,Y,L))):f||(Y=Hs(r,p),Y!=null&&E.push(ou(r,Y,L)))),r=r.return}E.length!==0&&n.push({event:i,listeners:E})}var aI=/\r\n?/g,rI=/\u0000|\uFFFD/g;function C0(n){return(typeof n=="string"?n:""+n).replace(aI,`
`).replace(rI,"")}function k0(n,i){return i=C0(i),C0(n)===i}function yt(n,i,r,c,f,p){switch(r){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Fn(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Fn(n,""+c);break;case"className":ss(n,"class",c);break;case"tabIndex":ss(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ss(n,r,c);break;case"style":wc(n,c,p);break;case"data":if(i!=="object"){ss(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||r!=="href")){n.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=Qo(""+c),n.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(i!=="input"&&yt(n,i,"name",f.name,f,null),yt(n,i,"formEncType",f.formEncType,f,null),yt(n,i,"formMethod",f.formMethod,f,null),yt(n,i,"formTarget",f.formTarget,f,null)):(yt(n,i,"encType",f.encType,f,null),yt(n,i,"method",f.method,f,null),yt(n,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=Qo(""+c),n.setAttribute(r,c);break;case"onClick":c!=null&&(n.onclick=qs);break;case"onScroll":c!=null&&Ye("scroll",n);break;case"onScrollEnd":c!=null&&Ye("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=r}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}r=Qo(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""+c):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":c===!0?n.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,c):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(r,c):n.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(r):n.setAttribute(r,c);break;case"popover":Ye("beforetoggle",n),Ye("toggle",n),$o(n,"popover",c);break;case"xlinkActuate":Yt(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Yt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Yt(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Yt(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Yt(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Yt(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Yt(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Yt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Yt(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":$o(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Nd.get(r)||r,$o(n,r,c))}}function Xp(n,i,r,c,f,p){switch(r){case"style":wc(n,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=r}}break;case"children":typeof c=="string"?Fn(n,c):(typeof c=="number"||typeof c=="bigint")&&Fn(n,""+c);break;case"onScroll":c!=null&&Ye("scroll",n);break;case"onScrollEnd":c!=null&&Ye("scrollend",n);break;case"onClick":c!=null&&(n.onclick=qs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vc.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),i=r.slice(2,f?r.length-7:void 0),p=n[un]||null,p=p!=null?p[r]:null,typeof p=="function"&&n.removeEventListener(i,p,f),typeof c=="function")){typeof p!="function"&&p!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(i,c,f);break e}r in n?n[r]=c:c===!0?n.setAttribute(r,""):$o(n,r,c)}}}function bn(n,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",n),Ye("load",n);var c=!1,f=!1,p;for(p in r)if(r.hasOwnProperty(p)){var E=r[p];if(E!=null)switch(p){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:yt(n,i,p,E,r,null)}}f&&yt(n,i,"srcSet",r.srcSet,r,null),c&&yt(n,i,"src",r.src,r,null);return;case"input":Ye("invalid",n);var x=p=E=f=null,L=null,Y=null;for(c in r)if(r.hasOwnProperty(c)){var ne=r[c];if(ne!=null)switch(c){case"name":f=ne;break;case"type":E=ne;break;case"checked":L=ne;break;case"defaultChecked":Y=ne;break;case"value":p=ne;break;case"defaultValue":x=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,i));break;default:yt(n,i,c,ne,r,null)}}wd(n,p,x,L,Y,E,f,!1);return;case"select":Ye("invalid",n),c=E=p=null;for(f in r)if(r.hasOwnProperty(f)&&(x=r[f],x!=null))switch(f){case"value":p=x;break;case"defaultValue":E=x;break;case"multiple":c=x;default:yt(n,i,f,x,r,null)}i=p,r=E,n.multiple=!!c,i!=null?ba(n,!!c,i,!1):r!=null&&ba(n,!!c,r,!0);return;case"textarea":Ye("invalid",n),p=f=c=null;for(E in r)if(r.hasOwnProperty(E)&&(x=r[E],x!=null))switch(E){case"value":c=x;break;case"defaultValue":f=x;break;case"children":p=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(a(91));break;default:yt(n,i,E,x,r,null)}Ea(n,c,f,p);return;case"option":for(L in r)r.hasOwnProperty(L)&&(c=r[L],c!=null)&&(L==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":yt(n,i,L,c,r,null));return;case"dialog":Ye("beforetoggle",n),Ye("toggle",n),Ye("cancel",n),Ye("close",n);break;case"iframe":case"object":Ye("load",n);break;case"video":case"audio":for(c=0;c<ru.length;c++)Ye(ru[c],n);break;case"image":Ye("error",n),Ye("load",n);break;case"details":Ye("toggle",n);break;case"embed":case"source":case"link":Ye("error",n),Ye("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in r)if(r.hasOwnProperty(Y)&&(c=r[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:yt(n,i,Y,c,r,null)}return;default:if(Go(i)){for(ne in r)r.hasOwnProperty(ne)&&(c=r[ne],c!==void 0&&Xp(n,i,ne,c,r,void 0));return}}for(x in r)r.hasOwnProperty(x)&&(c=r[x],c!=null&&yt(n,i,x,c,r,null))}function oI(n,i,r,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,E=null,x=null,L=null,Y=null,ne=null;for(ee in r){var le=r[ee];if(r.hasOwnProperty(ee)&&le!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":L=le;default:c.hasOwnProperty(ee)||yt(n,i,ee,null,c,le)}}for(var X in c){var ee=c[X];if(le=r[X],c.hasOwnProperty(X)&&(ee!=null||le!=null))switch(X){case"type":p=ee;break;case"name":f=ee;break;case"checked":Y=ee;break;case"defaultChecked":ne=ee;break;case"value":E=ee;break;case"defaultValue":x=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(a(137,i));break;default:ee!==le&&yt(n,i,X,ee,c,le)}}Fo(n,E,x,L,Y,ne,p,f);return;case"select":ee=E=x=X=null;for(p in r)if(L=r[p],r.hasOwnProperty(p)&&L!=null)switch(p){case"value":break;case"multiple":ee=L;default:c.hasOwnProperty(p)||yt(n,i,p,null,c,L)}for(f in c)if(p=c[f],L=r[f],c.hasOwnProperty(f)&&(p!=null||L!=null))switch(f){case"value":X=p;break;case"defaultValue":x=p;break;case"multiple":E=p;default:p!==L&&yt(n,i,f,p,c,L)}i=x,r=E,c=ee,X!=null?ba(n,!!r,X,!1):!!c!=!!r&&(i!=null?ba(n,!!r,i,!0):ba(n,!!r,r?[]:"",!1));return;case"textarea":ee=X=null;for(x in r)if(f=r[x],r.hasOwnProperty(x)&&f!=null&&!c.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:yt(n,i,x,null,c,f)}for(E in c)if(f=c[E],p=r[E],c.hasOwnProperty(E)&&(f!=null||p!=null))switch(E){case"value":X=f;break;case"defaultValue":ee=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==p&&yt(n,i,E,f,c,p)}Id(n,X,ee);return;case"option":for(var Ie in r)X=r[Ie],r.hasOwnProperty(Ie)&&X!=null&&!c.hasOwnProperty(Ie)&&(Ie==="selected"?n.selected=!1:yt(n,i,Ie,null,c,X));for(L in c)X=c[L],ee=r[L],c.hasOwnProperty(L)&&X!==ee&&(X!=null||ee!=null)&&(L==="selected"?n.selected=X&&typeof X!="function"&&typeof X!="symbol":yt(n,i,L,X,c,ee));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in r)X=r[Le],r.hasOwnProperty(Le)&&X!=null&&!c.hasOwnProperty(Le)&&yt(n,i,Le,null,c,X);for(Y in c)if(X=c[Y],ee=r[Y],c.hasOwnProperty(Y)&&X!==ee&&(X!=null||ee!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,i));break;default:yt(n,i,Y,X,c,ee)}return;default:if(Go(i)){for(var vt in r)X=r[vt],r.hasOwnProperty(vt)&&X!==void 0&&!c.hasOwnProperty(vt)&&Xp(n,i,vt,void 0,c,X);for(ne in c)X=c[ne],ee=r[ne],!c.hasOwnProperty(ne)||X===ee||X===void 0&&ee===void 0||Xp(n,i,ne,X,c,ee);return}}for(var $ in r)X=r[$],r.hasOwnProperty($)&&X!=null&&!c.hasOwnProperty($)&&yt(n,i,$,null,c,X);for(le in c)X=c[le],ee=r[le],!c.hasOwnProperty(le)||X===ee||X==null&&ee==null||yt(n,i,le,X,c,ee)}function j0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lI(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var f=r[c],p=f.transferSize,E=f.initiatorType,x=f.duration;if(p&&x&&j0(E)){for(E=0,x=f.responseEnd,c+=1;c<r.length;c++){var L=r[c],Y=L.startTime;if(Y>x)break;var ne=L.transferSize,le=L.initiatorType;ne&&j0(le)&&(L=L.responseEnd,E+=ne*(L<x?1:(x-Y)/(L-Y)))}if(--c,i+=8*(p+E)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Zp=null,Jp=null;function Ch(n){return n.nodeType===9?n:n.ownerDocument}function D0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function O0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function eg(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var tg=null;function cI(){var n=window.event;return n&&n.type==="popstate"?n===tg?!1:(tg=n,!0):(tg=null,!1)}var M0=typeof setTimeout=="function"?setTimeout:void 0,uI=typeof clearTimeout=="function"?clearTimeout:void 0,z0=typeof Promise=="function"?Promise:void 0,dI=typeof queueMicrotask=="function"?queueMicrotask:typeof z0<"u"?function(n){return z0.resolve(null).then(n).catch(hI)}:M0;function hI(n){setTimeout(function(){throw n})}function $a(n){return n==="head"}function L0(n,i){var r=i,c=0;do{var f=r.nextSibling;if(n.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(c===0){n.removeChild(f),Il(i);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")lu(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,lu(r);for(var p=r.firstChild;p;){var E=p.nextSibling,x=p.nodeName;p[oi]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&p.rel.toLowerCase()==="stylesheet"||r.removeChild(p),p=E}}else r==="body"&&lu(n.ownerDocument.body);r=f}while(r);Il(i)}function P0(n,i){var r=n;n=0;do{var c=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=c}while(r)}function ng(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":ng(r),Ho(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function fI(n,i,r,c){for(;n.nodeType===1;){var f=r;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[oi])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=ks(n.nextSibling),n===null)break}return null}function mI(n,i,r){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=ks(n.nextSibling),n===null))return null;return n}function U0(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=ks(n.nextSibling),n===null))return null;return n}function sg(n){return n.data==="$?"||n.data==="$~"}function ig(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function pI(n,i){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||r.readyState!=="loading")i();else{var c=function(){i(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function ks(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var ag=null;function V0(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(i===0)return ks(n.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}n=n.nextSibling}return null}function B0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return n;i--}else r!=="/$"&&r!=="/&"||i++}n=n.previousSibling}return null}function q0(n,i,r){switch(i=Ch(r),n){case"html":if(n=i.documentElement,!n)throw Error(a(452));return n;case"head":if(n=i.head,!n)throw Error(a(453));return n;case"body":if(n=i.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function lu(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ho(n)}var js=new Map,H0=new Set;function kh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var sa=me.d;me.d={f:gI,r:_I,D:yI,C:vI,L:bI,m:EI,X:SI,S:TI,M:AI};function gI(){var n=sa.f(),i=Th();return n||i}function _I(n){var i=Es(n);i!==null&&i.tag===5&&i.type==="form"?r1(i):sa.r(n)}var Al=typeof document>"u"?null:document;function $0(n,i,r){var c=Al;if(c&&typeof i=="string"&&i){var f=$n(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),H0.has(f)||(H0.add(f),n={rel:n,crossOrigin:r,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),bn(i,"link",n),Kt(i),c.head.appendChild(i)))}}function yI(n){sa.D(n),$0("dns-prefetch",n,null)}function vI(n,i){sa.C(n,i),$0("preconnect",n,i)}function bI(n,i,r){sa.L(n,i,r);var c=Al;if(c&&n&&i){var f='link[rel="preload"][as="'+$n(i)+'"]';i==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+$n(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+$n(r.imageSizes)+'"]')):f+='[href="'+$n(n)+'"]';var p=f;switch(i){case"style":p=xl(n);break;case"script":p=wl(n)}js.has(p)||(n=b({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:n,as:i},r),js.set(p,n),c.querySelector(f)!==null||i==="style"&&c.querySelector(cu(p))||i==="script"&&c.querySelector(uu(p))||(i=c.createElement("link"),bn(i,"link",n),Kt(i),c.head.appendChild(i)))}}function EI(n,i){sa.m(n,i);var r=Al;if(r&&n){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+$n(c)+'"][href="'+$n(n)+'"]',p=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=wl(n)}if(!js.has(p)&&(n=b({rel:"modulepreload",href:n},i),js.set(p,n),r.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(uu(p)))return}c=r.createElement("link"),bn(c,"link",n),Kt(c),r.head.appendChild(c)}}}function TI(n,i,r){sa.S(n,i,r);var c=Al;if(c&&n){var f=ci(c).hoistableStyles,p=xl(n);i=i||"default";var E=f.get(p);if(!E){var x={loading:0,preload:null};if(E=c.querySelector(cu(p)))x.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":i},r),(r=js.get(p))&&rg(n,r);var L=E=c.createElement("link");Kt(L),bn(L,"link",n),L._p=new Promise(function(Y,ne){L.onload=Y,L.onerror=ne}),L.addEventListener("load",function(){x.loading|=1}),L.addEventListener("error",function(){x.loading|=2}),x.loading|=4,jh(E,i,c)}E={type:"stylesheet",instance:E,count:1,state:x},f.set(p,E)}}}function SI(n,i){sa.X(n,i);var r=Al;if(r&&n){var c=ci(r).hoistableScripts,f=wl(n),p=c.get(f);p||(p=r.querySelector(uu(f)),p||(n=b({src:n,async:!0},i),(i=js.get(f))&&og(n,i),p=r.createElement("script"),Kt(p),bn(p,"link",n),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function AI(n,i){sa.M(n,i);var r=Al;if(r&&n){var c=ci(r).hoistableScripts,f=wl(n),p=c.get(f);p||(p=r.querySelector(uu(f)),p||(n=b({src:n,async:!0,type:"module"},i),(i=js.get(f))&&og(n,i),p=r.createElement("script"),Kt(p),bn(p,"link",n),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function F0(n,i,r,c){var f=(f=ye.current)?kh(f):null;if(!f)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=xl(r.href),r=ci(f).hoistableStyles,c=r.get(i),c||(c={type:"style",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=xl(r.href);var p=ci(f).hoistableStyles,E=p.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,E),(p=f.querySelector(cu(n)))&&!p._p&&(E.instance=p,E.state.loading=5),js.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},js.set(n,r),p||xI(f,n,r,E.state))),i&&c===null)throw Error(a(528,""));return E}if(i&&c!==null)throw Error(a(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=wl(r),r=ci(f).hoistableScripts,c=r.get(i),c||(c={type:"script",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function xl(n){return'href="'+$n(n)+'"'}function cu(n){return'link[rel="stylesheet"]['+n+"]"}function G0(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function xI(n,i,r,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),bn(i,"link",r),Kt(i),n.head.appendChild(i))}function wl(n){return'[src="'+$n(n)+'"]'}function uu(n){return"script[async]"+n}function Q0(n,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+$n(r.href)+'"]');if(c)return i.instance=c,Kt(c),c;var f=b({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Kt(c),bn(c,"style",f),jh(c,r.precedence,n),i.instance=c;case"stylesheet":f=xl(r.href);var p=n.querySelector(cu(f));if(p)return i.state.loading|=4,i.instance=p,Kt(p),p;c=G0(r),(f=js.get(f))&&rg(c,f),p=(n.ownerDocument||n).createElement("link"),Kt(p);var E=p;return E._p=new Promise(function(x,L){E.onload=x,E.onerror=L}),bn(p,"link",c),i.state.loading|=4,jh(p,r.precedence,n),i.instance=p;case"script":return p=wl(r.src),(f=n.querySelector(uu(p)))?(i.instance=f,Kt(f),f):(c=r,(f=js.get(p))&&(c=b({},r),og(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Kt(f),bn(f,"link",c),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,jh(c,r.precedence,n));return i.instance}function jh(n,i,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,p=f,E=0;E<c.length;E++){var x=c[E];if(x.dataset.precedence===i)p=x;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(n,i.firstChild))}function rg(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function og(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Dh=null;function K0(n,i,r){if(Dh===null){var c=new Map,f=Dh=new Map;f.set(r,c)}else f=Dh,c=f.get(r),c||(c=new Map,f.set(r,c));if(c.has(n))return c;for(c.set(n,null),r=r.getElementsByTagName(n),f=0;f<r.length;f++){var p=r[f];if(!(p[oi]||p[Qt]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(i)||"";E=n+E;var x=c.get(E);x?x.push(p):c.set(E,[p])}}return c}function Y0(n,i,r){n=n.ownerDocument||n,n.head.insertBefore(r,i==="title"?n.querySelector("head > title"):null)}function wI(n,i,r){if(r===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function W0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function II(n,i,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=xl(c.href),p=i.querySelector(cu(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Oh.bind(n),i.then(n,n)),r.state.loading|=4,r.instance=p,Kt(p);return}p=i.ownerDocument||i,c=G0(c),(f=js.get(f))&&rg(c,f),p=p.createElement("link"),Kt(p);var E=p;E._p=new Promise(function(x,L){E.onload=x,E.onerror=L}),bn(p,"link",c),r.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=Oh.bind(n),i.addEventListener("load",r),i.addEventListener("error",r))}}var lg=0;function RI(n,i){return n.stylesheets&&n.count===0&&zh(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var c=setTimeout(function(){if(n.stylesheets&&zh(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+i);0<n.imgBytes&&lg===0&&(lg=62500*lI());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&zh(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>lg?50:800)+i);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Oh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Mh=null;function zh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Mh=new Map,i.forEach(NI,n),Mh=null,Oh.call(n))}function NI(n,i){if(!(i.state.loading&4)){var r=Mh.get(n);if(r)var c=r.get(null);else{r=new Map,Mh.set(n,r);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var E=f[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(r.set(E.dataset.precedence,E),c=E)}c&&r.set(null,c)}f=i.instance,E=f.getAttribute("data-precedence"),p=r.get(E)||c,p===c&&r.set(null,f),r.set(E,f),this.count++,c=Oh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var du={$$typeof:G,Provider:null,Consumer:null,_currentValue:Ae,_currentValue2:Ae,_threadCount:0};function CI(n,i,r,c,f,p,E,x,L){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ai(0),this.hiddenUpdates=ai(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function X0(n,i,r,c,f,p,E,x,L,Y,ne,le){return n=new CI(n,i,r,E,L,Y,ne,le,x),i=1,p===!0&&(i|=24),p=as(3,null,null,i),n.current=p,p.stateNode=n,i=Bm(),i.refCount++,n.pooledCache=i,i.refCount++,p.memoizedState={element:c,isDehydrated:r,cache:i},Fm(p),n}function Z0(n){return n?(n=sl,n):sl}function J0(n,i,r,c,f,p){f=Z0(f),c.context===null?c.context=f:c.pendingContext=f,c=Da(i),c.payload={element:r},p=p===void 0?null:p,p!==null&&(c.callback=p),r=Oa(n,c,i),r!==null&&(Wn(r,n,i),Hc(r,n,i))}function eb(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<i?r:i}}function cg(n,i){eb(n,i),(n=n.alternate)&&eb(n,i)}function tb(n){if(n.tag===13||n.tag===31){var i=Yr(n,67108864);i!==null&&Wn(i,n,67108864),cg(n,67108864)}}function nb(n){if(n.tag===13||n.tag===31){var i=us();i=Lr(i);var r=Yr(n,i);r!==null&&Wn(r,n,i),cg(n,i)}}var Lh=!0;function kI(n,i,r,c){var f=W.T;W.T=null;var p=me.p;try{me.p=2,ug(n,i,r,c)}finally{me.p=p,W.T=f}}function jI(n,i,r,c){var f=W.T;W.T=null;var p=me.p;try{me.p=8,ug(n,i,r,c)}finally{me.p=p,W.T=f}}function ug(n,i,r,c){if(Lh){var f=dg(c);if(f===null)Wp(n,i,c,Ph,r),ib(n,c);else if(OI(f,n,i,r,c))c.stopPropagation();else if(ib(n,c),i&4&&-1<DI.indexOf(n)){for(;f!==null;){var p=Es(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=si(p.pendingLanes);if(E!==0){var x=p;for(x.pendingLanes|=2,x.entangledLanes|=2;E;){var L=1<<31-Pt(E);x.entanglements[1]|=L,E&=~L}Ti(p),(ct&6)===0&&(bh=Pn()+500,au(0))}}break;case 31:case 13:x=Yr(p,2),x!==null&&Wn(x,p,2),Th(),cg(p,2)}if(p=dg(c),p===null&&Wp(n,i,c,Ph,r),p===f)break;f=p}f!==null&&c.stopPropagation()}else Wp(n,i,c,null,r)}}function dg(n){return n=Ts(n),hg(n)}var Ph=null;function hg(n){if(Ph=null,n=li(n),n!==null){var i=l(n);if(i===null)n=null;else{var r=i.tag;if(r===13){if(n=d(i),n!==null)return n;n=null}else if(r===31){if(n=m(i),n!==null)return n;n=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Ph=n,null}function sb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dr()){case mc:return 2;case pc:return 8;case ya:case ym:return 32;case gd:return 268435456;default:return 32}default:return 32}}var fg=!1,Fa=null,Ga=null,Qa=null,hu=new Map,fu=new Map,Ka=[],DI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ib(n,i){switch(n){case"focusin":case"focusout":Fa=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":hu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":fu.delete(i.pointerId)}}function mu(n,i,r,c,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:r,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},i!==null&&(i=Es(i),i!==null&&tb(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function OI(n,i,r,c,f){switch(i){case"focusin":return Fa=mu(Fa,n,i,r,c,f),!0;case"dragenter":return Ga=mu(Ga,n,i,r,c,f),!0;case"mouseover":return Qa=mu(Qa,n,i,r,c,f),!0;case"pointerover":var p=f.pointerId;return hu.set(p,mu(hu.get(p)||null,n,i,r,c,f)),!0;case"gotpointercapture":return p=f.pointerId,fu.set(p,mu(fu.get(p)||null,n,i,r,c,f)),!0}return!1}function ab(n){var i=li(n.target);if(i!==null){var r=l(i);if(r!==null){if(i=r.tag,i===13){if(i=d(r),i!==null){n.blockedOn=i,Vs(n.priority,function(){nb(r)});return}}else if(i===31){if(i=m(r),i!==null){n.blockedOn=i,Vs(n.priority,function(){nb(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Uh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var r=dg(n.nativeEvent);if(r===null){r=n.nativeEvent;var c=new r.constructor(r.type,r);Ic=c,r.target.dispatchEvent(c),Ic=null}else return i=Es(r),i!==null&&tb(i),n.blockedOn=r,!1;i.shift()}return!0}function rb(n,i,r){Uh(n)&&r.delete(i)}function MI(){fg=!1,Fa!==null&&Uh(Fa)&&(Fa=null),Ga!==null&&Uh(Ga)&&(Ga=null),Qa!==null&&Uh(Qa)&&(Qa=null),hu.forEach(rb),fu.forEach(rb)}function Vh(n,i){n.blockedOn===i&&(n.blockedOn=null,fg||(fg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,MI)))}var Bh=null;function ob(n){Bh!==n&&(Bh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Bh===n&&(Bh=null);for(var i=0;i<n.length;i+=3){var r=n[i],c=n[i+1],f=n[i+2];if(typeof c!="function"){if(hg(c||r)===null)continue;break}var p=Es(r);p!==null&&(n.splice(i,3),i-=3,dp(p,{pending:!0,data:f,method:r.method,action:c},c,f))}}))}function Il(n){function i(L){return Vh(L,n)}Fa!==null&&Vh(Fa,n),Ga!==null&&Vh(Ga,n),Qa!==null&&Vh(Qa,n),hu.forEach(i),fu.forEach(i);for(var r=0;r<Ka.length;r++){var c=Ka[r];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Ka.length&&(r=Ka[0],r.blockedOn===null);)ab(r),r.blockedOn===null&&Ka.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var f=r[c],p=r[c+1],E=f[un]||null;if(typeof p=="function")E||ob(r);else if(E){var x=null;if(p&&p.hasAttribute("formAction")){if(f=p,E=p[un]||null)x=E.formAction;else if(hg(f)!==null)continue}else x=E.action;typeof x=="function"?r[c+1]=x:(r.splice(c,3),c-=3),ob(r)}}}function lb(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(E){return f=E})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function mg(n){this._internalRoot=n}qh.prototype.render=mg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(a(409));var r=i.current,c=us();J0(r,c,n,i,null,null)},qh.prototype.unmount=mg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;J0(n.current,2,null,n,null,null),Th(),i[ri]=null}};function qh(n){this._internalRoot=n}qh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Td();n={blockedOn:null,target:n,priority:i};for(var r=0;r<Ka.length&&i!==0&&i<Ka[r].priority;r++);Ka.splice(r,0,n),r===0&&ab(n)}};var cb=e.version;if(cb!=="19.2.4")throw Error(a(527,cb,"19.2.4"));me.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=_(i),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var zI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hh.isDisabled&&Hh.supportsFiber)try{Ps=Hh.inject(zI),pn=Hh}catch{}}return gu.createRoot=function(n,i){if(!o(n))throw Error(a(299));var r=!1,c="",f=g1,p=_1,E=y1;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError)),i=X0(n,1,!1,null,null,r,c,null,f,p,E,lb),n[ri]=i.current,Yp(n),new mg(i)},gu.hydrateRoot=function(n,i,r){if(!o(n))throw Error(a(299));var c=!1,f="",p=g1,E=_1,x=y1,L=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(E=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError),r.formState!==void 0&&(L=r.formState)),i=X0(n,1,!0,i,r??null,c,f,L,p,E,x,lb),i.context=Z0(null),r=i.current,c=us(),c=Lr(c),f=Da(c),f.callback=null,Oa(r,f,c),r=c,i.current.lanes=r,Mr(i,r),Ti(i),n[ri]=i.current,Yp(n),new qh(i)},gu.version="19.2.4",gu}var vb;function FI(){if(vb)return _g.exports;vb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),_g.exports=$I(),_g.exports}var GI=FI();const QI=bT(GI);var bb="popstate";function KI(s={}){function e(o,l){let{pathname:d="/",search:m="",hash:g=""}=Co(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),Hg("",{pathname:d,search:m,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let d=o.document.querySelector("base"),m="";if(d&&d.getAttribute("href")){let g=o.location.href,_=g.indexOf("#");m=_===-1?g:g.slice(0,_)}return m+"#"+(typeof l=="string"?l:Ou(l))}function a(o,l){_s(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return WI(e,t,a,s)}function Ct(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function _s(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YI(){return Math.random().toString(36).substring(2,10)}function Eb(s,e){return{usr:s.state,key:s.key,idx:e}}function Hg(s,e,t=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Co(e):e,state:t,key:e&&e.key||a||YI()}}function Ou({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Co(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function WI(s,e,t,a={}){let{window:o=document.defaultView,v5Compat:l=!1}=a,d=o.history,m="POP",g=null,_=y();_==null&&(_=0,d.replaceState({...d.state,idx:_},""));function y(){return(d.state||{idx:null}).idx}function b(){m="POP";let k=y(),H=k==null?null:k-_;_=k,g&&g({action:m,location:V.location,delta:H})}function S(k,H){m="PUSH";let q=Hg(V.location,k,H);t&&t(q,k),_=y()+1;let G=Eb(q,_),O=V.createHref(q);try{d.pushState(G,"",O)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;o.location.assign(O)}l&&g&&g({action:m,location:V.location,delta:1})}function N(k,H){m="REPLACE";let q=Hg(V.location,k,H);t&&t(q,k),_=y();let G=Eb(q,_),O=V.createHref(q);d.replaceState(G,"",O),l&&g&&g({action:m,location:V.location,delta:0})}function z(k){return XI(k)}let V={get action(){return m},get location(){return s(o,d)},listen(k){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(bb,b),g=k,()=>{o.removeEventListener(bb,b),g=null}},createHref(k){return e(o,k)},createURL:z,encodeLocation(k){let H=z(k);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:S,replace:N,go(k){return d.go(k)}};return V}function XI(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(t,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:Ou(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}function TT(s,e,t="/"){return ZI(s,e,t,!1)}function ZI(s,e,t,a){let o=typeof e=="string"?Co(e):e,l=da(o.pathname||"/",t);if(l==null)return null;let d=ST(s);JI(d);let m=null;for(let g=0;m==null&&g<d.length;++g){let _=u2(l);m=l2(d[g],_,a)}return m}function ST(s,e=[],t=[],a="",o=!1){let l=(d,m,g=o,_)=>{let y={relativePath:_===void 0?d.path||"":_,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(a)&&g)return;Ct(y.relativePath.startsWith(a),`Absolute route path "${y.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(a.length)}let b=oa([a,y.relativePath]),S=t.concat(y);d.children&&d.children.length>0&&(Ct(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),ST(d.children,e,S,b,g)),!(d.path==null&&!d.index)&&e.push({path:b,score:r2(b,d.index),routesMeta:S})};return s.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))l(d,m);else for(let g of AT(d.path))l(d,m,!0,g)}),e}function AT(s){let e=s.split("/");if(e.length===0)return[];let[t,...a]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return o?[l,""]:[l];let d=AT(a.join("/")),m=[];return m.push(...d.map(g=>g===""?l:[l,g].join("/"))),o&&m.push(...d),m.map(g=>s.startsWith("/")&&g===""?"/":g)}function JI(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:o2(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var e2=/^:[\w-]+$/,t2=3,n2=2,s2=1,i2=10,a2=-2,Tb=s=>s==="*";function r2(s,e){let t=s.split("/"),a=t.length;return t.some(Tb)&&(a+=a2),e&&(a+=n2),t.filter(o=>!Tb(o)).reduce((o,l)=>o+(e2.test(l)?t2:l===""?s2:i2),a)}function o2(s,e){return s.length===e.length&&s.slice(0,-1).every((a,o)=>a===e[o])?s[s.length-1]-e[e.length-1]:0}function l2(s,e,t=!1){let{routesMeta:a}=s,o={},l="/",d=[];for(let m=0;m<a.length;++m){let g=a[m],_=m===a.length-1,y=l==="/"?e:e.slice(l.length)||"/",b=ff({path:g.relativePath,caseSensitive:g.caseSensitive,end:_},y),S=g.route;if(!b&&_&&t&&!a[a.length-1].route.index&&(b=ff({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},y)),!b)return null;Object.assign(o,b.params),d.push({params:o,pathname:oa([l,b.pathname]),pathnameBase:m2(oa([l,b.pathnameBase])),route:S}),b.pathnameBase!=="/"&&(l=oa([l,b.pathnameBase]))}return d}function ff(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,a]=c2(s.path,s.caseSensitive,s.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:a.reduce((_,{paramName:y,isOptional:b},S)=>{if(y==="*"){let z=m[S]||"";d=l.slice(0,l.length-z.length).replace(/(.)\/+$/,"$1")}const N=m[S];return b&&!N?_[y]=void 0:_[y]=(N||"").replace(/%2F/g,"/"),_},{}),pathname:l,pathnameBase:d,pattern:s}}function c2(s,e=!1,t=!0){_s(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,g)=>(a.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function u2(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _s(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function da(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=s.charAt(t);return a&&a!=="/"?null:s.slice(t)||"/"}var d2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function h2(s,e="/"){let{pathname:t,search:a="",hash:o=""}=typeof s=="string"?Co(s):s,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=Sb(t.substring(1),"/"):l=Sb(t,e)):l=e,{pathname:l,search:p2(a),hash:g2(o)}}function Sb(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Eg(s,e,t,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function f2(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function x_(s){let e=f2(s);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function w_(s,e,t,a=!1){let o;typeof s=="string"?o=Co(s):(o={...s},Ct(!o.pathname||!o.pathname.includes("?"),Eg("?","pathname","search",o)),Ct(!o.pathname||!o.pathname.includes("#"),Eg("#","pathname","hash",o)),Ct(!o.search||!o.search.includes("#"),Eg("#","search","hash",o)));let l=s===""||o.pathname==="",d=l?"/":o.pathname,m;if(d==null)m=t;else{let b=e.length-1;if(!a&&d.startsWith("..")){let S=d.split("/");for(;S[0]==="..";)S.shift(),b-=1;o.pathname=S.join("/")}m=b>=0?e[b]:"/"}let g=h2(o,m),_=d&&d!=="/"&&d.endsWith("/"),y=(l||d===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(_||y)&&(g.pathname+="/"),g}var oa=s=>s.join("/").replace(/\/\/+/g,"/"),m2=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),p2=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,g2=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,_2=class{constructor(s,e,t,a=!1){this.status=s,this.statusText=e||"",this.internal=a,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function y2(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function v2(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var xT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function wT(s,e){let t=s;if(typeof t!="string"||!d2.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let a=t,o=!1;if(xT)try{let l=new URL(window.location.href),d=t.startsWith("//")?new URL(l.protocol+t):new URL(t),m=da(d.pathname,e);d.origin===l.origin&&m!=null?t=m+d.search+d.hash:o=!0}catch{_s(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:o,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var IT=["POST","PUT","PATCH","DELETE"];new Set(IT);var b2=["GET",...IT];new Set(b2);var Xl=w.createContext(null);Xl.displayName="DataRouter";var Pf=w.createContext(null);Pf.displayName="DataRouterState";var E2=w.createContext(!1),RT=w.createContext({isTransitioning:!1});RT.displayName="ViewTransition";var T2=w.createContext(new Map);T2.displayName="Fetchers";var S2=w.createContext(null);S2.displayName="Await";var vs=w.createContext(null);vs.displayName="Navigation";var Wu=w.createContext(null);Wu.displayName="Location";var zs=w.createContext({outlet:null,matches:[],isDataRoute:!1});zs.displayName="Route";var I_=w.createContext(null);I_.displayName="RouteError";var NT="REACT_ROUTER_ERROR",A2="REDIRECT",x2="ROUTE_ERROR_RESPONSE";function w2(s){if(s.startsWith(`${NT}:${A2}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function I2(s){if(s.startsWith(`${NT}:${x2}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new _2(e.status,e.statusText,e.data)}catch{}}function R2(s,{relative:e}={}){Ct(Zl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=w.useContext(vs),{hash:o,pathname:l,search:d}=Zu(s,{relative:e}),m=l;return t!=="/"&&(m=l==="/"?t:oa([t,l])),a.createHref({pathname:m,search:d,hash:o})}function Zl(){return w.useContext(Wu)!=null}function ts(){return Ct(Zl(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Wu).location}var CT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kT(s){w.useContext(vs).static||w.useLayoutEffect(s)}function In(){let{isDataRoute:s}=w.useContext(zs);return s?H2():N2()}function N2(){Ct(Zl(),"useNavigate() may be used only in the context of a <Router> component.");let s=w.useContext(Xl),{basename:e,navigator:t}=w.useContext(vs),{matches:a}=w.useContext(zs),{pathname:o}=ts(),l=JSON.stringify(x_(a)),d=w.useRef(!1);return kT(()=>{d.current=!0}),w.useCallback((g,_={})=>{if(_s(d.current,CT),!d.current)return;if(typeof g=="number"){t.go(g);return}let y=w_(g,JSON.parse(l),o,_.relative==="path");s==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:oa([e,y.pathname])),(_.replace?t.replace:t.push)(y,_.state,_)},[e,t,l,o,s])}var C2=w.createContext(null);function k2(s){let e=w.useContext(zs).outlet;return w.useMemo(()=>e&&w.createElement(C2.Provider,{value:s},e),[e,s])}function Xu(){let{matches:s}=w.useContext(zs),e=s[s.length-1];return e?e.params:{}}function Zu(s,{relative:e}={}){let{matches:t}=w.useContext(zs),{pathname:a}=ts(),o=JSON.stringify(x_(t));return w.useMemo(()=>w_(s,JSON.parse(o),a,e==="path"),[s,o,a,e])}function j2(s,e){return jT(s,e)}function jT(s,e,t,a,o){Ct(Zl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=w.useContext(vs),{matches:d}=w.useContext(zs),m=d[d.length-1],g=m?m.params:{},_=m?m.pathname:"/",y=m?m.pathnameBase:"/",b=m&&m.route;{let q=b&&b.path||"";OT(_,!b||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let S=ts(),N;if(e){let q=typeof e=="string"?Co(e):e;Ct(y==="/"||q.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${q.pathname}" was given in the \`location\` prop.`),N=q}else N=S;let z=N.pathname||"/",V=z;if(y!=="/"){let q=y.replace(/^\//,"").split("/");V="/"+z.replace(/^\//,"").split("/").slice(q.length).join("/")}let k=TT(s,{pathname:V});_s(b||k!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),_s(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=L2(k&&k.map(q=>Object.assign({},q,{params:Object.assign({},g,q.params),pathname:oa([y,l.encodeLocation?l.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?y:oa([y,l.encodeLocation?l.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),d,t,a,o);return e&&H?w.createElement(Wu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},H):H}function D2(){let s=q2(),e=y2(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:l},"ErrorBoundary")," or"," ",w.createElement("code",{style:l},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),t?w.createElement("pre",{style:o},t):null,d)}var O2=w.createElement(D2,null),DT=class extends w.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=I2(s.digest);t&&(s=t)}let e=s!==void 0?w.createElement(zs.Provider,{value:this.props.routeContext},w.createElement(I_.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?w.createElement(M2,{error:s},e):e}};DT.contextType=E2;var Tg=new WeakMap;function M2({children:s,error:e}){let{basename:t}=w.useContext(vs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=w2(e.digest);if(a){let o=Tg.get(e);if(o)throw o;let l=wT(a.location,t);if(xT&&!Tg.get(e))if(l.isExternal||a.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:a.replace}));throw Tg.set(e,d),d}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return s}function z2({routeContext:s,match:e,children:t}){let a=w.useContext(Xl);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(zs.Provider,{value:s},t)}function L2(s,e=[],t=null,a=null,o=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let l=s,d=t?.errors;if(d!=null){let y=l.findIndex(b=>b.route.id&&d?.[b.route.id]!==void 0);Ct(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let m=!1,g=-1;if(t)for(let y=0;y<l.length;y++){let b=l[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(g=y),b.route.id){let{loaderData:S,errors:N}=t,z=b.route.loader&&!S.hasOwnProperty(b.route.id)&&(!N||N[b.route.id]===void 0);if(b.route.lazy||z){m=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}let _=t&&a?(y,b)=>{a(y,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:v2(t.matches),errorInfo:b})}:void 0;return l.reduceRight((y,b,S)=>{let N,z=!1,V=null,k=null;t&&(N=d&&b.route.id?d[b.route.id]:void 0,V=b.route.errorElement||O2,m&&(g<0&&S===0?(OT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),z=!0,k=null):g===S&&(z=!0,k=b.route.hydrateFallbackElement||null)));let H=e.concat(l.slice(0,S+1)),q=()=>{let G;return N?G=V:z?G=k:b.route.Component?G=w.createElement(b.route.Component,null):b.route.element?G=b.route.element:G=y,w.createElement(z2,{match:b,routeContext:{outlet:y,matches:H,isDataRoute:t!=null},children:G})};return t&&(b.route.ErrorBoundary||b.route.errorElement||S===0)?w.createElement(DT,{location:t.location,revalidation:t.revalidation,component:V,error:N,children:q(),routeContext:{outlet:null,matches:H,isDataRoute:!0},onError:_}):q()},null)}function R_(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function P2(s){let e=w.useContext(Xl);return Ct(e,R_(s)),e}function U2(s){let e=w.useContext(Pf);return Ct(e,R_(s)),e}function V2(s){let e=w.useContext(zs);return Ct(e,R_(s)),e}function N_(s){let e=V2(s),t=e.matches[e.matches.length-1];return Ct(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function B2(){return N_("useRouteId")}function q2(){let s=w.useContext(I_),e=U2("useRouteError"),t=N_("useRouteError");return s!==void 0?s:e.errors?.[t]}function H2(){let{router:s}=P2("useNavigate"),e=N_("useNavigate"),t=w.useRef(!1);return kT(()=>{t.current=!0}),w.useCallback(async(o,l={})=>{_s(t.current,CT),t.current&&(typeof o=="number"?await s.navigate(o):await s.navigate(o,{fromRouteId:e,...l}))},[s,e])}var Ab={};function OT(s,e,t){!e&&!Ab[s]&&(Ab[s]=!0,_s(!1,t))}w.memo($2);function $2({routes:s,future:e,state:t,onError:a}){return jT(s,void 0,t,a,e)}function mf({to:s,replace:e,state:t,relative:a}){Ct(Zl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=w.useContext(vs);_s(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=w.useContext(zs),{pathname:d}=ts(),m=In(),g=w_(s,x_(l),d,a==="path"),_=JSON.stringify(g);return w.useEffect(()=>{m(JSON.parse(_),{replace:e,state:t,relative:a})},[m,_,a,e,t]),null}function F2(s){return k2(s.context)}function zt(s){Ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function G2({basename:s="/",children:e=null,location:t,navigationType:a="POP",navigator:o,static:l=!1,unstable_useTransitions:d}){Ct(!Zl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=s.replace(/^\/*/,"/"),g=w.useMemo(()=>({basename:m,navigator:o,static:l,unstable_useTransitions:d,future:{}}),[m,o,l,d]);typeof t=="string"&&(t=Co(t));let{pathname:_="/",search:y="",hash:b="",state:S=null,key:N="default"}=t,z=w.useMemo(()=>{let V=da(_,m);return V==null?null:{location:{pathname:V,search:y,hash:b,state:S,key:N},navigationType:a}},[m,_,y,b,S,N,a]);return _s(z!=null,`<Router basename="${m}"> is not able to match the URL "${_}${y}${b}" because it does not start with the basename, so the <Router> won't render anything.`),z==null?null:w.createElement(vs.Provider,{value:g},w.createElement(Wu.Provider,{children:e,value:z}))}function Q2({children:s,location:e}){return j2($g(s),e)}function $g(s,e=[]){let t=[];return w.Children.forEach(s,(a,o)=>{if(!w.isValidElement(a))return;let l=[...e,o];if(a.type===w.Fragment){t.push.apply(t,$g(a.props.children,l));return}Ct(a.type===zt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ct(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=$g(a.props.children,l)),t.push(d)}),t}var ef="get",tf="application/x-www-form-urlencoded";function Uf(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function K2(s){return Uf(s)&&s.tagName.toLowerCase()==="button"}function Y2(s){return Uf(s)&&s.tagName.toLowerCase()==="form"}function W2(s){return Uf(s)&&s.tagName.toLowerCase()==="input"}function X2(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Z2(s,e){return s.button===0&&(!e||e==="_self")&&!X2(s)}function Fg(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let a=s[t];return e.concat(Array.isArray(a)?a.map(o=>[t,o]):[[t,a]])},[]))}function J2(s,e){let t=Fg(s);return e&&e.forEach((a,o)=>{t.has(o)||e.getAll(o).forEach(l=>{t.append(o,l)})}),t}var $h=null;function eR(){if($h===null)try{new FormData(document.createElement("form"),0),$h=!1}catch{$h=!0}return $h}var tR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sg(s){return s!=null&&!tR.has(s)?(_s(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${tf}"`),null):s}function nR(s,e){let t,a,o,l,d;if(Y2(s)){let m=s.getAttribute("action");a=m?da(m,e):null,t=s.getAttribute("method")||ef,o=Sg(s.getAttribute("enctype"))||tf,l=new FormData(s)}else if(K2(s)||W2(s)&&(s.type==="submit"||s.type==="image")){let m=s.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||m.getAttribute("action");if(a=g?da(g,e):null,t=s.getAttribute("formmethod")||m.getAttribute("method")||ef,o=Sg(s.getAttribute("formenctype"))||Sg(m.getAttribute("enctype"))||tf,l=new FormData(m,s),!eR()){let{name:_,type:y,value:b}=s;if(y==="image"){let S=_?`${_}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else _&&l.append(_,b)}}else{if(Uf(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ef,a=null,o=tf,d=s}return l&&o==="text/plain"&&(d=l,l=void 0),{action:a,method:t.toLowerCase(),encType:o,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function C_(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function sR(s,e,t,a){let o=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${a}`:o.pathname=`${o.pathname}.${a}`:o.pathname==="/"?o.pathname=`_root.${a}`:e&&da(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${a}`,o}async function iR(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aR(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function rR(s,e,t){let a=await Promise.all(s.map(async o=>{let l=e.routes[o.route.id];if(l){let d=await iR(l,t);return d.links?d.links():[]}return[]}));return uR(a.flat(1).filter(aR).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function xb(s,e,t,a,o,l){let d=(g,_)=>t[_]?g.route.id!==t[_].route.id:!0,m=(g,_)=>t[_].pathname!==g.pathname||t[_].route.path?.endsWith("*")&&t[_].params["*"]!==g.params["*"];return l==="assets"?e.filter((g,_)=>d(g,_)||m(g,_)):l==="data"?e.filter((g,_)=>{let y=a.routes[g.route.id];if(!y||!y.hasLoader)return!1;if(d(g,_)||m(g,_))return!0;if(g.route.shouldRevalidate){let b=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function oR(s,e,{includeHydrateFallback:t}={}){return lR(s.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function lR(s){return[...new Set(s)]}function cR(s){let e={},t=Object.keys(s).sort();for(let a of t)e[a]=s[a];return e}function uR(s,e){let t=new Set;return new Set(e),s.reduce((a,o)=>{let l=JSON.stringify(cR(o));return t.has(l)||(t.add(l),a.push({key:l,link:o})),a},[])}function MT(){let s=w.useContext(Xl);return C_(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function dR(){let s=w.useContext(Pf);return C_(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var k_=w.createContext(void 0);k_.displayName="FrameworkContext";function zT(){let s=w.useContext(k_);return C_(s,"You must render this element inside a <HydratedRouter> element"),s}function hR(s,e){let t=w.useContext(k_),[a,o]=w.useState(!1),[l,d]=w.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:_,onMouseLeave:y,onTouchStart:b}=e,S=w.useRef(null);w.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let V=H=>{H.forEach(q=>{d(q.isIntersecting)})},k=new IntersectionObserver(V,{threshold:.5});return S.current&&k.observe(S.current),()=>{k.disconnect()}}},[s]),w.useEffect(()=>{if(a){let V=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(V)}}},[a]);let N=()=>{o(!0)},z=()=>{o(!1),d(!1)};return t?s!=="intent"?[l,S,{}]:[l,S,{onFocus:_u(m,N),onBlur:_u(g,z),onMouseEnter:_u(_,N),onMouseLeave:_u(y,z),onTouchStart:_u(b,N)}]:[!1,S,{}]}function _u(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function fR({page:s,...e}){let{router:t}=MT(),a=w.useMemo(()=>TT(t.routes,s,t.basename),[t.routes,s,t.basename]);return a?w.createElement(pR,{page:s,matches:a,...e}):null}function mR(s){let{manifest:e,routeModules:t}=zT(),[a,o]=w.useState([]);return w.useEffect(()=>{let l=!1;return rR(s,e,t).then(d=>{l||o(d)}),()=>{l=!0}},[s,e,t]),a}function pR({page:s,matches:e,...t}){let a=ts(),{future:o,manifest:l,routeModules:d}=zT(),{basename:m}=MT(),{loaderData:g,matches:_}=dR(),y=w.useMemo(()=>xb(s,e,_,l,a,"data"),[s,e,_,l,a]),b=w.useMemo(()=>xb(s,e,_,l,a,"assets"),[s,e,_,l,a]),S=w.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let V=new Set,k=!1;if(e.forEach(q=>{let G=l.routes[q.route.id];!G||!G.hasLoader||(!y.some(O=>O.route.id===q.route.id)&&q.route.id in g&&d[q.route.id]?.shouldRevalidate||G.hasClientLoader?k=!0:V.add(q.route.id))}),V.size===0)return[];let H=sR(s,m,o.unstable_trailingSlashAwareDataRequests,"data");return k&&V.size>0&&H.searchParams.set("_routes",e.filter(q=>V.has(q.route.id)).map(q=>q.route.id).join(",")),[H.pathname+H.search]},[m,o.unstable_trailingSlashAwareDataRequests,g,a,l,y,e,s,d]),N=w.useMemo(()=>oR(b,l),[b,l]),z=mR(b);return w.createElement(w.Fragment,null,S.map(V=>w.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),N.map(V=>w.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),z.map(({key:V,link:k})=>w.createElement("link",{key:V,nonce:t.nonce,...k,crossOrigin:k.crossOrigin??t.crossOrigin})))}function gR(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var _R=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_R&&(window.__reactRouterVersion="7.13.0")}catch{}function yR({basename:s,children:e,unstable_useTransitions:t,window:a}){let o=w.useRef();o.current==null&&(o.current=KI({window:a,v5Compat:!0}));let l=o.current,[d,m]=w.useState({action:l.action,location:l.location}),g=w.useCallback(_=>{t===!1?m(_):w.startTransition(()=>m(_))},[t]);return w.useLayoutEffect(()=>l.listen(g),[l,g]),w.createElement(G2,{basename:s,children:e,location:d.location,navigationType:d.action,navigator:l,unstable_useTransitions:t})}var LT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,or=w.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:o,reloadDocument:l,replace:d,state:m,target:g,to:_,preventScrollReset:y,viewTransition:b,unstable_defaultShouldRevalidate:S,...N},z){let{basename:V,unstable_useTransitions:k}=w.useContext(vs),H=typeof _=="string"&&LT.test(_),q=wT(_,V);_=q.to;let G=R2(_,{relative:o}),[O,se,he]=hR(a,N),D=ER(_,{replace:d,state:m,target:g,preventScrollReset:y,relative:o,viewTransition:b,unstable_defaultShouldRevalidate:S,unstable_useTransitions:k});function I(P){e&&e(P),P.defaultPrevented||D(P)}let C=w.createElement("a",{...N,...he,href:q.absoluteURL||G,onClick:q.isExternal||l?e:I,ref:gR(z,se),target:g,"data-discover":!H&&t==="render"?"true":void 0});return O&&!H?w.createElement(w.Fragment,null,C,w.createElement(fR,{page:G})):C});or.displayName="Link";var PT=w.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:o=!1,style:l,to:d,viewTransition:m,children:g,..._},y){let b=Zu(d,{relative:_.relative}),S=ts(),N=w.useContext(Pf),{navigator:z,basename:V}=w.useContext(vs),k=N!=null&&IR(b)&&m===!0,H=z.encodeLocation?z.encodeLocation(b).pathname:b.pathname,q=S.pathname,G=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(q=q.toLowerCase(),G=G?G.toLowerCase():null,H=H.toLowerCase()),G&&V&&(G=da(G,V)||G);const O=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let se=q===H||!o&&q.startsWith(H)&&q.charAt(O)==="/",he=G!=null&&(G===H||!o&&G.startsWith(H)&&G.charAt(H.length)==="/"),D={isActive:se,isPending:he,isTransitioning:k},I=se?e:void 0,C;typeof a=="function"?C=a(D):C=[a,se?"active":null,he?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(D):l;return w.createElement(or,{..._,"aria-current":I,className:C,ref:y,style:P,to:d,viewTransition:m},typeof g=="function"?g(D):g)});PT.displayName="NavLink";var vR=w.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:o,state:l,method:d=ef,action:m,onSubmit:g,relative:_,preventScrollReset:y,viewTransition:b,unstable_defaultShouldRevalidate:S,...N},z)=>{let{unstable_useTransitions:V}=w.useContext(vs),k=xR(),H=wR(m,{relative:_}),q=d.toLowerCase()==="get"?"get":"post",G=typeof m=="string"&&LT.test(m),O=se=>{if(g&&g(se),se.defaultPrevented)return;se.preventDefault();let he=se.nativeEvent.submitter,D=he?.getAttribute("formmethod")||d,I=()=>k(he||se.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:o,state:l,relative:_,preventScrollReset:y,viewTransition:b,unstable_defaultShouldRevalidate:S});V&&t!==!1?w.startTransition(()=>I()):I()};return w.createElement("form",{ref:z,method:q,action:H,onSubmit:a?g:O,...N,"data-discover":!G&&s==="render"?"true":void 0})});vR.displayName="Form";function bR(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UT(s){let e=w.useContext(Xl);return Ct(e,bR(s)),e}function ER(s,{target:e,replace:t,state:a,preventScrollReset:o,relative:l,viewTransition:d,unstable_defaultShouldRevalidate:m,unstable_useTransitions:g}={}){let _=In(),y=ts(),b=Zu(s,{relative:l});return w.useCallback(S=>{if(Z2(S,e)){S.preventDefault();let N=t!==void 0?t:Ou(y)===Ou(b),z=()=>_(s,{replace:N,state:a,preventScrollReset:o,relative:l,viewTransition:d,unstable_defaultShouldRevalidate:m});g?w.startTransition(()=>z()):z()}},[y,_,b,t,a,e,s,o,l,d,m,g])}function TR(s){_s(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=w.useRef(Fg(s)),t=w.useRef(!1),a=ts(),o=w.useMemo(()=>J2(a.search,t.current?null:e.current),[a.search]),l=In(),d=w.useCallback((m,g)=>{const _=Fg(typeof m=="function"?m(new URLSearchParams(o)):m);t.current=!0,l("?"+_,g)},[l,o]);return[o,d]}var SR=0,AR=()=>`__${String(++SR)}__`;function xR(){let{router:s}=UT("useSubmit"),{basename:e}=w.useContext(vs),t=B2(),a=s.fetch,o=s.navigate;return w.useCallback(async(l,d={})=>{let{action:m,method:g,encType:_,formData:y,body:b}=nR(l,e);if(d.navigate===!1){let S=d.fetcherKey||AR();await a(S,t,d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:b,formMethod:d.method||g,formEncType:d.encType||_,flushSync:d.flushSync})}else await o(d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:b,formMethod:d.method||g,formEncType:d.encType||_,replace:d.replace,state:d.state,fromRouteId:t,flushSync:d.flushSync,viewTransition:d.viewTransition})},[a,o,e,t])}function wR(s,{relative:e}={}){let{basename:t}=w.useContext(vs),a=w.useContext(zs);Ct(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),l={...Zu(s||".",{relative:e})},d=ts();if(s==null){l.search=d.search;let m=new URLSearchParams(l.search),g=m.getAll("index");if(g.some(y=>y==="")){m.delete("index"),g.filter(b=>b).forEach(b=>m.append("index",b));let y=m.toString();l.search=y?`?${y}`:""}}return(!s||s===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:oa([t,l.pathname])),Ou(l)}function IR(s,{relative:e}={}){let t=w.useContext(RT);Ct(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=UT("useViewTransitionState"),o=Zu(s,{relative:e});if(!t.isTransitioning)return!1;let l=da(t.currentLocation.pathname,a)||t.currentLocation.pathname,d=da(t.nextLocation.pathname,a)||t.nextLocation.pathname;return ff(o.pathname,d)!=null||ff(o.pathname,l)!=null}var VT=ET();const RR=()=>{};var wb={};const BT=function(s){const e=[];let t=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},NR=function(s){const e=[];let t=0,a=0;for(;t<s.length;){const o=s[t++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const l=s[t++];e[a++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=s[t++],d=s[t++],m=s[t++],g=((o&7)<<18|(l&63)<<12|(d&63)<<6|m&63)-65536;e[a++]=String.fromCharCode(55296+(g>>10)),e[a++]=String.fromCharCode(56320+(g&1023))}else{const l=s[t++],d=s[t++];e[a++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},qT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const l=s[o],d=o+1<s.length,m=d?s[o+1]:0,g=o+2<s.length,_=g?s[o+2]:0,y=l>>2,b=(l&3)<<4|m>>4;let S=(m&15)<<2|_>>6,N=_&63;g||(N=64,d||(S=64)),a.push(t[y],t[b],t[S],t[N])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(BT(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):NR(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const l=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const _=o<s.length?t[s.charAt(o)]:64;++o;const b=o<s.length?t[s.charAt(o)]:64;if(++o,l==null||m==null||_==null||b==null)throw new CR;const S=l<<2|m>>4;if(a.push(S),_!==64){const N=m<<4&240|_>>2;if(a.push(N),b!==64){const z=_<<6&192|b;a.push(z)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class CR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kR=function(s){const e=BT(s);return qT.encodeByteArray(e,!0)},pf=function(s){return kR(s).replace(/\./g,"")},HT=function(s){try{return qT.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const DR=()=>jR().__FIREBASE_DEFAULTS__,OR=()=>{if(typeof process>"u"||typeof wb>"u")return;const s=wb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},MR=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&HT(s[1]);return e&&JSON.parse(e)},Vf=()=>{try{return RR()||DR()||OR()||MR()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},$T=s=>Vf()?.emulatorHosts?.[s],FT=s=>{const e=$T(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},GT=()=>Vf()?.config,QT=s=>Vf()?.[`_${s}`];class zR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}function Tr(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function j_(s){return(await fetch(s,{credentials:"include"})).ok}function KT(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...s};return[pf(JSON.stringify(t)),pf(JSON.stringify(d)),""].join(".")}const Iu={};function LR(){const s={prod:[],emulator:[]};for(const e of Object.keys(Iu))Iu[e]?s.emulator.push(e):s.prod.push(e);return s}function PR(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Ib=!1;function D_(s,e){if(typeof window>"u"||typeof document>"u"||!Tr(window.location.host)||Iu[s]===e||Iu[s]||Ib)return;Iu[s]=e;function t(S){return`__firebase__banner__${S}`}const a="__firebase__banner",l=LR().prod.length>0;function d(){const S=document.getElementById(a);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,N){S.setAttribute("width","24"),S.setAttribute("id",N),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function _(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Ib=!0,d()},S}function y(S,N){S.setAttribute("id",N),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function b(){const S=PR(a),N=t("text"),z=document.getElementById(N)||document.createElement("span"),V=t("learnmore"),k=document.getElementById(V)||document.createElement("a"),H=t("preprendIcon"),q=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const G=S.element;m(G),y(k,V);const O=_();g(q,H),G.append(q,z,k,O),document.body.appendChild(G)}l?(z.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ln())}function VR(){const s=Vf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qR(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function HR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $R(){const s=Ln();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function FR(){return!VR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GR(){try{return typeof indexedDB=="object"}catch{return!1}}function QR(){return new Promise((s,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const KR="FirebaseError";class Pi extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=KR,Object.setPrototypeOf(this,Pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ju.prototype.create)}}class Ju{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?YR(l,a):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Pi(o,m,a)}}function YR(s,e){return s.replace(WR,(t,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const WR=/\{\$([^}]+)}/g;function XR(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function yo(s,e){if(s===e)return!0;const t=Object.keys(s),a=Object.keys(e);for(const o of t){if(!a.includes(o))return!1;const l=s[o],d=e[o];if(Rb(l)&&Rb(d)){if(!yo(l,d))return!1}else if(l!==d)return!1}for(const o of a)if(!t.includes(o))return!1;return!0}function Rb(s){return s!==null&&typeof s=="object"}function ed(s){const e=[];for(const[t,a]of Object.entries(s))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function Eu(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,l]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Tu(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function ZR(s,e){const t=new JR(s,e);return t.subscribe.bind(t)}class JR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let o;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");eN(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:a},o.next===void 0&&(o.next=Ag),o.error===void 0&&(o.error=Ag),o.complete===void 0&&(o.complete=Ag);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eN(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Ag(){}function kt(s){return s&&s._delegate?s._delegate:s}class hr{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const co="[DEFAULT]";class tN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new zR;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sN(e))try{this.getOrInitializeService({instanceIdentifier:co})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});a.resolve(l)}catch{}}}}clearInstance(e=co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=co){return this.instances.has(e)}getOptions(e=co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);a===m&&d.resolve(o)}return o}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const l=this.instances.get(a);return l&&e(l,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const o of a)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:nN(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=co){return this.component?this.component.multipleInstances?e:co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nN(s){return s===co?void 0:s}function sN(s){return s.instantiationMode==="EAGER"}class iN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var et;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(et||(et={}));const aN={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},rN=et.INFO,oN={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},lN=(s,e,...t)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=oN[e];if(o)console[o](`[${a}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class O_{constructor(e){this.name=e,this._logLevel=rN,this._logHandler=lN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const cN=(s,e)=>e.some(t=>s instanceof t);let Nb,Cb;function uN(){return Nb||(Nb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dN(){return Cb||(Cb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YT=new WeakMap,Gg=new WeakMap,WT=new WeakMap,xg=new WeakMap,M_=new WeakMap;function hN(s){const e=new Promise((t,a)=>{const o=()=>{s.removeEventListener("success",l),s.removeEventListener("error",d)},l=()=>{t(lr(s.result)),o()},d=()=>{a(s.error),o()};s.addEventListener("success",l),s.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&YT.set(t,s)}).catch(()=>{}),M_.set(e,s),e}function fN(s){if(Gg.has(s))return;const e=new Promise((t,a)=>{const o=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",d),s.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",l),s.addEventListener("error",d),s.addEventListener("abort",d)});Gg.set(s,e)}let Qg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Gg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||WT.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return lr(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function mN(s){Qg=s(Qg)}function pN(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=s.call(wg(this),e,...t);return WT.set(a,e.sort?e.sort():[e]),lr(a)}:dN().includes(s)?function(...e){return s.apply(wg(this),e),lr(YT.get(this))}:function(...e){return lr(s.apply(wg(this),e))}}function gN(s){return typeof s=="function"?pN(s):(s instanceof IDBTransaction&&fN(s),cN(s,uN())?new Proxy(s,Qg):s)}function lr(s){if(s instanceof IDBRequest)return hN(s);if(xg.has(s))return xg.get(s);const e=gN(s);return e!==s&&(xg.set(s,e),M_.set(e,s)),e}const wg=s=>M_.get(s);function _N(s,e,{blocked:t,upgrade:a,blocking:o,terminated:l}={}){const d=indexedDB.open(s,e),m=lr(d);return a&&d.addEventListener("upgradeneeded",g=>{a(lr(d.result),g.oldVersion,g.newVersion,lr(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const yN=["get","getKey","getAll","getAllKeys","count"],vN=["put","add","delete","clear"],Ig=new Map;function kb(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Ig.get(e))return Ig.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,o=vN.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(o||yN.includes(t)))return;const l=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let _=g.store;return a&&(_=_.index(m.shift())),(await Promise.all([_[t](...m),o&&g.done]))[0]};return Ig.set(e,l),l}mN(s=>({...s,get:(e,t,a)=>kb(e,t)||s.get(e,t,a),has:(e,t)=>!!kb(e,t)||s.has(e,t)}));class bN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(EN(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function EN(s){return s.getComponent()?.type==="VERSION"}const Kg="@firebase/app",jb="0.14.8";const ha=new O_("@firebase/app"),TN="@firebase/app-compat",SN="@firebase/analytics-compat",AN="@firebase/analytics",xN="@firebase/app-check-compat",wN="@firebase/app-check",IN="@firebase/auth",RN="@firebase/auth-compat",NN="@firebase/database",CN="@firebase/data-connect",kN="@firebase/database-compat",jN="@firebase/functions",DN="@firebase/functions-compat",ON="@firebase/installations",MN="@firebase/installations-compat",zN="@firebase/messaging",LN="@firebase/messaging-compat",PN="@firebase/performance",UN="@firebase/performance-compat",VN="@firebase/remote-config",BN="@firebase/remote-config-compat",qN="@firebase/storage",HN="@firebase/storage-compat",$N="@firebase/firestore",FN="@firebase/ai",GN="@firebase/firestore-compat",QN="firebase",KN="12.9.0";const Yg="[DEFAULT]",YN={[Kg]:"fire-core",[TN]:"fire-core-compat",[AN]:"fire-analytics",[SN]:"fire-analytics-compat",[wN]:"fire-app-check",[xN]:"fire-app-check-compat",[IN]:"fire-auth",[RN]:"fire-auth-compat",[NN]:"fire-rtdb",[CN]:"fire-data-connect",[kN]:"fire-rtdb-compat",[jN]:"fire-fn",[DN]:"fire-fn-compat",[ON]:"fire-iid",[MN]:"fire-iid-compat",[zN]:"fire-fcm",[LN]:"fire-fcm-compat",[PN]:"fire-perf",[UN]:"fire-perf-compat",[VN]:"fire-rc",[BN]:"fire-rc-compat",[qN]:"fire-gcs",[HN]:"fire-gcs-compat",[$N]:"fire-fst",[GN]:"fire-fst-compat",[FN]:"fire-vertex","fire-js":"fire-js",[QN]:"fire-js-all"};const gf=new Map,WN=new Map,Wg=new Map;function Db(s,e){try{s.container.addComponent(e)}catch(t){ha.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function vo(s){const e=s.name;if(Wg.has(e))return ha.debug(`There were multiple attempts to register component ${e}.`),!1;Wg.set(e,s);for(const t of gf.values())Db(t,s);for(const t of WN.values())Db(t,s);return!0}function Bf(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function fs(s){return s==null?!1:s.settings!==void 0}const XN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cr=new Ju("app","Firebase",XN);class ZN{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}const ko=KN;function XT(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const a={name:Yg,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw cr.create("bad-app-name",{appName:String(o)});if(t||(t=GT()),!t)throw cr.create("no-options");const l=gf.get(o);if(l){if(yo(t,l.options)&&yo(a,l.config))return l;throw cr.create("duplicate-app",{appName:o})}const d=new iN(o);for(const g of Wg.values())d.addComponent(g);const m=new ZN(t,a,d);return gf.set(o,m),m}function z_(s=Yg){const e=gf.get(s);if(!e&&s===Yg&&GT())return XT();if(!e)throw cr.create("no-app",{appName:s});return e}function Ni(s,e,t){let a=YN[s]??s;t&&(a+=`-${t}`);const o=a.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const d=[`Unable to register library "${a}" with version "${e}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ha.warn(d.join(" "));return}vo(new hr(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const JN="firebase-heartbeat-database",eC=1,Mu="firebase-heartbeat-store";let Rg=null;function ZT(){return Rg||(Rg=_N(JN,eC,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Mu)}catch(t){console.warn(t)}}}}).catch(s=>{throw cr.create("idb-open",{originalErrorMessage:s.message})})),Rg}async function tC(s){try{const t=(await ZT()).transaction(Mu),a=await t.objectStore(Mu).get(JT(s));return await t.done,a}catch(e){if(e instanceof Pi)ha.warn(e.message);else{const t=cr.create("idb-get",{originalErrorMessage:e?.message});ha.warn(t.message)}}}async function Ob(s,e){try{const a=(await ZT()).transaction(Mu,"readwrite");await a.objectStore(Mu).put(e,JT(s)),await a.done}catch(t){if(t instanceof Pi)ha.warn(t.message);else{const a=cr.create("idb-set",{originalErrorMessage:t?.message});ha.warn(a.message)}}}function JT(s){return`${s.name}!${s.options.appId}`}const nC=1024,sC=30;class iC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rC(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Mb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:t}),this._heartbeatsCache.heartbeats.length>sC){const o=oC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ha.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Mb(),{heartbeatsToSend:t,unsentEntries:a}=aC(this._heartbeatsCache.heartbeats),o=pf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ha.warn(e),""}}}function Mb(){return new Date().toISOString().substring(0,10)}function aC(s,e=nC){const t=[];let a=s.slice();for(const o of s){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),zb(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),zb(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class rC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GR()?QR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Ob(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Ob(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function zb(s){return pf(JSON.stringify({version:2,heartbeats:s})).length}function oC(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let a=1;a<s.length;a++)s[a].date<t&&(t=s[a].date,e=a);return e}function lC(s){vo(new hr("platform-logger",e=>new bN(e),"PRIVATE")),vo(new hr("heartbeat",e=>new iC(e),"PRIVATE")),Ni(Kg,jb,s),Ni(Kg,jb,"esm2020"),Ni("fire-js","")}lC("");function eS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cC=eS,tS=new Ju("auth","Firebase",eS());const _f=new O_("@firebase/auth");function uC(s,...e){_f.logLevel<=et.WARN&&_f.warn(`Auth (${ko}): ${s}`,...e)}function nf(s,...e){_f.logLevel<=et.ERROR&&_f.error(`Auth (${ko}): ${s}`,...e)}function Js(s,...e){throw L_(s,...e)}function Ci(s,...e){return L_(s,...e)}function nS(s,e,t){const a={...cC(),[e]:t};return new Ju("auth","Firebase",a).create(e,{appName:s.name})}function la(s){return nS(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function L_(s,...e){if(typeof s!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(t,...a)}return tS.create(s,...e)}function Ue(s,e,...t){if(!s)throw L_(e,...t)}function aa(s){const e="INTERNAL ASSERTION FAILED: "+s;throw nf(e),new Error(e)}function fa(s,e){s||aa(e)}function Xg(){return typeof self<"u"&&self.location?.href||""}function dC(){return Lb()==="http:"||Lb()==="https:"}function Lb(){return typeof self<"u"&&self.location?.protocol||null}function hC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dC()||qR()||"connection"in navigator)?navigator.onLine:!0}function fC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class td{constructor(e,t){this.shortDelay=e,this.longDelay=t,fa(t>e,"Short delay should be less than long delay!"),this.isMobile=UR()||HR()}get(){return hC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function P_(s,e){fa(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class sS{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const pC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gC=new td(3e4,6e4);function Sr(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ar(s,e,t,a,o={}){return iS(s,o,async()=>{let l={},d={};a&&(e==="GET"?d=a:l={body:JSON.stringify(a)});const m=ed({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const _={method:e,headers:g,...l};return BR()||(_.referrerPolicy="no-referrer"),s.emulatorConfig&&Tr(s.emulatorConfig.host)&&(_.credentials="include"),sS.fetch()(await aS(s,s.config.apiHost,t,m),_)})}async function iS(s,e,t){s._canInitEmulator=!1;const a={...mC,...e};try{const o=new yC(s),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Fh(s,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const m=l.ok?d.errorMessage:d.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fh(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Fh(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw Fh(s,"user-disabled",d);const y=a[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw nS(s,y,_);Js(s,y)}}catch(o){if(o instanceof Pi)throw o;Js(s,"network-request-failed",{message:String(o)})}}async function nd(s,e,t,a,o={}){const l=await Ar(s,e,t,a,o);return"mfaPendingCredential"in l&&Js(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function aS(s,e,t,a){const o=`${e}${t}?${a}`,l=s,d=l.config.emulator?P_(s.config,o):`${s.config.apiScheme}://${o}`;return pC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function _C(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(Ci(this.auth,"network-request-failed")),gC.get())})}}function Fh(s,e,t){const a={appName:s.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const o=Ci(s,e,a);return o.customData._tokenResponse=t,o}function Pb(s){return s!==void 0&&s.enterprise!==void 0}class vC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _C(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bC(s,e){return Ar(s,"GET","/v2/recaptchaConfig",Sr(s,e))}async function EC(s,e){return Ar(s,"POST","/v1/accounts:delete",e)}async function yf(s,e){return Ar(s,"POST","/v1/accounts:lookup",e)}function Ru(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TC(s,e=!1){const t=kt(s),a=await t.getIdToken(e),o=U_(a);Ue(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l?.sign_in_provider;return{claims:o,token:a,authTime:Ru(Ng(o.auth_time)),issuedAtTime:Ru(Ng(o.iat)),expirationTime:Ru(Ng(o.exp)),signInProvider:d||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Ng(s){return Number(s)*1e3}function U_(s){const[e,t,a]=s.split(".");if(e===void 0||t===void 0||a===void 0)return nf("JWT malformed, contained fewer than 3 sections"),null;try{const o=HT(t);return o?JSON.parse(o):(nf("Failed to decode base64 JWT payload"),null)}catch(o){return nf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Ub(s){const e=U_(s);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function zu(s,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof Pi&&SC(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function SC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class AC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Zg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ru(this.lastLoginAt),this.creationTime=Ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function vf(s){const e=s.auth,t=await s.getIdToken(),a=await zu(s,yf(e,{idToken:t}));Ue(a?.users.length,e,"internal-error");const o=a.users[0];s._notifyReloadListener(o);const l=o.providerUserInfo?.length?rS(o.providerUserInfo):[],d=wC(s.providerData,l),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!d?.length,_=m?g:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Zg(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(s,y)}async function xC(s){const e=kt(s);await vf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wC(s,e){return[...s.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function rS(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function IC(s,e){const t=await iS(s,{},async()=>{const a=ed({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=s.config,d=await aS(s,o,"/v1/token",`key=${l}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:a};return s.emulatorConfig&&Tr(s.emulatorConfig.host)&&(g.credentials="include"),sS.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RC(s,e){return Ar(s,"POST","/v2/accounts:revokeToken",Sr(s,e))}class zl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ub(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const t=Ub(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:o,expiresIn:l}=await IC(e,t);this.updateTokensAndExpiration(a,o,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:o,expirationTime:l}=t,d=new zl;return a&&(Ue(typeof a=="string","internal-error",{appName:e}),d.refreshToken=a),o&&(Ue(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(Ue(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zl,this.toJSON())}_performRefresh(){return aa("not implemented")}}function Wa(s,e){Ue(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Xs{constructor({uid:e,auth:t,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new AC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Zg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await zu(this,this.stsTokenManager.getToken(this.auth,e));return Ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return TC(this,e)}reload(){return xC(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await vf(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fs(this.auth.app))return Promise.reject(la(this.auth));const e=await this.getIdToken();return await zu(this,EC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,d=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,_=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:b,emailVerified:S,isAnonymous:N,providerData:z,stsTokenManager:V}=t;Ue(b&&V,e,"internal-error");const k=zl.fromJSON(this.name,V);Ue(typeof b=="string",e,"internal-error"),Wa(a,e.name),Wa(o,e.name),Ue(typeof S=="boolean",e,"internal-error"),Ue(typeof N=="boolean",e,"internal-error"),Wa(l,e.name),Wa(d,e.name),Wa(m,e.name),Wa(g,e.name),Wa(_,e.name),Wa(y,e.name);const H=new Xs({uid:b,auth:e,email:o,emailVerified:S,displayName:a,isAnonymous:N,photoURL:d,phoneNumber:l,tenantId:m,stsTokenManager:k,createdAt:_,lastLoginAt:y});return z&&Array.isArray(z)&&(H.providerData=z.map(q=>({...q}))),g&&(H._redirectEventId=g),H}static async _fromIdTokenResponse(e,t,a=!1){const o=new zl;o.updateFromServerResponse(t);const l=new Xs({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await vf(l),l}static async _fromGetAccountInfoResponse(e,t,a){const o=t.users[0];Ue(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?rS(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!l?.length,m=new zl;m.updateFromIdToken(a);const g=new Xs({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Zg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,_),g}}const Vb=new Map;function ra(s){fa(s instanceof Function,"Expected a class definition");let e=Vb.get(s);return e?(fa(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Vb.set(s,e),e)}class oS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}oS.type="NONE";const Bb=oS;function sf(s,e,t){return`firebase:${s}:${e}:${t}`}class Ll{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:o,name:l}=this.auth;this.fullUserKey=sf(this.userKey,o.apiKey,l),this.fullPersistenceKey=sf("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await yf(this.auth,{idToken:e}).catch(()=>{});return t?Xs._fromGetAccountInfoResponse(this.auth,t,e):null}return Xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new Ll(ra(Bb),e,a);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let l=o[0]||ra(Bb);const d=sf(a,e.config.apiKey,e.name);let m=null;for(const _ of t)try{const y=await _._get(d);if(y){let b;if(typeof y=="string"){const S=await yf(e,{idToken:y}).catch(()=>{});if(!S)break;b=await Xs._fromGetAccountInfoResponse(e,S,y)}else b=Xs._fromJSON(e,y);_!==l&&(m=b),l=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Ll(l,e,a):(l=g[0],m&&await l._set(d,m.toJSON()),await Promise.all(t.map(async _=>{if(_!==l)try{await _._remove(d)}catch{}})),new Ll(l,e,a))}}function qb(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fS(e))return"Blackberry";if(mS(e))return"Webos";if(cS(e))return"Safari";if((e.includes("chrome/")||uS(e))&&!e.includes("edge/"))return"Chrome";if(hS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(t);if(a?.length===2)return a[1]}return"Other"}function lS(s=Ln()){return/firefox\//i.test(s)}function cS(s=Ln()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uS(s=Ln()){return/crios\//i.test(s)}function dS(s=Ln()){return/iemobile/i.test(s)}function hS(s=Ln()){return/android/i.test(s)}function fS(s=Ln()){return/blackberry/i.test(s)}function mS(s=Ln()){return/webos/i.test(s)}function V_(s=Ln()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function NC(s=Ln()){return V_(s)&&!!window.navigator?.standalone}function CC(){return $R()&&document.documentMode===10}function pS(s=Ln()){return V_(s)||hS(s)||mS(s)||fS(s)||/windows phone/i.test(s)||dS(s)}function gS(s,e=[]){let t;switch(s){case"Browser":t=qb(Ln());break;case"Worker":t=`${qb(Ln())}-${s}`;break;default:t=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ko}/${a}`}class kC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((d,m)=>{try{const g=e(l);d(g)}catch(g){m(g)}});a.onAbort=t,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function jC(s,e={}){return Ar(s,"GET","/v2/passwordPolicy",Sr(s,e))}const DC=6;class OC{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??DC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class MC{constructor(e,t,a,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hb(this),this.idTokenSubscription=new Hb(this),this.beforeStateQueue=new kC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ra(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ll.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yf(this,{idToken:e}),a=await Xs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(fs(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,d=a?._redirectEventId,m=await this.tryRedirectSignIn(e);(!l||l===d)&&m?.user&&(a=m.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(l){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fs(this.app))return Promise.reject(la(this));const t=e?kt(e):null;return t&&Ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fs(this.app)?Promise.reject(la(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fs(this.app)?Promise.reject(la(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ra(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jC(this),t=new OC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ju("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await RC(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ra(e)||this._popupRedirectResolver;Ue(t,this,"argument-error"),this.redirectPersistenceManager=await Ll.create(this,[ra(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(m,this,"internal-error"),m.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,a,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(fs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&uC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function jo(s){return kt(s)}class Hb{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZR(t=>this.observer=t)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let qf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zC(s){qf=s}function _S(s){return qf.loadJS(s)}function LC(){return qf.recaptchaEnterpriseScript}function PC(){return qf.gapiScript}function UC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class VC{constructor(){this.enterprise=new BC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class BC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const qC="recaptcha-enterprise",yS="NO_RECAPTCHA";class HC{constructor(e){this.type=qC,this.auth=jo(e)}async verify(e="verify",t=!1){async function a(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,m)=>{bC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new vC(g);return l.tenantId==null?l._agentRecaptchaConfig=_:l._tenantRecaptchaConfigs[l.tenantId]=_,d(_.siteKey)}}).catch(g=>{m(g)})})}function o(l,d,m){const g=window.grecaptcha;Pb(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(_=>{d(_)}).catch(()=>{d(yS)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new VC().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{a(this.auth).then(m=>{if(!t&&Pb(window.grecaptcha))o(m,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=LC();g.length!==0&&(g+=m),_S(g).then(()=>{o(m,l,d)}).catch(_=>{d(_)})}}).catch(m=>{d(m)})})}}async function $b(s,e,t,a=!1,o=!1){const l=new HC(s);let d;if(o)d=yS;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return a?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Jg(s,e,t,a,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await $b(s,e,t,t==="getOobCode");return a(s,l)}else return a(s,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await $b(s,e,t,t==="getOobCode");return a(s,d)}else return Promise.reject(l)})}function $C(s,e){const t=Bf(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(yo(l,e??{}))return o;Js(o,"already-initialized")}return t.initialize({options:e})}function FC(s,e){const t=e?.persistence||[],a=(Array.isArray(t)?t:[t]).map(ra);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e?.popupRedirectResolver)}function GC(s,e,t){const a=jo(s);Ue(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,l=vS(e),{host:d,port:m}=QC(e),g=m===null?"":`:${m}`,_={url:`${l}//${d}${g}/`},y=Object.freeze({host:d,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){Ue(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Ue(yo(_,a.config.emulator)&&yo(y,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=_,a.emulatorConfig=y,a.settings.appVerificationDisabledForTesting=!0,Tr(d)?(j_(`${l}//${d}${g}`),D_("Auth",!0)):KC()}function vS(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function QC(s){const e=vS(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const l=o[1];return{host:l,port:Fb(a.substr(l.length+1))}}else{const[l,d]=a.split(":");return{host:l,port:Fb(d)}}}function Fb(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function KC(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class B_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return aa("not implemented")}_getIdTokenResponse(e){return aa("not implemented")}_linkToIdToken(e,t){return aa("not implemented")}_getReauthenticationResolver(e){return aa("not implemented")}}async function YC(s,e){return Ar(s,"POST","/v1/accounts:signUp",e)}async function WC(s,e){return nd(s,"POST","/v1/accounts:signInWithPassword",Sr(s,e))}async function XC(s,e){return nd(s,"POST","/v1/accounts:signInWithEmailLink",Sr(s,e))}async function ZC(s,e){return nd(s,"POST","/v1/accounts:signInWithEmailLink",Sr(s,e))}class Lu extends B_{constructor(e,t,a,o=null){super("password",a),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Lu(e,t,"password")}static _fromEmailAndCode(e,t,a=null){return new Lu(e,t,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jg(e,t,"signInWithPassword",WC);case"emailLink":return XC(e,{email:this._email,oobCode:this._password});default:Js(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const a={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jg(e,a,"signUpPassword",YC);case"emailLink":return ZC(e,{idToken:t,email:this._email,oobCode:this._password});default:Js(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Pl(s,e){return nd(s,"POST","/v1/accounts:signInWithIdp",Sr(s,e))}const JC="http://localhost";class bo extends B_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new bo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Js("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...l}=t;if(!a||!o)return null;const d=new bo(a,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Pl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Pl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Pl(e,t)}buildRequest(){const e={requestUri:JC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ed(t)}return e}}function ek(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tk(s){const e=Eu(Tu(s)).link,t=e?Eu(Tu(e)).deep_link_id:null,a=Eu(Tu(s)).deep_link_id;return(a?Eu(Tu(a)).link:null)||a||t||e||s}class q_{constructor(e){const t=Eu(Tu(e)),a=t.apiKey??null,o=t.oobCode??null,l=ek(t.mode??null);Ue(a&&o&&l,"argument-error"),this.apiKey=a,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=tk(e);try{return new q_(t)}catch{return null}}}class Jl{constructor(){this.providerId=Jl.PROVIDER_ID}static credential(e,t){return Lu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const a=q_.parseLink(t);return Ue(a,"argument-error"),Lu._fromEmailAndCode(e,a.code,a.tenantId)}}Jl.PROVIDER_ID="password";Jl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Jl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class bS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class sd extends bS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ja extends sd{constructor(){super("facebook.com")}static credential(e){return bo._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ja.credentialFromTaggedObject(e)}static credentialFromError(e){return Ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ja.credential(e.oauthAccessToken)}catch{return null}}}Ja.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ja.PROVIDER_ID="facebook.com";class er extends sd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return bo._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return er.credential(t,a)}catch{return null}}}er.GOOGLE_SIGN_IN_METHOD="google.com";er.PROVIDER_ID="google.com";class tr extends sd{constructor(){super("github.com")}static credential(e){return bo._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.GITHUB_SIGN_IN_METHOD="github.com";tr.PROVIDER_ID="github.com";class nr extends sd{constructor(){super("twitter.com")}static credential(e,t){return bo._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return nr.credential(t,a)}catch{return null}}}nr.TWITTER_SIGN_IN_METHOD="twitter.com";nr.PROVIDER_ID="twitter.com";async function nk(s,e){return nd(s,"POST","/v1/accounts:signUp",Sr(s,e))}class Eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,o=!1){const l=await Xs._fromIdTokenResponse(e,a,o),d=Gb(a);return new Eo({user:l,providerId:d,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const o=Gb(a);return new Eo({user:e,providerId:o,_tokenResponse:a,operationType:t})}}function Gb(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class bf extends Pi{constructor(e,t,a,o){super(t.code,t.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,bf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,o){return new bf(e,t,a,o)}}function ES(s,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?bf._fromErrorAndOperation(s,l,e,a):l})}async function sk(s,e,t=!1){const a=await zu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Eo._forOperation(s,"link",a)}async function ik(s,e,t=!1){const{auth:a}=s;if(fs(a.app))return Promise.reject(la(a));const o="reauthenticate";try{const l=await zu(s,ES(a,o,e,s),t);Ue(l.idToken,a,"internal-error");const d=U_(l.idToken);Ue(d,a,"internal-error");const{sub:m}=d;return Ue(s.uid===m,a,"user-mismatch"),Eo._forOperation(s,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Js(a,"user-mismatch"),l}}async function TS(s,e,t=!1){if(fs(s.app))return Promise.reject(la(s));const a="signIn",o=await ES(s,a,e),l=await Eo._fromIdTokenResponse(s,a,o);return t||await s._updateCurrentUser(l.user),l}async function ak(s,e){return TS(jo(s),e)}async function SS(s){const e=jo(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rk(s,e,t){if(fs(s.app))return Promise.reject(la(s));const a=jo(s),d=await Jg(a,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nk).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&SS(s),g}),m=await Eo._fromIdTokenResponse(a,"signIn",d);return await a._updateCurrentUser(m.user),m}function ok(s,e,t){return fs(s.app)?Promise.reject(la(s)):ak(kt(s),Jl.credential(e,t)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&SS(s),a})}function lk(s,e,t,a){return kt(s).onIdTokenChanged(e,t,a)}function ck(s,e,t){return kt(s).beforeAuthStateChanged(e,t)}function uk(s,e,t,a){return kt(s).onAuthStateChanged(e,t,a)}function dk(s){return kt(s).signOut()}const Ef="__sak";class AS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ef,"1"),this.storage.removeItem(Ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const hk=1e3,fk=10;class xS extends AS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),o=this.localCache[t];a!==o&&e(t,o,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const a=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(a);!t&&this.localCache[a]===d||this.notifyListeners(a,d)},l=this.storage.getItem(a);CC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,fk):o()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},hk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xS.type="LOCAL";const mk=xS;class wS extends AS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}wS.type="SESSION";const IS=wS;function pk(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Hf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const a=new Hf(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const m=Array.from(d).map(async _=>_(t.origin,l)),g=await pk(m);t.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hf.receivers=[];function H_(s="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return s+t}class gk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((m,g)=>{const _=H_("",20);o.port1.start();const y=setTimeout(()=>{g(new Error("unsupported_event"))},a);d={messageChannel:o,onMessage(b){const S=b;if(S.data.eventId===_)switch(S.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(S.data.response);break;default:clearTimeout(y),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ki(){return window}function _k(s){ki().location.href=s}function RS(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function yk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vk(){return navigator?.serviceWorker?.controller||null}function bk(){return RS()?self:null}const NS="firebaseLocalStorageDb",Ek=1,Tf="firebaseLocalStorage",CS="fbase_key";class id{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $f(s,e){return s.transaction([Tf],e?"readwrite":"readonly").objectStore(Tf)}function Tk(){const s=indexedDB.deleteDatabase(NS);return new id(s).toPromise()}function e_(){const s=indexedDB.open(NS,Ek);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(Tf,{keyPath:CS})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(Tf)?e(a):(a.close(),await Tk(),e(await e_()))})})}async function Qb(s,e,t){const a=$f(s,!0).put({[CS]:e,value:t});return new id(a).toPromise()}async function Sk(s,e){const t=$f(s,!1).get(e),a=await new id(t).toPromise();return a===void 0?null:a.value}function Kb(s,e){const t=$f(s,!0).delete(e);return new id(t).toPromise()}const Ak=800,xk=3;class kS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await e_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>xk)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hf._getInstance(bk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yk(),!this.activeServiceWorker)return;this.sender=new gk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await e_();return await Qb(e,Ef,"1"),await Kb(e,Ef),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>Qb(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>Sk(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Kb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=$f(o,!1).getAll();return new id(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ak)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kS.type="LOCAL";const wk=kS;new td(3e4,6e4);function Ik(s,e){return e?ra(e):(Ue(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class $_ extends B_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Pl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Pl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Rk(s){return TS(s.auth,new $_(s),s.bypassAuthState)}function Nk(s){const{auth:e,user:t}=s;return Ue(t,e,"internal-error"),ik(t,new $_(s),s.bypassAuthState)}async function Ck(s){const{auth:e,user:t}=s;return Ue(t,e,"internal-error"),sk(t,new $_(s),s.bypassAuthState)}class jS{constructor(e,t,a,o,l=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:o,tenantId:l,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Rk;case"linkViaPopup":case"linkViaRedirect":return Ck;case"reauthViaPopup":case"reauthViaRedirect":return Nk;default:Js(this.auth,"internal-error")}}resolve(e){fa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kk=new td(2e3,1e4);class Ol extends jS{constructor(e,t,a,o,l){super(e,t,o,l),this.provider=a,this.authWindow=null,this.pollId=null,Ol.currentPopupAction&&Ol.currentPopupAction.cancel(),Ol.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){fa(this.filter.length===1,"Popup operations only handle one event");const e=H_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ol.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kk.get())};e()}}Ol.currentPopupAction=null;const jk="pendingRedirect",af=new Map;class Dk extends jS{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=af.get(this.auth._key());if(!e){try{const a=await Ok(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}af.set(this.auth._key(),e)}return this.bypassAuthState||af.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ok(s,e){const t=Lk(e),a=zk(s);if(!await a._isAvailable())return!1;const o=await a._get(t)==="true";return await a._remove(t),o}function Mk(s,e){af.set(s._key(),e)}function zk(s){return ra(s._redirectPersistence)}function Lk(s){return sf(jk,s.config.apiKey,s.name)}async function Pk(s,e,t=!1){if(fs(s.app))return Promise.reject(la(s));const a=jo(s),o=Ik(a,e),d=await new Dk(a,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,e)),d}const Uk=600*1e3;class Vk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Bk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!DS(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ci(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Uk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yb(e))}saveEventToCache(e){this.cachedEventUids.add(Yb(e)),this.lastProcessedEventTime=Date.now()}}function Yb(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function DS({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function Bk(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DS(s);default:return!1}}async function qk(s,e={}){return Ar(s,"GET","/v1/projects",e)}const Hk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$k=/^https?/;async function Fk(s){if(s.config.emulator)return;const{authorizedDomains:e}=await qk(s);for(const t of e)try{if(Gk(t))return}catch{}Js(s,"unauthorized-domain")}function Gk(s){const e=Xg(),{protocol:t,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&a===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===a}if(!$k.test(t))return!1;if(Hk.test(s))return a===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}const Qk=new td(3e4,6e4);function Wb(){const s=ki().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function Kk(s){return new Promise((e,t)=>{function a(){Wb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wb(),t(Ci(s,"network-request-failed"))},timeout:Qk.get()})}if(ki().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ki().gapi?.load)a();else{const o=UC("iframefcb");return ki()[o]=()=>{gapi.load?a():t(Ci(s,"network-request-failed"))},_S(`${PC()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw rf=null,e})}let rf=null;function Yk(s){return rf=rf||Kk(s),rf}const Wk=new td(5e3,15e3),Xk="__/auth/iframe",Zk="emulator/auth/iframe",Jk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ej=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tj(s){const e=s.config;Ue(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?P_(e,Zk):`https://${s.config.authDomain}/${Xk}`,a={apiKey:e.apiKey,appName:s.name,v:ko},o=ej.get(s.config.apiHost);o&&(a.eid=o);const l=s._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${ed(a).slice(1)}`}async function nj(s){const e=await Yk(s),t=ki().gapi;return Ue(t,s,"internal-error"),e.open({where:document.body,url:tj(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jk,dontclear:!0},a=>new Promise(async(o,l)=>{await a.restyle({setHideOnLeave:!1});const d=Ci(s,"network-request-failed"),m=ki().setTimeout(()=>{l(d)},Wk.get());function g(){ki().clearTimeout(m),o(a)}a.ping(g).then(g,()=>{l(d)})}))}const sj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ij=500,aj=600,rj="_blank",oj="http://localhost";class Xb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lj(s,e,t,a=ij,o=aj){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let m="";const g={...sj,width:a.toString(),height:o.toString(),top:l,left:d},_=Ln().toLowerCase();t&&(m=uS(_)?rj:t),lS(_)&&(e=e||oj,g.scrollbars="yes");const y=Object.entries(g).reduce((S,[N,z])=>`${S}${N}=${z},`,"");if(NC(_)&&m!=="_self")return cj(e||"",m),new Xb(null);const b=window.open(e||"",m,y);Ue(b,s,"popup-blocked");try{b.focus()}catch{}return new Xb(b)}function cj(s,e){const t=document.createElement("a");t.href=s,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}const uj="__/auth/handler",dj="emulator/auth/handler",hj=encodeURIComponent("fac");async function Zb(s,e,t,a,o,l){Ue(s.config.authDomain,s,"auth-domain-config-required"),Ue(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:a,v:ko,eventId:o};if(e instanceof bS){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",XR(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,b]of Object.entries({}))d[y]=b}if(e instanceof sd){const y=e.getScopes().filter(b=>b!=="");y.length>0&&(d.scopes=y.join(","))}s.tenantId&&(d.tid=s.tenantId);const m=d;for(const y of Object.keys(m))m[y]===void 0&&delete m[y];const g=await s._getAppCheckToken(),_=g?`#${hj}=${encodeURIComponent(g)}`:"";return`${fj(s)}?${ed(m).slice(1)}${_}`}function fj({config:s}){return s.emulator?P_(s,dj):`https://${s.authDomain}/${uj}`}const Cg="webStorageSupport";class mj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IS,this._completeRedirectFn=Pk,this._overrideRedirectResult=Mk}async _openPopup(e,t,a,o){fa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Zb(e,t,a,Xg(),o);return lj(e,l,H_())}async _openRedirect(e,t,a,o){await this._originValidation(e);const l=await Zb(e,t,a,Xg(),o);return _k(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(fa(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await nj(e),a=new Vk(e);return t.register("authEvent",o=>(Ue(o?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cg,{type:Cg},o=>{const l=o?.[0]?.[Cg];l!==void 0&&t(!!l),Js(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Fk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pS()||cS()||V_()}}const pj=mj;var Jb="@firebase/auth",eE="1.12.0";class gj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function _j(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yj(s){vo(new hr("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=a.options;Ue(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const g={apiKey:d,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gS(s)},_=new MC(a,o,l,g);return FC(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),vo(new hr("auth-internal",e=>{const t=jo(e.getProvider("auth").getImmediate());return(a=>new gj(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ni(Jb,eE,_j(s)),Ni(Jb,eE,"esm2020")}const vj=300,bj=QT("authIdTokenMaxAge")||vj;let tE=null;const Ej=s=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>bj)return;const o=t?.token;tE!==o&&(tE=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Tj(s=z_()){const e=Bf(s,"auth");if(e.isInitialized())return e.getImmediate();const t=$C(s,{popupRedirectResolver:pj,persistence:[wk,mk,IS]}),a=QT("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const d=Ej(l.toString());ck(t,d,()=>d(t.currentUser)),lk(t,m=>d(m))}}const o=$T("auth");return o&&GC(t,`http://${o}`),t}function Sj(){return document.getElementsByTagName("head")?.[0]??document}zC({loadJS(s){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=o=>{const l=Ci("internal-error");l.customData=o,t(l)},a.type="text/javascript",a.charset="UTF-8",Sj().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yj("Browser");var nE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ur,OS;(function(){var s;function e(D,I){function C(){}C.prototype=I.prototype,D.F=I.prototype,D.prototype=new C,D.prototype.constructor=D,D.D=function(P,j,U){for(var A=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)A[pe-2]=arguments[pe];return I.prototype[j].apply(P,A)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,I,C){C||(C=0);const P=Array(16);if(typeof I=="string")for(var j=0;j<16;++j)P[j]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(j=0;j<16;++j)P[j]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=D.g[0],C=D.g[1],j=D.g[2];let U=D.g[3],A;A=I+(U^C&(j^U))+P[0]+3614090360&4294967295,I=C+(A<<7&4294967295|A>>>25),A=U+(j^I&(C^j))+P[1]+3905402710&4294967295,U=I+(A<<12&4294967295|A>>>20),A=j+(C^U&(I^C))+P[2]+606105819&4294967295,j=U+(A<<17&4294967295|A>>>15),A=C+(I^j&(U^I))+P[3]+3250441966&4294967295,C=j+(A<<22&4294967295|A>>>10),A=I+(U^C&(j^U))+P[4]+4118548399&4294967295,I=C+(A<<7&4294967295|A>>>25),A=U+(j^I&(C^j))+P[5]+1200080426&4294967295,U=I+(A<<12&4294967295|A>>>20),A=j+(C^U&(I^C))+P[6]+2821735955&4294967295,j=U+(A<<17&4294967295|A>>>15),A=C+(I^j&(U^I))+P[7]+4249261313&4294967295,C=j+(A<<22&4294967295|A>>>10),A=I+(U^C&(j^U))+P[8]+1770035416&4294967295,I=C+(A<<7&4294967295|A>>>25),A=U+(j^I&(C^j))+P[9]+2336552879&4294967295,U=I+(A<<12&4294967295|A>>>20),A=j+(C^U&(I^C))+P[10]+4294925233&4294967295,j=U+(A<<17&4294967295|A>>>15),A=C+(I^j&(U^I))+P[11]+2304563134&4294967295,C=j+(A<<22&4294967295|A>>>10),A=I+(U^C&(j^U))+P[12]+1804603682&4294967295,I=C+(A<<7&4294967295|A>>>25),A=U+(j^I&(C^j))+P[13]+4254626195&4294967295,U=I+(A<<12&4294967295|A>>>20),A=j+(C^U&(I^C))+P[14]+2792965006&4294967295,j=U+(A<<17&4294967295|A>>>15),A=C+(I^j&(U^I))+P[15]+1236535329&4294967295,C=j+(A<<22&4294967295|A>>>10),A=I+(j^U&(C^j))+P[1]+4129170786&4294967295,I=C+(A<<5&4294967295|A>>>27),A=U+(C^j&(I^C))+P[6]+3225465664&4294967295,U=I+(A<<9&4294967295|A>>>23),A=j+(I^C&(U^I))+P[11]+643717713&4294967295,j=U+(A<<14&4294967295|A>>>18),A=C+(U^I&(j^U))+P[0]+3921069994&4294967295,C=j+(A<<20&4294967295|A>>>12),A=I+(j^U&(C^j))+P[5]+3593408605&4294967295,I=C+(A<<5&4294967295|A>>>27),A=U+(C^j&(I^C))+P[10]+38016083&4294967295,U=I+(A<<9&4294967295|A>>>23),A=j+(I^C&(U^I))+P[15]+3634488961&4294967295,j=U+(A<<14&4294967295|A>>>18),A=C+(U^I&(j^U))+P[4]+3889429448&4294967295,C=j+(A<<20&4294967295|A>>>12),A=I+(j^U&(C^j))+P[9]+568446438&4294967295,I=C+(A<<5&4294967295|A>>>27),A=U+(C^j&(I^C))+P[14]+3275163606&4294967295,U=I+(A<<9&4294967295|A>>>23),A=j+(I^C&(U^I))+P[3]+4107603335&4294967295,j=U+(A<<14&4294967295|A>>>18),A=C+(U^I&(j^U))+P[8]+1163531501&4294967295,C=j+(A<<20&4294967295|A>>>12),A=I+(j^U&(C^j))+P[13]+2850285829&4294967295,I=C+(A<<5&4294967295|A>>>27),A=U+(C^j&(I^C))+P[2]+4243563512&4294967295,U=I+(A<<9&4294967295|A>>>23),A=j+(I^C&(U^I))+P[7]+1735328473&4294967295,j=U+(A<<14&4294967295|A>>>18),A=C+(U^I&(j^U))+P[12]+2368359562&4294967295,C=j+(A<<20&4294967295|A>>>12),A=I+(C^j^U)+P[5]+4294588738&4294967295,I=C+(A<<4&4294967295|A>>>28),A=U+(I^C^j)+P[8]+2272392833&4294967295,U=I+(A<<11&4294967295|A>>>21),A=j+(U^I^C)+P[11]+1839030562&4294967295,j=U+(A<<16&4294967295|A>>>16),A=C+(j^U^I)+P[14]+4259657740&4294967295,C=j+(A<<23&4294967295|A>>>9),A=I+(C^j^U)+P[1]+2763975236&4294967295,I=C+(A<<4&4294967295|A>>>28),A=U+(I^C^j)+P[4]+1272893353&4294967295,U=I+(A<<11&4294967295|A>>>21),A=j+(U^I^C)+P[7]+4139469664&4294967295,j=U+(A<<16&4294967295|A>>>16),A=C+(j^U^I)+P[10]+3200236656&4294967295,C=j+(A<<23&4294967295|A>>>9),A=I+(C^j^U)+P[13]+681279174&4294967295,I=C+(A<<4&4294967295|A>>>28),A=U+(I^C^j)+P[0]+3936430074&4294967295,U=I+(A<<11&4294967295|A>>>21),A=j+(U^I^C)+P[3]+3572445317&4294967295,j=U+(A<<16&4294967295|A>>>16),A=C+(j^U^I)+P[6]+76029189&4294967295,C=j+(A<<23&4294967295|A>>>9),A=I+(C^j^U)+P[9]+3654602809&4294967295,I=C+(A<<4&4294967295|A>>>28),A=U+(I^C^j)+P[12]+3873151461&4294967295,U=I+(A<<11&4294967295|A>>>21),A=j+(U^I^C)+P[15]+530742520&4294967295,j=U+(A<<16&4294967295|A>>>16),A=C+(j^U^I)+P[2]+3299628645&4294967295,C=j+(A<<23&4294967295|A>>>9),A=I+(j^(C|~U))+P[0]+4096336452&4294967295,I=C+(A<<6&4294967295|A>>>26),A=U+(C^(I|~j))+P[7]+1126891415&4294967295,U=I+(A<<10&4294967295|A>>>22),A=j+(I^(U|~C))+P[14]+2878612391&4294967295,j=U+(A<<15&4294967295|A>>>17),A=C+(U^(j|~I))+P[5]+4237533241&4294967295,C=j+(A<<21&4294967295|A>>>11),A=I+(j^(C|~U))+P[12]+1700485571&4294967295,I=C+(A<<6&4294967295|A>>>26),A=U+(C^(I|~j))+P[3]+2399980690&4294967295,U=I+(A<<10&4294967295|A>>>22),A=j+(I^(U|~C))+P[10]+4293915773&4294967295,j=U+(A<<15&4294967295|A>>>17),A=C+(U^(j|~I))+P[1]+2240044497&4294967295,C=j+(A<<21&4294967295|A>>>11),A=I+(j^(C|~U))+P[8]+1873313359&4294967295,I=C+(A<<6&4294967295|A>>>26),A=U+(C^(I|~j))+P[15]+4264355552&4294967295,U=I+(A<<10&4294967295|A>>>22),A=j+(I^(U|~C))+P[6]+2734768916&4294967295,j=U+(A<<15&4294967295|A>>>17),A=C+(U^(j|~I))+P[13]+1309151649&4294967295,C=j+(A<<21&4294967295|A>>>11),A=I+(j^(C|~U))+P[4]+4149444226&4294967295,I=C+(A<<6&4294967295|A>>>26),A=U+(C^(I|~j))+P[11]+3174756917&4294967295,U=I+(A<<10&4294967295|A>>>22),A=j+(I^(U|~C))+P[2]+718787259&4294967295,j=U+(A<<15&4294967295|A>>>17),A=C+(U^(j|~I))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+I&4294967295,D.g[1]=D.g[1]+(j+(A<<21&4294967295|A>>>11))&4294967295,D.g[2]=D.g[2]+j&4294967295,D.g[3]=D.g[3]+U&4294967295}a.prototype.v=function(D,I){I===void 0&&(I=D.length);const C=I-this.blockSize,P=this.C;let j=this.h,U=0;for(;U<I;){if(j==0)for(;U<=C;)o(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<I;)if(P[j++]=D.charCodeAt(U++),j==this.blockSize){o(this,P),j=0;break}}else for(;U<I;)if(P[j++]=D[U++],j==this.blockSize){o(this,P),j=0;break}}this.h=j,this.o+=I},a.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var I=1;I<D.length-8;++I)D[I]=0;I=this.o*8;for(var C=D.length-8;C<D.length;++C)D[C]=I&255,I/=256;for(this.v(D),D=Array(16),I=0,C=0;C<4;++C)for(let P=0;P<32;P+=8)D[I++]=this.g[C]>>>P&255;return D};function l(D,I){var C=m;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=I(D)}function d(D,I){this.h=I;const C=[];let P=!0;for(let j=D.length-1;j>=0;j--){const U=D[j]|0;P&&U==I||(C[j]=U,P=!1)}this.g=C}var m={};function g(D){return-128<=D&&D<128?l(D,function(I){return new d([I|0],I<0?-1:0)}):new d([D|0],D<0?-1:0)}function _(D){if(isNaN(D)||!isFinite(D))return b;if(D<0)return k(_(-D));const I=[];let C=1;for(let P=0;D>=C;P++)I[P]=D/C|0,C*=4294967296;return new d(I,0)}function y(D,I){if(D.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(D.charAt(0)=="-")return k(y(D.substring(1),I));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=_(Math.pow(I,8));let P=b;for(let U=0;U<D.length;U+=8){var j=Math.min(8,D.length-U);const A=parseInt(D.substring(U,U+j),I);j<8?(j=_(Math.pow(I,j)),P=P.j(j).add(_(A))):(P=P.j(C),P=P.add(_(A)))}return P}var b=g(0),S=g(1),N=g(16777216);s=d.prototype,s.m=function(){if(V(this))return-k(this).m();let D=0,I=1;for(let C=0;C<this.g.length;C++){const P=this.i(C);D+=(P>=0?P:4294967296+P)*I,I*=4294967296}return D},s.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(z(this))return"0";if(V(this))return"-"+k(this).toString(D);const I=_(Math.pow(D,6));var C=this;let P="";for(;;){const j=O(C,I).g;C=H(C,j.j(I));let U=((C.g.length>0?C.g[0]:C.h)>>>0).toString(D);if(C=j,z(C))return U+P;for(;U.length<6;)U="0"+U;P=U+P}},s.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function z(D){if(D.h!=0)return!1;for(let I=0;I<D.g.length;I++)if(D.g[I]!=0)return!1;return!0}function V(D){return D.h==-1}s.l=function(D){return D=H(this,D),V(D)?-1:z(D)?0:1};function k(D){const I=D.g.length,C=[];for(let P=0;P<I;P++)C[P]=~D.g[P];return new d(C,~D.h).add(S)}s.abs=function(){return V(this)?k(this):this},s.add=function(D){const I=Math.max(this.g.length,D.g.length),C=[];let P=0;for(let j=0;j<=I;j++){let U=P+(this.i(j)&65535)+(D.i(j)&65535),A=(U>>>16)+(this.i(j)>>>16)+(D.i(j)>>>16);P=A>>>16,U&=65535,A&=65535,C[j]=A<<16|U}return new d(C,C[C.length-1]&-2147483648?-1:0)};function H(D,I){return D.add(k(I))}s.j=function(D){if(z(this)||z(D))return b;if(V(this))return V(D)?k(this).j(k(D)):k(k(this).j(D));if(V(D))return k(this.j(k(D)));if(this.l(N)<0&&D.l(N)<0)return _(this.m()*D.m());const I=this.g.length+D.g.length,C=[];for(var P=0;P<2*I;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(let j=0;j<D.g.length;j++){const U=this.i(P)>>>16,A=this.i(P)&65535,pe=D.i(j)>>>16,be=D.i(j)&65535;C[2*P+2*j]+=A*be,q(C,2*P+2*j),C[2*P+2*j+1]+=U*be,q(C,2*P+2*j+1),C[2*P+2*j+1]+=A*pe,q(C,2*P+2*j+1),C[2*P+2*j+2]+=U*pe,q(C,2*P+2*j+2)}for(D=0;D<I;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=I;D<2*I;D++)C[D]=0;return new d(C,0)};function q(D,I){for(;(D[I]&65535)!=D[I];)D[I+1]+=D[I]>>>16,D[I]&=65535,I++}function G(D,I){this.g=D,this.h=I}function O(D,I){if(z(I))throw Error("division by zero");if(z(D))return new G(b,b);if(V(D))return I=O(k(D),I),new G(k(I.g),k(I.h));if(V(I))return I=O(D,k(I)),new G(k(I.g),I.h);if(D.g.length>30){if(V(D)||V(I))throw Error("slowDivide_ only works with positive integers.");for(var C=S,P=I;P.l(D)<=0;)C=se(C),P=se(P);var j=he(C,1),U=he(P,1);for(P=he(P,2),C=he(C,2);!z(P);){var A=U.add(P);A.l(D)<=0&&(j=j.add(C),U=A),P=he(P,1),C=he(C,1)}return I=H(D,j.j(I)),new G(j,I)}for(j=b;D.l(I)>=0;){for(C=Math.max(1,Math.floor(D.m()/I.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),U=_(C),A=U.j(I);V(A)||A.l(D)>0;)C-=P,U=_(C),A=U.j(I);z(U)&&(U=S),j=j.add(U),D=H(D,A)}return new G(j,D)}s.B=function(D){return O(this,D).h},s.and=function(D){const I=Math.max(this.g.length,D.g.length),C=[];for(let P=0;P<I;P++)C[P]=this.i(P)&D.i(P);return new d(C,this.h&D.h)},s.or=function(D){const I=Math.max(this.g.length,D.g.length),C=[];for(let P=0;P<I;P++)C[P]=this.i(P)|D.i(P);return new d(C,this.h|D.h)},s.xor=function(D){const I=Math.max(this.g.length,D.g.length),C=[];for(let P=0;P<I;P++)C[P]=this.i(P)^D.i(P);return new d(C,this.h^D.h)};function se(D){const I=D.g.length+1,C=[];for(let P=0;P<I;P++)C[P]=D.i(P)<<1|D.i(P-1)>>>31;return new d(C,D.h)}function he(D,I){const C=I>>5;I%=32;const P=D.g.length-C,j=[];for(let U=0;U<P;U++)j[U]=I>0?D.i(U+C)>>>I|D.i(U+C+1)<<32-I:D.i(U+C);return new d(j,D.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,OS=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=y,ur=d}).apply(typeof nE<"u"?nE:typeof self<"u"?self:typeof window<"u"?window:{});var Gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var MS,Su,zS,of,t_,LS,PS,US;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gh=="object"&&Gh];for(var v=0;v<h.length;++v){var T=h[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var a=t(this);function o(h,v){if(v)e:{var T=a;h=h.split(".");for(var R=0;R<h.length-1;R++){var Q=h[R];if(!(Q in T))break e;T=T[Q]}h=h[h.length-1],R=T[h],v=v(R),v!=R&&v!=null&&e(T,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var T=[],R;for(R in v)Object.prototype.hasOwnProperty.call(v,R)&&T.push([R,v[R]]);return T}});var l=l||{},d=this||self;function m(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,T){return h.call.apply(h.bind,arguments)}function _(h,v,T){return _=g,_.apply(null,arguments)}function y(h,v){var T=Array.prototype.slice.call(arguments,1);return function(){var R=T.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function b(h,v){function T(){}T.prototype=v.prototype,h.Z=v.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(R,Q,Z){for(var _e=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)_e[$e-2]=arguments[$e];return v.prototype[Q].apply(R,_e)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function N(h){const v=h.length;if(v>0){const T=Array(v);for(let R=0;R<v;R++)T[R]=h[R];return T}return[]}function z(h,v){for(let R=1;R<arguments.length;R++){const Q=arguments[R];var T=typeof Q;if(T=T!="object"?T:Q?Array.isArray(Q)?"array":T:"null",T=="array"||T=="object"&&typeof Q.length=="number"){T=h.length||0;const Z=Q.length||0;h.length=T+Z;for(let _e=0;_e<Z;_e++)h[T+_e]=Q[_e]}else h.push(Q)}}class V{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function k(h){d.setTimeout(()=>{throw h},0)}function H(){var h=D;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class q{constructor(){this.h=this.g=null}add(v,T){const R=G.get();R.set(v,T),this.h?this.h.next=R:this.g=R,this.h=R}}var G=new V(()=>new O,h=>h.reset());class O{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let se,he=!1,D=new q,I=()=>{const h=Promise.resolve(void 0);se=()=>{h.then(C)}};function C(){for(var h;h=H();){try{h.h.call(h.g)}catch(T){k(T)}var v=G;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}he=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};d.addEventListener("test",T,v),d.removeEventListener("test",T,v)}catch{}return h})();function A(h){return/^[\s\xa0]*$/.test(h)}function pe(h,v){j.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}b(pe,j),pe.prototype.init=function(h,v){const T=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(T=="mouseover"?v=h.fromElement:T=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),W=0;function me(h,v,T,R,Q){this.listener=h,this.proxy=null,this.src=v,this.type=T,this.capture=!!R,this.ha=Q,this.key=++W,this.da=this.fa=!1}function Ae(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ue(h,v,T){for(const R in h)v.call(T,h[R],R,h)}function we(h,v){for(const T in h)v.call(void 0,h[T],T,h)}function M(h){const v={};for(const T in h)v[T]=h[T];return v}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(h,v){let T,R;for(let Q=1;Q<arguments.length;Q++){R=arguments[Q];for(T in R)h[T]=R[T];for(let Z=0;Z<F.length;Z++)T=F[Z],Object.prototype.hasOwnProperty.call(R,T)&&(h[T]=R[T])}}function ie(h){this.src=h,this.g={},this.h=0}ie.prototype.add=function(h,v,T,R,Q){const Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);const _e=ye(h,v,R,Q);return _e>-1?(v=h[_e],T||(v.fa=!1)):(v=new me(v,this.src,Z,!!R,Q),v.fa=T,h.push(v)),v};function de(h,v){const T=v.type;if(T in h.g){var R=h.g[T],Q=Array.prototype.indexOf.call(R,v,void 0),Z;(Z=Q>=0)&&Array.prototype.splice.call(R,Q,1),Z&&(Ae(v),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ye(h,v,T,R){for(let Q=0;Q<h.length;++Q){const Z=h[Q];if(!Z.da&&Z.listener==v&&Z.capture==!!T&&Z.ha==R)return Q}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),oe={};function fe(h,v,T,R,Q){if(Array.isArray(v)){for(let Z=0;Z<v.length;Z++)fe(h,v[Z],T,R,Q);return null}return T=fc(T),h&&h[be]?h.J(v,T,m(R)?!!R.capture:!1,Q):Ce(h,v,T,!1,R,Q)}function Ce(h,v,T,R,Q,Z){if(!v)throw Error("Invalid event type");const _e=m(Q)?!!Q.capture:!!Q;let $e=jr(h);if($e||(h[ke]=$e=new ie(h)),T=$e.add(v,T,R,_e,Z),T.proxy)return T;if(R=ht(),T.proxy=R,R.src=h,R.listener=T,h.addEventListener)U||(Q=_e),Q===void 0&&(Q=!1),h.addEventListener(v.toString(),R,Q);else if(h.attachEvent)h.attachEvent(Nn(v.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return T}function ht(){function h(T){return v.call(h.src,h.listener,T)}const v=kr;return h}function an(h,v,T,R,Q){if(Array.isArray(v))for(var Z=0;Z<v.length;Z++)an(h,v[Z],T,R,Q);else R=m(R)?!!R.capture:!!R,T=fc(T),h&&h[be]?(h=h.i,Z=String(v).toString(),Z in h.g&&(v=h.g[Z],T=ye(v,T,R,Q),T>-1&&(Ae(v[T]),Array.prototype.splice.call(v,T,1),v.length==0&&(delete h.g[Z],h.h--)))):h&&(h=jr(h))&&(v=h.g[v.toString()],h=-1,v&&(h=ye(v,T,R,Q)),(T=h>-1?v[h]:null)&&Hn(T))}function Hn(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[be])de(v.i,h);else{var T=h.type,R=h.proxy;v.removeEventListener?v.removeEventListener(T,R,h.capture):v.detachEvent?v.detachEvent(Nn(T),R):v.addListener&&v.removeListener&&v.removeListener(R),(T=jr(v))?(de(T,h),T.h==0&&(T.src=null,v[ke]=null)):Ae(h)}}}function Nn(h){return h in oe?oe[h]:oe[h]="on"+h}function kr(h,v){if(h.da)h=!0;else{v=new pe(v,this);const T=h.listener,R=h.ha||h.src;h.fa&&Hn(h),h=T.call(R,v)}return h}function jr(h){return h=h[ke],h instanceof ie?h:null}var hc="__closure_events_fn_"+(Math.random()*1e9>>>0);function fc(h){return typeof h=="function"?h:(h[hc]||(h[hc]=function(v){return h.handleEvent(v)}),h[hc])}function Ft(){P.call(this),this.i=new ie(this),this.M=this,this.G=null}b(Ft,P),Ft.prototype[be]=!0,Ft.prototype.removeEventListener=function(h,v,T,R){an(this,h,v,T,R)};function rn(h,v){var T,R=h.G;if(R)for(T=[];R;R=R.G)T.push(R);if(h=h.M,R=v.type||v,typeof v=="string")v=new j(v,h);else if(v instanceof j)v.target=v.target||h;else{var Q=v;v=new j(R,h),J(v,Q)}Q=!0;let Z,_e;if(T)for(_e=T.length-1;_e>=0;_e--)Z=v.g=T[_e],Q=_a(Z,R,!0,v)&&Q;if(Z=v.g=h,Q=_a(Z,R,!0,v)&&Q,Q=_a(Z,R,!1,v)&&Q,T)for(_e=0;_e<T.length;_e++)Z=v.g=T[_e],Q=_a(Z,R,!1,v)&&Q}Ft.prototype.N=function(){if(Ft.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const T=h.g[v];for(let R=0;R<T.length;R++)Ae(T[R]);delete h.g[v],h.h--}}this.G=null},Ft.prototype.J=function(h,v,T,R){return this.i.add(String(h),v,!1,T,R)},Ft.prototype.K=function(h,v,T,R){return this.i.add(String(h),v,!0,T,R)};function _a(h,v,T,R){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let Q=!0;for(let Z=0;Z<v.length;++Z){const _e=v[Z];if(_e&&!_e.da&&_e.capture==T){const $e=_e.listener,Ut=_e.ha||_e.src;_e.fa&&de(h.i,_e),Q=$e.call(Ut,R)!==!1&&Q}}return Q&&!R.defaultPrevented}function _m(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=_(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function pd(h){h.g=_m(()=>{h.g=null,h.i&&(h.i=!1,pd(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Pn extends P{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:pd(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dr(h){P.call(this),this.h=h,this.g={}}b(Dr,P);var mc=[];function pc(h){ue(h.g,function(v,T){this.g.hasOwnProperty(T)&&Hn(v)},h),h.g={}}Dr.prototype.N=function(){Dr.Z.N.call(this),pc(this)},Dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ya=d.JSON.stringify,ym=d.JSON.parse,gd=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function _d(){}function yd(){}var Ps={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function pn(){j.call(this,"d")}b(pn,j);function bs(){j.call(this,"c")}b(bs,j);var Pt={},vd=null;function Bo(){return vd=vd||new Ft}Pt.Ia="serverreachability";function bd(h){j.call(this,Pt.Ia,h)}b(bd,j);function ni(h){const v=Bo();rn(v,new bd(v))}Pt.STAT_EVENT="statevent";function Or(h,v){j.call(this,Pt.STAT_EVENT,h),this.stat=v}b(Or,j);function Gt(h){const v=Bo();rn(v,new Or(v,h))}Pt.Ja="timingevent";function si(h,v){j.call(this,Pt.Ja,h),this.size=v}b(si,j);function ii(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Us(){this.g=!0}Us.prototype.ua=function(){this.g=!1};function vm(h,v,T,R,Q,Z){h.info(function(){if(h.g)if(Z){var _e="",$e=Z.split("&");for(let lt=0;lt<$e.length;lt++){var Ut=$e[lt].split("=");if(Ut.length>1){const Rt=Ut[0];Ut=Ut[1];const As=Rt.split("_");_e=As.length>=2&&As[1]=="type"?_e+(Rt+"="+Ut+"&"):_e+(Rt+"=redacted&")}}}else _e=null;else _e=Z;return"XMLHTTP REQ ("+R+") [attempt "+Q+"]: "+v+`
`+T+`
`+_e})}function Ed(h,v,T,R,Q,Z,_e){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+Q+"]: "+v+`
`+T+`
`+Z+" "+_e})}function ai(h,v,T,R){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+bm(h,T)+(R?" "+R:"")})}function Mr(h,v){h.info(function(){return"TIMEOUT: "+v})}Us.prototype.info=function(){};function bm(h,v){if(!h.g)return v;if(!v)return null;try{const Z=JSON.parse(v);if(Z){for(h=0;h<Z.length;h++)if(Array.isArray(Z[h])){var T=Z[h];if(!(T.length<2)){var R=T[1];if(Array.isArray(R)&&!(R.length<1)){var Q=R[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let _e=1;_e<R.length;_e++)R[_e]=""}}}}return ya(Z)}catch{return v}}var zr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},gc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},_c;function Lr(){}b(Lr,_d),Lr.prototype.g=function(){return new XMLHttpRequest},_c=new Lr;function Ui(h){return encodeURIComponent(String(h))}function Td(h){var v=1;h=h.split(":");const T=[];for(;v>0&&h.length;)T.push(h.shift()),v--;return h.length&&T.push(h.join(":")),T}function Vs(h,v,T,R){this.j=h,this.i=v,this.l=T,this.S=R||1,this.V=new Dr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bs}function Bs(){this.i=null,this.g="",this.h=!1}var Qt={},un={};function ri(h,v,T){h.M=1,h.A=Pr(Yt(v)),h.u=T,h.R=!0,qo(h,null)}function qo(h,v){h.F=Date.now(),oi(h),h.B=Yt(h.A);var T=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),Go(T.i,"t",R),h.C=0,T=h.j.L,h.h=new Bs,h.g=Ld(h.j,T?v:null,!h.u),h.P>0&&(h.O=new Pn(_(h.Y,h,h.g),h.P)),v=h.V,T=h.g,R=h.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(mc[0]=Q.toString()),Q=mc);for(let Z=0;Z<Q.length;Z++){const _e=fe(T,Q[Z],R||v.handleEvent,!1,v.h||v);if(!_e)break;v.g[_e.key]=_e}v=h.J?M(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),ni(),vm(h.i,h.v,h.B,h.l,h.S,h.u)}Vs.prototype.ba=function(h){h=h.target;const v=this.O;v&&$s(h)==3?v.j():this.Y(h)},Vs.prototype.Y=function(h){try{if(h==this.g)e:{const $e=$s(this.g),Ut=this.g.ya(),lt=this.g.ca();if(!($e<3)&&($e!=3||this.g&&(this.h.h||this.g.la()||gn(this.g)))){this.K||$e!=4||Ut==7||(Ut==8||lt<=0?ni(3):ni(2)),li(this);var v=this.g.ca();this.X=v;var T=Em(this);if(this.o=v==200,Ed(this.i,this.v,this.B,this.l,this.S,$e,v),this.o){if(this.U&&!this.L){t:{if(this.g){var R,Q=this.g;if((R=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(R)){var Z=R;break t}}Z=null}if(h=Z)ai(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ci(this,h);else{this.o=!1,this.m=3,Gt(12),ns(this),Es(this);break e}}if(this.R){h=!0;let Rt;for(;!this.K&&this.C<T.length;)if(Rt=Ad(this,T),Rt==un){$e==4&&(this.m=4,Gt(14),h=!1),ai(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==Qt){this.m=4,Gt(15),ai(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else ai(this.i,this.l,Rt,null),ci(this,Rt);if(Sd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||T.length!=0||this.h.h||(this.m=1,Gt(16),h=!1),this.o=this.o&&h,!h)ai(this.i,this.l,T,"[Invalid Chunked Response]"),ns(this),Es(this);else if(T.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),jc(_e),_e.P=!0,Gt(11))}}else ai(this.i,this.l,T,null),ci(this,T);$e==4&&ns(this),this.o&&!this.K&&($e==4?Dd(this.j,this):(this.o=!1,oi(this)))}else Bi(this.g),v==400&&T.indexOf("Unknown SID")>0?(this.m=3,Gt(12)):(this.m=0,Gt(13)),ns(this),Es(this)}}}catch{}};function Em(h){if(!Sd(h))return h.g.la();const v=gn(h.g);if(v==="")return"";let T="";const R=v.length,Q=$s(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ns(h),Es(h),"";h.h.i=new d.TextDecoder}for(let Z=0;Z<R;Z++)h.h.h=!0,T+=h.h.i.decode(v[Z],{stream:!(Q&&Z==R-1)});return v.length=0,h.h.g+=T,h.C=0,h.h.g}function Sd(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ad(h,v){var T=h.C,R=v.indexOf(`
`,T);return R==-1?un:(T=Number(v.substring(T,R)),isNaN(T)?Qt:(R+=1,R+T>v.length?un:(v=v.slice(R,R+T),h.C=R+T,v)))}Vs.prototype.cancel=function(){this.K=!0,ns(this)};function oi(h){h.T=Date.now()+h.H,Ho(h,h.H)}function Ho(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=ii(_(h.aa,h),v)}function li(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Vs.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Mr(this.i,this.B),this.M!=2&&(ni(),Gt(17)),ns(this),this.m=2,Es(this)):Ho(this,this.T-h)};function Es(h){h.j.I==0||h.K||Dd(h.j,h)}function ns(h){li(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,pc(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function ci(h,v){try{var T=h.j;if(T.I!=0&&(T.g==h||di(T.h,h))){if(!h.L&&di(T.h,h)&&T.I==3){try{var R=T.Ba.g.parse(v)}catch{R=null}if(Array.isArray(R)&&R.length==3){var Q=R;if(Q[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Xo(T),wa(T);else break e;Fr(T),Gt(18)}}else T.xa=Q[1],0<T.xa-T.K&&Q[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=ii(_(T.Va,T),6e3));ui(T.h)<=1&&T.ta&&(T.ta=void 0)}else _i(T,11)}else if((h.L||T.g==h)&&Xo(T),!A(v))for(Q=T.Ba.g.parse(v),v=0;v<Q.length;v++){let lt=Q[v];const Rt=lt[0];if(!(Rt<=T.K))if(T.K=Rt,lt=lt[1],T.I==2)if(lt[0]=="c"){T.M=lt[1],T.ba=lt[2];const As=lt[3];As!=null&&(T.ka=As,T.j.info("VER="+T.ka));const yi=lt[4];yi!=null&&(T.za=yi,T.j.info("SVER="+T.za));const Fs=lt[5];Fs!=null&&typeof Fs=="number"&&Fs>0&&(R=1.5*Fs,T.O=R,T.j.info("backChannelRequestTimeoutMs_="+R)),R=T;const Gs=h.g;if(Gs){const Gr=Gs.g?Gs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gr){var Z=R.h;Z.g||Gr.indexOf("spdy")==-1&&Gr.indexOf("quic")==-1&&Gr.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(bc(Z,Z.h),Z.h=null))}if(R.G){const Zo=Gs.g?Gs.g.getResponseHeader("X-HTTP-Session-Id"):null;Zo&&(R.wa=Zo,ft(R.J,R.G,Zo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),R=T;var _e=h;if(R.na=zd(R,R.L?R.ba:null,R.W),_e.L){Ec(R.h,_e);var $e=_e,Ut=R.O;Ut&&($e.H=Ut),$e.D&&(li($e),oi($e)),R.g=_e}else kd(R);T.i.length>0&&gi(T)}else lt[0]!="stop"&&lt[0]!="close"||_i(T,7);else T.I==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?_i(T,7):Cc(T):lt[0]!="noop"&&T.l&&T.l.qa(lt),T.A=0)}}ni(4)}catch{}}var Kt=class{constructor(h,v){this.g=h,this.map=v}};function yc(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ui(h){return h.h?1:h.g?h.g.size:0}function di(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function bc(h,v){h.g?h.g.add(v):h.h=v}function Ec(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}yc.prototype.cancel=function(){if(this.i=Tc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Tc(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const T of h.g.values())v=v.concat(T.G);return v}return N(h.i)}var xd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $o(h,v){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const R=h[T].indexOf("=");let Q,Z=null;R>=0?(Q=h[T].substring(0,R),Z=h[T].substring(R+1)):Q=h[T],v(Q,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function ss(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof ss?(this.l=h.l,dn(this,h.j),this.o=h.o,this.g=h.g,va(this,h.u),this.h=h.h,Sc(this,Nd(h.i)),this.m=h.m):h&&(v=String(h).match(xd))?(this.l=!1,dn(this,v[1]||"",!0),this.o=hi(v[2]||""),this.g=hi(v[3]||"",!0),va(this,v[4]),this.h=hi(v[5]||"",!0),Sc(this,v[6]||"",!0),this.m=hi(v[7]||"")):(this.l=!1,this.i=new Ea(null,this.l))}ss.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Ur(v,Fo,!0),":");var T=this.g;return(T||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Ur(v,Fo,!0),"@"),h.push(Ui(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Ur(T,T.charAt(0)=="/"?Ac:wd,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Ur(T,Id)),h.join("")},ss.prototype.resolve=function(h){const v=Yt(this);let T=!!h.j;T?dn(v,h.j):T=!!h.o,T?v.o=h.o:T=!!h.g,T?v.g=h.g:T=h.u!=null;var R=h.h;if(T)va(v,h.u);else if(T=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var Q=v.h.lastIndexOf("/");Q!=-1&&(R=v.h.slice(0,Q+1)+R)}if(Q=R,Q==".."||Q==".")R="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){R=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const Z=[];for(let _e=0;_e<Q.length;){const $e=Q[_e++];$e=="."?R&&_e==Q.length&&Z.push(""):$e==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),R&&_e==Q.length&&Z.push("")):(Z.push($e),R=!0)}R=Z.join("/")}else R=Q}return T?v.h=R:T=h.i.toString()!=="",T?Sc(v,Nd(h.i)):T=!!h.m,T&&(v.m=h.m),v};function Yt(h){return new ss(h)}function dn(h,v,T){h.j=T?hi(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function va(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Sc(h,v,T){v instanceof Ea?(h.i=v,Qo(h.i,h.l)):(T||(v=Ur(v,ba)),h.i=new Ea(v,h.l))}function ft(h,v,T){h.i.set(v,T)}function Pr(h){return ft(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function hi(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ur(h,v,T){return typeof h=="string"?(h=encodeURI(h).replace(v,$n),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function $n(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Fo=/[#\/\?@]/g,wd=/[#\?:]/g,Ac=/[#\?]/g,ba=/[#\?@]/g,Id=/#/g;function Ea(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Fn(h){h.g||(h.g=new Map,h.h=0,h.i&&$o(h.i,function(v,T){h.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}s=Ea.prototype,s.add=function(h,v){Fn(this),this.i=null,h=Ta(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(v),this.h+=1,this};function Rd(h,v){Fn(h),v=Ta(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function xc(h,v){return Fn(h),v=Ta(h,v),h.g.has(v)}s.forEach=function(h,v){Fn(this),this.g.forEach(function(T,R){T.forEach(function(Q){h.call(v,Q,R,this)},this)},this)};function wc(h,v){Fn(h);let T=[];if(typeof v=="string")xc(h,v)&&(T=T.concat(h.g.get(Ta(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)T=T.concat(h[v]);return T}s.set=function(h,v){return Fn(this),this.i=null,h=Ta(this,h),xc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=wc(this,h),h.length>0?String(h[0]):v):v};function Go(h,v,T){Rd(h,v),T.length>0&&(h.i=null,h.g.set(Ta(h,v),N(T)),h.h+=T.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let R=0;R<v.length;R++){var T=v[R];const Q=Ui(T);T=wc(this,T);for(let Z=0;Z<T.length;Z++){let _e=Q;T[Z]!==""&&(_e+="="+Ui(T[Z])),h.push(_e)}}return this.i=h.join("&")};function Nd(h){const v=new Ea;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function Ta(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Qo(h,v){v&&!h.j&&(Fn(h),h.i=null,h.g.forEach(function(T,R){const Q=R.toLowerCase();R!=Q&&(Rd(this,R),Go(this,Q,T))},h)),h.j=v}function qs(h,v){const T=new Us;if(d.Image){const R=new Image;R.onload=y(Ts,T,"TestLoadImage: loaded",!0,v,R),R.onerror=y(Ts,T,"TestLoadImage: error",!1,v,R),R.onabort=y(Ts,T,"TestLoadImage: abort",!1,v,R),R.ontimeout=y(Ts,T,"TestLoadImage: timeout",!1,v,R),d.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else v(!1)}function Ic(h,v){const T=new Us,R=new AbortController,Q=setTimeout(()=>{R.abort(),Ts(T,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:R.signal}).then(Z=>{clearTimeout(Q),Z.ok?Ts(T,"TestPingServer: ok",!0,v):Ts(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(Q),Ts(T,"TestPingServer: error",!1,v)})}function Ts(h,v,T,R,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),R(T)}catch{}}function Sa(){this.g=new gd}function fi(h){this.i=h.Sb||null,this.h=h.ab||!1}b(fi,_d),fi.prototype.g=function(){return new Vr(this.i,this.h)};function Vr(h,v){Ft.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Vr,Ft),s=Vr.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Hs(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Aa(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ko(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ko(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Aa(this):Hs(this),this.readyState==3&&Ko(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Aa(this))},s.Na=function(h){this.g&&(this.response=h,Aa(this))},s.ga=function(){this.g&&Aa(this)};function Aa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Hs(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=v.next();return h.join(`\r
`)};function Hs(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Vr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ss(h){let v="";return ue(h,function(T,R){v+=R,v+=":",v+=T,v+=`\r
`}),v}function Br(h,v,T){e:{for(R in T){var R=!1;break e}R=!0}R||(T=Ss(T),typeof h=="string"?T!=null&&Ui(T):ft(h,v,T))}function gt(h){Ft.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(gt,Ft);var mi=/^https?$/i,Rc=["POST","PUT"];s=gt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,T,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():_c.g(),this.g.onreadystatechange=S(_(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(Z){qr(this,Z);return}if(h=T||"",T=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var Q in R)T.set(Q,R[Q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Z of R.keys())T.set(Z,R.get(Z));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(T.keys()).find(Z=>Z.toLowerCase()=="content-type"),Q=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Rc,v,void 0)>=0)||R||Q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,_e]of T)this.g.setRequestHeader(Z,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Z){qr(this,Z)}};function qr(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Nc(h),Vi(h)}function Nc(h){h.A||(h.A=!0,rn(h,"complete"),rn(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,rn(this,"complete"),rn(this,"abort"),Vi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vi(this,!0)),gt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Hr(this):this.Xa())},s.Xa=function(){Hr(this)};function Hr(h){if(h.h&&typeof l<"u"){if(h.v&&$s(h)==4)setTimeout(h.Ca.bind(h),0);else if(rn(h,"readystatechange"),$s(h)==4){h.h=!1;try{const Z=h.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var T;if(!(T=v)){var R;if(R=Z===0){let _e=String(h.D).match(xd)[1]||null;!_e&&d.self&&d.self.location&&(_e=d.self.location.protocol.slice(0,-1)),R=!mi.test(_e?_e.toLowerCase():"")}T=R}if(T)rn(h,"complete"),rn(h,"success");else{h.o=6;try{var Q=$s(h)>2?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.ca()+"]",Nc(h)}}finally{Vi(h)}}}}function Vi(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,v||rn(h,"ready");try{T.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function $s(h){return h.g?h.g.readyState:0}s.ca=function(){try{return $s(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),ym(v)}};function gn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Bi(h){const v={};h=(h.g&&$s(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(A(h[R]))continue;var T=Td(h[R]);const Q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Z=v[Q]||[];v[Q]=Z,Z.push(T)}we(v,function(R){return R.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(h,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||v}function xa(h){this.za=0,this.i=[],this.j=new Us,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pi("baseRetryDelayMs",5e3,h),this.Za=pi("retryDelaySeedMs",1e4,h),this.Ta=pi("forwardChannelMaxRetries",2,h),this.va=pi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new yc(h&&h.concurrentRequestLimit),this.Ba=new Sa,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=xa.prototype,s.ka=8,s.I=1,s.connect=function(h,v,T,R){Gt(0),this.W=h,this.H=v||{},T&&R!==void 0&&(this.H.OSID=T,this.H.OAID=R),this.F=this.X,this.J=zd(this,null,this.W),gi(this)};function Cc(h){if(Yo(h),h.I==3){var v=h.V++,T=Yt(h.J);if(ft(T,"SID",h.M),ft(T,"RID",v),ft(T,"TYPE","terminate"),$r(h,T),v=new Vs(h,h.j,v),v.M=2,v.A=Pr(Yt(T)),T=!1,d.navigator&&d.navigator.sendBeacon)try{T=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!T&&d.Image&&(new Image().src=v.A,T=!0),T||(v.g=Ld(v.j,null),v.g.ea(v.A)),v.F=Date.now(),oi(v)}Md(h)}function wa(h){h.g&&(jc(h),h.g.cancel(),h.g=null)}function Yo(h){wa(h),h.v&&(d.clearTimeout(h.v),h.v=null),Xo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function gi(h){if(!vc(h.h)&&!h.m){h.m=!0;var v=h.Ea;se||I(),he||(se(),he=!0),D.add(v,h),h.D=0}}function Wo(h,v){return ui(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=ii(_(h.Ea,h,v),Od(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Q=new Vs(this,this.j,h);let Z=this.o;if(this.U&&(Z?(Z=M(Z),J(Z,this.U)):Z=this.U),this.u!==null||this.R||(Q.J=Z,Z=null),this.S)e:{for(var v=0,T=0;T<this.i.length;T++){t:{var R=this.i[T];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(v+=R,v>4096){v=T;break e}if(v===4096||T===this.i.length-1){v=T+1;break e}}v=1e3}else v=1e3;v=Cd(this,Q,v),T=Yt(this.J),ft(T,"RID",h),ft(T,"CVER",22),this.G&&ft(T,"X-HTTP-Session-Id",this.G),$r(this,T),Z&&(this.R?v="headers="+Ui(Ss(Z))+"&"+v:this.u&&Br(T,this.u,Z)),bc(this.h,Q),this.Ra&&ft(T,"TYPE","init"),this.S?(ft(T,"$req",v),ft(T,"SID","null"),Q.U=!0,ri(Q,T,null)):ri(Q,T,v),this.I=2}}else this.I==3&&(h?kc(this,h):this.i.length==0||vc(this.h)||kc(this))};function kc(h,v){var T;v?T=v.l:T=h.V++;const R=Yt(h.J);ft(R,"SID",h.M),ft(R,"RID",T),ft(R,"AID",h.K),$r(h,R),h.u&&h.o&&Br(R,h.u,h.o),T=new Vs(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),v&&(h.i=v.G.concat(h.i)),v=Cd(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),bc(h.h,T),ri(T,R,v)}function $r(h,v){h.H&&ue(h.H,function(T,R){ft(v,R,T)}),h.l&&ue({},function(T,R){ft(v,R,T)})}function Cd(h,v,T){T=Math.min(h.i.length,T);const R=h.l?_(h.l.Ka,h.l,h):null;e:{var Q=h.i;let $e=-1;for(;;){const Ut=["count="+T];$e==-1?T>0?($e=Q[0].g,Ut.push("ofs="+$e)):$e=0:Ut.push("ofs="+$e);let lt=!0;for(let Rt=0;Rt<T;Rt++){var Z=Q[Rt].g;const As=Q[Rt].map;if(Z-=$e,Z<0)$e=Math.max(0,Q[Rt].g-100),lt=!1;else try{Z="req"+Z+"_"||"";try{var _e=As instanceof Map?As:Object.entries(As);for(const[yi,Fs]of _e){let Gs=Fs;m(Fs)&&(Gs=ya(Fs)),Ut.push(Z+yi+"="+encodeURIComponent(Gs))}}catch(yi){throw Ut.push(Z+"type="+encodeURIComponent("_badmap")),yi}}catch{R&&R(As)}}if(lt){_e=Ut.join("&");break e}}_e=void 0}return h=h.i.splice(0,T),v.G=h,_e}function kd(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;se||I(),he||(se(),he=!0),D.add(v,h),h.A=0}}function Fr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=ii(_(h.Da,h),Od(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,jd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=ii(_(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Gt(10),wa(this),jd(this))};function jc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function jd(h){h.g=new Vs(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Yt(h.na);ft(v,"RID","rpc"),ft(v,"SID",h.M),ft(v,"AID",h.K),ft(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&ft(v,"TO",h.ia),ft(v,"TYPE","xmlhttp"),$r(h,v),h.u&&h.o&&Br(v,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=Pr(Yt(v)),T.u=null,T.R=!0,qo(T,h)}s.Va=function(){this.C!=null&&(this.C=null,wa(this),Fr(this),Gt(19))};function Xo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Dd(h,v){var T=null;if(h.g==v){Xo(h),jc(h),h.g=null;var R=2}else if(di(h.h,v))T=v.G,Ec(h.h,v),R=1;else return;if(h.I!=0){if(v.o)if(R==1){T=v.u?v.u.length:0,v=Date.now()-v.F;var Q=h.D;R=Bo(),rn(R,new si(R,T)),gi(h)}else kd(h);else if(Q=v.m,Q==3||Q==0&&v.X>0||!(R==1&&Wo(h,v)||R==2&&Fr(h)))switch(T&&T.length>0&&(v=h.h,v.i=v.i.concat(T)),Q){case 1:_i(h,5);break;case 4:_i(h,10);break;case 3:_i(h,6);break;default:_i(h,2)}}}function Od(h,v){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*v}function _i(h,v){if(h.j.info("Error code "+v),v==2){var T=_(h.bb,h),R=h.Ua;const Q=!R;R=new ss(R||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||dn(R,"https"),Pr(R),Q?qs(R.toString(),T):Ic(R.toString(),T)}else Gt(2);h.I=0,h.l&&h.l.pa(v),Md(h),Yo(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function Md(h){if(h.I=0,h.ja=[],h.l){const v=Tc(h.h);(v.length!=0||h.i.length!=0)&&(z(h.ja,v),z(h.ja,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.oa()}}function zd(h,v,T){var R=T instanceof ss?Yt(T):new ss(T);if(R.g!="")v&&(R.g=v+"."+R.g),va(R,R.u);else{var Q=d.location;R=Q.protocol,v=v?v+"."+Q.hostname:Q.hostname,Q=+Q.port;const Z=new ss(null);R&&dn(Z,R),v&&(Z.g=v),Q&&va(Z,Q),T&&(Z.h=T),R=Z}return T=h.G,v=h.wa,T&&v&&ft(R,T,v),ft(R,"VER",h.ka),$r(h,R),R}function Ld(h,v,T){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new gt(new fi({ab:T})):new gt(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pd(){}s=Pd.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ia(){}Ia.prototype.g=function(h,v){return new Un(h,v)};function Un(h,v){Ft.call(this),this.g=new xa(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!A(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!A(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new qi(this)}b(Un,Ft),Un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){Cc(this.g)},Un.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=ya(h),h=T);v.i.push(new Kt(v.Ya++,h)),v.I==3&&gi(v)},Un.prototype.N=function(){this.g.l=null,delete this.j,Cc(this.g),delete this.g,Un.Z.N.call(this)};function Ud(h){pn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const T in v){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}b(Ud,pn);function Vd(){bs.call(this),this.status=1}b(Vd,bs);function qi(h){this.g=h}b(qi,Pd),qi.prototype.ra=function(){rn(this.g,"a")},qi.prototype.qa=function(h){rn(this.g,new Ud(h))},qi.prototype.pa=function(h){rn(this.g,new Vd)},qi.prototype.oa=function(){rn(this.g,"b")},Ia.prototype.createWebChannel=Ia.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,US=function(){return new Ia},PS=function(){return Bo()},LS=Pt,t_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},zr.NO_ERROR=0,zr.TIMEOUT=8,zr.HTTP_ERROR=6,of=zr,gc.COMPLETE="complete",zS=gc,yd.EventType=Ps,Ps.OPEN="a",Ps.CLOSE="b",Ps.ERROR="c",Ps.MESSAGE="d",Ft.prototype.listen=Ft.prototype.J,Su=yd,gt.prototype.listenOnce=gt.prototype.K,gt.prototype.getLastError=gt.prototype.Ha,gt.prototype.getLastErrorCode=gt.prototype.ya,gt.prototype.getStatus=gt.prototype.ca,gt.prototype.getResponseJson=gt.prototype.La,gt.prototype.getResponseText=gt.prototype.la,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Fa,MS=gt}).apply(typeof Gh<"u"?Gh:typeof self<"u"?self:typeof window<"u"?window:{});let Mn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");let ec="12.9.0";function Aj(s){ec=s}const To=new O_("@firebase/firestore");function Cl(){return To.logLevel}function xe(s,...e){if(To.logLevel<=et.DEBUG){const t=e.map(F_);To.debug(`Firestore (${ec}): ${s}`,...t)}}function ma(s,...e){if(To.logLevel<=et.ERROR){const t=e.map(F_);To.error(`Firestore (${ec}): ${s}`,...t)}}function So(s,...e){if(To.logLevel<=et.WARN){const t=e.map(F_);To.warn(`Firestore (${ec}): ${s}`,...t)}}function F_(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function Ve(s,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,VS(s,a,t)}function VS(s,e,t){let a=`FIRESTORE (${ec}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw ma(a),new Error(a)}function dt(s,e,t,a){let o="Unexpected state";typeof t=="string"?o=t:a=t,s||VS(e,o,a)}function He(s,e){return s}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Pi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ca{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class BS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Mn.UNAUTHENTICATED)))}shutdown(){}}class wj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ij{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){dt(this.o===void 0,42304);let a=this.i;const o=g=>this.i!==a?(a=this.i,t(g)):Promise.resolve();let l=new ca;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ca,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ca)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(dt(typeof a.accessToken=="string",31837,{l:a}),new BS(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new Mn(e)}}class Rj{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Nj{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new Rj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Cj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){dt(this.o===void 0,3512);const a=l=>{l.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,xe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>a(l)))};const o=l=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(dt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new sE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function kj(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<s;a++)t[a]=Math.floor(256*Math.random());return t}class G_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=kj(40);for(let l=0;l<o.length;++l)a.length<20&&o[l]<t&&(a+=e.charAt(o[l]%62))}return a}}function tt(s,e){return s<e?-1:s>e?1:0}function n_(s,e){const t=Math.min(s.length,e.length);for(let a=0;a<t;a++){const o=s.charAt(a),l=e.charAt(a);if(o!==l)return kg(o)===kg(l)?tt(o,l):kg(o)?1:-1}return tt(s.length,e.length)}const jj=55296,Dj=57343;function kg(s){const e=s.charCodeAt(0);return e>=jj&&e<=Dj}function Fl(s,e,t){return s.length===e.length&&s.every(((a,o)=>t(a,e[o])))}const iE="__name__";class wi{constructor(e,t,a){t===void 0?t=0:t>e.length&&Ve(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Ve(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return wi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wi?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let o=0;o<a;o++){const l=wi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return tt(e.length,t.length)}static compareSegments(e,t){const a=wi.isNumericId(e),o=wi.isNumericId(t);return a&&!o?-1:!a&&o?1:a&&o?wi.extractNumericId(e).compare(wi.extractNumericId(t)):n_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ur.fromString(e.substring(4,e.length-2))}}class At extends wi{construct(e,t,a){return new At(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Te(re.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((o=>o.length>0)))}return new At(t)}static emptyPath(){return new At([])}}const Oj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class An extends wi{construct(e,t,a){return new An(e,t,a)}static isValidIdentifier(e){return Oj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),An.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===iE}static keyField(){return new An([iE])}static fromServerFormat(e){const t=[];let a="",o=0;const l=()=>{if(a.length===0)throw new Te(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new Te(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Te(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(a+=m,o++):(l(),o++)}if(l(),d)throw new Te(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new An(t)}static emptyPath(){return new An([])}}class De{constructor(e){this.path=e}static fromPath(e){return new De(At.fromString(e))}static fromName(e){return new De(At.fromString(e).popFirst(5))}static empty(){return new De(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&At.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return At.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new At(e.slice()))}}function qS(s,e,t){if(!t)throw new Te(re.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Mj(s,e,t,a){if(e===!0&&a===!0)throw new Te(re.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function aE(s){if(!De.isDocumentKey(s))throw new Te(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function rE(s){if(De.isDocumentKey(s))throw new Te(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function HS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ff(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ve(12329,{type:typeof s})}function ei(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Te(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ff(s);throw new Te(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function zj(s,e){if(e<=0)throw new Te(re.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function sn(s,e){const t={typeString:s};return e&&(t.value=e),t}function ad(s,e){if(!HS(s))throw new Te(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const o=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){t=`JSON missing required field: '${a}'`;break}const d=s[a];if(o&&typeof d!==o){t=`JSON field '${a}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${a}' field to equal '${l.value}'`;break}}if(t)throw new Te(re.INVALID_ARGUMENT,t);return!0}const oE=-62135596800,lE=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*lE);return new ut(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<oE)throw new Te(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lE}_compareTo(e){return this.seconds===e.seconds?tt(this.nanoseconds,e.nanoseconds):tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ad(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-oE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:sn("string",ut._jsonSchemaVersion),seconds:sn("number"),nanoseconds:sn("number")};class Be{static fromTimestamp(e){return new Be(e)}static min(){return new Be(new ut(0,0))}static max(){return new Be(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Pu=-1;function Lj(s,e){const t=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=Be.fromTimestamp(a===1e9?new ut(t+1,0):new ut(t,a));return new fr(o,De.empty(),e)}function Pj(s){return new fr(s.readTime,s.key,Pu)}class fr{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new fr(Be.min(),De.empty(),Pu)}static max(){return new fr(Be.max(),De.empty(),Pu)}}function Uj(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=De.comparator(s.documentKey,e.documentKey),t!==0?t:tt(s.largestBatchId,e.largestBatchId))}const Vj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function tc(s){if(s.code!==re.FAILED_PRECONDITION||s.message!==Vj)throw s;xe("LocalStore","Unexpectedly lost primary lease")}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce(((a,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ce.reject(t)}static resolve(e){return new ce(((t,a)=>{t(e)}))}static reject(e){return new ce(((t,a)=>{a(e)}))}static waitFor(e){return new ce(((t,a)=>{let o=0,l=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++l,d&&l===o&&t()}),(g=>a(g)))})),d=!0,l===o&&t()}))}static or(e){let t=ce.resolve(!1);for(const a of e)t=t.next((o=>o?ce.resolve(o):a()));return t}static forEach(e,t){const a=[];return e.forEach(((o,l)=>{a.push(t.call(this,o,l))})),this.waitFor(a)}static mapArray(e,t){return new ce(((a,o)=>{const l=e.length,d=new Array(l);let m=0;for(let g=0;g<l;g++){const _=g;t(e[_]).next((y=>{d[_]=y,++m,m===l&&a(d)}),(y=>o(y)))}}))}static doWhile(e,t){return new ce(((a,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):a()};l()}))}}function qj(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function nc(s){return s.name==="IndexedDbTransactionError"}class Gf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gf.ce=-1;const Q_=-1;function Qf(s){return s==null}function Sf(s){return s===0&&1/s==-1/0}function Hj(s){return typeof s=="number"&&Number.isInteger(s)&&!Sf(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const $S="";function $j(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=cE(e)),e=Fj(s.get(t),e);return cE(e)}function Fj(s,e){let t=e;const a=s.length;for(let o=0;o<a;o++){const l=s.charAt(o);switch(l){case"\0":t+="";break;case $S:t+="";break;default:t+=l}}return t}function cE(s){return s+$S+""}function uE(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function xr(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function FS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class jt{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new jt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return t+a.left.size;o<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qh(this.root,e,this.comparator,!0)}}class Qh{constructor(e,t,a,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,t,a,o,l){this.key=e,this.value=t,this.color=a??Sn.RED,this.left=o??Sn.EMPTY,this.right=l??Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,o,l){return new Sn(e??this.key,t??this.value,a??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let o=this;const l=a(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,a),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Sn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,t,a,o,l){return this}insert(e,t,a){return new Sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cn{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dE(this.data.getIterator())}getIteratorFrom(e){return new dE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=a.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new cn(this.comparator);return t.data=e,t}}class dE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ms{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new ms([])}unionWith(e){let t=new cn(An.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new ms(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fl(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}class GS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class xn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new GS("Invalid base64 string: "+l):l}})(e);return new xn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new xn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xn.EMPTY_BYTE_STRING=new xn("");const Gj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(s){if(dt(!!s,39018),typeof s=="string"){let e=0;const t=Gj.exec(s);if(dt(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Ht(s.seconds),nanos:Ht(s.nanos)}}function Ht(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function pr(s){return typeof s=="string"?xn.fromBase64String(s):xn.fromUint8Array(s)}const QS="server_timestamp",KS="__type__",YS="__previous_value__",WS="__local_write_time__";function K_(s){return(s?.mapValue?.fields||{})[KS]?.stringValue===QS}function Kf(s){const e=s.mapValue.fields[YS];return K_(e)?Kf(e):e}function Uu(s){const e=mr(s.mapValue.fields[WS].timestampValue);return new ut(e.seconds,e.nanos)}class Qj{constructor(e,t,a,o,l,d,m,g,_,y,b){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=y,this.apiKey=b}}const Af="(default)";class Vu{constructor(e,t){this.projectId=e,this.database=t||Af}static empty(){return new Vu("","")}get isDefaultDatabase(){return this.database===Af}isEqual(e){return e instanceof Vu&&e.projectId===this.projectId&&e.database===this.database}}function Kj(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Te(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vu(s.options.projectId,e)}const XS="__type__",Yj="__max__",Kh={mapValue:{}},ZS="__vector__",xf="value";function gr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?K_(s)?4:Xj(s)?9007199254740991:Wj(s)?10:11:Ve(28295,{value:s})}function zi(s,e){if(s===e)return!0;const t=gr(s);if(t!==gr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Uu(s).isEqual(Uu(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=mr(o.timestampValue),m=mr(l.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,l){return pr(o.bytesValue).isEqual(pr(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,l){return Ht(o.geoPointValue.latitude)===Ht(l.geoPointValue.latitude)&&Ht(o.geoPointValue.longitude)===Ht(l.geoPointValue.longitude)})(s,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Ht(o.integerValue)===Ht(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=Ht(o.doubleValue),m=Ht(l.doubleValue);return d===m?Sf(d)===Sf(m):isNaN(d)&&isNaN(m)}return!1})(s,e);case 9:return Fl(s.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},m=l.mapValue.fields||{};if(uE(d)!==uE(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!zi(d[g],m[g])))return!1;return!0})(s,e);default:return Ve(52216,{left:s})}}function Bu(s,e){return(s.values||[]).find((t=>zi(t,e)))!==void 0}function Gl(s,e){if(s===e)return 0;const t=gr(s),a=gr(e);if(t!==a)return tt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return tt(s.booleanValue,e.booleanValue);case 2:return(function(l,d){const m=Ht(l.integerValue||l.doubleValue),g=Ht(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return hE(s.timestampValue,e.timestampValue);case 4:return hE(Uu(s),Uu(e));case 5:return n_(s.stringValue,e.stringValue);case 6:return(function(l,d){const m=pr(l),g=pr(d);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(l,d){const m=l.split("/"),g=d.split("/");for(let _=0;_<m.length&&_<g.length;_++){const y=tt(m[_],g[_]);if(y!==0)return y}return tt(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,d){const m=tt(Ht(l.latitude),Ht(d.latitude));return m!==0?m:tt(Ht(l.longitude),Ht(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return fE(s.arrayValue,e.arrayValue);case 10:return(function(l,d){const m=l.fields||{},g=d.fields||{},_=m[xf]?.arrayValue,y=g[xf]?.arrayValue,b=tt(_?.values?.length||0,y?.values?.length||0);return b!==0?b:fE(_,y)})(s.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Kh.mapValue&&d===Kh.mapValue)return 0;if(l===Kh.mapValue)return 1;if(d===Kh.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),_=d.fields||{},y=Object.keys(_);g.sort(),y.sort();for(let b=0;b<g.length&&b<y.length;++b){const S=n_(g[b],y[b]);if(S!==0)return S;const N=Gl(m[g[b]],_[y[b]]);if(N!==0)return N}return tt(g.length,y.length)})(s.mapValue,e.mapValue);default:throw Ve(23264,{he:t})}}function hE(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return tt(s,e);const t=mr(s),a=mr(e),o=tt(t.seconds,a.seconds);return o!==0?o:tt(t.nanos,a.nanos)}function fE(s,e){const t=s.values||[],a=e.values||[];for(let o=0;o<t.length&&o<a.length;++o){const l=Gl(t[o],a[o]);if(l)return l}return tt(t.length,a.length)}function Ql(s){return s_(s)}function s_(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const a=mr(t);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return pr(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return De.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let a="[",o=!0;for(const l of t.values||[])o?o=!1:a+=",",a+=s_(l);return a+"]"})(s.arrayValue):"mapValue"in s?(function(t){const a=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of a)l?l=!1:o+=",",o+=`${d}:${s_(t.fields[d])}`;return o+"}"})(s.mapValue):Ve(61005,{value:s})}function lf(s){switch(gr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kf(s);return e?16+lf(e):16;case 5:return 2*s.stringValue.length;case 6:return pr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,l)=>o+lf(l)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return xr(a.fields,((l,d)=>{o+=l.length+lf(d)})),o})(s.mapValue);default:throw Ve(13486,{value:s})}}function mE(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function i_(s){return!!s&&"integerValue"in s}function Y_(s){return!!s&&"arrayValue"in s}function pE(s){return!!s&&"nullValue"in s}function gE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function cf(s){return!!s&&"mapValue"in s}function Wj(s){return(s?.mapValue?.fields||{})[XS]?.stringValue===ZS}function Nu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return xr(s.mapValue.fields,((t,a)=>e.mapValue.fields[t]=Nu(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nu(s.arrayValue.values[t]);return e}return{...s}}function Xj(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Yj}class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!cf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nu(t)}setAll(e){let t=An.emptyPath(),a={},o=[];e.forEach(((d,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,a,o),a={},o=[],t=m.popLast()}d?a[m.lastSegment()]=Nu(d):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,a,o)}delete(e){const t=this.field(e.popLast());cf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=t.mapValue.fields[e.get(a)];cf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,a){xr(t,((o,l)=>e[o]=l));for(const o of a)delete e[o]}clone(){return new Jn(Nu(this.value))}}function JS(s){const e=[];return xr(s.fields,((t,a)=>{const o=new An([t]);if(cf(a)){const l=JS(a.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new ms(e)}class zn{constructor(e,t,a,o,l,d,m){this.key=e,this.documentType=t,this.version=a,this.readTime=o,this.createTime=l,this.data=d,this.documentState=m}static newInvalidDocument(e){return new zn(e,0,Be.min(),Be.min(),Be.min(),Jn.empty(),0)}static newFoundDocument(e,t,a,o){return new zn(e,1,t,Be.min(),a,o,0)}static newNoDocument(e,t){return new zn(e,2,t,Be.min(),Be.min(),Jn.empty(),0)}static newUnknownDocument(e,t){return new zn(e,3,t,Be.min(),Be.min(),Jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wf{constructor(e,t){this.position=e,this.inclusive=t}}function _E(s,e,t){let a=0;for(let o=0;o<s.position.length;o++){const l=e[o],d=s.position[o];if(l.field.isKeyField()?a=De.comparator(De.fromName(d.referenceValue),t.key):a=Gl(d,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function yE(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!zi(s.position[t],e.position[t]))return!1;return!0}class qu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Zj(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class eA{}class nn extends eA{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new eD(e,t,a):t==="array-contains"?new sD(e,a):t==="in"?new iD(e,a):t==="not-in"?new aD(e,a):t==="array-contains-any"?new rD(e,a):new nn(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new tD(e,a):new nD(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Gl(t,this.value)):t!==null&&gr(this.value)===gr(t)&&this.matchesComparison(Gl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ti extends eA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ti(e,t)}matches(e){return tA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function tA(s){return s.op==="and"}function nA(s){return Jj(s)&&tA(s)}function Jj(s){for(const e of s.filters)if(e instanceof ti)return!1;return!0}function a_(s){if(s instanceof nn)return s.field.canonicalString()+s.op.toString()+Ql(s.value);if(nA(s))return s.filters.map((e=>a_(e))).join(",");{const e=s.filters.map((t=>a_(t))).join(",");return`${s.op}(${e})`}}function sA(s,e){return s instanceof nn?(function(a,o){return o instanceof nn&&a.op===o.op&&a.field.isEqual(o.field)&&zi(a.value,o.value)})(s,e):s instanceof ti?(function(a,o){return o instanceof ti&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((l,d,m)=>l&&sA(d,o.filters[m])),!0):!1})(s,e):void Ve(19439)}function iA(s){return s instanceof nn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ql(t.value)}`})(s):s instanceof ti?(function(t){return t.op.toString()+" {"+t.getFilters().map(iA).join(" ,")+"}"})(s):"Filter"}class eD extends nn{constructor(e,t,a){super(e,t,a),this.key=De.fromName(a.referenceValue)}matches(e){const t=De.comparator(e.key,this.key);return this.matchesComparison(t)}}class tD extends nn{constructor(e,t){super(e,"in",t),this.keys=aA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class nD extends nn{constructor(e,t){super(e,"not-in",t),this.keys=aA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function aA(s,e){return(e.arrayValue?.values||[]).map((t=>De.fromName(t.referenceValue)))}class sD extends nn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Y_(t)&&Bu(t.arrayValue,this.value)}}class iD extends nn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Bu(this.value.arrayValue,t)}}class aD extends nn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bu(this.value.arrayValue,t)}}class rD extends nn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Y_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>Bu(this.value.arrayValue,a)))}}class oD{constructor(e,t=null,a=[],o=[],l=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=o,this.limit=l,this.startAt=d,this.endAt=m,this.Te=null}}function vE(s,e=null,t=[],a=[],o=null,l=null,d=null){return new oD(s,e,t,a,o,l,d)}function W_(s){const e=He(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>a_(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(l){return l.field.canonicalString()+l.dir})(a))).join(","),Qf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>Ql(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>Ql(a))).join(",")),e.Te=t}return e.Te}function X_(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!Zj(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!sA(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!yE(s.startAt,e.startAt)&&yE(s.endAt,e.endAt)}function r_(s){return De.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class sc{constructor(e,t=null,a=[],o=[],l=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=o,this.limit=l,this.limitType=d,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function lD(s,e,t,a,o,l,d,m){return new sc(s,e,t,a,o,l,d,m)}function Z_(s){return new sc(s)}function bE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function cD(s){return De.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function rA(s){return s.collectionGroup!==null}function Cu(s){const e=He(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new cn(An.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new qu(l,a))})),t.has(An.keyField().canonicalString())||e.Ie.push(new qu(An.keyField(),a))}return e.Ie}function ji(s){const e=He(s);return e.Ee||(e.Ee=uD(e,Cu(s))),e.Ee}function uD(s,e){if(s.limitType==="F")return vE(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new qu(o.field,l)}));const t=s.endAt?new wf(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new wf(s.startAt.position,s.startAt.inclusive):null;return vE(s.path,s.collectionGroup,e,s.filters,s.limit,t,a)}}function o_(s,e){const t=s.filters.concat([e]);return new sc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function dD(s,e){const t=s.explicitOrderBy.concat([e]);return new sc(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function If(s,e,t){return new sc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Yf(s,e){return X_(ji(s),ji(e))&&s.limitType===e.limitType}function oA(s){return`${W_(ji(s))}|lt:${s.limitType}`}function kl(s){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((o=>iA(o))).join(", ")}]`),Qf(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((o=>Ql(o))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((o=>Ql(o))).join(",")),`Target(${a})`})(ji(s))}; limitType=${s.limitType})`}function Wf(s,e){return e.isFoundDocument()&&(function(a,o){const l=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):De.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)})(s,e)&&(function(a,o){for(const l of Cu(a))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const l of a.filters)if(!l.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(d,m,g){const _=_E(d,m,g);return d.inclusive?_<=0:_<0})(a.startAt,Cu(a),o)||a.endAt&&!(function(d,m,g){const _=_E(d,m,g);return d.inclusive?_>=0:_>0})(a.endAt,Cu(a),o))})(s,e)}function hD(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function lA(s){return(e,t)=>{let a=!1;for(const o of Cu(s)){const l=fD(o,e,t);if(l!==0)return l;a=a||o.field.isKeyField()}return 0}}function fD(s,e,t){const a=s.field.isKeyField()?De.comparator(e.key,t.key):(function(l,d,m){const g=d.data.field(l),_=m.data.field(l);return g!==null&&_!==null?Gl(g,_):Ve(42886)})(s.field,e,t);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Ve(19790,{direction:s.dir})}}class Do{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[o,l]of a)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[t]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xr(this.inner,((t,a)=>{for(const[o,l]of a)e(o,l)}))}isEmpty(){return FS(this.inner)}size(){return this.innerSize}}const mD=new jt(De.comparator);function pa(){return mD}const cA=new jt(De.comparator);function Au(...s){let e=cA;for(const t of s)e=e.insert(t.key,t);return e}function uA(s){let e=cA;return s.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function ho(){return ku()}function dA(){return ku()}function ku(){return new Do((s=>s.toString()),((s,e)=>s.isEqual(e)))}const pD=new jt(De.comparator),gD=new cn(De.comparator);function nt(...s){let e=gD;for(const t of s)e=e.add(t);return e}const _D=new cn(tt);function yD(){return _D}function J_(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sf(e)?"-0":e}}function hA(s){return{integerValue:""+s}}function vD(s,e){return Hj(e)?hA(e):J_(s,e)}class Xf{constructor(){this._=void 0}}function bD(s,e,t){return s instanceof Hu?(function(o,l){const d={fields:{[KS]:{stringValue:QS},[WS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&K_(l)&&(l=Kf(l)),l&&(d.fields[YS]=l),{mapValue:d}})(t,e):s instanceof $u?mA(s,e):s instanceof Fu?pA(s,e):(function(o,l){const d=fA(o,l),m=EE(d)+EE(o.Ae);return i_(d)&&i_(o.Ae)?hA(m):J_(o.serializer,m)})(s,e)}function ED(s,e,t){return s instanceof $u?mA(s,e):s instanceof Fu?pA(s,e):t}function fA(s,e){return s instanceof Rf?(function(a){return i_(a)||(function(l){return!!l&&"doubleValue"in l})(a)})(e)?e:{integerValue:0}:null}class Hu extends Xf{}class $u extends Xf{constructor(e){super(),this.elements=e}}function mA(s,e){const t=gA(e);for(const a of s.elements)t.some((o=>zi(o,a)))||t.push(a);return{arrayValue:{values:t}}}class Fu extends Xf{constructor(e){super(),this.elements=e}}function pA(s,e){let t=gA(e);for(const a of s.elements)t=t.filter((o=>!zi(o,a)));return{arrayValue:{values:t}}}class Rf extends Xf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function EE(s){return Ht(s.integerValue||s.doubleValue)}function gA(s){return Y_(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class TD{constructor(e,t){this.field=e,this.transform=t}}function SD(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof $u&&o instanceof $u||a instanceof Fu&&o instanceof Fu?Fl(a.elements,o.elements,zi):a instanceof Rf&&o instanceof Rf?zi(a.Ae,o.Ae):a instanceof Hu&&o instanceof Hu})(s.transform,e.transform)}class AD{constructor(e,t){this.version=e,this.transformResults=t}}class Ms{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ms}static exists(e){return new Ms(void 0,e)}static updateTime(e){return new Ms(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Zf{}function _A(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new ey(s.key,Ms.none()):new rd(s.key,s.data,Ms.none());{const t=s.data,a=Jn.empty();let o=new cn(An.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?a.delete(l):a.set(l,d),o=o.add(l)}return new wr(s.key,a,new ms(o.toArray()),Ms.none())}}function xD(s,e,t){s instanceof rd?(function(o,l,d){const m=o.value.clone(),g=SE(o.fieldTransforms,l,d.transformResults);m.setAll(g),l.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(s,e,t):s instanceof wr?(function(o,l,d){if(!uf(o.precondition,l))return void l.convertToUnknownDocument(d.version);const m=SE(o.fieldTransforms,l,d.transformResults),g=l.data;g.setAll(yA(o)),g.setAll(m),l.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,t):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function ju(s,e,t,a){return s instanceof rd?(function(l,d,m,g){if(!uf(l.precondition,d))return m;const _=l.value.clone(),y=AE(l.fieldTransforms,g,d);return _.setAll(y),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(s,e,t,a):s instanceof wr?(function(l,d,m,g){if(!uf(l.precondition,d))return m;const _=AE(l.fieldTransforms,g,d),y=d.data;return y.setAll(yA(l)),y.setAll(_),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(s,e,t,a):(function(l,d,m){return uf(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(s,e,t)}function wD(s,e){let t=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),l=fA(a.transform,o||null);l!=null&&(t===null&&(t=Jn.empty()),t.set(a.field,l))}return t||null}function TE(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Fl(a,o,((l,d)=>SD(l,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class rd extends Zf{constructor(e,t,a,o=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class wr extends Zf{constructor(e,t,a,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function yA(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=s.data.field(t);e.set(t,a)}})),e}function SE(s,e,t){const a=new Map;dt(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let o=0;o<t.length;o++){const l=s[o],d=l.transform,m=e.data.field(l.field);a.set(l.field,ED(d,m,t[o]))}return a}function AE(s,e,t){const a=new Map;for(const o of s){const l=o.transform,d=t.data.field(o.field);a.set(o.field,bD(l,d,e))}return a}class ey extends Zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ID extends Zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class RD{constructor(e,t,a,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&xD(l,e,a[o])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=ju(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=ju(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=dA();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let m=this.applyToLocalView(d,l.mutatedFields);m=t.has(o.key)?null:m;const g=_A(d,m);g!==null&&a.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Be.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),nt())}isEqual(e){return this.batchId===e.batchId&&Fl(this.mutations,e.mutations,((t,a)=>TE(t,a)))&&Fl(this.baseMutations,e.baseMutations,((t,a)=>TE(t,a)))}}class ty{constructor(e,t,a,o){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=o}static from(e,t,a){dt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return pD})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,a[d].version);return new ty(e,t,a,o)}}class ND{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class CD{constructor(e,t){this.count=e,this.unchangedNames=t}}var tn,it;function kD(s){switch(s){case re.OK:return Ve(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ve(15467,{code:s})}}function vA(s){if(s===void 0)return ma("GRPC error has no .code"),re.UNKNOWN;switch(s){case tn.OK:return re.OK;case tn.CANCELLED:return re.CANCELLED;case tn.UNKNOWN:return re.UNKNOWN;case tn.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case tn.INTERNAL:return re.INTERNAL;case tn.UNAVAILABLE:return re.UNAVAILABLE;case tn.UNAUTHENTICATED:return re.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case tn.NOT_FOUND:return re.NOT_FOUND;case tn.ALREADY_EXISTS:return re.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return re.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case tn.ABORTED:return re.ABORTED;case tn.OUT_OF_RANGE:return re.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return re.UNIMPLEMENTED;case tn.DATA_LOSS:return re.DATA_LOSS;default:return Ve(39323,{code:s})}}(it=tn||(tn={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";function jD(){return new TextEncoder}const DD=new ur([4294967295,4294967295],0);function xE(s){const e=jD().encode(s),t=new OS;return t.update(e),new Uint8Array(t.digest())}function wE(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ur([t,a],0),new ur([o,l],0)]}class ny{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new xu(`Invalid padding: ${t}`);if(a<0)throw new xu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new xu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new xu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ur.fromNumber(this.ge)}ye(e,t,a){let o=e.add(t.multiply(ur.fromNumber(a)));return o.compare(DD)===1&&(o=new ur([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=xE(e),[a,o]=wE(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(a,o,l);if(!this.we(d))return!1}return!0}static create(e,t,a){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new ny(l,o,t);return a.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const t=xE(e),[a,o]=wE(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(a,o,l);this.be(d)}}be(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class xu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Jf{constructor(e,t,a,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const o=new Map;return o.set(e,od.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Jf(Be.min(),o,new jt(tt),pa(),nt())}}class od{constructor(e,t,a,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new od(a,t,nt(),nt(),nt())}}class df{constructor(e,t,a,o){this.Se=e,this.removedTargetIds=t,this.key=a,this.De=o}}class bA{constructor(e,t){this.targetId=e,this.Ce=t}}class EA{constructor(e,t,a=xn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=o}}class IE{constructor(){this.ve=0,this.Fe=RE(),this.Me=xn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=nt(),t=nt(),a=nt();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:a=a.add(o);break;default:Ve(38017,{changeType:l})}})),new od(this.Me,this.xe,e,t,a)}Ke(){this.Oe=!1,this.Fe=RE()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class OD{constructor(e){this.Ge=e,this.ze=new Map,this.je=pa(),this.He=Yh(),this.Je=Yh(),this.Ze=new jt(tt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,a=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(r_(l))if(a===0){const d=new De(l.path);this.et(t,d,zn.newNoDocument(d,Be.min()))}else dt(a===1,20013,{expectedCount:a});else{const d=this._t(t);if(d!==a){const m=this.ut(e),g=m?this.ct(m,e,d):1;if(g!==0){this.it(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,_)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:l=0}=t;let d,m;try{d=pr(a).toUint8Array()}catch(g){if(g instanceof GS)return So("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new ny(d,o,l)}catch(g){return So(g instanceof xu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let o=0;return a.forEach((l=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,d)=>{const m=this.ot(d);if(m){if(l.current&&r_(m.target)){const g=new De(m.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,zn.newNoDocument(g,e))}l.Be&&(t.set(d,l.ke()),l.Ke())}}));let a=nt();this.Je.forEach(((l,d)=>{let m=!0;d.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(a=a.add(l))})),this.je.forEach(((l,d)=>d.setReadTime(e)));const o=new Jf(e,t,this.Ze,this.je,a);return this.je=pa(),this.He=Yh(),this.Je=Yh(),this.Ze=new jt(tt),o}Ye(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,a),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new IE,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new cn(tt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new cn(tt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||xe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new IE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Yh(){return new jt(De.comparator)}function RE(){return new jt(De.comparator)}const MD={asc:"ASCENDING",desc:"DESCENDING"},zD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LD={and:"AND",or:"OR"};class PD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function l_(s,e){return s.useProto3Json||Qf(e)?e:{value:e}}function Nf(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TA(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function UD(s,e){return Nf(s,e.toTimestamp())}function Di(s){return dt(!!s,49232),Be.fromTimestamp((function(t){const a=mr(t);return new ut(a.seconds,a.nanos)})(s))}function sy(s,e){return c_(s,e).canonicalString()}function c_(s,e){const t=(function(o){return new At(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function SA(s){const e=At.fromString(s);return dt(RA(e),10190,{key:e.toString()}),e}function u_(s,e){return sy(s.databaseId,e.path)}function jg(s,e){const t=SA(e);if(t.get(1)!==s.databaseId.projectId)throw new Te(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Te(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new De(xA(t))}function AA(s,e){return sy(s.databaseId,e)}function VD(s){const e=SA(s);return e.length===4?At.emptyPath():xA(e)}function d_(s){return new At(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function xA(s){return dt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function NE(s,e,t){return{name:u_(s,e),fields:t.value.mapValue.fields}}function BD(s,e){let t;if("targetChange"in e){e.targetChange;const a=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ve(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(_,y){return _.useProto3Json?(dt(y===void 0||typeof y=="string",58123),xn.fromBase64String(y||"")):(dt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),xn.fromUint8Array(y||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(_){const y=_.code===void 0?re.UNKNOWN:vA(_.code);return new Te(y,_.message||"")})(d);t=new EA(a,o,l,m||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=jg(s,a.document.name),l=Di(a.document.updateTime),d=a.document.createTime?Di(a.document.createTime):Be.min(),m=new Jn({mapValue:{fields:a.document.fields}}),g=zn.newFoundDocument(o,l,d,m),_=a.targetIds||[],y=a.removedTargetIds||[];t=new df(_,y,g.key,g)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=jg(s,a.document),l=a.readTime?Di(a.readTime):Be.min(),d=zn.newNoDocument(o,l),m=a.removedTargetIds||[];t=new df([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=jg(s,a.document),l=a.removedTargetIds||[];t=new df([],l,o,null)}else{if(!("filter"in e))return Ve(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:l}=a,d=new CD(o,l),m=a.targetId;t=new bA(m,d)}}return t}function qD(s,e){let t;if(e instanceof rd)t={update:NE(s,e.key,e.value)};else if(e instanceof ey)t={delete:u_(s,e.key)};else if(e instanceof wr)t={update:NE(s,e.key,e.data),updateMask:XD(e.fieldMask)};else{if(!(e instanceof ID))return Ve(16599,{dt:e.type});t={verify:u_(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(l,d){const m=d.transform;if(m instanceof Hu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof $u)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Fu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Rf)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw Ve(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:UD(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ve(27497)})(s,e.precondition)),t}function HD(s,e){return s&&s.length>0?(dt(e!==void 0,14353),s.map((t=>(function(o,l){let d=o.updateTime?Di(o.updateTime):Di(l);return d.isEqual(Be.min())&&(d=Di(l)),new AD(d,o.transformResults||[])})(t,e)))):[]}function $D(s,e){return{documents:[AA(s,e.path)]}}function FD(s,e){const t={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=AA(s,o);const l=(function(_){if(_.length!==0)return IA(ti.create(_,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(_){if(_.length!==0)return _.map((y=>(function(S){return{field:jl(S.field),direction:KD(S.dir)}})(y)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=l_(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:t,parent:o}}function GD(s){let e=VD(s.parent);const t=s.structuredQuery,a=t.from?t.from.length:0;let o=null;if(a>0){dt(a===1,65062);const y=t.from[0];y.allDescendants?o=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(b){const S=wA(b);return S instanceof ti&&nA(S)?S.getFilters():[S]})(t.where));let d=[];t.orderBy&&(d=(function(b){return b.map((S=>(function(z){return new qu(Dl(z.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(S)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let S;return S=typeof b=="object"?b.value:b,Qf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(b){const S=!!b.before,N=b.values||[];return new wf(N,S)})(t.startAt));let _=null;return t.endAt&&(_=(function(b){const S=!b.before,N=b.values||[];return new wf(N,S)})(t.endAt)),lD(e,o,d,l,m,"F",g,_)}function QD(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wA(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=Dl(t.unaryFilter.field);return nn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=Dl(t.unaryFilter.field);return nn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Dl(t.unaryFilter.field);return nn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Dl(t.unaryFilter.field);return nn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(s):s.fieldFilter!==void 0?(function(t){return nn.create(Dl(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ti.create(t.compositeFilter.filters.map((a=>wA(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(t.compositeFilter.op))})(s):Ve(30097,{filter:s})}function KD(s){return MD[s]}function YD(s){return zD[s]}function WD(s){return LD[s]}function jl(s){return{fieldPath:s.canonicalString()}}function Dl(s){return An.fromServerFormat(s.fieldPath)}function IA(s){return s instanceof nn?(function(t){if(t.op==="=="){if(gE(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NAN"}};if(pE(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(gE(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NOT_NAN"}};if(pE(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jl(t.field),op:YD(t.op),value:t.value}}})(s):s instanceof ti?(function(t){const a=t.getFilters().map((o=>IA(o)));return a.length===1?a[0]:{compositeFilter:{op:WD(t.op),filters:a}}})(s):Ve(54877,{filter:s})}function XD(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function RA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function NA(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class ar{constructor(e,t,a,o,l=Be.min(),d=Be.min(),m=xn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ZD{constructor(e){this.yt=e}}function JD(s){const e=GD({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?If(e,e.limit,"L"):e}class e4{constructor(){this.Sn=new t4}addToCollectionParentIndex(e,t){return this.Sn.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(fr.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(fr.min())}updateCollectionGroup(e,t,a){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class t4{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),o=this.index[t]||new cn(At.comparator),l=!o.has(a);return this.index[t]=o.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),o=this.index[t];return o&&o.has(a)}getEntries(e){return(this.index[e]||new cn(At.comparator)).toArray()}}const CE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CA=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(CA,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);class Kl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Kl(0)}static ar(){return new Kl(-1)}}const kE="LruGarbageCollector",n4=1048576;function jE([s,e],[t,a]){const o=tt(s,t);return o===0?tt(e,a):o}class s4{constructor(e){this.Pr=e,this.buffer=new cn(jE),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();jE(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class i4{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){xe(kE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){nc(t)?xe(kE,"Ignoring IndexedDB error during garbage collection: ",t):await tc(t)}await this.Ar(3e5)}))}}class a4{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return ce.resolve(Gf.ce);const a=new s4(t);return this.Vr.forEachTarget(e,(o=>a.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>a.Er(o))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.Vr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(CE)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CE):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let a,o,l,d,m,g,_;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,d=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(a=b,m=Date.now(),this.removeTargets(e,a,t)))).next((b=>(l=b,g=Date.now(),this.removeOrphanedDocuments(e,a)))).next((b=>(_=Date.now(),Cl()<=et.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-y}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(_-g)+`ms
Total Duration: ${_-y}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:b}))))}}function r4(s,e){return new a4(s,e)}class o4{constructor(){this.changes=new Do((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?ce.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class l4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class c4{constructor(e,t,a,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(a!==null&&ju(a.mutation,o,ms.empty(),ut.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,nt()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=nt()){const o=ho();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,a).next((l=>{let d=Au();return l.forEach(((m,g)=>{d=d.insert(m,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const a=ho();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,nt())))}populateOverlays(e,t,a){const o=[];return a.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,m)=>{t.set(d,m)}))}))}computeViews(e,t,a,o){let l=pa();const d=ku(),m=(function(){return ku()})();return t.forEach(((g,_)=>{const y=a.get(_.key);o.has(_.key)&&(y===void 0||y.mutation instanceof wr)?l=l.insert(_.key,_):y!==void 0?(d.set(_.key,y.mutation.getFieldMask()),ju(y.mutation,_,y.mutation.getFieldMask(),ut.now())):d.set(_.key,ms.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((_,y)=>d.set(_,y))),t.forEach(((_,y)=>m.set(_,new l4(y,d.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,t){const a=ku();let o=new jt(((d,m)=>d-m)),l=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const m of d)m.keys().forEach((g=>{const _=t.get(g);if(_===null)return;let y=a.get(g)||ms.empty();y=m.applyToLocalView(_,y),a.set(g,y);const b=(o.get(m.batchId)||nt()).add(g);o=o.insert(m.batchId,b)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,y=g.value,b=dA();y.forEach((S=>{if(!l.has(S)){const N=_A(t.get(S),a.get(S));N!==null&&b.set(S,N),l=l.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,_,b))}return ce.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,o){return cD(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,o):this.getDocumentsMatchingCollectionQuery(e,t,a,o)}getNextDocuments(e,t,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,o-l.size):ce.resolve(ho());let m=Pu,g=l;return d.next((_=>ce.forEach(_,((y,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),l.get(y)?ce.resolve():this.remoteDocumentCache.getEntry(e,y).next((S=>{g=g.insert(y,S)}))))).next((()=>this.populateOverlays(e,_,l))).next((()=>this.computeViews(e,g,_,nt()))).next((y=>({batchId:m,changes:uA(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new De(t)).next((a=>{let o=Au();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,o){const l=t.collectionGroup;let d=Au();return this.indexManager.getCollectionParents(e,l).next((m=>ce.forEach(m,(g=>{const _=(function(b,S){return new sc(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,_,a,o).next((y=>{y.forEach(((b,S)=>{d=d.insert(b,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,a,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,o)))).next((d=>{l.forEach(((g,_)=>{const y=_.getKey();d.get(y)===null&&(d=d.insert(y,zn.newInvalidDocument(y)))}));let m=Au();return d.forEach(((g,_)=>{const y=l.get(g);y!==void 0&&ju(y.mutation,_,ms.empty(),ut.now()),Wf(t,_)&&(m=m.insert(g,_))})),m}))}}class u4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ce.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Di(o.createTime)}})(t)),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:JD(o.bundledQuery),readTime:Di(o.readTime)}})(t)),ce.resolve()}}class d4{constructor(){this.overlays=new jt(De.comparator),this.Lr=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const a=ho();return ce.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&a.set(o,l)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((o,l)=>{this.bt(e,t,l)})),ce.resolve()}removeOverlaysForBatchId(e,t,a){const o=this.Lr.get(a);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(a)),ce.resolve()}getOverlaysForCollection(e,t,a){const o=ho(),l=t.length+1,d=new De(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===l&&g.largestBatchId>a&&o.set(g.getKey(),g)}return ce.resolve(o)}getOverlaysForCollectionGroup(e,t,a,o){let l=new jt(((_,y)=>_-y));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>a){let y=l.get(_.largestBatchId);y===null&&(y=ho(),l=l.insert(_.largestBatchId,y)),y.set(_.getKey(),_)}}const m=ho(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,y)=>m.set(_,y))),!(m.size()>=o)););return ce.resolve(m)}bt(e,t,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.Lr.get(o.largestBatchId).delete(a.key);this.Lr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new ND(t,a));let l=this.Lr.get(t);l===void 0&&(l=nt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(a.key))}}class h4{constructor(){this.sessionToken=xn.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ce.resolve()}}class iy{constructor(){this.kr=new cn(fn.Kr),this.qr=new cn(fn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const a=new fn(e,t);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Wr(new fn(e,t))}Qr(e,t){e.forEach((a=>this.removeReference(a,t)))}Gr(e){const t=new De(new At([])),a=new fn(t,e),o=new fn(t,e+1),l=[];return this.qr.forEachInRange([a,o],(d=>{this.Wr(d),l.push(d.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new De(new At([])),a=new fn(t,e),o=new fn(t,e+1);let l=nt();return this.qr.forEachInRange([a,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new fn(e,0),a=this.kr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class fn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return De.comparator(e.key,t.key)||tt(e.Hr,t.Hr)}static Ur(e,t){return tt(e.Hr,t.Hr)||De.comparator(e.key,t.key)}}class f4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new cn(fn.Kr)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new RD(l,t,a,o);this.mutationQueue.push(d);for(const m of o)this.Jr=this.Jr.add(new fn(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ce.resolve(d)}lookupMutationBatch(e,t){return ce.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,o=this.Xr(a),l=o<0?0:o;return ce.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?Q_:this.Yn-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new fn(t,0),o=new fn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([a,o],(d=>{const m=this.Zr(d.Hr);l.push(m)})),ce.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new cn(tt);return t.forEach((o=>{const l=new fn(o,0),d=new fn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,d],(m=>{a=a.add(m.Hr)}))})),ce.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,o=a.length+1;let l=a;De.isDocumentKey(l)||(l=l.child(""));const d=new fn(new De(l),0);let m=new cn(tt);return this.Jr.forEachWhile((g=>{const _=g.key.path;return!!a.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Hr)),!0)}),d),ce.resolve(this.Yr(m))}Yr(e){const t=[];return e.forEach((a=>{const o=this.Zr(a);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){dt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return ce.forEach(t.mutations,(o=>{const l=new fn(o.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,t){const a=new fn(t,0),o=this.Jr.firstAfterOrEqual(a);return ce.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class m4{constructor(e){this.ti=e,this.docs=(function(){return new jt(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,o=this.docs.get(a),l=o?o.size:0,d=this.ti(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return ce.resolve(a?a.document.mutableCopy():zn.newInvalidDocument(t))}getEntries(e,t){let a=pa();return t.forEach((o=>{const l=this.docs.get(o);a=a.insert(o,l?l.document.mutableCopy():zn.newInvalidDocument(o))})),ce.resolve(a)}getDocumentsMatchingQuery(e,t,a,o){let l=pa();const d=t.path,m=new De(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:y}}=g.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||Uj(Pj(y),a)<=0||(o.has(y.key)||Wf(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return ce.resolve(l)}getAllFromCollectionGroup(e,t,a,o){Ve(9500)}ni(e,t){return ce.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new p4(this)}getSize(e){return ce.resolve(this.size)}}class p4 extends o4{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(a)})),ce.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class g4{constructor(e){this.persistence=e,this.ri=new Do((t=>W_(t)),X_),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.ii=0,this.si=new iy,this.targetCount=0,this.oi=Kl._r()}forEachTarget(e,t){return this.ri.forEach(((a,o)=>t(o))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ii&&(this.ii=t),ce.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Kl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.lr(t),ce.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,a){let o=0;const l=[];return this.ri.forEach(((d,m)=>{m.sequenceNumber<=t&&a.get(m.targetId)===null&&(this.ri.delete(d),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ce.waitFor(l).next((()=>o))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const a=this.ri.get(t)||null;return ce.resolve(a)}addMatchingKeys(e,t,a){return this.si.$r(t,a),ce.resolve()}removeMatchingKeys(e,t,a){this.si.Qr(t,a);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),ce.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const a=this.si.jr(t);return ce.resolve(a)}containsKey(e,t){return ce.resolve(this.si.containsKey(t))}}class kA{constructor(e,t){this._i={},this.overlays={},this.ai=new Gf(0),this.ui=!1,this.ui=!0,this.ci=new h4,this.referenceDelegate=e(this),this.li=new g4(this),this.indexManager=new e4,this.remoteDocumentCache=(function(o){return new m4(o)})((a=>this.referenceDelegate.hi(a))),this.serializer=new ZD(t),this.Pi=new u4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new d4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this._i[e.toKey()];return a||(a=new f4(t,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,a){xe("MemoryPersistence","Starting transaction:",e);const o=new _4(this.ai.next());return this.referenceDelegate.Ti(),a(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return ce.or(Object.values(this._i).map((a=>()=>a.containsKey(e,t))))}}class _4 extends Bj{constructor(e){super(),this.currentSequenceNumber=e}}class ay{constructor(e){this.persistence=e,this.Ri=new iy,this.Ai=null}static Vi(e){return new ay(e)}get di(){if(this.Ai)return this.Ai;throw Ve(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.di.delete(a.toString()),ce.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.di.add(a.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>a.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.di,(a=>{const o=De.fromPath(a);return this.mi(e,o).next((l=>{l||t.removeEntry(o,Be.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ce.or([()=>ce.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Cf{constructor(e,t){this.persistence=e,this.fi=new Do((a=>$j(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=r4(this,t)}static Vi(e,t){return new Cf(e,t)}Ti(){}Ii(e){return ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((o=>a+o))))}pr(e){let t=0;return this.mr(e,(a=>{t++})).next((()=>t))}mr(e,t){return ce.forEach(this.fi,((a,o)=>this.wr(e,a,o).next((l=>l?ce.resolve():t(o)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(d=>this.wr(e,d,t).next((m=>{m||(a++,l.removeEntry(d,Be.min()))})))).next((()=>l.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ce.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),ce.resolve()}removeReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ce.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=lf(e.data.value)),t}wr(e,t,a){return ce.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return ce.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ry{constructor(e,t,a,o){this.targetId=e,this.fromCache=t,this.Ts=a,this.Is=o}static Es(e,t){let a=nt(),o=nt();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new ry(e,t.fromCache,a,o)}}class y4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class v4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return FR()?8:qj(Ln())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,o){const l={result:null};return this.gs(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ps(e,t,o,a).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new y4;return this.ys(e,t,d).next((m=>{if(l.result=m,this.As)return this.ws(e,t,d,m.size)}))})).next((()=>l.result))}ws(e,t,a,o){return a.documentReadCount<this.Vs?(Cl()<=et.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",kl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ce.resolve()):(Cl()<=et.DEBUG&&xe("QueryEngine","Query:",kl(t),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.ds*o?(Cl()<=et.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",kl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ji(t))):ce.resolve())}gs(e,t){if(bE(t))return ce.resolve(null);let a=ji(t);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=If(t,null,"F"),a=ji(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((l=>{const d=nt(...l);return this.fs.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,a).next((g=>{const _=this.bs(t,m);return this.Ss(t,_,d,g.readTime)?this.gs(e,If(t,null,"F")):this.Ds(e,_,t,g)}))))})))))}ps(e,t,a,o){return bE(t)||o.isEqual(Be.min())?ce.resolve(null):this.fs.getDocuments(e,a).next((l=>{const d=this.bs(t,l);return this.Ss(t,d,a,o)?ce.resolve(null):(Cl()<=et.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),kl(t)),this.Ds(e,d,t,Lj(o,Pu)).next((m=>m)))}))}bs(e,t){let a=new cn(lA(e));return t.forEach(((o,l)=>{Wf(e,l)&&(a=a.add(l))})),a}Ss(e,t,a,o){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,t,a){return Cl()<=et.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",kl(t)),this.fs.getDocumentsMatchingQuery(e,t,fr.min(),a)}Ds(e,t,a,o){return this.fs.getDocumentsMatchingQuery(e,a,o).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}const oy="LocalStore",b4=3e8;class E4{constructor(e,t,a,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new jt(tt),this.Fs=new Do((l=>W_(l)),X_),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function T4(s,e,t,a){return new E4(s,e,t,a)}async function jA(s,e){const t=He(s);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return t.mutationQueue.getAllMutationBatches(a).next((l=>(o=l,t.Os(e),t.mutationQueue.getAllMutationBatches(a)))).next((l=>{const d=[],m=[];let g=nt();for(const _ of o){d.push(_.batchId);for(const y of _.mutations)g=g.add(y.key)}for(const _ of l){m.push(_.batchId);for(const y of _.mutations)g=g.add(y.key)}return t.localDocuments.getDocuments(a,g).next((_=>({Ns:_,removedBatchIds:d,addedBatchIds:m})))}))}))}function S4(s,e){const t=He(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(m,g,_,y){const b=_.batch,S=b.keys();let N=ce.resolve();return S.forEach((z=>{N=N.next((()=>y.getEntry(g,z))).next((V=>{const k=_.docVersions.get(z);dt(k!==null,48541),V.version.compareTo(k)<0&&(b.applyToRemoteDocument(V,_),V.isValidDocument()&&(V.setReadTime(_.commitVersion),y.addEntry(V)))}))})),N.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(t,a,e,l).next((()=>l.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(m){let g=nt();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(a,o)))}))}function DA(s){const e=He(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function A4(s,e){const t=He(s),a=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const m=[];e.targetChanges.forEach(((y,b)=>{const S=o.get(b);if(!S)return;m.push(t.li.removeMatchingKeys(l,y.removedDocuments,b).next((()=>t.li.addMatchingKeys(l,y.addedDocuments,b))));let N=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?N=N.withResumeToken(xn.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):y.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(y.resumeToken,a)),o=o.insert(b,N),(function(V,k,H){return V.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=b4?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(S,N,y)&&m.push(t.li.updateTargetData(l,N))}));let g=pa(),_=nt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),m.push(x4(l,d,e.documentUpdates).next((y=>{g=y.Bs,_=y.Ls}))),!a.isEqual(Be.min())){const y=t.li.getLastRemoteSnapshotVersion(l).next((b=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,a)));m.push(y)}return ce.waitFor(m).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,_))).next((()=>g))})).then((l=>(t.vs=o,l)))}function x4(s,e,t){let a=nt(),o=nt();return t.forEach((l=>a=a.add(l))),e.getEntries(s,a).next((l=>{let d=pa();return t.forEach(((m,g)=>{const _=l.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Be.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):xe(oy,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)})),{Bs:d,Ls:o}}))}function w4(s,e){const t=He(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Q_),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function I4(s,e){const t=He(s);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return t.li.getTargetData(a,e).next((l=>l?(o=l,ce.resolve(o)):t.li.allocateTargetId(a).next((d=>(o=new ar(e,d,"TargetPurposeListen",a.currentSequenceNumber),t.li.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=t.vs.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(a.targetId,a),t.Fs.set(e,a.targetId)),a}))}async function h_(s,e,t){const a=He(s),o=a.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,(d=>a.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!nc(d))throw d;xe(oy,`Failed to update sequence numbers for target ${e}: ${d}`)}a.vs=a.vs.remove(e),a.Fs.delete(o.target)}function DE(s,e,t){const a=He(s);let o=Be.min(),l=nt();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,_,y){const b=He(g),S=b.Fs.get(y);return S!==void 0?ce.resolve(b.vs.get(S)):b.li.getTargetData(_,y)})(a,d,ji(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(d,m.targetId).next((g=>{l=g}))})).next((()=>a.Cs.getDocumentsMatchingQuery(d,e,t?o:Be.min(),t?l:nt()))).next((m=>(R4(a,hD(e),m),{documents:m,ks:l})))))}function R4(s,e,t){let a=s.Ms.get(e)||Be.min();t.forEach(((o,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)})),s.Ms.set(e,a)}class OE{constructor(){this.activeTargetIds=yD()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class N4{constructor(){this.vo=new OE,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,a){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new OE,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class C4{Mo(e){}shutdown(){}}const ME="ConnectivityMonitor";class zE{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){xe(ME,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){xe(ME,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Wh=null;function f_(){return Wh===null?Wh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wh++,"0x"+Wh.toString(16)}const Dg="RestConnection",k4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class j4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${a}/databases/${o}`,this.$o=this.databaseId.database===Af?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Wo(e,t,a,o,l){const d=f_(),m=this.Qo(e,t.toUriEncodedString());xe(Dg,`Sending RPC '${e}' ${d}:`,m,a);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,l);const{host:_}=new URL(m),y=Tr(_);return this.zo(e,m,g,a,y).then((b=>(xe(Dg,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw So(Dg,`RPC '${e}' ${d} failed with error: `,b,"url: ",m,"request:",a),b}))}jo(e,t,a,o,l,d){return this.Wo(e,t,a,o,l)}Go(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ec})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),a&&a.headers.forEach(((o,l)=>e[l]=o))}Qo(e,t){const a=k4[e];let o=`${this.qo}/v1/${t}:${a}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class D4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const kn="WebChannelConnection",yu=(s,e,t)=>{s.listen(e,(a=>{try{t(a)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Ul extends j4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ul.c_){const e=PS();yu(e,LS.STAT_EVENT,(t=>{t.stat===t_.PROXY?xe(kn,"STAT_EVENT: detected buffering proxy"):t.stat===t_.NOPROXY&&xe(kn,"STAT_EVENT: detected no buffering proxy")})),Ul.c_=!0}}zo(e,t,a,o,l){const d=f_();return new Promise(((m,g)=>{const _=new MS;_.setWithCredentials(!0),_.listenOnce(zS.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case of.NO_ERROR:const b=_.getResponseJson();xe(kn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),m(b);break;case of.TIMEOUT:xe(kn,`RPC '${e}' ${d} timed out`),g(new Te(re.DEADLINE_EXCEEDED,"Request time out"));break;case of.HTTP_ERROR:const S=_.getStatus();if(xe(kn,`RPC '${e}' ${d} failed with status:`,S,"response text:",_.getResponseText()),S>0){let N=_.getResponseJson();Array.isArray(N)&&(N=N[0]);const z=N?.error;if(z&&z.status&&z.message){const V=(function(H){const q=H.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(q)>=0?q:re.UNKNOWN})(z.status);g(new Te(V,z.message))}else g(new Te(re.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new Te(re.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:e,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{xe(kn,`RPC '${e}' ${d} completed.`)}}));const y=JSON.stringify(o);xe(kn,`RPC '${e}' ${d} sending request:`,o),_.send(t,"POST",y,a,15)}))}T_(e,t,a){const o=f_(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,t,a),m.encodeInitMessageHeaders=!0;const _=l.join("");xe(kn,`Creating RPC '${e}' stream ${o}: ${_}`,m);const y=d.createWebChannel(_,m);this.I_(y);let b=!1,S=!1;const N=new D4({Ho:z=>{S?xe(kn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(b||(xe(kn,`Opening RPC '${e}' stream ${o} transport.`),y.open(),b=!0),xe(kn,`RPC '${e}' stream ${o} sending:`,z),y.send(z))},Jo:()=>y.close()});return yu(y,Su.EventType.OPEN,(()=>{S||(xe(kn,`RPC '${e}' stream ${o} transport opened.`),N.i_())})),yu(y,Su.EventType.CLOSE,(()=>{S||(S=!0,xe(kn,`RPC '${e}' stream ${o} transport closed`),N.o_(),this.E_(y))})),yu(y,Su.EventType.ERROR,(z=>{S||(S=!0,So(kn,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),N.o_(new Te(re.UNAVAILABLE,"The operation could not be completed")))})),yu(y,Su.EventType.MESSAGE,(z=>{if(!S){const V=z.data[0];dt(!!V,16349);const k=V,H=k?.error||k[0]?.error;if(H){xe(kn,`RPC '${e}' stream ${o} received error:`,H);const q=H.status;let G=(function(he){const D=tn[he];if(D!==void 0)return vA(D)})(q),O=H.message;q==="NOT_FOUND"&&O.includes("database")&&O.includes("does not exist")&&O.includes(this.databaseId.database)&&So(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),G===void 0&&(G=re.INTERNAL,O="Unknown error status: "+q+" with message "+H.message),S=!0,N.o_(new Te(G,O)),y.close()}else xe(kn,`RPC '${e}' stream ${o} received:`,V),N.__(V)}})),Ul.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,a){super.Go(e,t,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return US()}}function O4(s){return new Ul(s)}function Og(){return typeof document<"u"?document:null}function em(s){return new PD(s,!0)}Ul.c_=!1;class OA{constructor(e,t,a=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=a,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-a);o>0&&xe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const LE="PersistentStream";class MA{constructor(e,t,a,o,l,d,m,g){this.Ci=e,this.b_=a,this.S_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new OA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(ma(t.toString()),ma("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===t&&this.G_(a,o)}),(a=>{e((()=>{const o=new Te(re.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,t){const a=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return xe(LE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(xe(LE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class M4 extends MA{constructor(e,t,a,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,o,d),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=BD(this.serializer,e),a=(function(l){if(!("targetChange"in l))return Be.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Be.min():d.readTime?Di(d.readTime):Be.min()})(e);return this.listener.J_(t,a)}Z_(e){const t={};t.database=d_(this.serializer),t.addTarget=(function(l,d){let m;const g=d.target;if(m=r_(g)?{documents:$D(l,g)}:{query:FD(l,g).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=TA(l,d.resumeToken);const _=l_(l,d.expectedCount);_!==null&&(m.expectedCount=_)}else if(d.snapshotVersion.compareTo(Be.min())>0){m.readTime=Nf(l,d.snapshotVersion.toTimestamp());const _=l_(l,d.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const a=QD(this.serializer,e);a&&(t.labels=a),this.K_(t)}X_(e){const t={};t.database=d_(this.serializer),t.removeTarget=e,this.K_(t)}}class z4 extends MA{constructor(e,t,a,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,o,d),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=HD(e.writeResults,e.commitTime),a=Di(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=d_(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>qD(this.serializer,a)))};this.K_(t)}}class L4{}class P4 extends L4{constructor(e,t,a,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Te(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Wo(e,c_(t,a),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Te(re.UNKNOWN,l.toString())}))}jo(e,t,a,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.jo(e,c_(t,a),o,d,m,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Te(re.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function U4(s,e,t,a){return new P4(s,e,t,a)}class V4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ma(t),this.aa=!1):xe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ao="RemoteStore";class B4{constructor(e,t,a,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((d=>{a.enqueueAndForget((async()=>{Oo(this)&&(xe(Ao,"Restarting streams for network reachability change."),await(async function(g){const _=He(g);_.Ea.add(4),await ld(_),_.Va.set("Unknown"),_.Ea.delete(4),await tm(_)})(this))}))})),this.Va=new V4(a,o)}}async function tm(s){if(Oo(s))for(const e of s.Ra)await e(!0)}async function ld(s){for(const e of s.Ra)await e(!1)}function zA(s,e){const t=He(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),dy(t)?uy(t):ic(t).O_()&&cy(t,e))}function ly(s,e){const t=He(s),a=ic(t);t.Ia.delete(e),a.O_()&&LA(t,e),t.Ia.size===0&&(a.O_()?a.L_():Oo(t)&&t.Va.set("Unknown"))}function cy(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ic(s).Z_(e)}function LA(s,e){s.da.$e(e),ic(s).X_(e)}function uy(s){s.da=new OD({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),ic(s).start(),s.Va.ua()}function dy(s){return Oo(s)&&!ic(s).x_()&&s.Ia.size>0}function Oo(s){return He(s).Ea.size===0}function PA(s){s.da=void 0}async function q4(s){s.Va.set("Online")}async function H4(s){s.Ia.forEach(((e,t)=>{cy(s,e)}))}async function $4(s,e){PA(s),dy(s)?(s.Va.ha(e),uy(s)):s.Va.set("Unknown")}async function F4(s,e,t){if(s.Va.set("Online"),e instanceof EA&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const m of l.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.da.removeTarget(m))})(s,e)}catch(a){xe(Ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await kf(s,a)}else if(e instanceof df?s.da.Xe(e):e instanceof bA?s.da.st(e):s.da.tt(e),!t.isEqual(Be.min()))try{const a=await DA(s.localStore);t.compareTo(a)>=0&&await(function(l,d){const m=l.da.Tt(d);return m.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const y=l.Ia.get(_);y&&l.Ia.set(_,y.withResumeToken(g.resumeToken,d))}})),m.targetMismatches.forEach(((g,_)=>{const y=l.Ia.get(g);if(!y)return;l.Ia.set(g,y.withResumeToken(xn.EMPTY_BYTE_STRING,y.snapshotVersion)),LA(l,g);const b=new ar(y.target,g,_,y.sequenceNumber);cy(l,b)})),l.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(a){xe(Ao,"Failed to raise snapshot:",a),await kf(s,a)}}async function kf(s,e,t){if(!nc(e))throw e;s.Ea.add(1),await ld(s),s.Va.set("Offline"),t||(t=()=>DA(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{xe(Ao,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await tm(s)}))}function UA(s,e){return e().catch((t=>kf(s,t,e)))}async function nm(s){const e=He(s),t=_r(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Q_;for(;G4(e);)try{const o=await w4(e.localStore,a);if(o===null){e.Ta.length===0&&t.L_();break}a=o.batchId,Q4(e,o)}catch(o){await kf(e,o)}VA(e)&&BA(e)}function G4(s){return Oo(s)&&s.Ta.length<10}function Q4(s,e){s.Ta.push(e);const t=_r(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function VA(s){return Oo(s)&&!_r(s).x_()&&s.Ta.length>0}function BA(s){_r(s).start()}async function K4(s){_r(s).ra()}async function Y4(s){const e=_r(s);for(const t of s.Ta)e.ea(t.mutations)}async function W4(s,e,t){const a=s.Ta.shift(),o=ty.from(a,e,t);await UA(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await nm(s)}async function X4(s,e){e&&_r(s).Y_&&await(async function(a,o){if((function(d){return kD(d)&&d!==re.ABORTED})(o.code)){const l=a.Ta.shift();_r(a).B_(),await UA(a,(()=>a.remoteSyncer.rejectFailedWrite(l.batchId,o))),await nm(a)}})(s,e),VA(s)&&BA(s)}async function PE(s,e){const t=He(s);t.asyncQueue.verifyOperationInProgress(),xe(Ao,"RemoteStore received new credentials");const a=Oo(t);t.Ea.add(3),await ld(t),a&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await tm(t)}async function Z4(s,e){const t=He(s);e?(t.Ea.delete(2),await tm(t)):e||(t.Ea.add(2),await ld(t),t.Va.set("Unknown"))}function ic(s){return s.ma||(s.ma=(function(t,a,o){const l=He(t);return l.sa(),new M4(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(s.datastore,s.asyncQueue,{Zo:q4.bind(null,s),Yo:H4.bind(null,s),t_:$4.bind(null,s),J_:F4.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),dy(s)?uy(s):s.Va.set("Unknown")):(await s.ma.stop(),PA(s))}))),s.ma}function _r(s){return s.fa||(s.fa=(function(t,a,o){const l=He(t);return l.sa(),new z4(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:K4.bind(null,s),t_:X4.bind(null,s),ta:Y4.bind(null,s),na:W4.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await nm(s)):(await s.fa.stop(),s.Ta.length>0&&(xe(Ao,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class hy{constructor(e,t,a,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=o,this.removalCallback=l,this.deferred=new ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,o,l){const d=Date.now()+a,m=new hy(e,t,d,o,l);return m.start(a),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(s,e){if(ma("AsyncQueue",`${e}: ${s}`),nc(s))return new Te(re.UNAVAILABLE,`${e}: ${s}`);throw s}class Vl{static emptySet(e){return new Vl(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||De.comparator(t.key,a.key):(t,a)=>De.comparator(t.key,a.key),this.keyedMap=Au(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=a.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new Vl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}class UE{constructor(){this.ga=new jt(De.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ve(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class Yl{constructor(e,t,a,o,l,d,m,g,_){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,a,o,l){const d=[];return t.forEach((m=>{d.push({type:0,doc:m})})),new Yl(e,t,Vl.emptySet(t),d,a,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==a[o].type||!t[o].doc.isEqual(a[o].doc))return!1;return!0}}class J4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class e3{constructor(){this.queries=VE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const o=He(t),l=o.queries;o.queries=VE(),l.forEach(((d,m)=>{for(const g of m.ba)g.onError(a)}))})(this,new Te(re.ABORTED,"Firestore shutting down"))}}function VE(){return new Do((s=>oA(s)),Yf)}async function qA(s,e){const t=He(s);let a=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.Da()&&(a=2):(l=new J4,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=fy(d,`Initialization of query '${kl(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&my(t)}async function HA(s,e){const t=He(s),a=e.query;let o=3;const l=t.queries.get(a);if(l){const d=l.ba.indexOf(e);d>=0&&(l.ba.splice(d,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function t3(s,e){const t=He(s);let a=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const m of d.ba)m.Fa(o)&&(a=!0);d.wa=o}}a&&my(t)}function n3(s,e,t){const a=He(s),o=a.queries.get(e);if(o)for(const l of o.ba)l.onError(t);a.queries.delete(e)}function my(s){s.Ca.forEach((e=>{e.next()}))}var m_,BE;(BE=m_||(m_={})).Ma="default",BE.Cache="cache";class $A{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Yl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==m_.Cache}}class FA{constructor(e){this.key=e}}class GA{constructor(e){this.key=e}}class s3{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=nt(),this.mutatedKeys=nt(),this.eu=lA(e),this.tu=new Vl(this.eu)}get nu(){return this.Za}ru(e,t){const a=t?t.iu:new UE,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((y,b)=>{const S=o.get(y),N=Wf(this.query,b)?b:null,z=!!S&&this.mutatedKeys.has(S.key),V=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let k=!1;S&&N?S.data.isEqual(N.data)?z!==V&&(a.track({type:3,doc:N}),k=!0):this.su(S,N)||(a.track({type:2,doc:N}),k=!0,(g&&this.eu(N,g)>0||_&&this.eu(N,_)<0)&&(m=!0)):!S&&N?(a.track({type:0,doc:N}),k=!0):S&&!N&&(a.track({type:1,doc:S}),k=!0,(g||_)&&(m=!0)),k&&(N?(d=d.add(N),l=V?l.add(y):l.delete(y)):(d=d.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const y=this.query.limitType==="F"?d.last():d.first();d=d.delete(y.key),l=l.delete(y.key),a.track({type:1,doc:y})}return{tu:d,iu:a,Ss:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((y,b)=>(function(N,z){const V=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Vt:k})}};return V(N)-V(z)})(y.type,b.type)||this.eu(y.doc,b.doc))),this.ou(a),o=o??!1;const m=t&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,_=g!==this.Xa;return this.Xa=g,d.length!==0||_?{snapshot:new Yl(this.query,e.tu,l,d,e.mutatedKeys,g===0,_,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new UE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=nt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const t=[];return e.forEach((a=>{this.Ya.has(a)||t.push(new GA(a))})),this.Ya.forEach((a=>{e.has(a)||t.push(new FA(a))})),t}cu(e){this.Za=e.ks,this.Ya=nt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const py="SyncEngine";class i3{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class a3{constructor(e){this.key=e,this.hu=!1}}class r3{constructor(e,t,a,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Do((m=>oA(m)),Yf),this.Iu=new Map,this.Eu=new Set,this.Ru=new jt(De.comparator),this.Au=new Map,this.Vu=new iy,this.du={},this.mu=new Map,this.fu=Kl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function o3(s,e,t=!0){const a=ZA(s);let o;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await QA(a,e,t,!0),o}async function l3(s,e){const t=ZA(s);await QA(t,e,!0,!1)}async function QA(s,e,t,a){const o=await I4(s.localStore,ji(e)),l=o.targetId,d=s.sharedClientState.addLocalQueryTarget(l,t);let m;return a&&(m=await c3(s,e,l,d==="current",o.resumeToken)),s.isPrimaryClient&&t&&zA(s.remoteStore,o),m}async function c3(s,e,t,a,o){s.pu=(b,S,N)=>(async function(V,k,H,q){let G=k.view.ru(H);G.Ss&&(G=await DE(V.localStore,k.query,!1).then((({documents:D})=>k.view.ru(D,G))));const O=q&&q.targetChanges.get(k.targetId),se=q&&q.targetMismatches.get(k.targetId)!=null,he=k.view.applyChanges(G,V.isPrimaryClient,O,se);return HE(V,k.targetId,he.au),he.snapshot})(s,b,S,N);const l=await DE(s.localStore,e,!0),d=new s3(e,l.ks),m=d.ru(l.documents),g=od.createSynthesizedTargetChangeForCurrentChange(t,a&&s.onlineState!=="Offline",o),_=d.applyChanges(m,s.isPrimaryClient,g);HE(s,t,_.au);const y=new i3(e,t,d);return s.Tu.set(e,y),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),_.snapshot}async function u3(s,e,t){const a=He(s),o=a.Tu.get(e),l=a.Iu.get(o.targetId);if(l.length>1)return a.Iu.set(o.targetId,l.filter((d=>!Yf(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await h_(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),t&&ly(a.remoteStore,o.targetId),p_(a,o.targetId)})).catch(tc)):(p_(a,o.targetId),await h_(a.localStore,o.targetId,!0))}async function d3(s,e){const t=He(s),a=t.Tu.get(e),o=t.Iu.get(a.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),ly(t.remoteStore,a.targetId))}async function h3(s,e,t){const a=v3(s);try{const o=await(function(d,m){const g=He(d),_=ut.now(),y=m.reduce(((N,z)=>N.add(z.key)),nt());let b,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let z=pa(),V=nt();return g.xs.getEntries(N,y).next((k=>{z=k,z.forEach(((H,q)=>{q.isValidDocument()||(V=V.add(H))}))})).next((()=>g.localDocuments.getOverlayedDocuments(N,z))).next((k=>{b=k;const H=[];for(const q of m){const G=wD(q,b.get(q.key).overlayedDocument);G!=null&&H.push(new wr(q.key,G,JS(G.value.mapValue),Ms.exists(!0)))}return g.mutationQueue.addMutationBatch(N,_,H,m)})).next((k=>{S=k;const H=k.applyToLocalDocumentSet(b,V);return g.documentOverlayCache.saveOverlays(N,k.batchId,H)}))})).then((()=>({batchId:S.batchId,changes:uA(b)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(d,m,g){let _=d.du[d.currentUser.toKey()];_||(_=new jt(tt)),_=_.insert(m,g),d.du[d.currentUser.toKey()]=_})(a,o.batchId,t),await cd(a,o.changes),await nm(a.remoteStore)}catch(o){const l=fy(o,"Failed to persist write");t.reject(l)}}async function KA(s,e){const t=He(s);try{const a=await A4(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=t.Au.get(l);d&&(dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?dt(d.hu,14607):o.removedDocuments.size>0&&(dt(d.hu,42227),d.hu=!1))})),await cd(t,a,e)}catch(a){await tc(a)}}function qE(s,e,t){const a=He(s);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const o=[];a.Tu.forEach(((l,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const g=He(d);g.onlineState=m;let _=!1;g.queries.forEach(((y,b)=>{for(const S of b.ba)S.va(m)&&(_=!0)})),_&&my(g)})(a.eventManager,e),o.length&&a.Pu.J_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function f3(s,e,t){const a=He(s);a.sharedClientState.updateQueryState(e,"rejected",t);const o=a.Au.get(e),l=o&&o.key;if(l){let d=new jt(De.comparator);d=d.insert(l,zn.newNoDocument(l,Be.min()));const m=nt().add(l),g=new Jf(Be.min(),new Map,new jt(tt),d,m);await KA(a,g),a.Ru=a.Ru.remove(l),a.Au.delete(e),gy(a)}else await h_(a.localStore,e,!1).then((()=>p_(a,e,t))).catch(tc)}async function m3(s,e){const t=He(s),a=e.batch.batchId;try{const o=await S4(t.localStore,e);WA(t,a,null),YA(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await cd(t,o)}catch(o){await tc(o)}}async function p3(s,e,t){const a=He(s);try{const o=await(function(d,m){const g=He(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let y;return g.mutationQueue.lookupMutationBatch(_,m).next((b=>(dt(b!==null,37113),y=b.keys(),g.mutationQueue.removeMutationBatch(_,b)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,y,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,y))).next((()=>g.localDocuments.getDocuments(_,y)))}))})(a.localStore,e);WA(a,e,t),YA(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await cd(a,o)}catch(o){await tc(o)}}function YA(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function WA(s,e,t){const a=He(s);let o=a.du[a.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),a.du[a.currentUser.toKey()]=o}}function p_(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),t&&s.Pu.yu(a,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((a=>{s.Vu.containsKey(a)||XA(s,a)}))}function XA(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(ly(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),gy(s))}function HE(s,e,t){for(const a of t)a instanceof FA?(s.Vu.addReference(a.key,e),g3(s,a)):a instanceof GA?(xe(py,"Document no longer in limbo: "+a.key),s.Vu.removeReference(a.key,e),s.Vu.containsKey(a.key)||XA(s,a.key)):Ve(19791,{wu:a})}function g3(s,e){const t=e.key,a=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(a)||(xe(py,"New document in limbo: "+t),s.Eu.add(a),gy(s))}function gy(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new De(At.fromString(e)),a=s.fu.next();s.Au.set(a,new a3(t)),s.Ru=s.Ru.insert(t,a),zA(s.remoteStore,new ar(ji(Z_(t.path)),a,"TargetPurposeLimboResolution",Gf.ce))}}async function cd(s,e,t){const a=He(s),o=[],l=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((m,g)=>{d.push(a.pu(g,e,t).then((_=>{if((_||t)&&a.isPrimaryClient){const y=_?!_.fromCache:t?.targetChanges.get(g.targetId)?.current;a.sharedClientState.updateQueryState(g.targetId,y?"current":"not-current")}if(_){o.push(_);const y=ry.Es(g.targetId,_);l.push(y)}})))})),await Promise.all(d),a.Pu.J_(o),await(async function(g,_){const y=He(g);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ce.forEach(_,(S=>ce.forEach(S.Ts,(N=>y.persistence.referenceDelegate.addReference(b,S.targetId,N))).next((()=>ce.forEach(S.Is,(N=>y.persistence.referenceDelegate.removeReference(b,S.targetId,N)))))))))}catch(b){if(!nc(b))throw b;xe(oy,"Failed to update sequence numbers: "+b)}for(const b of _){const S=b.targetId;if(!b.fromCache){const N=y.vs.get(S),z=N.snapshotVersion,V=N.withLastLimboFreeSnapshotVersion(z);y.vs=y.vs.insert(S,V)}}})(a.localStore,l))}async function _3(s,e){const t=He(s);if(!t.currentUser.isEqual(e)){xe(py,"User change. New user:",e.toKey());const a=await jA(t.localStore,e);t.currentUser=e,(function(l,d){l.mu.forEach((m=>{m.forEach((g=>{g.reject(new Te(re.CANCELLED,d))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await cd(t,a.Ns)}}function y3(s,e){const t=He(s),a=t.Au.get(e);if(a&&a.hu)return nt().add(a.key);{let o=nt();const l=t.Iu.get(e);if(!l)return o;for(const d of l){const m=t.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function ZA(s){const e=He(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=KA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=y3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=f3.bind(null,e),e.Pu.J_=t3.bind(null,e.eventManager),e.Pu.yu=n3.bind(null,e.eventManager),e}function v3(s){const e=He(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p3.bind(null,e),e}class jf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=em(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return T4(this.persistence,new v4,e.initialUser,this.serializer)}Cu(e){return new kA(ay.Vi,this.serializer)}Du(e){return new N4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jf.provider={build:()=>new jf};class b3 extends jf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){dt(this.persistence.referenceDelegate instanceof Cf,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new i4(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new kA((a=>Cf.Vi(a,t)),this.serializer)}}class g_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>qE(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=_3.bind(null,this.syncEngine),await Z4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new e3})()}createDatastore(e){const t=em(e.databaseInfo.databaseId),a=O4(e.databaseInfo);return U4(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,o,l,d,m){return new B4(a,o,l,d,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>qE(this.syncEngine,t,0)),(function(){return zE.v()?new zE:new C4})())}createSyncEngine(e,t){return(function(o,l,d,m,g,_,y){const b=new r3(o,l,d,m,g,_);return y&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const a=He(t);xe(Ao,"RemoteStore shutting down."),a.Ea.add(5),await ld(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}g_.provider={build:()=>new g_};class JA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ma("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const yr="FirestoreClient";class E3{constructor(e,t,a,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this._databaseInfo=o,this.user=Mn.UNAUTHENTICATED,this.clientId=G_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,(async d=>{xe(yr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(xe(yr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=fy(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Mg(s,e){s.asyncQueue.verifyOperationInProgress(),xe(yr,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let a=t.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await jA(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function $E(s,e){s.asyncQueue.verifyOperationInProgress();const t=await T3(s);xe(yr,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((a=>PE(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>PE(e.remoteStore,o))),s._onlineComponents=e}async function T3(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){xe(yr,"Using user provided OfflineComponentProvider");try{await Mg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;So("Error using user provided cache. Falling back to memory cache: "+t),await Mg(s,new jf)}}else xe(yr,"Using default OfflineComponentProvider"),await Mg(s,new b3(void 0));return s._offlineComponents}async function ex(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(xe(yr,"Using user provided OnlineComponentProvider"),await $E(s,s._uninitializedComponentsProvider._online)):(xe(yr,"Using default OnlineComponentProvider"),await $E(s,new g_))),s._onlineComponents}function S3(s){return ex(s).then((e=>e.syncEngine))}async function tx(s){const e=await ex(s),t=e.eventManager;return t.onListen=o3.bind(null,e.syncEngine),t.onUnlisten=u3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=l3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=d3.bind(null,e.syncEngine),t}function A3(s,e,t={}){const a=new ca;return s.asyncQueue.enqueueAndForget((async()=>(function(l,d,m,g,_){const y=new JA({next:S=>{y.Nu(),d.enqueueAndForget((()=>HA(l,b)));const N=S.docs.has(m);!N&&S.fromCache?_.reject(new Te(re.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&g&&g.source==="server"?_.reject(new Te(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),b=new $A(Z_(m.path),y,{includeMetadataChanges:!0,Ka:!0});return qA(l,b)})(await tx(s),s.asyncQueue,e,t,a))),a.promise}function x3(s,e,t={}){const a=new ca;return s.asyncQueue.enqueueAndForget((async()=>(function(l,d,m,g,_){const y=new JA({next:S=>{y.Nu(),d.enqueueAndForget((()=>HA(l,b))),S.fromCache&&g.source==="server"?_.reject(new Te(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),b=new $A(m,y,{includeMetadataChanges:!0,Ka:!0});return qA(l,b)})(await tx(s),s.asyncQueue,e,t,a))),a.promise}function w3(s,e){const t=new ca;return s.asyncQueue.enqueueAndForget((async()=>h3(await S3(s),e,t))),t.promise}function nx(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const I3="ComponentProvider",FE=new Map;function R3(s,e,t,a,o){return new Qj(s,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,nx(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,a)}const sx="firestore.googleapis.com",GE=!0;class QE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Te(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sx,this.ssl=GE}else this.host=e.host,this.ssl=e.ssl??GE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<n4)throw new Te(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Mj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nx(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Te(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Te(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Te(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sm{constructor(e,t,a,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new xj;switch(a.type){case"firstParty":return new Nj(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Te(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=FE.get(t);a&&(xe(I3,"Removing Datastore"),FE.delete(t),a.terminate())})(this),Promise.resolve()}}function N3(s,e,t,a={}){s=ei(s,sm);const o=Tr(e),l=s._getSettings(),d={...l,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;o&&(j_(`https://${m}`),D_("Firestore",!0)),l.host!==sx&&l.host!==m&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:m,ssl:o,emulatorOptions:a};if(!yo(g,d)&&(s._setSettings(g),a.mockUserToken)){let _,y;if(typeof a.mockUserToken=="string")_=a.mockUserToken,y=Mn.MOCK_USER;else{_=KT(a.mockUserToken,s._app?.options.projectId);const b=a.mockUserToken.sub||a.mockUserToken.user_id;if(!b)throw new Te(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Mn(b)}s._authCredentials=new wj(new BS(_,y))}}class Ir{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Ir(this.firestore,e,this._query)}}class $t{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(ad(t,$t._jsonSchema))return new $t(e,a||null,new De(At.fromString(t.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:sn("string",$t._jsonSchemaVersion),referencePath:sn("string")};class dr extends Ir{constructor(e,t,a){super(e,t,Z_(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new De(e))}withConverter(e){return new dr(this.firestore,e,this._path)}}function Ls(s,e,...t){if(s=kt(s),qS("collection","path",e),s instanceof sm){const a=At.fromString(e,...t);return rE(a),new dr(s,null,a)}{if(!(s instanceof $t||s instanceof dr))throw new Te(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(At.fromString(e,...t));return rE(a),new dr(s.firestore,null,a)}}function Rn(s,e,...t){if(s=kt(s),arguments.length===1&&(e=G_.newId()),qS("doc","path",e),s instanceof sm){const a=At.fromString(e,...t);return aE(a),new $t(s,null,new De(a))}{if(!(s instanceof $t||s instanceof dr))throw new Te(re.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(At.fromString(e,...t));return aE(a),new $t(s.firestore,s instanceof dr?s.converter:null,new De(a))}}const KE="AsyncQueue";class YE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new OA(this,"async_queue_retry"),this._c=()=>{const a=Og();a&&xe(KE,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=Og();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Og();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ca;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!nc(e))throw e;xe(KE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,ma("INTERNAL UNHANDLED ERROR: ",WE(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=hy.createAndSchedule(this,e,t,a,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ve(47125,{Pc:WE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function WE(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Mo extends sm{constructor(e,t,a,o){super(e,t,a,o),this.type="firestore",this._queue=new YE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new YE(e),this._firestoreClient=void 0,await e}}}function C3(s,e){const t=typeof s=="object"?s:z_(),a=typeof s=="string"?s:Af,o=Bf(t,"firestore").getImmediate({identifier:a});if(!o._initialized){const l=FT("firestore");l&&N3(o,...l)}return o}function _y(s){if(s._terminated)throw new Te(re.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||k3(s),s._firestoreClient}function k3(s){const e=s._freezeSettings(),t=R3(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new E3(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(s._componentsProvider))}class Os{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Os(xn.fromBase64String(e))}catch(t){throw new Te(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Os(xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Os._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ad(e,Os._jsonSchema))return Os.fromBase64String(e.bytes)}}Os._jsonSchemaVersion="firestore/bytes/1.0",Os._jsonSchema={type:sn("string",Os._jsonSchemaVersion),bytes:sn("string")};class yy{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class im{constructor(e){this._methodName=e}}class Oi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return tt(this._lat,e._lat)||tt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Oi._jsonSchemaVersion}}static fromJSON(e){if(ad(e,Oi._jsonSchema))return new Oi(e.latitude,e.longitude)}}Oi._jsonSchemaVersion="firestore/geoPoint/1.0",Oi._jsonSchema={type:sn("string",Oi._jsonSchemaVersion),latitude:sn("number"),longitude:sn("number")};class Zs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ad(e,Zs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Zs(e.vectorValues);throw new Te(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zs._jsonSchemaVersion="firestore/vectorValue/1.0",Zs._jsonSchema={type:sn("string",Zs._jsonSchemaVersion),vectorValues:sn("object")};const j3=/^__.*__$/;class D3{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new wr(e,this.data,this.fieldMask,t,this.fieldTransforms):new rd(e,this.data,t,this.fieldTransforms)}}class ix{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new wr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ax(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{dataSource:s})}}class vy{constructor(e,t,a,o,l,d){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new vy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){const t=this.path?.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Df(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(ax(this.dataSource)&&j3.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class O3{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||em(e)}createContext(e,t,a,o=!1){return new vy({dataSource:e,methodName:t,targetDoc:a,path:An.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function am(s){const e=s._freezeSettings(),t=em(s._databaseId);return new O3(s._databaseId,!!e.ignoreUndefinedProperties,t)}function rx(s,e,t,a,o,l={}){const d=s.createContext(l.merge||l.mergeFields?2:0,e,t,o);Ey("Data must be an object, but it was:",d,a);const m=ox(a,d);let g,_;if(l.merge)g=new ms(d.fieldMask),_=d.fieldTransforms;else if(l.mergeFields){const y=[];for(const b of l.mergeFields){const S=xo(e,b,t);if(!d.contains(S))throw new Te(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);ux(y,S)||y.push(S)}g=new ms(y),_=d.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,_=d.fieldTransforms;return new D3(new Jn(m),g,_)}class rm extends im{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rm}}class by extends im{_toFieldTransform(e){return new TD(e.path,new Hu)}isEqual(e){return e instanceof by}}function M3(s,e,t,a){const o=s.createContext(1,e,t);Ey("Data must be an object, but it was:",o,a);const l=[],d=Jn.empty();xr(a,((g,_)=>{const y=cx(e,g,t);_=kt(_);const b=o.childContextForFieldPath(y);if(_ instanceof rm)l.push(y);else{const S=ud(_,b);S!=null&&(l.push(y),d.set(y,S))}}));const m=new ms(l);return new ix(d,m,o.fieldTransforms)}function z3(s,e,t,a,o,l){const d=s.createContext(1,e,t),m=[xo(e,a,t)],g=[o];if(l.length%2!=0)throw new Te(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)m.push(xo(e,l[S])),g.push(l[S+1]);const _=[],y=Jn.empty();for(let S=m.length-1;S>=0;--S)if(!ux(_,m[S])){const N=m[S];let z=g[S];z=kt(z);const V=d.childContextForFieldPath(N);if(z instanceof rm)_.push(N);else{const k=ud(z,V);k!=null&&(_.push(N),y.set(N,k))}}const b=new ms(_);return new ix(y,b,d.fieldTransforms)}function L3(s,e,t,a=!1){return ud(t,s.createContext(a?4:3,e))}function ud(s,e){if(lx(s=kt(s)))return Ey("Unsupported field value:",e,s),ox(s,e);if(s instanceof im)return(function(a,o){if(!ax(o.dataSource))throw o.createError(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,o){const l=[];let d=0;for(const m of a){let g=ud(m,o.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),d++}return{arrayValue:{values:l}}})(s,e)}return(function(a,o){if((a=kt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return vD(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=ut.fromDate(a);return{timestampValue:Nf(o.serializer,l)}}if(a instanceof ut){const l=new ut(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Nf(o.serializer,l)}}if(a instanceof Oi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Os)return{bytesValue:TA(o.serializer,a._byteString)};if(a instanceof $t){const l=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(l))throw o.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:sy(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Zs)return(function(d,m){const g=d instanceof Zs?d.toArray():d;return{mapValue:{fields:{[XS]:{stringValue:ZS},[xf]:{arrayValue:{values:g.map((y=>{if(typeof y!="number")throw m.createError("VectorValues must only contain numeric values.");return J_(m.serializer,y)}))}}}}}})(a,o);if(NA(a))return a._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Ff(a)}`)})(s,e)}function ox(s,e){const t={};return FS(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xr(s,((a,o)=>{const l=ud(o,e.childContextForField(a));l!=null&&(t[a]=l)})),{mapValue:{fields:t}}}function lx(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ut||s instanceof Oi||s instanceof Os||s instanceof $t||s instanceof im||s instanceof Zs||NA(s))}function Ey(s,e,t){if(!lx(t)||!HS(t)){const a=Ff(t);throw a==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+a)}}function xo(s,e,t){if((e=kt(e))instanceof yy)return e._internalPath;if(typeof e=="string")return cx(s,e);throw Df("Field path arguments must be of type string or ",s,!1,void 0,t)}const P3=new RegExp("[~\\*/\\[\\]]");function cx(s,e,t){if(e.search(P3)>=0)throw Df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new yy(...e.split("."))._internalPath}catch{throw Df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Df(s,e,t,a,o){const l=a&&!a.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||d)&&(g+=" (found",l&&(g+=` in field ${a}`),d&&(g+=` in document ${o}`),g+=")"),new Te(re.INVALID_ARGUMENT,m+s+g)}function ux(s,e){return s.some((t=>t.isEqual(e)))}class U3{convertValue(e,t="none"){switch(gr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return xr(e,((o,l)=>{a[o]=this.convertValue(l,t)})),a}convertVectorValue(e){const t=e.fields?.[xf].arrayValue?.values?.map((a=>Ht(a.doubleValue)));return new Zs(t)}convertGeoPoint(e){return new Oi(Ht(e.latitude),Ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Kf(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(Uu(e));default:return null}}convertTimestamp(e){const t=mr(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=At.fromString(e);dt(RA(a),9688,{name:e});const o=new Vu(a.get(1),a.get(3)),l=new De(a.popFirst(5));return o.isEqual(t)||ma(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class dx extends U3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Os(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}}function ys(){return new by("serverTimestamp")}const XE="@firebase/firestore",ZE="4.11.0";class hx{constructor(e,t,a,o,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new V3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(xo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class V3 extends hx{data(){return super.data()}}function B3(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Te(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ty{}class Sy extends Ty{}function Rr(s,e,...t){let a=[];e instanceof Ty&&a.push(e),a=a.concat(t),(function(l){const d=l.filter((g=>g instanceof Ay)).length,m=l.filter((g=>g instanceof om)).length;if(d>1||d>0&&m>0)throw new Te(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class om extends Sy{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new om(e,t,a)}_apply(e){const t=this._parse(e);return mx(e._query,t),new Ir(e.firestore,e.converter,o_(e._query,t))}_parse(e){const t=am(e.firestore);return(function(l,d,m,g,_,y,b){let S;if(_.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Te(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){eT(b,y);const z=[];for(const V of b)z.push(JE(g,l,V));S={arrayValue:{values:z}}}else S=JE(g,l,b)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||eT(b,y),S=L3(m,d,b,y==="in"||y==="not-in");return nn.create(_,y,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ga(s,e,t){const a=e,o=xo("where",s);return om._create(o,a,t)}class Ay extends Ty{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ay(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:ti.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let d=o;const m=l.getFlattenedFilters();for(const g of m)mx(d,g),d=o_(d,g)})(e._query,t),new Ir(e.firestore,e.converter,o_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xy extends Sy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xy(e,t)}_apply(e){const t=(function(o,l,d){if(o.startAt!==null)throw new Te(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Te(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qu(l,d)})(e._query,this._field,this._direction);return new Ir(e.firestore,e.converter,dD(e._query,t))}}function fx(s,e="asc"){const t=e,a=xo("orderBy",s);return xy._create(a,t)}class wy extends Sy{constructor(e,t,a){super(),this.type=e,this._limit=t,this._limitType=a}static _create(e,t,a){return new wy(e,t,a)}_apply(e){return new Ir(e.firestore,e.converter,If(e._query,this._limit,this._limitType))}}function q3(s){return zj("limit",s),wy._create("limit",s,"F")}function JE(s,e,t){if(typeof(t=kt(t))=="string"){if(t==="")throw new Te(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rA(e)&&t.indexOf("/")!==-1)throw new Te(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(At.fromString(t));if(!De.isDocumentKey(a))throw new Te(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return mE(s,new De(a))}if(t instanceof $t)return mE(s,t._key);throw new Te(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ff(t)}.`)}function eT(s,e){if(!Array.isArray(s)||s.length===0)throw new Te(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mx(s,e){const t=(function(o,l){for(const d of o)for(const m of d.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Te(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function px(s,e,t){let a;return a=s?s.toFirestore(e):e,a}class wu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class go extends hx{constructor(e,t,a,o,l,d){super(e,t,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(xo("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=go._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}go._jsonSchemaVersion="firestore/documentSnapshot/1.0",go._jsonSchema={type:sn("string",go._jsonSchemaVersion),bundleSource:sn("string","DocumentSnapshot"),bundleName:sn("string"),bundle:sn("string")};class hf extends go{data(e={}){return super.data(e)}}class Bl{constructor(e,t,a,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new wu(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new hf(this._firestore,this._userDataWriter,a.key,a,new wu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const g=new hf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new wu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const g=new hf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new wu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,y=-1;return m.type!==0&&(_=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),y=d.indexOf(m.doc.key)),{type:H3(m.type),doc:g,oldIndex:_,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Bl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=G_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function H3(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:s})}}Bl._jsonSchemaVersion="firestore/querySnapshot/1.0",Bl._jsonSchema={type:sn("string",Bl._jsonSchemaVersion),bundleSource:sn("string","QuerySnapshot"),bundleName:sn("string"),bundle:sn("string")};function zo(s){s=ei(s,$t);const e=ei(s.firestore,Mo),t=_y(e);return A3(t,s._key).then((a=>$3(e,s,a)))}function Nr(s){s=ei(s,Ir);const e=ei(s.firestore,Mo),t=_y(e),a=new dx(e);return B3(s._query),x3(t,s._query).then((o=>new Bl(e,a,s,o)))}function gx(s,e,t){s=ei(s,$t);const a=ei(s.firestore,Mo),o=px(s.converter,e),l=am(a);return cm(a,[rx(l,"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,Ms.none())])}function dd(s,e,t,...a){s=ei(s,$t);const o=ei(s.firestore,Mo),l=am(o);let d;return d=typeof(e=kt(e))=="string"||e instanceof yy?z3(l,"updateDoc",s._key,e,t,a):M3(l,"updateDoc",s._key,e),cm(o,[d.toMutation(s._key,Ms.exists(!0))])}function Iy(s){return cm(ei(s.firestore,Mo),[new ey(s._key,Ms.none())])}function lm(s,e){const t=ei(s.firestore,Mo),a=Rn(s),o=px(s.converter,e),l=am(s.firestore);return cm(t,[rx(l,"addDoc",a._key,o,s.converter!==null,{}).toMutation(a._key,Ms.exists(!1))]).then((()=>a))}function cm(s,e){const t=_y(s);return w3(t,e)}function $3(s,e,t){const a=t.docs.get(e._key),o=new dx(s);return new go(s,o,e._key,a,new wu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){Aj(ko),vo(new hr("firestore",((a,{instanceIdentifier:o,options:l})=>{const d=a.getProvider("app").getImmediate(),m=new Mo(new Ij(a.getProvider("auth-internal")),new Cj(d,a.getProvider("app-check-internal")),Kj(d,o),d);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),Ni(XE,ZE,e),Ni(XE,ZE,"esm2020")})();var F3="firebase",G3="12.9.0";Ni(F3,G3,"app");const _x="firebasestorage.googleapis.com",yx="storageBucket",Q3=120*1e3,K3=600*1e3,Y3=1e3;class Dt extends Pi{constructor(e,t,a=0){super(zg(e),`Firebase Storage: ${t} (${zg(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var It;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(It||(It={}));function zg(s){return"storage/"+s}function Ry(){const s="An unknown error occurred, please check the error payload for server response.";return new Dt(It.UNKNOWN,s)}function W3(s){return new Dt(It.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function X3(s){return new Dt(It.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Z3(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Dt(It.UNAUTHENTICATED,s)}function J3(){return new Dt(It.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function eO(s){return new Dt(It.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function vx(){return new Dt(It.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bx(){return new Dt(It.CANCELED,"User canceled the upload/download.")}function tO(s){return new Dt(It.INVALID_URL,"Invalid URL '"+s+"'.")}function nO(s){return new Dt(It.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function sO(){return new Dt(It.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yx+"' property when initializing the app?")}function Ex(){return new Dt(It.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function iO(){return new Dt(It.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function aO(){return new Dt(It.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function rO(s){return new Dt(It.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function __(s){return new Dt(It.INVALID_ARGUMENT,s)}function Tx(){return new Dt(It.APP_DELETED,"The Firebase app was deleted.")}function oO(s){return new Dt(It.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Du(s,e){return new Dt(It.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function vu(s){throw new Dt(It.INTERNAL_ERROR,"Internal error: "+s)}class qn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let a;try{a=qn.makeFromUrl(e,t)}catch{return new qn(e,"")}if(a.path==="")return a;throw nO(e)}static makeFromUrl(e,t){let a=null;const o="([A-Za-z0-9.\\-_]+)";function l(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function _(O){O.path_=decodeURIComponent(O.path)}const y="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",N=new RegExp(`^https?://${b}/${y}/b/${o}/o${S}`,"i"),z={bucket:1,path:3},V=t===_x?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",H=new RegExp(`^https?://${V}/${o}/${k}`,"i"),G=[{regex:m,indices:g,postModify:l},{regex:N,indices:z,postModify:_},{regex:H,indices:{bucket:1,path:2},postModify:_}];for(let O=0;O<G.length;O++){const se=G[O],he=se.regex.exec(e);if(he){const D=he[se.indices.bucket];let I=he[se.indices.path];I||(I=""),a=new qn(D,I),se.postModify(a);break}}if(a==null)throw tO(e);return a}}class lO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function cO(s,e,t){let a=1,o=null,l=null,d=!1,m=0;function g(){return m===2}let _=!1;function y(...k){_||(_=!0,e.apply(null,k))}function b(k){o=setTimeout(()=>{o=null,s(N,g())},k)}function S(){l&&clearTimeout(l)}function N(k,...H){if(_){S();return}if(k){S(),y.call(null,k,...H);return}if(g()||d){S(),y.call(null,k,...H);return}a<64&&(a*=2);let G;m===1?(m=2,G=0):G=(a+Math.random())*1e3,b(G)}let z=!1;function V(k){z||(z=!0,S(),!_&&(o!==null?(k||(m=2),clearTimeout(o),b(0)):k||(m=1)))}return b(0),l=setTimeout(()=>{d=!0,V(!0)},t),V}function uO(s){s(!1)}function dO(s){return s!==void 0}function hO(s){return typeof s=="function"}function fO(s){return typeof s=="object"&&!Array.isArray(s)}function um(s){return typeof s=="string"||s instanceof String}function tT(s){return Ny()&&s instanceof Blob}function Ny(){return typeof Blob<"u"}function y_(s,e,t,a){if(a<e)throw __(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>t)throw __(`Invalid value for '${s}'. Expected ${t} or less.`)}function Lo(s,e,t){let a=e;return t==null&&(a=`https://${e}`),`${t}://${a}/v0${s}`}function Sx(s){const e=encodeURIComponent;let t="?";for(const a in s)if(s.hasOwnProperty(a)){const o=e(a)+"="+e(s[a]);t=t+o+"&"}return t=t.slice(0,-1),t}var _o;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(_o||(_o={}));function Ax(s,e){const t=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,l=e.indexOf(s)!==-1;return t||o||l}class mO{constructor(e,t,a,o,l,d,m,g,_,y,b,S=!0,N=!1){this.url_=e,this.method_=t,this.headers_=a,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=g,this.timeout_=_,this.progressCallback_=y,this.connectionFactory_=b,this.retry=S,this.isUsingEmulator=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((z,V)=>{this.resolve_=z,this.reject_=V,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new Xh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const d=m=>{const g=m.loaded,_=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,_)};this.progressCallback_!==null&&l.addUploadProgressListener(d),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(d),this.pendingConnection_=null;const m=l.getErrorCode()===_o.NO_ERROR,g=l.getStatus();if(!m||Ax(g,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===_o.ABORT;a(!1,new Xh(!1,null,y));return}const _=this.successCodes_.indexOf(g)!==-1;a(!0,new Xh(_,l))})},t=(a,o)=>{const l=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());dO(g)?l(g):l()}catch(g){d(g)}else if(m!==null){const g=Ry();g.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,g)):d(g)}else if(o.canceled){const g=this.appDelete_?Tx():bx();d(g)}else{const g=vx();d(g)}};this.canceled_?t(!1,new Xh(!1,null,!0)):this.backoffId_=cO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&uO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xh{constructor(e,t,a){this.wasSuccessCode=e,this.connection=t,this.canceled=!!a}}function pO(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function gO(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _O(s,e){e&&(s["X-Firebase-GMPID"]=e)}function yO(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function vO(s,e,t,a,o,l,d=!0,m=!1){const g=Sx(s.urlParams),_=s.url+g,y=Object.assign({},s.headers);return _O(y,e),pO(y,t),gO(y,l),yO(y,a),new mO(_,s.method,y,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,d,m)}function bO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function EO(...s){const e=bO();if(e!==void 0){const t=new e;for(let a=0;a<s.length;a++)t.append(s[a]);return t.getBlob()}else{if(Ny())return new Blob(s);throw new Dt(It.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function TO(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}function SO(s){if(typeof atob>"u")throw rO("base-64");return atob(s)}const Ii={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Lg{constructor(e,t){this.data=e,this.contentType=t||null}}function AO(s,e){switch(s){case Ii.RAW:return new Lg(xx(e));case Ii.BASE64:case Ii.BASE64URL:return new Lg(wx(s,e));case Ii.DATA_URL:return new Lg(wO(e),IO(e))}throw Ry()}function xx(s){const e=[];for(let t=0;t<s.length;t++){let a=s.charCodeAt(t);if(a<=127)e.push(a);else if(a<=2047)e.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=a,d=s.charCodeAt(++t);a=65536|(l&1023)<<10|d&1023,e.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?e.push(239,191,189):e.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(e)}function xO(s){let e;try{e=decodeURIComponent(s)}catch{throw Du(Ii.DATA_URL,"Malformed data URL.")}return xx(e)}function wx(s,e){switch(s){case Ii.BASE64:{const o=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(o||l)throw Du(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ii.BASE64URL:{const o=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(o||l)throw Du(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=SO(e)}catch(o){throw o.message.includes("polyfill")?o:Du(s,"Invalid character found")}const a=new Uint8Array(t.length);for(let o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return a}class Ix{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Du(Ii.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=t[1]||null;a!=null&&(this.base64=RO(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=e.substring(e.indexOf(",")+1)}}function wO(s){const e=new Ix(s);return e.base64?wx(Ii.BASE64,e.rest):xO(e.rest)}function IO(s){return new Ix(s).contentType}function RO(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class sr{constructor(e,t){let a=0,o="";tT(e)?(this.data_=e,a=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),a=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),a=e.length),this.size_=a,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(tT(this.data_)){const a=this.data_,o=TO(a,e,t);return o===null?null:new sr(o)}else{const a=new Uint8Array(this.data_.buffer,e,t-e);return new sr(a,!0)}}static getBlob(...e){if(Ny()){const t=e.map(a=>a instanceof sr?a.data_:a);return new sr(EO.apply(null,t))}else{const t=e.map(d=>um(d)?AO(Ii.RAW,d).data:d.data_);let a=0;t.forEach(d=>{a+=d.byteLength});const o=new Uint8Array(a);let l=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)o[l++]=d[m]}),new sr(o,!0)}}uploadData(){return this.data_}}function Cy(s){let e;try{e=JSON.parse(s)}catch{return null}return fO(e)?e:null}function NO(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function CO(s,e){const t=e.split("/").filter(a=>a.length>0).join("/");return s.length===0?t:s+"/"+t}function Rx(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function kO(s,e){return e}class Bn{constructor(e,t,a,o){this.server=e,this.local=t||e,this.writable=!!a,this.xform=o||kO}}let Zh=null;function jO(s){return!um(s)||s.length<2?s:Rx(s)}function Nx(){if(Zh)return Zh;const s=[];s.push(new Bn("bucket")),s.push(new Bn("generation")),s.push(new Bn("metageneration")),s.push(new Bn("name","fullPath",!0));function e(l,d){return jO(d)}const t=new Bn("name");t.xform=e,s.push(t);function a(l,d){return d!==void 0?Number(d):d}const o=new Bn("size");return o.xform=a,s.push(o),s.push(new Bn("timeCreated")),s.push(new Bn("updated")),s.push(new Bn("md5Hash",null,!0)),s.push(new Bn("cacheControl",null,!0)),s.push(new Bn("contentDisposition",null,!0)),s.push(new Bn("contentEncoding",null,!0)),s.push(new Bn("contentLanguage",null,!0)),s.push(new Bn("contentType",null,!0)),s.push(new Bn("metadata","customMetadata",!0)),Zh=s,Zh}function DO(s,e){function t(){const a=s.bucket,o=s.fullPath,l=new qn(a,o);return e._makeStorageReference(l)}Object.defineProperty(s,"ref",{get:t})}function OO(s,e,t){const a={};a.type="file";const o=t.length;for(let l=0;l<o;l++){const d=t[l];a[d.local]=d.xform(a,e[d.server])}return DO(a,s),a}function Cx(s,e,t){const a=Cy(e);return a===null?null:OO(s,a,t)}function MO(s,e,t,a){const o=Cy(e);if(o===null||!um(o.downloadTokens))return null;const l=o.downloadTokens;if(l.length===0)return null;const d=encodeURIComponent;return l.split(",").map(_=>{const y=s.bucket,b=s.fullPath,S="/b/"+d(y)+"/o/"+d(b),N=Lo(S,t,a),z=Sx({alt:"media",token:_});return N+z})[0]}function kx(s,e){const t={},a=e.length;for(let o=0;o<a;o++){const l=e[o];l.writable&&(t[l.server]=s[l.local])}return JSON.stringify(t)}const nT="prefixes",sT="items";function zO(s,e,t){const a={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[nT])for(const o of t[nT]){const l=o.replace(/\/$/,""),d=s._makeStorageReference(new qn(e,l));a.prefixes.push(d)}if(t[sT])for(const o of t[sT]){const l=s._makeStorageReference(new qn(e,o.name));a.items.push(l)}return a}function LO(s,e,t){const a=Cy(t);return a===null?null:zO(s,e,a)}class Cr{constructor(e,t,a,o){this.url=e,this.method=t,this.handler=a,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Mi(s){if(!s)throw Ry()}function ky(s,e){function t(a,o){const l=Cx(s,o,e);return Mi(l!==null),l}return t}function PO(s,e){function t(a,o){const l=LO(s,e,o);return Mi(l!==null),l}return t}function UO(s,e){function t(a,o){const l=Cx(s,o,e);return Mi(l!==null),MO(l,o,s.host,s._protocol)}return t}function ac(s){function e(t,a){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=J3():o=Z3():t.getStatus()===402?o=X3(s.bucket):t.getStatus()===403?o=eO(s.path):o=a,o.status=t.getStatus(),o.serverResponse=a.serverResponse,o}return e}function jy(s){const e=ac(s);function t(a,o){let l=e(a,o);return a.getStatus()===404&&(l=W3(s.path)),l.serverResponse=o.serverResponse,l}return t}function VO(s,e,t){const a=e.fullServerUrl(),o=Lo(a,s.host,s._protocol),l="GET",d=s.maxOperationRetryTime,m=new Cr(o,l,ky(s,t),d);return m.errorHandler=jy(e),m}function BO(s,e,t,a,o){const l={};e.isRoot?l.prefix="":l.prefix=e.path+"/",t.length>0&&(l.delimiter=t),a&&(l.pageToken=a),o&&(l.maxResults=o);const d=e.bucketOnlyServerUrl(),m=Lo(d,s.host,s._protocol),g="GET",_=s.maxOperationRetryTime,y=new Cr(m,g,PO(s,e.bucket),_);return y.urlParams=l,y.errorHandler=ac(e),y}function qO(s,e,t){const a=e.fullServerUrl(),o=Lo(a,s.host,s._protocol),l="GET",d=s.maxOperationRetryTime,m=new Cr(o,l,UO(s,t),d);return m.errorHandler=jy(e),m}function HO(s,e){const t=e.fullServerUrl(),a=Lo(t,s.host,s._protocol),o="DELETE",l=s.maxOperationRetryTime;function d(g,_){}const m=new Cr(a,o,d,l);return m.successCodes=[200,204],m.errorHandler=jy(e),m}function $O(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function jx(s,e,t){const a=Object.assign({},t);return a.fullPath=s.path,a.size=e.size(),a.contentType||(a.contentType=$O(null,e)),a}function FO(s,e,t,a,o){const l=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function m(){let G="";for(let O=0;O<2;O++)G=G+Math.random().toString().slice(2);return G}const g=m();d["Content-Type"]="multipart/related; boundary="+g;const _=jx(e,a,o),y=kx(_,t),b="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+g+`\r
Content-Type: `+_.contentType+`\r
\r
`,S=`\r
--`+g+"--",N=sr.getBlob(b,a,S);if(N===null)throw Ex();const z={name:_.fullPath},V=Lo(l,s.host,s._protocol),k="POST",H=s.maxUploadRetryTime,q=new Cr(V,k,ky(s,t),H);return q.urlParams=z,q.headers=d,q.body=N.uploadData(),q.errorHandler=ac(e),q}class Of{constructor(e,t,a,o){this.current=e,this.total=t,this.finalized=!!a,this.metadata=o||null}}function Dy(s,e){let t=null;try{t=s.getResponseHeader("X-Goog-Upload-Status")}catch{Mi(!1)}return Mi(!!t&&(e||["active"]).indexOf(t)!==-1),t}function GO(s,e,t,a,o){const l=e.bucketOnlyServerUrl(),d=jx(e,a,o),m={name:d.fullPath},g=Lo(l,s.host,s._protocol),_="POST",y={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${a.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},b=kx(d,t),S=s.maxUploadRetryTime;function N(V){Dy(V);let k;try{k=V.getResponseHeader("X-Goog-Upload-URL")}catch{Mi(!1)}return Mi(um(k)),k}const z=new Cr(g,_,N,S);return z.urlParams=m,z.headers=y,z.body=b,z.errorHandler=ac(e),z}function QO(s,e,t,a){const o={"X-Goog-Upload-Command":"query"};function l(_){const y=Dy(_,["active","final"]);let b=null;try{b=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Mi(!1)}b||Mi(!1);const S=Number(b);return Mi(!isNaN(S)),new Of(S,a.size(),y==="final")}const d="POST",m=s.maxUploadRetryTime,g=new Cr(t,d,l,m);return g.headers=o,g.errorHandler=ac(e),g}const iT=256*1024;function KO(s,e,t,a,o,l,d,m){const g=new Of(0,0);if(d?(g.current=d.current,g.total=d.total):(g.current=0,g.total=a.size()),a.size()!==g.total)throw iO();const _=g.total-g.current;let y=_;o>0&&(y=Math.min(y,o));const b=g.current,S=b+y;let N="";y===0?N="finalize":_===y?N="upload, finalize":N="upload";const z={"X-Goog-Upload-Command":N,"X-Goog-Upload-Offset":`${g.current}`},V=a.slice(b,S);if(V===null)throw Ex();function k(O,se){const he=Dy(O,["active","final"]),D=g.current+y,I=a.size();let C;return he==="final"?C=ky(e,l)(O,se):C=null,new Of(D,I,he==="final",C)}const H="POST",q=e.maxUploadRetryTime,G=new Cr(t,H,k,q);return G.headers=z,G.body=V.uploadData(),G.progressCallback=m||null,G.errorHandler=ac(s),G}const Zn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Pg(s){switch(s){case"running":case"pausing":case"canceling":return Zn.RUNNING;case"paused":return Zn.PAUSED;case"success":return Zn.SUCCESS;case"canceled":return Zn.CANCELED;case"error":return Zn.ERROR;default:return Zn.ERROR}}class YO{constructor(e,t,a){if(hO(e)||t!=null||a!=null)this.next=e,this.error=t??void 0,this.complete=a??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function Rl(s){return(...e)=>{Promise.resolve().then(()=>s(...e))}}class WO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_o.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_o.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_o.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,a,o,l){if(this.sent_)throw vu("cannot .send() more than once");if(Tr(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const d in l)l.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,l[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw vu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class XO extends WO{initXhr(){this.xhr_.responseType="text"}}function ir(){return new XO}class ZO{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,a=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=a,this._mappings=Nx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{if(this._request=void 0,this._chunkMultiplier=1,o._codeEquals(It.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(Ax(o.status,[]))if(l)o=vx();else{this.sleepTime=Math.max(this.sleepTime*2,Y3),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=o,this._transition("error")}},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals(It.CANCELED)?this.completeTransitions_():(this._error=o,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((o,l)=>{this._resolve=o,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,a])=>{switch(this._state){case"running":e(t,a);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const a=GO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(a,ir,e,t);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,a)=>{const o=QO(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(o,ir,t,a);this._request=l,l.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=iT*this._chunkMultiplier,t=new Of(this._transferred,this._blob.size()),a=this._uploadUrl;this._resolveToken((o,l)=>{let d;try{d=KO(this._ref._location,this._ref.storage,a,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){this._error=g,this._transition("error");return}const m=this._ref.storage._makeRequest(d,ir,o,l,!1);this._request=m,m.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){iT*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const a=VO(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(a,ir,e,t);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const a=FO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(a,ir,e,t);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=bx(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Pg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,a,o){const l=new YO(t||void 0,a||void 0,o||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Pg(this._state)){case Zn.SUCCESS:Rl(this._resolve.bind(null,this.snapshot))();break;case Zn.CANCELED:case Zn.ERROR:const t=this._reject;Rl(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Pg(this._state)){case Zn.RUNNING:case Zn.PAUSED:e.next&&Rl(e.next.bind(e,this.snapshot))();break;case Zn.SUCCESS:e.complete&&Rl(e.complete.bind(e))();break;case Zn.CANCELED:case Zn.ERROR:e.error&&Rl(e.error.bind(e,this._error))();break;default:e.error&&Rl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}class wo{constructor(e,t){this._service=e,t instanceof qn?this._location=t:this._location=qn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new wo(e,t)}get root(){const e=new qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Rx(this._location.path)}get storage(){return this._service}get parent(){const e=NO(this._location.path);if(e===null)return null;const t=new qn(this._location.bucket,e);return new wo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw oO(e)}}function JO(s,e,t){return s._throwIfRoot("uploadBytesResumable"),new ZO(s,new sr(e),t)}function eM(s){const e={prefixes:[],items:[]};return Dx(s,e).then(()=>e)}async function Dx(s,e,t){const o=await tM(s,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),o.nextPageToken!=null&&await Dx(s,e,o.nextPageToken)}function tM(s,e){e!=null&&typeof e.maxResults=="number"&&y_("options.maxResults",1,1e3,e.maxResults);const t=e||{},a=BO(s.storage,s._location,"/",t.pageToken,t.maxResults);return s.storage.makeRequestWithTokens(a,ir)}function nM(s){s._throwIfRoot("getDownloadURL");const e=qO(s.storage,s._location,Nx());return s.storage.makeRequestWithTokens(e,ir).then(t=>{if(t===null)throw aO();return t})}function sM(s){s._throwIfRoot("deleteObject");const e=HO(s.storage,s._location);return s.storage.makeRequestWithTokens(e,ir)}function iM(s,e){const t=CO(s._location.path,e),a=new qn(s._location.bucket,t);return new wo(s.storage,a)}function aM(s){return/^[A-Za-z]+:\/\//.test(s)}function rM(s,e){return new wo(s,e)}function Ox(s,e){if(s instanceof Oy){const t=s;if(t._bucket==null)throw sO();const a=new wo(t,t._bucket);return e!=null?Ox(a,e):a}else return e!==void 0?iM(s,e):s}function oM(s,e){if(e&&aM(e)){if(s instanceof Oy)return rM(s,e);throw __("To use ref(service, url), the first argument must be a Storage instance.")}else return Ox(s,e)}function aT(s,e){const t=e?.[yx];return t==null?null:qn.makeFromBucketSpec(t,s)}function lM(s,e,t,a={}){s.host=`${e}:${t}`;const o=Tr(e);o&&(j_(`https://${s.host}/b`),D_("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:l}=a;l&&(s._overrideAuthToken=typeof l=="string"?l:KT(l,s.app.options.projectId))}class Oy{constructor(e,t,a,o,l,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=a,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=d,this._bucket=null,this._host=_x,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Q3,this._maxUploadRetryTime=K3,this._requests=new Set,o!=null?this._bucket=qn.makeFromBucketSpec(o,this._host):this._bucket=aT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qn.makeFromBucketSpec(this._url,e):this._bucket=aT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){y_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){y_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(fs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wo(this,e)}_makeRequest(e,t,a,o,l=!0){if(this._deleted)return new lO(Tx());{const d=vO(e,this._appId,a,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,a,o).getPromise()}}const rT="@firebase/storage",oT="0.14.0";const Mx="storage";function cM(s,e,t){return s=kt(s),JO(s,e,t)}function uM(s){return s=kt(s),eM(s)}function dM(s){return s=kt(s),nM(s)}function lT(s){return s=kt(s),sM(s)}function v_(s,e){return s=kt(s),oM(s,e)}function hM(s=z_(),e){s=kt(s);const a=Bf(s,Mx).getImmediate({identifier:e}),o=FT("storage");return o&&fM(a,...o),a}function fM(s,e,t,a={}){lM(s,e,t,a)}function mM(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new Oy(t,a,o,e,ko)}function pM(){vo(new hr(Mx,mM,"PUBLIC").setMultipleInstances(!0)),Ni(rT,oT,""),Ni(rT,oT,"esm2020")}pM();const gM={apiKey:"AIzaSyD6eHwk9nKZ_ovOWhBxffbBLt7NfAKYVAA",authDomain:"enderun-lala.firebaseapp.com",projectId:"enderun-lala",storageBucket:"enderun-lala.firebasestorage.app",messagingSenderId:"330289169664",appId:"1:330289169664:web:061c5f48ef12ae67671fe5"},My=XT(gM),dm=Tj(My),bt=C3(My),b_=hM(My),cT=s=>{let e;const t=new Set,a=(_,y)=>{const b=typeof _=="function"?_(e):_;if(!Object.is(b,e)){const S=e;e=y??(typeof b!="object"||b===null)?b:Object.assign({},e,b),t.forEach(N=>N(e,S))}},o=()=>e,m={setState:a,getState:o,getInitialState:()=>g,subscribe:_=>(t.add(_),()=>t.delete(_))},g=e=s(a,o,m);return m},_M=(s=>s?cT(s):cT),yM=s=>s;function vM(s,e=yM){const t=uo.useSyncExternalStore(s.subscribe,uo.useCallback(()=>e(s.getState()),[s,e]),uo.useCallback(()=>e(s.getInitialState()),[s,e]));return uo.useDebugValue(t),t}const bM=s=>{const e=_M(s),t=a=>vM(e,a);return Object.assign(t,e),t},zx=(s=>bM);function EM(s,e){let t;try{t=s()}catch{return}return{getItem:o=>{var l;const d=g=>g===null?null:JSON.parse(g,void 0),m=(l=t.getItem(o))!=null?l:null;return m instanceof Promise?m.then(d):d(m)},setItem:(o,l)=>t.setItem(o,JSON.stringify(l,void 0)),removeItem:o=>t.removeItem(o)}}const E_=s=>e=>{try{const t=s(e);return t instanceof Promise?t:{then(a){return E_(a)(t)},catch(a){return this}}}catch(t){return{then(a){return this},catch(a){return E_(a)(t)}}}},TM=(s,e)=>(t,a,o)=>{let l={storage:EM(()=>window.localStorage),partialize:k=>k,version:0,merge:(k,H)=>({...H,...k}),...e},d=!1,m=0;const g=new Set,_=new Set;let y=l.storage;if(!y)return s((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),t(...k)},a,o);const b=()=>{const k=l.partialize({...a()});return y.setItem(l.name,{state:k,version:l.version})},S=o.setState;o.setState=(k,H)=>(S(k,H),b());const N=s((...k)=>(t(...k),b()),a,o);o.getInitialState=()=>N;let z;const V=()=>{var k,H;if(!y)return;const q=++m;d=!1,g.forEach(O=>{var se;return O((se=a())!=null?se:N)});const G=((H=l.onRehydrateStorage)==null?void 0:H.call(l,(k=a())!=null?k:N))||void 0;return E_(y.getItem.bind(y))(l.name).then(O=>{if(O)if(typeof O.version=="number"&&O.version!==l.version){if(l.migrate){const se=l.migrate(O.state,O.version);return se instanceof Promise?se.then(he=>[!0,he]):[!0,se]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,O.state];return[!1,void 0]}).then(O=>{var se;if(q!==m)return;const[he,D]=O;if(z=l.merge(D,(se=a())!=null?se:N),t(z,!0),he)return b()}).then(()=>{q===m&&(G?.(z,void 0),z=a(),d=!0,_.forEach(O=>O(z)))}).catch(O=>{q===m&&G?.(void 0,O)})};return o.persist={setOptions:k=>{l={...l,...k},k.storage&&(y=k.storage)},clearStorage:()=>{y?.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>V(),hasHydrated:()=>d,onHydrate:k=>(g.add(k),()=>{g.delete(k)}),onFinishHydration:k=>(_.add(k),()=>{_.delete(k)})},l.skipHydration||V(),z||N},SM=TM,Lt=zx()(SM(s=>({firebaseUser:null,user:null,isLoading:!0,isInitialized:!1,setFirebaseUser:e=>s({firebaseUser:e}),setUser:e=>s({user:e}),setLoading:e=>s({isLoading:e}),setInitialized:e=>s({isInitialized:e}),logout:()=>s({firebaseUser:null,user:null,isLoading:!1})}),{name:"enderunlala-auth",partialize:s=>({user:s.user})})),ge={HOME:"/",LOGIN:"/login",REGISTER:"/register",FORGOT_PASSWORD:"/forgot-password",TEACHER:{DASHBOARD:"/teacher",SESSIONS:"/teacher/sessions",SESSION_DETAIL:"/teacher/sessions/:id",NEW_SESSION:"/teacher/sessions/new",QUIZZES:"/teacher/quizzes",QUIZ_EDIT:"/teacher/quizzes/:id",QUIZ_RESULTS:"/teacher/quizzes/:id/results",NEW_QUIZ:"/teacher/quizzes/new",REPORTS:"/teacher/reports",PROFILE:"/teacher/profile"},STUDENT:{DASHBOARD:"/student",ASSIGNMENTS:"/student/assignments",ASSIGNMENT_SOLVE:"/student/assignments/:id",RESULTS:"/student/results",PROFILE:"/student/profile",QUIZZES:"/student/quizzes",QUIZ_PLAYER:"/student/quiz/:id",QUIZ_RESULT:"/student/quiz/result/:id"},ADMIN:{DASHBOARD:"/admin",USERS:"/admin/users",TEACHERS:"/admin/teachers",STUDENTS:"/admin/students",SESSIONS:"/admin/sessions",REPORTS:"/admin/reports",SETTINGS:"/admin/settings"}},AM=(s,e)=>{let t=s;return Object.entries(e).forEach(([a,o])=>{t=t.replace(`:${a}`,o)}),t},xM="_button_b7fps_3",wM="_sm_b7fps_33",IM="_md_b7fps_39",RM="_lg_b7fps_45",NM="_primary_b7fps_52",CM="_secondary_b7fps_62",kM="_danger_b7fps_72",jM="_ghost_b7fps_82",DM="_outline_b7fps_92",OM="_fullWidth_b7fps_103",MM="_loading_b7fps_108",zM="_spinner_b7fps_112",LM="_spin_b7fps_112",PM="_iconOnly_b7fps_128",Si={button:xM,sm:wM,md:IM,lg:RM,primary:NM,secondary:CM,danger:kM,ghost:jM,outline:DM,fullWidth:OM,loading:MM,spinner:zM,spin:LM,iconOnly:PM},Ne=({children:s,variant:e="primary",size:t="md",isLoading:a=!1,leftIcon:o,rightIcon:l,fullWidth:d=!1,className:m="",disabled:g,..._})=>{const y=[Si.button,Si[e],Si[t],d&&Si.fullWidth,a&&Si.loading,m].filter(Boolean).join(" ");return u.jsxs("button",{className:y,disabled:g||a,..._,children:[a&&u.jsx("span",{className:Si.spinner,children:u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",className:Si.spinnerIcon,children:u.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeDasharray:"32",strokeDashoffset:"12"})})}),!a&&o&&u.jsx("span",{className:Si.icon,children:o}),u.jsx("span",{className:Si.content,children:s}),!a&&l&&u.jsx("span",{className:Si.icon,children:l})]})},UM="_wrapper_m4lp3_3",VM="_label_m4lp3_10",BM="_required_m4lp3_16",qM="_inputContainer_m4lp3_21",HM="_input_m4lp3_21",$M="_hasLeftIcon_m4lp3_53",FM="_hasRightIcon_m4lp3_57",GM="_leftIcon_m4lp3_61",QM="_rightIcon_m4lp3_62",KM="_hasError_m4lp3_88",YM="_error_m4lp3_97",WM="_hint_m4lp3_103",XM="_disabled_m4lp3_109",ds={wrapper:UM,label:VM,required:BM,inputContainer:qM,input:HM,hasLeftIcon:$M,hasRightIcon:FM,leftIcon:GM,rightIcon:QM,hasError:KM,error:YM,hint:WM,disabled:XM},Gu=w.forwardRef(({label:s,error:e,hint:t,leftIcon:a,rightIcon:o,className:l="",id:d,...m},g)=>{const _=d||`input-${Math.random().toString(36).substr(2,9)}`,y=[ds.wrapper,e&&ds.hasError,m.disabled&&ds.disabled,l].filter(Boolean).join(" ");return u.jsxs("div",{className:y,children:[s&&u.jsxs("label",{htmlFor:_,className:ds.label,children:[s,m.required&&u.jsx("span",{className:ds.required,children:"*"})]}),u.jsxs("div",{className:ds.inputContainer,children:[a&&u.jsx("span",{className:ds.leftIcon,children:a}),u.jsx("input",{ref:g,id:_,className:`${ds.input} ${a?ds.hasLeftIcon:""} ${o?ds.hasRightIcon:""}`,...m}),o&&u.jsx("span",{className:ds.rightIcon,children:o})]}),e&&u.jsx("span",{className:ds.error,children:e}),!e&&t&&u.jsx("span",{className:ds.hint,children:t})]})});Gu.displayName="Input";const ZM="_card_x3a0c_3",JM="_bordered_x3a0c_15",ez="_elevated_x3a0c_19",tz="_paddingNone_x3a0c_24",nz="_paddingSm_x3a0c_28",sz="_paddingMd_x3a0c_32",iz="_paddingLg_x3a0c_36",az="_hoverable_x3a0c_54",Ws={card:ZM,default:"_default_x3a0c_10",bordered:JM,elevated:ez,paddingNone:tz,paddingSm:nz,paddingMd:sz,paddingLg:iz,hoverable:az},ql=({children:s,className:e="",padding:t="md",variant:a="default",hover:o=!1,onClick:l,draggable:d,onDragStart:m,onDragOver:g,onDragEnd:_,onDrop:y})=>{const b=[Ws.card,Ws[`padding-${t}`],Ws[a],o&&Ws.hoverable,l&&Ws.clickable,e].filter(Boolean).join(" ");return u.jsx("div",{className:b,onClick:l,role:l?"button":void 0,draggable:d,onDragStart:m,onDragOver:g,onDragEnd:_,onDrop:y,children:s})},uT=({children:s,className:e="",action:t})=>u.jsxs("div",{className:`${Ws.header} ${e}`,children:[u.jsx("div",{className:Ws.headerContent,children:s}),t&&u.jsx("div",{className:Ws.headerAction,children:t})]}),dT=({children:s,className:e="",subtitle:t})=>u.jsxs("div",{className:e,children:[u.jsx("h3",{className:Ws.title,children:s}),t&&u.jsx("p",{className:Ws.subtitle,children:t})]}),hT=({children:s,className:e=""})=>u.jsx("div",{className:`${Ws.content} ${e}`,children:s});const Lx=(...s)=>s.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim();const rz=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const oz=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());const fT=s=>{const e=oz(s);return e.charAt(0).toUpperCase()+e.slice(1)};var lz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const cz=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const uz=w.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:d,...m},g)=>w.createElement("svg",{ref:g,...lz,width:e,height:e,stroke:s,strokeWidth:a?Number(t)*24/Number(e):t,className:Lx("lucide",o),...!l&&!cz(m)&&{"aria-hidden":"true"},...m},[...d.map(([_,y])=>w.createElement(_,y)),...Array.isArray(l)?l:[l]]));const Se=(s,e)=>{const t=w.forwardRef(({className:a,...o},l)=>w.createElement(uz,{ref:l,iconNode:e,className:Lx(`lucide-${rz(fT(s))}`,`lucide-${s}`,a),...o}));return t.displayName=fT(s),t};const dz=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],hz=Se("arrow-down",dz);const fz=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ua=Se("arrow-left",fz);const mz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Hl=Se("arrow-right",mz);const pz=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],gz=Se("arrow-up",pz);const _z=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],yz=Se("award",_z);const vz=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],bz=Se("bell",vz);const Ez=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Wl=Se("book-open",Ez);const Tz=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],mT=Se("brain",Tz);const Sz=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],hm=Se("calendar",Sz);const Az=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Px=Se("chart-column",Az);const xz=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],zy=Se("chart-no-axes-column",xz);const wz=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Ux=Se("chart-pie",wz);const Iz=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Io=Se("check",Iz);const Rz=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Vx=Se("chevron-down",Rz);const Nz=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Cz=Se("chevron-left",Nz);const kz=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ri=Se("chevron-right",kz);const jz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ro=Se("circle-alert",jz);const Dz=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Li=Se("circle-check-big",Dz);const Oz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Bx=Se("circle-check",Oz);const Mz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],zz=Se("circle-question-mark",Mz);const Lz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Pz=Se("circle-x",Lz);const Uz=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],fm=Se("clipboard-check",Uz);const Vz=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],qx=Se("clipboard-list",Vz);const Bz=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qz=Se("clock-3",Bz);const Hz=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],rc=Se("clock",Hz);const $z=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Hx=Se("ellipsis-vertical",$z);const Fz=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Gz=Se("eye-off",Fz);const Qz=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ly=Se("eye",Qz);const Kz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Po=Se("file-text",Kz);const Yz=[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]],Wz=Se("flag",Yz);const Xz=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],$x=Se("graduation-cap",Xz);const Zz=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Jz=Se("grip-vertical",Zz);const e6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Fx=Se("info",e6);const t6=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Py=Se("layout-dashboard",t6);const n6=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],pT=Se("lightbulb",n6);const s6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],i6=Se("lock",s6);const a6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],r6=Se("log-out",a6);const o6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],l6=Se("mail",o6);const c6=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],u6=Se("menu",c6);const d6=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],fo=Se("mic",d6);const h6=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],f6=Se("moon",h6);const m6=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Gx=Se("pause",m6);const p6=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],g6=Se("pen-line",p6);const _6=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],gT=Se("pencil",_6);const y6=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Qx=Se("play",y6);const v6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],mm=Se("plus",v6);const b6=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],E6=Se("radio",b6);const T6=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Kx=Se("refresh-cw",T6);const S6=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],A6=Se("rotate-ccw",S6);const x6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Yx=Se("save",x6);const w6=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],oc=Se("school",w6);const I6=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Wx=Se("send",I6);const R6=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],N6=Se("settings",R6);const C6=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],$l=Se("sparkles",C6);const k6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],j6=Se("square",k6);const D6=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],O6=Se("star",D6);const M6=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],z6=Se("sun",M6);const L6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Mf=Se("target",L6);const P6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],lc=Se("trash-2",P6);const U6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Xx=Se("triangle-alert",U6);const V6=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],T_=Se("trophy",V6);const B6=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],q6=Se("type",B6);const H6=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],$6=Se("upload",H6);const F6=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],G6=Se("user-round",F6);const Q6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Uy=Se("user",Q6);const K6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Qu=Se("users",K6);const Y6=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],cc=Se("wand-sparkles",Y6);const W6=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],X6=Se("wifi-off",W6);const Z6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],No=Se("x",Z6);const J6=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ku=Se("zap",J6),eL="_overlay_7h7t5_3",tL="_overlayIn_7h7t5_1",nL="_modal_7h7t5_31",sL="_sheetUp_7h7t5_1",iL="_modalIn_7h7t5_1",aL="_header_7h7t5_92",rL="_title_7h7t5_105",oL="_closeBtn_7h7t5_117",lL="_body_7h7t5_132",cL="_footer_7h7t5_145",uL="_sm_7h7t5_171",dL="_lg_7h7t5_175",hL="_xl_7h7t5_179",Xa={overlay:eL,overlayIn:tL,modal:nL,sheetUp:sL,modalIn:iL,header:aL,title:rL,closeBtn:oL,body:lL,footer:cL,sm:uL,lg:dL,xl:hL},zf=({isOpen:s,onClose:e,title:t,children:a,size:o="md",showCloseButton:l=!0,closeOnOverlayClick:d=!0,closeOnEscape:m=!0,footer:g})=>{const _=w.useCallback(b=>{b.key==="Escape"&&m&&e()},[e,m]);if(w.useEffect(()=>(s&&(document.addEventListener("keydown",_),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",_),document.body.style.overflow=""}),[s,_]),!s)return null;const y=b=>{b.target===b.currentTarget&&d&&e()};return VT.createPortal(u.jsx("div",{className:Xa.overlay,onClick:y,children:u.jsxs("div",{className:`${Xa.modal} ${Xa[o]}`,role:"dialog","aria-modal":"true",children:[(t||l)&&u.jsxs("div",{className:Xa.header,children:[t&&u.jsx("h2",{className:Xa.title,children:t}),l&&u.jsx("button",{className:Xa.closeBtn,onClick:e,"aria-label":"Close modal",children:u.jsx(No,{size:20})})]}),u.jsx("div",{className:Xa.body,children:a}),g&&u.jsx("div",{className:Xa.footer,children:g})]})}),document.body)},fL="_container_1pqc3_1",mL="_iconWrapper_1pqc3_17",pL="_iconDanger_1pqc3_55",gL="_iconWarning_1pqc3_79",_L="_iconInfo_1pqc3_87",yL="_title_1pqc3_95",vL="_message_1pqc3_109",bL="_actions_1pqc3_123",EL="_confirmBtn_1pqc3_135",TL="_cancelBtn_1pqc3_137",Ai={container:fL,iconWrapper:mL,iconDanger:pL,iconWarning:gL,iconInfo:_L,title:yL,message:vL,actions:bL,confirmBtn:EL,cancelBtn:TL},pm=({isOpen:s,onClose:e,onConfirm:t,title:a,message:o,confirmText:l="Evet, Eminim",cancelText:d="ptal Et",variant:m="danger",isLoading:g=!1})=>{const _=()=>{switch(m){case"danger":return u.jsx(lc,{size:32,className:Ai.iconDanger});case"warning":return u.jsx(Ro,{size:32,className:Ai.iconWarning});default:return u.jsx(zz,{size:32,className:Ai.iconInfo})}};return u.jsx(zf,{isOpen:s,onClose:e,size:"sm",showCloseButton:!1,children:u.jsxs("div",{className:Ai.container,children:[u.jsx("div",{className:Ai.iconWrapper,children:_()}),u.jsx("h3",{className:Ai.title,children:a}),u.jsx("p",{className:Ai.message,children:o}),u.jsxs("div",{className:Ai.actions,children:[u.jsx(Ne,{variant:"ghost",onClick:e,disabled:g,className:Ai.cancelBtn,children:d}),u.jsx(Ne,{variant:m==="danger"?"danger":"primary",onClick:t,isLoading:g,className:Ai.confirmBtn,children:l})]})]})})},SL="_loader_oabps_3",AL="_spinner_oabps_9",xL="_spin_oabps_9",wL="_sm_oabps_18",IL="_md_oabps_24",RL="_lg_oabps_30",NL="_primary_oabps_37",CL="_white_oabps_41",kL="_gray_oabps_45",jL="_pageLoader_oabps_60",DL="_message_oabps_70",Ml={loader:SL,spinner:AL,spin:xL,sm:wL,md:IL,lg:RL,primary:NL,white:CL,gray:kL,pageLoader:jL,message:DL},es=({size:s="md",color:e="primary",className:t=""})=>u.jsx("div",{className:`${Ml.loader} ${Ml[s]} ${Ml[e]} ${t}`,children:u.jsx("div",{className:Ml.spinner})}),OL=({message:s})=>u.jsxs("div",{className:Ml.pageLoader,children:[u.jsx(es,{size:"lg"}),s&&u.jsx("p",{className:Ml.message,children:s})]});let ML=0;const wn=zx()(s=>({theme:"light",sidebarOpen:window.innerWidth>=1024,sidebarCollapsed:!1,activeModal:null,modalData:null,toasts:[],setTheme:e=>{document.documentElement.setAttribute("data-theme",e),s({theme:e})},toggleTheme:()=>s(e=>{const t=e.theme==="light"?"dark":"light";return document.documentElement.setAttribute("data-theme",t),{theme:t}}),setSidebarOpen:e=>s({sidebarOpen:e}),toggleSidebar:()=>s(e=>({sidebarOpen:!e.sidebarOpen})),setSidebarCollapsed:e=>s({sidebarCollapsed:e}),openModal:(e,t)=>s({activeModal:e,modalData:t??null}),closeModal:()=>s({activeModal:null,modalData:null}),addToast:e=>s(t=>({toasts:[...t.toasts,{...e,id:`toast-${++ML}`}]})),removeToast:e=>s(t=>({toasts:t.toasts.filter(a=>a.id!==e)}))})),zL="_container_1ihfa_3",LL="_toast_1ihfa_24",PL="_toastIn_1ihfa_1",UL="_icon_1ihfa_50",VL="_success_1ihfa_60",BL="_error_1ihfa_65",qL="_warning_1ihfa_70",HL="_info_1ihfa_75",$L="_content_1ihfa_80",FL="_title_1ihfa_85",GL="_message_1ihfa_92",QL="_closeBtn_1ihfa_99",Za={container:zL,toast:LL,toastIn:PL,icon:UL,success:VL,error:BL,warning:qL,info:HL,content:$L,title:FL,message:GL,closeBtn:QL},KL={success:Li,error:Ro,warning:Xx,info:Fx},YL=({id:s,type:e,title:t,message:a,duration:o=5e3})=>{const l=wn(m=>m.removeToast),d=KL[e];return w.useEffect(()=>{if(o>0){const m=setTimeout(()=>{l(s)},o);return()=>clearTimeout(m)}},[s,o,l]),u.jsxs("div",{className:`${Za.toast} ${Za[e]}`,children:[u.jsx(d,{className:Za.icon,size:20}),u.jsxs("div",{className:Za.content,children:[u.jsx("p",{className:Za.title,children:t}),a&&u.jsx("p",{className:Za.message,children:a})]}),u.jsx("button",{className:Za.closeBtn,onClick:()=>l(s),children:u.jsx(No,{size:16})})]})},WL=()=>{const s=wn(e=>e.toasts);return s.length===0?null:VT.createPortal(u.jsx("div",{className:Za.container,children:s.map(e=>u.jsx(YL,{...e},e.id))}),document.body)},XL="_selectContainer_2oi6w_1",ZL="_selectBox_2oi6w_11",JL="_active_2oi6w_51",e5="_icon_2oi6w_61",t5="_currentValue_2oi6w_75",n5="_arrow_2oi6w_95",s5="_rotated_2oi6w_107",i5="_dropdownMenu_2oi6w_117",a5="_option_2oi6w_173",r5="_selected_2oi6w_203",xi={selectContainer:XL,selectBox:ZL,active:JL,icon:e5,currentValue:t5,arrow:n5,rotated:s5,dropdownMenu:i5,option:a5,selected:r5},gs=({options:s,value:e,onChange:t,icon:a,placeholder:o="Seiniz...",className:l=""})=>{const[d,m]=w.useState(!1),g=w.useRef(null),_=s.find(b=>b.value===e);w.useEffect(()=>{const b=S=>{g.current&&!g.current.contains(S.target)&&m(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const y=b=>{t(b),m(!1)};return u.jsxs("div",{className:`${xi.selectContainer} ${l}`,ref:g,children:[u.jsxs("div",{className:`${xi.selectBox} ${d?xi.active:""}`,onClick:()=>m(!d),children:[a&&u.jsx("span",{className:xi.icon,children:a}),u.jsx("span",{className:xi.currentValue,children:_?_.label:o}),u.jsx(Vx,{size:18,className:`${xi.arrow} ${d?xi.rotated:""}`})]}),d&&u.jsx("div",{className:xi.dropdownMenu,children:s.map(b=>u.jsx("div",{className:`${xi.option} ${b.value===e?xi.selected:""}`,onClick:()=>y(b.value),children:b.label},b.value))})]})},o5="_header_h2cva_3",l5="_left_h2cva_26",c5="_menuBtn_h2cva_33",u5="_logo_h2cva_59",d5="_logoIcon_h2cva_71",h5="_logoText_h2cva_76",f5="_desktopNav_h2cva_89",m5="_navLink_h2cva_106",p5="_activeNavLink_h2cva_107",g5="_right_h2cva_136",_5="_iconBtn_h2cva_148",y5="_badge_h2cva_164",v5="_userMenu_h2cva_181",b5="_userInfo_h2cva_188",E5="_userName_h2cva_200",T5="_userRole_h2cva_207",S5="_teacher_h2cva_213",A5="_student_h2cva_217",x5="_admin_h2cva_221",w5="_avatar_h2cva_225",jn={header:o5,left:l5,menuBtn:c5,logo:u5,logoIcon:d5,logoText:h5,desktopNav:f5,navLink:m5,activeNavLink:p5,right:g5,iconBtn:_5,badge:y5,userMenu:v5,userInfo:b5,userName:E5,userRole:T5,teacher:S5,student:A5,admin:x5,avatar:w5},I5=()=>{const s=Lt(d=>d.user),{theme:e,toggleTheme:t,toggleSidebar:a}=wn(),o=()=>{switch(s?.role){case"teacher":return"retmen";case"student":return"renci";case"admin":return"Ynetici";default:return""}},l=()=>{switch(s?.role){case"teacher":return"teacher";case"student":return"student";case"admin":return"admin";default:return""}};return u.jsxs("header",{className:jn.header,children:[u.jsxs("div",{className:jn.left,children:[u.jsx("button",{className:jn.menuBtn,onClick:a,"aria-label":"Toggle menu",children:u.jsx(u6,{size:22})}),u.jsxs(or,{to:s?.role==="teacher"?ge.TEACHER.DASHBOARD:ge.HOME,className:jn.logo,children:[u.jsx("span",{className:jn.logoIcon,children:""}),u.jsx("span",{className:jn.logoText,children:"Lala"})]})]}),u.jsxs("div",{className:jn.right,children:[u.jsx("button",{className:jn.iconBtn,onClick:t,"aria-label":"Toggle theme",children:e==="light"?u.jsx(f6,{size:20}):u.jsx(z6,{size:20})}),u.jsxs("button",{className:jn.iconBtn,"aria-label":"Notifications",children:[u.jsx(bz,{size:20}),u.jsx("span",{className:jn.badge,children:"3"})]}),u.jsxs("div",{className:jn.userMenu,children:[u.jsxs("div",{className:jn.userInfo,children:[u.jsx("span",{className:jn.userName,children:s?.displayName||"Kullanc"}),u.jsx("span",{className:`${jn.userRole} ${jn[l()]}`,children:o()})]}),u.jsx("div",{className:jn.avatar,children:s?.photoURL?u.jsx("img",{src:s.photoURL,alt:s.displayName}):u.jsx(Uy,{size:18})})]})]})]})},R5="_backdrop_bh2jq_4",N5="_sidebar_bh2jq_29",C5="_open_bh2jq_52",k5="_closed_bh2jq_56",j5="_label_bh2jq_72",D5="_navItem_bh2jq_77",O5="_active_bh2jq_91",M5="_logoutBtn_bh2jq_96",z5="_nav_bh2jq_77",L5="_navList_bh2jq_117",P5="_icon_bh2jq_159",U5="_footer_bh2jq_183",Ds={backdrop:R5,sidebar:N5,open:C5,closed:k5,label:j5,navItem:D5,active:O5,logoutBtn:M5,nav:z5,navList:L5,icon:P5,footer:U5},V5=[{label:"Dashboard",icon:u.jsx(Py,{size:20}),path:ge.TEACHER.DASHBOARD},{label:"retim Atlyesi",icon:u.jsx(cc,{size:20}),path:ge.TEACHER.SESSIONS},{label:"Snavlar",icon:u.jsx(fm,{size:20}),path:ge.TEACHER.QUIZZES},{label:"Raporlar",icon:u.jsx(Ux,{size:20}),path:ge.TEACHER.REPORTS}],B5=[{label:"Dashboard",icon:u.jsx(Py,{size:20}),path:ge.STUDENT.DASHBOARD},{label:"Snavlarm",icon:u.jsx(Wl,{size:20}),path:ge.STUDENT.QUIZZES},{label:"Sonularm",icon:u.jsx(fm,{size:20}),path:ge.STUDENT.RESULTS}],q5=[{label:"Dashboard",icon:u.jsx(Py,{size:20}),path:ge.ADMIN.DASHBOARD},{label:"retmenler",icon:u.jsx(Qu,{size:20}),path:ge.ADMIN.TEACHERS},{label:"renciler",icon:u.jsx($x,{size:20}),path:ge.ADMIN.STUDENTS},{label:"Tm retimler",icon:u.jsx(cc,{size:20}),path:ge.ADMIN.SESSIONS},{label:"Raporlar",icon:u.jsx(Ux,{size:20}),path:ge.ADMIN.REPORTS},{label:"Ayarlar",icon:u.jsx(N6,{size:20}),path:ge.ADMIN.SETTINGS}],H5=()=>{const s=In(),e=ts(),t=Lt(y=>y.user),a=Lt(y=>y.logout),o=wn(y=>y.sidebarOpen),l=wn(y=>y.setSidebarOpen);w.useEffect(()=>{window.innerWidth<1024&&l(!1)},[e.pathname,l]),w.useEffect(()=>{const y=()=>{window.innerWidth>=1024?l(!0):l(!1)};return window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[l]);const d=()=>{switch(t?.role){case"teacher":return V5;case"student":return B5;case"admin":return q5;default:return[]}},m=async()=>{try{await dk(dm),a(),s(ge.LOGIN)}catch(y){console.error("Logout error:",y)}},g=()=>{window.innerWidth<1024&&l(!1)},_=d();return u.jsxs(u.Fragment,{children:[o&&u.jsx("div",{className:Ds.backdrop,onClick:g}),u.jsxs("aside",{className:`${Ds.sidebar} ${o?Ds.open:Ds.closed}`,children:[u.jsx("nav",{className:Ds.nav,children:u.jsx("ul",{className:Ds.navList,children:_.map(y=>u.jsx("li",{children:u.jsxs(PT,{to:y.path,end:!0,className:({isActive:b})=>`${Ds.navItem} ${b?Ds.active:""}`,children:[u.jsx("span",{className:Ds.icon,children:y.icon}),u.jsx("span",{className:Ds.label,children:y.label})]})},y.path))})}),u.jsx("div",{className:Ds.footer,children:u.jsxs("button",{className:Ds.logoutBtn,onClick:m,children:[u.jsx(r6,{size:20}),u.jsx("span",{children:"k Yap"})]})})]})]})},$5="_layout_ajq5n_3",F5="_main_ajq5n_8",G5="_content_ajq5n_15",Q5="_sidebarOpen_ajq5n_33",K5="_sidebarClosed_ajq5n_37",bu={layout:$5,main:F5,content:G5,sidebarOpen:Q5,sidebarClosed:K5},Y5=()=>{const s=wn(e=>e.sidebarOpen);return u.jsxs("div",{className:bu.layout,children:[u.jsx(I5,{}),u.jsx(H5,{}),u.jsx("main",{className:`${bu.main} ${s?bu.sidebarOpen:bu.sidebarClosed}`,children:u.jsx("div",{className:bu.content,children:u.jsx(F2,{})})})]})},Dn=({children:s,allowedRoles:e})=>{const t=ts(),{user:a,firebaseUser:o,isLoading:l,isInitialized:d}=Lt();if(!d||l)return u.jsx(OL,{message:"Ykleniyor..."});if(!o)return u.jsx(mf,{to:ge.LOGIN,state:{from:t},replace:!0});if(e&&a&&!e.includes(a.role)){const m=a.role==="teacher"?ge.TEACHER.DASHBOARD:a.role==="student"?ge.STUDENT.DASHBOARD:ge.ADMIN.DASHBOARD;return u.jsx(mf,{to:m,replace:!0})}return u.jsx(u.Fragment,{children:s})},W5=[{email:"ogretmen@test.com",password:"test1234",displayName:"Ahmet retmen",role:"teacher",subjects:["Matematik","Fizik"],assignedClasses:["9-A","10-B"]},{email:"ogrenci@test.com",password:"test1234",displayName:"Zeynep renci",role:"student",classId:"9-A",studentNumber:"2024001"},{email:"yonetici@test.com",password:"test1234",displayName:"Mdr Bey",role:"admin"}];async function X5(){for(const s of W5)try{const{email:e,password:t,...a}=s,l=(await rk(dm,e,t)).user.uid;await gx(Rn(bt,"users",l),{...a,email:e,institutionId:"test-institution",photoURL:null,phoneNumber:null,isActive:!0,createdAt:ut.now(),updatedAt:ut.now()}),console.log(` Created: ${e} (${a.role})`)}catch(e){e.code==="auth/email-already-in-use"?console.log(` Already exists: ${s.email}`):console.error(` Error creating ${s.email}:`,e.message)}console.log(" Seed complete!")}const Z5="_container_6gyxg_3",J5="_decoration_6gyxg_42",e9="_circle1_6gyxg_52",t9="_circle2_6gyxg_53",n9="_circle3_6gyxg_54",s9="_card_6gyxg_100",i9="_header_6gyxg_134",a9="_logo_6gyxg_139",r9="_title_6gyxg_146",o9="_subtitle_6gyxg_159",l9="_form_6gyxg_165",c9="_errorBanner_6gyxg_171",u9="_forgotLink_6gyxg_208",d9="_eyeBtn_6gyxg_222",h9="_footer_6gyxg_238",f9="_link_6gyxg_245",m9="_devSection_6gyxg_255",En={container:Z5,decoration:J5,circle1:e9,circle2:t9,circle3:n9,card:s9,header:i9,logo:a9,title:r9,subtitle:o9,form:l9,errorBanner:c9,forgotLink:u9,eyeBtn:d9,footer:h9,link:f9,devSection:m9},p9=()=>{const s=In(),e=Lt(H=>H.setUser),t=wn(H=>H.addToast),[a,o]=w.useState(""),[l,d]=w.useState(""),[m,g]=w.useState(!1),[_,y]=w.useState(!1),[b,S]=w.useState(!1),[N,z]=w.useState(""),V=async()=>{S(!0);try{await X5(),t({type:"success",title:"Test kullanclar oluturuldu!"})}catch{t({type:"error",title:"Hata",message:"Kullanclar oluturulamad"})}finally{S(!1)}},k=async H=>{H.preventDefault(),z(""),y(!0);try{const q=await ok(dm,a,l),G=await zo(Rn(bt,"users",q.user.uid));if(G.exists()){const O={id:G.id,...G.data()};e(O),t({type:"success",title:"Ho geldiniz!",message:`${O.displayName} olarak giri yaptnz.`});const se=O.role==="teacher"?ge.TEACHER.DASHBOARD:O.role==="student"?ge.STUDENT.DASHBOARD:ge.ADMIN.DASHBOARD;s(se,{replace:!0})}else z("Kullanc bilgileri bulunamad.")}catch(q){if(console.error("Login error:",q),a==="ogretmen@test.com"&&l==="test1234"){e({id:"dummy-teacher",email:"ogretmen@test.com",displayName:"Ahmet retmen",role:"teacher",institutionId:"test-inst",isActive:!0,createdAt:new Date,updatedAt:new Date}),s(ge.TEACHER.DASHBOARD,{replace:!0});return}if(a==="ogrenci@test.com"&&l==="test1234"){e({id:"dummy-student",email:"ogrenci@test.com",displayName:"Zeynep renci",role:"student",institutionId:"test-inst",isActive:!0,createdAt:new Date,updatedAt:new Date}),s(ge.STUDENT.DASHBOARD,{replace:!0});return}q.code==="auth/user-not-found"||q.code==="auth/wrong-password"?z("E-posta veya ifre hatal."):q.code==="auth/too-many-requests"?z("ok fazla baarsz deneme. Ltfen daha sonra tekrar deneyin."):z("Giri yaplrken bir hata olutu. (Test bilgileriyle girmeyi deneyin)")}finally{y(!1)}};return u.jsxs("div",{className:En.container,children:[u.jsxs("div",{className:En.card,children:[u.jsxs("div",{className:En.header,children:[u.jsx("div",{className:En.logo,children:""}),u.jsx("h1",{className:En.title,children:"EnderunLala"}),u.jsx("p",{className:En.subtitle,children:"Eitim platformuna ho geldiniz"})]}),u.jsxs("form",{onSubmit:k,className:En.form,children:[N&&u.jsx("div",{className:En.errorBanner,children:N}),u.jsx(Gu,{type:"email",label:"E-posta",placeholder:"ornek@okul.edu.tr",value:a,onChange:H=>o(H.target.value),leftIcon:u.jsx(l6,{size:18}),required:!0,autoComplete:"email"}),u.jsx(Gu,{type:m?"text":"password",label:"ifre",placeholder:"",value:l,onChange:H=>d(H.target.value),leftIcon:u.jsx(i6,{size:18}),rightIcon:u.jsx("button",{type:"button",onClick:()=>g(!m),className:En.eyeBtn,children:m?u.jsx(Gz,{size:18}):u.jsx(Ly,{size:18})}),required:!0,autoComplete:"current-password"}),u.jsx(or,{to:ge.FORGOT_PASSWORD,className:En.forgotLink,children:"ifremi unuttum"}),u.jsx(Ne,{type:"submit",fullWidth:!0,isLoading:_,size:"lg",children:"Giri Yap"})]}),u.jsx("div",{className:En.footer,children:u.jsxs("p",{children:["Hesabnz yok mu?"," ",u.jsx(or,{to:ge.REGISTER,className:En.link,children:"Kayt olun"})]})}),u.jsx("div",{className:En.devSection,children:u.jsx(Ne,{variant:"ghost",size:"sm",onClick:V,isLoading:b,leftIcon:u.jsx(Qu,{size:16}),children:"Test Kullanclar Olutur"})})]}),u.jsxs("div",{className:En.decoration,children:[u.jsx("div",{className:En.circle1}),u.jsx("div",{className:En.circle2}),u.jsx("div",{className:En.circle3})]})]})},uc="sessions",g9=async(s,e)=>(await lm(Ls(bt,uc),{...e,teacherId:s,status:"draft",createdAt:ys(),updatedAt:ys()})).id,_9=async(s,e,t)=>{if(e.size>524288e3)throw new Error(`Dosya ok byk (${E9(e.size)}). Maksimum dosya boyutu 500MB.`);const o=b9(e.type),l=`sessions/${s}/audio_${Date.now()}.${o}`,d=v_(b_,l),m={contentType:e.type||"audio/webm",customMetadata:{sessionId:s,uploadedAt:new Date().toISOString(),originalSize:e.size.toString()}},g=cM(d,e,m),_={pause:()=>g.pause(),resume:()=>g.resume(),cancel:()=>g.cancel()};return new Promise((y,b)=>{g.on("state_changed",S=>{const N=Math.round(S.bytesTransferred/S.totalBytes*100);t?.({percent:N,bytesTransferred:S.bytesTransferred,totalBytes:S.totalBytes,state:S.state})},S=>{console.error("[SessionService] Upload error:",S);let N;switch(S.code){case"storage/canceled":N="Ykleme iptal edildi.";break;case"storage/retry-limit-exceeded":N="nternet balants ok zayf. Ltfen balantnz kontrol edip tekrar deneyin.";break;case"storage/quota-exceeded":N="Depolama alan doldu. Ltfen yneticinize bavurun.";break;case"storage/unauthenticated":case"storage/unauthorized":N="Yetkilendirme hatas. Ltfen tekrar giri yapn (Storage izin hatas).";break;default:N=`Ykleme baarsz (Hata Kodu: ${S.code}): ${S.message}`}t?.({percent:0,bytesTransferred:0,totalBytes:e.size,state:"error"}),b(new Error(N))},async()=>{try{const S=await dM(g.snapshot.ref);await dd(Rn(bt,uc,s),{audioUrl:S,storagePath:l,recordingSize:e.size,status:"recorded",updatedAt:ys()}),t?.({percent:100,bytesTransferred:e.size,totalBytes:e.size,state:"success"}),y({downloadUrl:S,controller:_})}catch(S){b(S)}})})},Lf=async s=>{const e=await zo(Rn(bt,uc,s));return e.exists()?{id:e.id,...e.data()}:null},Zx=async(s,e=20)=>{const t=Rr(Ls(bt,uc),ga("teacherId","==",s),fx("createdAt","desc"),q3(e));return(await Nr(t)).docs.map(o=>({id:o.id,...o.data()}))},y9=async(s,e)=>{await dd(Rn(bt,uc,s),{...e,updatedAt:ys()})},Jx=async s=>{const e=await Lf(s);e&&await v9(s,e),await Iy(Rn(bt,uc,s))},v9=async(s,e)=>{try{if(e.storagePath)try{await lT(v_(b_,e.storagePath));return}catch(t){t.code!=="storage/object-not-found"&&console.error("[SessionService] Delete by path error:",t)}try{const t=v_(b_,`sessions/${s}`),a=await uM(t);a.items.length>0&&await Promise.all(a.items.map(o=>lT(o).catch(l=>{console.warn("[SessionService] Could not delete:",o.fullPath,l)})))}catch(t){t.code!=="storage/object-not-found"&&console.error("[SessionService] Folder cleanup error:",t)}}catch(t){console.error("[SessionService] Audio deletion error:",t)}},b9=s=>!s||s.includes("webm")?"webm":s.includes("mp3")||s.includes("mpeg")?"mp3":s.includes("wav")?"wav":s.includes("ogg")?"ogg":s.includes("mp4")||s.includes("m4a")?"m4a":"webm",E9=s=>{if(s===0)return"0 B";const e=1024,t=["B","KB","MB","GB"],a=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,a)).toFixed(1))+" "+t[a]},ps={MULTIPLE_CHOICE:"multiple_choice",TRUE_FALSE:"true_false"},Ug={multiple_choice:"oktan Semeli",true_false:"Doru/Yanl"},dc=()=>`q_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,T9=(s,e)=>{const t={id:dc(),question:"",points:10,difficulty:"medium",order:e};switch(s){case ps.MULTIPLE_CHOICE:return{...t,type:ps.MULTIPLE_CHOICE,options:[{id:"opt_1",text:"",isCorrect:!0},{id:"opt_2",text:"",isCorrect:!1},{id:"opt_3",text:"",isCorrect:!1},{id:"opt_4",text:"",isCorrect:!1}],shuffleOptions:!0};case ps.TRUE_FALSE:return{...t,type:ps.TRUE_FALSE,correctAnswer:!0};default:throw new Error(`Unknown question type: ${s}`)}},Vy={timeLimit:void 0,showTimeRemaining:!0,shuffleQuestions:!1,shuffleOptions:!0,showPoints:!0,showDifficulty:!1,showCorrectAnswers:"after_submission",showExplanations:"after_submission",showScore:"immediately",allowRetake:!1,maxAttempts:1,passingScore:60,allowSkip:!0,allowGoBack:!0,requireAllQuestions:!0},rr=s=>s.reduce((e,t)=>e+t.points,0),mo=s=>{const e={multiple_choice:1,true_false:.5};return Math.ceil(s.reduce((t,a)=>t+(e[a.type]||1),0))},Uo="quizzes",vr="quiz_submissions",mn=s=>s?s instanceof ut?s.toDate():s instanceof Date?s:typeof s=="string"||typeof s=="number"?new Date(s):s&&typeof s.toDate=="function"?s.toDate():new Date:new Date,ew=async(s,e)=>{const t=(e.questions||[]).map((d,m)=>({...d,id:dc(),order:m,createdAt:new Date,updatedAt:new Date})),a=Yu({...Vy,...e.settings}),o={title:e.title,description:e.description||"",sessionId:e.sessionId||null,classId:e.classId||null,classIds:e.classIds||[],teacherId:s,questions:Yu(t),settings:a,status:"draft",totalPoints:rr(t),estimatedDuration:mo(t),createdAt:ys(),updatedAt:ys()};return{id:(await lm(Ls(bt,Uo),o)).id,...o,createdAt:new Date,updatedAt:new Date}},Vo=async s=>{const e=Rn(bt,Uo,s),t=await zo(e);if(!t.exists())return null;const a=t.data();return{id:t.id,...a,createdAt:mn(a.createdAt),updatedAt:mn(a.updatedAt),publishedAt:a.publishedAt?mn(a.publishedAt):void 0,dueDate:a.dueDate?mn(a.dueDate):void 0}},Yu=s=>{if(s===null||typeof s!="object"||s instanceof Date||s.constructor&&(s.constructor.name==="Timestamp"||s.constructor.name==="FieldValue"||s._methodName))return s;if(Array.isArray(s))return s.map(t=>Yu(t));const e={};return Object.keys(s).forEach(t=>{const a=s[t];a!==void 0&&(e[t]=Yu(a))}),e},By=async()=>{const s=Rr(Ls(bt,Uo),ga("status","==","published"));return(await Nr(s)).docs.map(a=>({id:a.id,...a.data(),createdAt:mn(a.data().createdAt),updatedAt:mn(a.data().updatedAt)})).sort((a,o)=>o.createdAt.getTime()-a.createdAt.getTime())},Vg=async(s,e)=>{const a={...Yu(e),updatedAt:ys()};e.questions&&(a.totalPoints=rr(e.questions),a.estimatedDuration=mo(e.questions));const o=Rn(bt,Uo,s);await dd(o,a)},tw=async s=>{const e=Rn(bt,Uo,s);await Iy(e)},gm=async s=>{const e=Rr(Ls(bt,Uo),ga("teacherId","==",s),fx("createdAt","desc"));return(await Nr(e)).docs.map(a=>{const o=a.data();return{id:a.id,...o,createdAt:mn(o.createdAt),updatedAt:mn(o.updatedAt)}})},S9=async(s,e)=>{const t={status:"published",publishedAt:ys(),updatedAt:ys()};await dd(Rn(bt,Uo,s),t)},A9=async(s,e)=>{const a=(await qy(s,e)).length+1,o=await Vo(s);if(!o)throw new Error("Quiz not found");if(o.settings.maxAttempts&&a>o.settings.maxAttempts)throw new Error("Maximum attempts reached");const l={quizId:s,studentId:e,answers:[],totalPoints:o.totalPoints,status:"in_progress",attemptNumber:a,startedAt:ys()};return{id:(await lm(Ls(bt,vr),l)).id,...l,startedAt:new Date}},x9=async s=>{const e=Rn(bt,vr,s),t=await zo(e);if(!t.exists())return null;const a=t.data();return{id:t.id,...a,startedAt:mn(a.startedAt),submittedAt:a.submittedAt?mn(a.submittedAt):void 0,gradedAt:a.gradedAt?mn(a.gradedAt):void 0}},qy=async(s,e)=>{const t=Rr(Ls(bt,vr),ga("quizId","==",s),ga("studentId","==",e));return(await Nr(t)).docs.map(l=>({id:l.id,...l.data(),startedAt:mn(l.data().startedAt),submittedAt:l.data().submittedAt?mn(l.data().submittedAt):void 0})).sort((l,d)=>d.startedAt.getTime()-l.startedAt.getTime())},nw=async s=>{const e=Rr(Ls(bt,vr),ga("studentId","==",s));return(await Nr(e)).docs.map(o=>({id:o.id,...o.data(),startedAt:mn(o.data().startedAt),submittedAt:o.data().submittedAt?mn(o.data().submittedAt):void 0})).sort((o,l)=>{const d=o.submittedAt||o.startedAt;return(l.submittedAt||l.startedAt).getTime()-d.getTime()})},w9=async(s,e)=>{const t=Rn(bt,vr,s),a=await zo(t);if(!a.exists())throw new Error("Submission not found");const o=a.data(),l=await Vo(o.quizId);if(!l)throw new Error("Quiz not found");const d=e.map(N=>{const z=l.questions.find(H=>H.id===N.questionId);if(!z)return N;let V=!1,k=0;switch(z.type){case"multiple_choice":{const q=(z.options||[]).filter(O=>O.isCorrect).map(O=>O.id),G=N.selectedOptionIds||[];V=q.length===G.length&&q.every(O=>G.includes(O));break}case"true_false":{V=z.correctAnswer===N.booleanAnswer;break}}return V&&(k=z.points),{...N,isCorrect:V,pointsEarned:k,answeredAt:new Date}}),m=d.reduce((N,z)=>N+(z.pointsEarned||0),0),g=l.totalPoints||rr(l.questions),_=g>0?Math.round(m/g*100):0,y=l.settings?.passingScore?_>=l.settings.passingScore:!0,b=mn(o.startedAt),S=Math.floor((Date.now()-b.getTime())/1e3);await dd(t,{answers:d,score:m,percentage:_,passed:y,status:"submitted",submittedAt:ys(),duration:S})},sw=async s=>{const e=Rr(Ls(bt,vr),ga("quizId","==",s));return(await Nr(e)).docs.map(o=>({id:o.id,...o.data(),startedAt:mn(o.data().startedAt),submittedAt:o.data().submittedAt?mn(o.data().submittedAt):void 0})).sort((o,l)=>{const d=o.submittedAt?.getTime()||0;return(l.submittedAt?.getTime()||0)-d})},I9=async s=>{const e=Rr(Ls(bt,vr),ga("studentId","==",s)),a=(await Nr(e)).docs.map(o=>Iy(Rn(bt,vr,o.id)));await Promise.all(a)},R9="_container_1vko2_1",N9="_institutionInfo_1vko2_13",C9="_instIcon_1vko2_33",k9="_instLabel_1vko2_41",j9="_instName_1vko2_55",D9="_formCard_1vko2_67",O9="_formTitle_1vko2_83",M9="_inputGrid_1vko2_97",z9="_formActions_1vko2_111",L9="_listSection_1vko2_121",P9="_listTitle_1vko2_133",U9="_classList_1vko2_149",V9="_classItem_1vko2_161",B9="_className_1vko2_191",q9="_classBadge_1vko2_207",H9="_itemActions_1vko2_235",$9="_actionBtn_1vko2_245",F9="_emptyState_1vko2_297",en={container:R9,institutionInfo:N9,instIcon:C9,instLabel:k9,instName:j9,formCard:D9,formTitle:O9,inputGrid:M9,formActions:z9,listSection:L9,listTitle:P9,classList:U9,classItem:V9,className:B9,classBadge:q9,itemActions:H9,actionBtn:$9,delete:"_delete_1vko2_287",emptyState:F9},iw=({isOpen:s,onClose:e,institutionName:t,existingClasses:a,onAddClass:o,onDeleteClass:l,onUpdateClass:d})=>{const[m,g]=w.useState(""),[_,y]=w.useState(""),[b,S]=w.useState(null),N=()=>{if(!m||!_)return;const k=`${m}-${_.toUpperCase()}`;b?(d(b,k),S(null)):o(k),g(""),y("")},z=k=>{const[H,q]=k.split("-");g(H||""),y(q||""),S(k)},V=()=>{S(null),g(""),y("")};return u.jsx(zf,{isOpen:s,onClose:e,title:"Snf Ynetimi",size:"md",children:u.jsxs("div",{className:en.container,children:[u.jsxs("div",{className:en.institutionInfo,children:[u.jsx(oc,{size:20,className:en.instIcon}),u.jsx("span",{className:en.instLabel,children:"KURUM:"}),u.jsx("span",{className:en.instName,children:t})]}),u.jsxs("div",{className:en.formCard,children:[u.jsx("h3",{className:en.formTitle,children:b?"Snf Dzenle":"Yeni Snf Ekle"}),u.jsxs("div",{className:en.inputGrid,children:[u.jsx(Gu,{label:"Snf",placeholder:"rn: 9, 10, 11",value:m,onChange:k=>g(k.target.value)}),u.jsx(Gu,{label:"ube",placeholder:"rn: A, B, C",value:_,onChange:k=>y(k.target.value)})]}),u.jsxs("div",{className:en.formActions,children:[b&&u.jsx(Ne,{variant:"outline",onClick:V,children:"ptal"}),u.jsx(Ne,{variant:"primary",fullWidth:!0,leftIcon:b?u.jsx(gT,{size:18}):u.jsx(mm,{size:18}),onClick:N,disabled:!m||!_,children:b?"Gncelle":"Snf Kaydet"})]})]}),u.jsxs("div",{className:en.listSection,children:[u.jsx("h3",{className:en.listTitle,children:"Mevcut Snflar"}),u.jsx("div",{className:en.classList,children:a.length>0?a.map(k=>u.jsxs("div",{className:en.classItem,children:[u.jsxs("div",{className:en.className,children:[u.jsx("div",{className:en.classBadge,children:k.split("-")[0]}),u.jsxs("span",{children:[k," Snf"]})]}),u.jsxs("div",{className:en.itemActions,children:[u.jsx("button",{className:en.actionBtn,onClick:()=>z(k),title:"Dzenle",children:u.jsx(gT,{size:16})}),u.jsx("button",{className:`${en.actionBtn} ${en.delete}`,onClick:()=>l(k),title:"Sil",children:u.jsx(lc,{size:16})})]})]},k)):u.jsx("div",{className:en.emptyState,children:"Henz tanml bir snf bulunamad."})})]})]})})},_T=[{id:"student_9a_1_gen",email:"ali.yilmaz@dummy.com",displayName:"Ali Ylmaz",role:"student",studentNumber:"901",classId:"9-A",isActive:!0,photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=Ali"},{id:"student_9a_2_gen",email:"ayse.demir@dummy.com",displayName:"Aye Demir",role:"student",studentNumber:"902",classId:"9-A",isActive:!0,photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=Ayse"},{id:"student_9a_3_gen",email:"mehmet.oz@dummy.com",displayName:"Mehmet z",role:"student",studentNumber:"903",classId:"9-A",isActive:!0,photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=Mehmet"},{id:"student_9a_4_gen",email:"zeynep.kaya@dummy.com",displayName:"Zeynep Kaya",role:"student",studentNumber:"904",classId:"9-A",isActive:!0,photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=Zeynep"}],aw=({onDataGenerated:s})=>{const{user:e}=Lt(),[t,a]=w.useState(!1),[o,l]=w.useState(null),d=async()=>{if(!e||!e.institutionId){l("Hata: Kurum ID bulunamad. Ltfen giri yapn.");return}a(!0),l("renciler oluturuluyor...");try{for(const y of _T){const b={...y,institutionId:e.institutionId,createdAt:ys(),updatedAt:ys()};await gx(Rn(bt,"users",y.id),b)}l("Snavlar getiriliyor...");const g=await By();if(g.length===0){l("Uyar: Yaynlanm snav bulunamad. Ltfen nce snav yaynlayn."),a(!1);return}l(`${g.length} snav iin cevaplar retiliyor...`);let _=0;for(const y of g)for(const b of _T)if(Math.random()>.1){const S=m(y,b.id);await lm(Ls(bt,"quiz_submissions"),S),_++}l(`Baarl! 4 renci ve ${_} snav sonucu oluturuldu.`),s&&s()}catch(g){console.error("Data generation error:",g),l(`Hata: ${g.message}`)}finally{a(!1)}},m=(g,_)=>{const y=.3+Math.random()*.65,b=g.questions.map(G=>{const O=Math.random()<y;let se=0,he=[],D=null;if(G.type==="multiple_choice"){const I=G.options.filter(P=>P.isCorrect),C=G.options.filter(P=>!P.isCorrect);O&&I.length>0?he=[I[0].id]:C.length>0&&(he=[C[Math.floor(Math.random()*C.length)].id])}else if(G.type==="true_false"){const I=G.correctAnswer;D=O?I:!I}return O&&(se=G.points),{questionId:G.id,questionType:G.type,selectedOptionIds:he,booleanAnswer:D,isCorrect:O,pointsEarned:se,answeredAt:new Date,timeSpent:Math.floor(Math.random()*60)+10}}),S=b.reduce((G,O)=>G+O.pointsEarned,0),N=g.totalPoints,z=N>0?Math.round(S/N*100):0,V=g.settings?.passingScore?z>=g.settings.passingScore:!0,k=Math.floor(Math.random()*7*24*60*60*1e3),H=new Date(Date.now()-k),q=new Date(H.getTime()-g.estimatedDuration*60*1e3);return{quizId:g.id,studentId:_,answers:b,score:S,totalPoints:N,percentage:z,passed:V,status:"graded",attemptNumber:1,startedAt:ut.fromDate(q),submittedAt:ut.fromDate(H),gradedAt:ut.fromDate(H),duration:Math.floor((H.getTime()-q.getTime())/1e3)}};return u.jsxs("div",{style:{padding:"20px",background:"#f8fafc",border:"1px dashed #cbd5e1",borderRadius:"12px",margin:"20px 0"},children:[u.jsx("h3",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"10px"},children:" Test Verisi Oluturucu"}),u.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"15px"},children:"9A snf iin 4 renci oluturur ve yaynlanm snavlar iin rastgele sonular retir."}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[u.jsx(Ne,{variant:"primary",onClick:d,disabled:t,className:"vibrantAddBtn",children:t?"leniyor...":"Test Verisi ret"}),o&&u.jsx("span",{style:{fontSize:"14px",color:o.includes("Hata")?"#ef4444":"#10b981",fontWeight:500},children:o})]})]})},G9="_page_1q3i5_3",Q9="_header_1q3i5_17",K9="_greeting_1q3i5_33",Y9="_teacherName_1q3i5_40",W9="_headerTitle_1q3i5_51",X9="_subtitle_1q3i5_56",Z9="_contextBar_1q3i5_69",J9="_contextItem_1q3i5_84",eP="_contextLabel_1q3i5_92",tP="_vibrantAddBtn_1q3i5_102",nP="_liveRecordBtn_1q3i5_131",sP="_liveIcon_1q3i5_161",iP="_pulse_1q3i5_1",aP="_statsGrid_1q3i5_184",rP="_statCard_1q3i5_205",oP="_recorded_1q3i5_233",lP="_draft_1q3i5_239",cP="_approved_1q3i5_245",uP="_published_1q3i5_251",dP="_statIconWrapper_1q3i5_257",hP="_statInfo_1q3i5_276",fP="_statValue_1q3i5_284",mP="_statLabel_1q3i5_298",pP="_statBgIcon_1q3i5_312",gP="_loadingState_1q3i5_344",_P="_recentSection_1q3i5_351",yP="_recentHeader_1q3i5_366",vP="_recentTitle_1q3i5_380",bP="_viewAll_1q3i5_393",EP="_recentList_1q3i5_417",TP="_recentItem_1q3i5_423",SP="_recentItemIcon_1q3i5_442",AP="_recentItemContent_1q3i5_455",xP="_recentItemTitle_1q3i5_460",wP="_recentItemMeta_1q3i5_470",IP="_detailBadge_1q3i5_480",RP="_recentEmpty_1q3i5_490",NP="_emptyIllustration_1q3i5_501",CP="_floating_1q3i5_1",kP="_illustrationMain_1q3i5_533",jP="_illustrationFace_1q3i5_558",DP="_faceEye_1q3i5_563",OP="_illustrationLines_1q3i5_578",MP="_illuLine_1q3i5_593",zP="_illustrationSearch_1q3i5_607",LP="_emptyTitle_1q3i5_644",PP="_emptySubtitle_1q3i5_658",Pe={page:G9,header:Q9,greeting:K9,teacherName:Y9,headerTitle:W9,subtitle:X9,contextBar:Z9,contextItem:J9,contextLabel:eP,vibrantAddBtn:tP,liveRecordBtn:nP,liveIcon:sP,pulse:iP,statsGrid:aP,statCard:rP,recorded:oP,draft:lP,approved:cP,published:uP,statIconWrapper:dP,statInfo:hP,statValue:fP,statLabel:mP,statBgIcon:pP,loadingState:gP,recentSection:_P,recentHeader:yP,recentTitle:vP,viewAll:bP,recentList:EP,recentItem:TP,recentItemIcon:SP,recentItemContent:AP,recentItemTitle:xP,recentItemMeta:wP,detailBadge:IP,recentEmpty:RP,emptyIllustration:NP,floating:CP,illustrationMain:kP,illustrationFace:jP,faceEye:DP,illustrationLines:OP,illuLine:MP,illustrationSearch:zP,emptyTitle:LP,emptySubtitle:PP},UP=()=>{const s=Lt(O=>O.user),e=Lt(O=>O.setUser),t=In(),[a,o]=w.useState([]),[l,d]=w.useState([]),[m,g]=w.useState(!0),[_,y]=w.useState("all"),[b,S]=w.useState(!1);w.useEffect(()=>{s?.assignedClasses?.length>0&&y("all")},[s]);const N=O=>{if(s){const se=[...s.assignedClasses||[],O];e({...s,assignedClasses:se}),_||y(O)}},z=O=>{if(s){const se=s.assignedClasses.filter(he=>he!==O);e({...s,assignedClasses:se}),_===O&&y(se[0]||"")}},V=(O,se)=>{if(s){const he=s.assignedClasses.map(D=>D===O?se:D);e({...s,assignedClasses:he}),_===O&&y(se)}};w.useEffect(()=>{(async()=>{if(s)try{g(!0);const[se,he]=await Promise.all([Zx(s.id),gm(s.id)]);o(se),d(he)}catch(se){console.error("Error fetching dashboard data:",se)}finally{g(!1)}})()},[s]);const k=w.useMemo(()=>!_||_==="all"?a:a.filter(O=>O.classId===_),[a,_]),H=w.useMemo(()=>!_||_==="all"?l:l.filter(O=>O.classId===_),[l,_]),q=w.useMemo(()=>H.filter(O=>O.status==="closed").sort((O,se)=>new Date(se.updatedAt).getTime()-new Date(O.updatedAt).getTime()).slice(0,5),[H]),G=[{icon:u.jsx(fo,{size:24}),label:"Kaytl Derslerim",value:k.filter(O=>O.status==="recorded").length.toString(),color:"recorded",path:`${ge.TEACHER.SESSIONS}?status=recorded`},{icon:u.jsx(fm,{size:24}),label:"Onay Bekleyenler",value:(H.filter(O=>O.status==="draft").length+k.filter(O=>O.status!=="transcribed"?!1:!l.some(he=>he.sessionId===O.id)).length).toString(),color:"draft",path:`${ge.TEACHER.SESSIONS}?status=draft`},{icon:u.jsx(Li,{size:24}),label:"Yayna Hazr",value:H.filter(O=>O.status==="approved").length.toString(),color:"approved",path:`${ge.TEACHER.SESSIONS}?status=approved`},{icon:u.jsx(Ku,{size:24}),label:"Aktif Snav",value:H.filter(O=>O.status==="published").length.toString(),color:"published",path:`${ge.TEACHER.QUIZZES}?status=published`}];return m?u.jsx("div",{className:Pe.page,children:u.jsxs("div",{className:Pe.loadingState,children:[u.jsx(es,{size:"lg"}),u.jsx("p",{children:"Dashboard ykleniyor..."})]})}):u.jsxs("div",{className:Pe.page,children:[u.jsxs("div",{className:Pe.header,children:[u.jsxs("div",{className:Pe.headerTitle,children:[u.jsxs("h1",{className:Pe.greeting,children:["Merhaba, ",u.jsx("span",{className:Pe.teacherName,children:s?.displayName||"retmenim"})]}),u.jsx("p",{className:Pe.subtitle,children:"te bugnk durumunuz ve son aktiviteleriniz."})]}),u.jsxs("div",{className:Pe.contextBar,children:[u.jsxs("div",{className:Pe.contextItem,children:[u.jsx("label",{className:Pe.contextLabel,children:"KURUM SEN"}),u.jsx(gs,{options:[{value:"enderun",label:"Enderun Koleji Merkez"}],value:"enderun",onChange:()=>{},icon:u.jsx(oc,{size:18})})]}),u.jsxs("div",{className:Pe.contextItem,children:[u.jsx("label",{className:Pe.contextLabel,children:"AKTF SINIF"}),u.jsx(gs,{options:[{value:"all",label:"Tm Snflar"},...s?.assignedClasses?.map(O=>({value:O,label:O}))||[]],value:_,onChange:O=>y(O),placeholder:"Snf Sein"})]}),u.jsx(Ne,{variant:"primary",size:"md",leftIcon:u.jsx(mm,{size:20}),className:Pe.vibrantAddBtn,onClick:()=>S(!0),children:"Snf Ekle"}),u.jsx(Ne,{variant:"danger",size:"md",leftIcon:u.jsx(E6,{size:20,className:Pe.liveIcon}),className:Pe.liveRecordBtn,onClick:()=>t(ge.TEACHER.NEW_SESSION),children:"Canl Kayt Balat"})]})]}),u.jsx("div",{className:Pe.statsGrid,children:G.map((O,se)=>u.jsxs("div",{className:`${Pe.statCard} ${Pe[O.color]}`,onClick:()=>t(O.path),children:[u.jsx("div",{className:Pe.statIconWrapper,children:u.jsx("div",{className:Pe.statIcon,children:O.icon})}),u.jsxs("div",{className:Pe.statContent,children:[u.jsx("div",{className:Pe.statValue,children:O.value}),u.jsx("div",{className:Pe.statLabel,children:O.label})]}),u.jsx("div",{className:Pe.statBgIcon,children:O.icon}),u.jsx("div",{className:Pe.cardOverlay})]},se))}),u.jsxs("div",{className:Pe.recentSection,children:[u.jsxs("div",{className:Pe.recentHeader,children:[u.jsx("h2",{className:Pe.recentTitle,children:"Sonulanan Snavlar"}),u.jsxs("div",{className:Pe.viewAll,onClick:()=>t(`${ge.TEACHER.QUIZZES}?status=closed`),children:["Tmn Gr ",u.jsx(Hl,{size:16})]})]}),q.length===0?u.jsxs("div",{className:Pe.recentEmpty,children:[u.jsxs("div",{className:Pe.emptyIllustration,children:[u.jsxs("div",{className:Pe.illustrationMain,children:[u.jsxs("div",{className:Pe.illustrationFace,children:[u.jsx("div",{className:Pe.faceEye}),u.jsx("div",{className:Pe.faceEye})]}),u.jsxs("div",{className:Pe.illustrationLines,children:[u.jsx("div",{className:Pe.illuLine}),u.jsx("div",{className:Pe.illuLine})]})]}),u.jsx("div",{className:Pe.illustrationSearch,children:u.jsx(cc,{size:24})})]}),u.jsx("h3",{className:Pe.emptyTitle,children:"Henz Sonu Yok!"}),u.jsx("p",{className:Pe.emptySubtitle,children:"Henz sonulanm bir snav bulunmuyor."})]}):u.jsx("div",{className:Pe.recentList,children:q.map(O=>u.jsxs("div",{className:Pe.recentItem,onClick:()=>t(`${ge.TEACHER.QUIZZES}/${O.id}/results`),children:[u.jsx("div",{className:Pe.recentItemIcon,children:u.jsx(Li,{size:24})}),u.jsxs("div",{className:Pe.recentItemContent,children:[u.jsx("h3",{className:Pe.recentItemTitle,children:O.title}),u.jsxs("div",{className:Pe.recentItemMeta,children:[u.jsx("span",{children:O.classId||"Genel"}),u.jsx("span",{children:""}),u.jsxs("span",{children:[O.questions?.length||0," Soru"]}),u.jsx("span",{children:""}),u.jsx("span",{className:Pe.detailBadge,children:"Tamamland"})]})]}),u.jsx(Hl,{size:18,style:{color:"var(--color-text-tertiary)"}})]},O.id))})]}),u.jsx(iw,{isOpen:b,onClose:()=>S(!1),institutionName:"Enderun Koleji Merkez",existingClasses:s?.assignedClasses||[],onAddClass:N,onDeleteClass:z,onUpdateClass:V}),u.jsx(aw,{})]})},VP="_page_cemt6_3",BP="_header_cemt6_16",qP="_title_cemt6_23",HP="_teacherName_cemt6_30",$P="_headerTitle_cemt6_40",FP="_subtitle_cemt6_45",GP="_contextBar_cemt6_58",QP="_contextItem_cemt6_73",KP="_contextLabel_cemt6_81",YP="_sessionsList_cemt6_149",WP="_sessionItem_cemt6_155",XP="_quizItem_cemt6_168",ZP="_sessionIcon_cemt6_199",JP="_quizIcon_cemt6_200",eU="_sessionInfo_cemt6_212",tU="_sessionTitle_cemt6_219",nU="_sessionMeta_cemt6_226",sU="_badge_cemt6_235",iU="_badgeRecorded_cemt6_244",aU="_badgeTranscribed_cemt6_249",rU="_badgeDraft_cemt6_254",oU="_badgeApproved_cemt6_259",lU="_badgePublished_cemt6_264",cU="_menuBtn_cemt6_269",uU="_menuDropdown_cemt6_280",dU="_menuItem_cemt6_293",hU="_emptyState_cemt6_302",Me={page:VP,header:BP,title:qP,teacherName:HP,headerTitle:$P,subtitle:FP,contextBar:GP,contextItem:QP,contextLabel:KP,sessionsList:YP,sessionItem:WP,quizItem:XP,sessionIcon:ZP,quizIcon:JP,sessionInfo:eU,sessionTitle:tU,sessionMeta:nU,badge:sU,badgeRecorded:iU,badgeTranscribed:aU,badgeDraft:rU,badgeApproved:oU,badgePublished:lU,menuBtn:cU,menuDropdown:uU,menuItem:dU,emptyState:hU},fU={recorded:"Kaytl",transcribing:"Yazya Dklyor...",transcribed:"Analiz Edildi",processing:"leniyor...",draft:"Onay Bekliyor",approved:"Yayna Hazr",published:"Yaynland",assignment_generated:"dev Oluturuldu",completed:"Tamamland"},yT=s=>{if(!s)return"-";const e=s.toDate?s.toDate():new Date(s);return new Intl.DateTimeFormat("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)},mU=s=>{switch(s){case"recorded":return Me.badgeRecorded;case"transcribed":return Me.badgeTranscribed;case"draft":return Me.badgeDraft;case"approved":return Me.badgeApproved;case"published":return Me.badgePublished;case"processing":case"transcribing":return Me.badgeProcessing;default:return Me.badgeDefault}},pU=s=>{switch(s){case"recorded":return Me.itemRecorded;case"transcribed":return Me.itemTranscribed;case"draft":return Me.itemDraft;case"approved":return Me.itemApproved;case"published":return Me.itemPublished;default:return""}},gU=()=>{const s=In(),e=Lt(A=>A.user),t=Lt(A=>A.setUser),a=wn(A=>A.addToast),[o,l]=w.useState([]),[d,m]=w.useState([]),[g,_]=w.useState(!0),[y]=w.useState(""),[b,S]=w.useState(null),N=ts(),[z,V]=w.useState("all"),[k,H]=w.useState(!1),[q,G]=w.useState("all"),[O,se]=w.useState(null);w.useEffect(()=>{const pe=new URLSearchParams(N.search).get("status");pe&&["recorded","transcribed","draft","approved"].includes(pe)?G(pe):G("all")},[N.search]),w.useEffect(()=>{e?.assignedClasses?.length>0&&V("all")},[e]);const he=A=>{if(e){const pe=[...e.assignedClasses||[],A];t({...e,assignedClasses:pe}),z||V(A)}},D=A=>{if(e){const pe=e.assignedClasses.filter(be=>be!==A);t({...e,assignedClasses:pe}),z===A&&V(pe[0]||"")}},I=(A,pe)=>{if(e){const be=e.assignedClasses.map(W=>W===A?pe:W);t({...e,assignedClasses:be}),z===A&&V(pe)}};w.useEffect(()=>{(async()=>{if(e)try{_(!0);const[pe,be]=await Promise.all([Zx(e.id),gm(e.id)]);l(pe),m(be)}catch(pe){console.error("Error loading data:",pe),a({type:"error",title:"Hata",message:"Veriler yklenemedi."})}finally{_(!1)}})()},[e,a]);const C=[...o.map(A=>({...A,type:"session"})),...d.map(A=>({...A,type:"quiz"}))].sort((A,pe)=>{const be=A.createdAt?.toDate?A.createdAt.toDate():new Date(A.createdAt||0);return(pe.createdAt?.toDate?pe.createdAt.toDate():new Date(pe.createdAt||0)).getTime()-be.getTime()}),P=C.filter(A=>{if(A.type==="quiz"&&A.status==="published"||A.type==="session"&&A.status==="transcribed"&&d.some(me=>me.sessionId===A.id))return!1;const pe=!z||z==="all"||A.classId===z;return!(A.title.toLowerCase().includes(y.toLowerCase())||A.type==="session"&&A.subject?.toLowerCase().includes(y.toLowerCase())||A.type==="quiz"&&A.subject?.toLowerCase().includes(y.toLowerCase()))||!pe?!1:q==="all"?!0:q==="recorded"?A.status==="recorded":q==="draft"?A.status==="draft"||A.status==="transcribed":q==="approved"?A.status==="approved":q==="published"?A.status==="published":!0}),j=(A,pe)=>{A.stopPropagation();const be=C.find(W=>W.id===pe);be&&(se({id:be.id,type:be.type,title:be.title}),S(null))},U=async()=>{if(!O)return;const{id:A,type:pe}=O;try{pe==="session"?(await Jx(A),l(be=>be.filter(W=>W.id!==A))):(await tw(A),m(be=>be.filter(W=>W.id!==A))),a({type:"success",title:"Baarl",message:"Silme ilemi tamamland."})}catch{a({type:"error",title:"Hata",message:"Silme ilemi baarsz oldu."})}finally{se(null)}};return w.useEffect(()=>{const A=()=>S(null);return document.addEventListener("click",A),()=>document.removeEventListener("click",A)},[]),u.jsxs("div",{className:Me.page,children:[u.jsxs("div",{className:Me.header,children:[u.jsxs("div",{className:Me.headerTitle,children:[u.jsxs("h1",{className:Me.title,children:["Merhaba, ",u.jsx("span",{className:Me.teacherName,children:e?.displayName||"retmenim"})]}),u.jsx("p",{className:Me.subtitle,children:"te bugnk durumunuz ve son aktiviteleriniz."})]}),u.jsxs("div",{className:Me.contextBar,children:[u.jsxs("div",{className:Me.contextItem,children:[u.jsx("label",{className:Me.contextLabel,children:"KURUM SEN"}),u.jsx(gs,{options:[{value:"enderun",label:"Enderun Koleji Merkez"}],value:"enderun",onChange:()=>{},icon:u.jsx(oc,{size:18})})]}),u.jsxs("div",{className:Me.contextItem,children:[u.jsx("label",{className:Me.contextLabel,children:"AKTF SINIF"}),u.jsx(gs,{options:[{value:"all",label:"Tm Snflar"},...e?.assignedClasses?.map(A=>({value:A,label:A}))||[]],value:z,onChange:A=>V(A),placeholder:"Snf Sein"})]}),u.jsxs("div",{className:Me.contextItem,children:[u.jsx("label",{className:Me.contextLabel,children:"DURUM FLTRES"}),u.jsx(gs,{options:[{value:"all",label:"Hepsi"},{value:"recorded",label:"Kaytl"},{value:"draft",label:"Onay Bekliyor"},{value:"approved",label:"Yayna Hazr"}],value:q,onChange:A=>G(A),placeholder:"Durum Sein"})]})]})]}),g?u.jsx("div",{className:Me.emptyState,children:u.jsx(es,{size:"lg"})}):P.length===0?u.jsxs("div",{className:Me.emptyState,children:[u.jsx("div",{style:{color:"var(--color-text-tertiary)",marginBottom:"16px"},children:u.jsx(fo,{size:48,strokeWidth:1})}),u.jsx("h3",{children:"Henz bir aktivite yok"}),u.jsx("p",{children:"Yeni bir ders kayd balatarak veya snav oluturarak balayabilirsiniz."}),u.jsx("div",{style:{display:"flex",gap:"12px",justifyContent:"center",marginTop:"20px"},children:u.jsx(Ne,{variant:"ghost",onClick:()=>s(ge.TEACHER.NEW_SESSION),leftIcon:u.jsx(fo,{size:20}),children:"Yeni Kayt"})})]}):u.jsx("div",{className:Me.sessionsList,children:P.map(A=>u.jsxs("div",{className:`${A.type==="quiz"?Me.quizItem:Me.sessionItem} ${pU(A.status)}`,onClick:()=>s(A.type==="quiz"?`${ge.TEACHER.QUIZZES}/${A.id}`:`${ge.TEACHER.SESSIONS}/${A.id}`),children:[u.jsxs("div",{className:A.type==="quiz"?Me.quizIcon:Me.sessionIcon,"data-icon-wrapper":!0,children:[A.status==="recorded"&&u.jsx(fo,{size:20,className:Me.icon}),A.status==="transcribed"&&u.jsx(cc,{size:20,className:Me.icon}),A.status==="draft"&&u.jsx(fm,{size:20,className:Me.icon}),A.status==="approved"&&u.jsx(Li,{size:20,className:Me.icon}),A.status==="published"&&u.jsx(Ku,{size:20,className:Me.icon}),!["recorded","transcribed","draft","approved","published"].includes(A.status)&&(A.type==="quiz"?u.jsx(Po,{size:20}):u.jsx(fo,{size:20,className:Me.icon}))]}),u.jsxs("div",{className:Me.sessionInfo,children:[u.jsx("div",{className:Me.sessionTitle,children:A.title.includes("-")?A.title.split("-").slice(1).join("-").trim():A.title}),u.jsx("div",{className:Me.sessionMeta,children:A.type==="session"?u.jsxs(u.Fragment,{children:[u.jsx("span",{children:A.subject||(A.title.includes("-")?A.title.split("-")[0].trim():"Genel")}),u.jsx("span",{children:"  "}),u.jsx("span",{children:yT(A.createdAt)})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:A.subject||(A.title.includes("-")?A.title.split("-")[0].trim():"Genel")}),u.jsx("span",{children:"  "}),u.jsx("span",{children:yT(A.createdAt)}),u.jsx("span",{children:"  "}),u.jsxs("span",{children:[A.questions?.length||0," Soru"]})]})}),u.jsx("div",{className:Me.statusWrapper,children:u.jsx("span",{className:`${Me.badge} ${mU(A.status)}`,children:fU[A.status]})})]}),u.jsxs("div",{className:Me.sessionRight,children:[A.status==="transcribed"&&u.jsx(Ne,{variant:"ghost",size:"sm",className:Me.actionBtnTranscribed,onClick:pe=>{pe.stopPropagation(),s(`${ge.TEACHER.SESSIONS}/${A.id}`)},rightIcon:u.jsx(Hl,{size:16}),children:"ncele"}),A.status==="draft"&&u.jsx(Ne,{variant:"ghost",size:"sm",className:Me.actionBtnPrimary,onClick:pe=>{pe.stopPropagation(),s(`${ge.TEACHER.QUIZZES}/${A.id}`)},rightIcon:u.jsx(Hl,{size:16}),children:"Onayla"}),A.status==="approved"&&u.jsx(Ne,{variant:"ghost",size:"sm",className:Me.actionBtnSuccess,onClick:pe=>{pe.stopPropagation(),s(`${ge.TEACHER.QUIZZES}/${A.id}`)},rightIcon:u.jsx(Hl,{size:16}),children:"Yaynla"}),A.status==="published"&&u.jsx(Ne,{variant:"ghost",size:"sm",className:Me.actionBtnGhost,onClick:pe=>{pe.stopPropagation(),s(`${ge.TEACHER.QUIZZES}/${A.id}/results`)},children:"Sonular"}),u.jsxs("div",{style:{position:"relative"},onClick:pe=>pe.stopPropagation(),children:[u.jsx("button",{className:Me.menuBtn,onClick:()=>S(b===A.id?null:A.id),children:u.jsx(Hx,{size:20})}),b===A.id&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{position:"fixed",inset:0,zIndex:99},onClick:()=>S(null)}),u.jsxs("div",{className:Me.menuDropdown,children:[u.jsx("button",{className:Me.menuItem,onClick:()=>s(A.type==="quiz"?`${ge.TEACHER.QUIZZES}/${A.id}`:`${ge.TEACHER.SESSIONS}/${A.id}`),children:A.type==="quiz"?"Dzenle":"Grntle"}),u.jsx("button",{className:`${Me.menuItem} ${Me.menuItemDanger}`,onClick:pe=>j(pe,A.id),children:"Sil"})]})]})]})]})]},A.id))}),u.jsx(iw,{isOpen:k,onClose:()=>H(!1),institutionName:"Enderun Koleji Merkez",existingClasses:e?.assignedClasses||[],onAddClass:he,onDeleteClass:D,onUpdateClass:I}),u.jsx(pm,{isOpen:!!O,onClose:()=>se(null),onConfirm:U,title:O?.type==="session"?"Analizi Sil":"Snav Sil",message:`${O?.title} ${O?.type==="session"?"analizini":"snavn"} ve tm verilerini silmek istediinize emin misiniz?`,confirmText:"Sil",isLoading:g})]})},_U="enderunlala_recordings",yU=1,br="audio_chunks",Er="recording_meta",hd=()=>new Promise((s,e)=>{const t=indexedDB.open(_U,yU);t.onerror=()=>e(t.error),t.onsuccess=()=>s(t.result),t.onupgradeneeded=a=>{const o=a.target.result;o.objectStoreNames.contains(br)||o.createObjectStore(br,{keyPath:"id",autoIncrement:!0}),o.objectStoreNames.contains(Er)||o.createObjectStore(Er,{keyPath:"key"})}}),vU=async s=>{if(s.length===0)return;const e=await hd(),t=e.transaction(br,"readwrite"),a=t.objectStore(br);for(const o of s)a.add({data:o,timestamp:Date.now()});return new Promise((o,l)=>{t.oncomplete=()=>{e.close(),o()},t.onerror=()=>{e.close(),l(t.error)}})},bU=async s=>{const e=await hd(),t=e.transaction(Er,"readwrite");return t.objectStore(Er).put({key:"current",...s}),new Promise((a,o)=>{t.oncomplete=()=>{e.close(),a()},t.onerror=()=>{e.close(),o(t.error)}})},S_=async()=>{const s=await hd(),a=s.transaction(br,"readonly").objectStore(br).getAll();return new Promise((o,l)=>{a.onsuccess=()=>{s.close();const d=a.result||[];o(d.map(m=>m.data))},a.onerror=()=>{s.close(),l(a.error)}})},rw=async()=>{const s=await hd(),a=s.transaction(Er,"readonly").objectStore(Er).get("current");return new Promise((o,l)=>{a.onsuccess=()=>{s.close(),o(a.result?{duration:a.result.duration,startedAt:a.result.startedAt}:null)},a.onerror=()=>{s.close(),l(a.error)}})},Bg=async()=>{const s=await hd(),e=s.transaction([br,Er],"readwrite");return e.objectStore(br).clear(),e.objectStore(Er).clear(),new Promise((t,a)=>{e.oncomplete=()=>{s.close(),t()},e.onerror=()=>{s.close(),a(e.error)}})},EU=async()=>{try{return await rw()?(await S_()).length>0:!1}catch{return!1}},TU=1e3,SU=3e4,AU=5e3,xU=()=>{const[s,e]=w.useState({isRecording:!1,isPaused:!1,duration:0,audioBlob:null,audioUrl:null,error:null,hasRecovery:!1,chunksSaved:0,isRecovering:!1}),t=w.useRef(null),a=w.useRef([]),o=w.useRef([]),l=w.useRef(null),d=w.useRef(null),m=w.useRef(null),g=w.useRef(null),_=w.useRef(null),y=w.useRef(null),b=w.useRef(0),S=w.useRef(0);w.useEffect(()=>{(async()=>{try{await EU()&&e(A=>({...A,hasRecovery:!0}))}catch{}})()},[]),w.useEffect(()=>{const j=U=>{if(s.isRecording||s.audioBlob)return U.preventDefault(),""};return window.addEventListener("beforeunload",j),()=>window.removeEventListener("beforeunload",j)},[s.isRecording,s.audioBlob]),w.useEffect(()=>()=>{d.current&&clearInterval(d.current),m.current&&clearInterval(m.current),g.current&&clearInterval(g.current),l.current&&l.current.getTracks().forEach(j=>j.stop()),_.current&&_.current.close().catch(()=>{})},[]);const N=w.useCallback(async()=>{if(o.current.length===0)return;const j=[...o.current];o.current=[];try{await vU(j),b.current+=j.length,e(U=>({...U,chunksSaved:b.current}))}catch(U){console.error("[AudioRecorder] IndexedDB flush error:",U),o.current=[...j,...o.current]}},[]),z=w.useCallback(async()=>{try{await bU({duration:S.current,startedAt:Date.now()-S.current*1e3})}catch(j){console.error("[AudioRecorder] Meta save error:",j)}},[]),V=w.useCallback(()=>{d.current=setInterval(()=>{S.current+=1,e(j=>({...j,duration:j.duration+1}))},1e3)},[]),k=w.useCallback(()=>{d.current&&(clearInterval(d.current),d.current=null)},[]),H=w.useCallback(()=>{m.current=setInterval(()=>{N()},SU),g.current=setInterval(()=>{z()},AU)},[N,z]),q=w.useCallback(()=>{m.current&&(clearInterval(m.current),m.current=null),g.current&&(clearInterval(g.current),g.current=null)},[]),G=w.useCallback(async()=>{try{s.audioUrl&&URL.revokeObjectURL(s.audioUrl),a.current=[],o.current=[],b.current=0,S.current=0,await Bg().catch(()=>{});const j=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});l.current=j,_.current=new AudioContext,y.current=_.current.createAnalyser(),y.current.fftSize=256,_.current.createMediaStreamSource(j).connect(y.current);let A="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(A)||(A="audio/webm",MediaRecorder.isTypeSupported(A)||(A=""));const pe=new MediaRecorder(j,{...A?{mimeType:A}:{}});t.current=pe,pe.ondataavailable=be=>{be.data.size>0&&(a.current.push(be.data),o.current.push(be.data))},pe.onstop=async()=>{await N().catch(()=>{}),await z().catch(()=>{});let be;try{const Ae=await S_();be=Ae.length>0?Ae:a.current}catch{be=a.current}const W=new Blob(be,{type:pe.mimeType||"audio/webm"}),me=URL.createObjectURL(W);e(Ae=>({...Ae,isRecording:!1,isPaused:!1,audioBlob:W,audioUrl:me})),l.current&&l.current.getTracks().forEach(Ae=>Ae.stop()),a.current=[],o.current=[]},pe.start(TU),V(),H(),e(be=>({...be,isRecording:!0,isPaused:!1,duration:0,audioBlob:null,audioUrl:null,error:null,hasRecovery:!1,chunksSaved:0}))}catch(j){console.error("[AudioRecorder] Recording start error:",j);let U="Ses kayd balatlamad.";j.name==="NotAllowedError"?U="Mikrofon eriimi reddedildi. Ltfen tarayc ayarlarndan izin verin.":j.name==="NotFoundError"?U="Mikrofon bulunamad. Ltfen bir mikrofon balayn.":j.name==="NotReadableError"?U="Mikrofon baka bir uygulama tarafndan kullanlyor.":j.name==="OverconstrainedError"&&(U="Mikrofon istenen zellikleri desteklemiyor. Farkl bir mikrofon deneyin."),e(A=>({...A,error:`${U} (${j.name||j.message})`}))}},[s.audioUrl,V,H,N,z]),O=w.useCallback(()=>{t.current&&t.current.state!=="inactive"&&(t.current.stop(),k(),q())},[k,q]),se=w.useCallback(()=>{t.current&&s.isRecording&&!s.isPaused&&(t.current.pause(),k(),N().catch(()=>{}),z().catch(()=>{}),e(j=>({...j,isPaused:!0})))},[s.isRecording,s.isPaused,k,N,z]),he=w.useCallback(()=>{t.current&&s.isRecording&&s.isPaused&&(t.current.resume(),V(),e(j=>({...j,isPaused:!1})))},[s.isRecording,s.isPaused,V]),D=w.useCallback(async()=>{s.audioUrl&&URL.revokeObjectURL(s.audioUrl),await Bg().catch(()=>{}),a.current=[],o.current=[],b.current=0,S.current=0,e({isRecording:!1,isPaused:!1,duration:0,audioBlob:null,audioUrl:null,error:null,hasRecovery:!1,chunksSaved:0,isRecovering:!1})},[s.audioUrl]),I=w.useCallback(async()=>{e(j=>({...j,isRecovering:!0,error:null}));try{const[j,U]=await Promise.all([S_(),rw()]);if(j.length===0){e(W=>({...W,isRecovering:!1,hasRecovery:!1,error:"Kurtarlacak kayt bulunamad."}));return}const A=new Blob(j,{type:"audio/webm"}),pe=URL.createObjectURL(A),be=U?.duration||Math.floor(j.length);e(W=>({...W,isRecovering:!1,hasRecovery:!1,audioBlob:A,audioUrl:pe,duration:be,isRecording:!1,isPaused:!1})),console.log(`[AudioRecorder] Recovered ${j.length} chunks, ~${be}s`)}catch(j){console.error("[AudioRecorder] Recovery error:",j),e(U=>({...U,isRecovering:!1,error:"Kayt kurtarlrken hata olutu."}))}},[]),C=w.useCallback(async()=>{await Bg().catch(()=>{}),e(j=>({...j,hasRecovery:!1}))},[]),P=w.useCallback(()=>y.current,[]);return{...s,startRecording:G,stopRecording:O,pauseRecording:se,resumeRecording:he,resetRecording:D,recoverRecording:I,dismissRecovery:C,getAnalyserNode:P}},wU="_controls_dcy2o_3",IU="_recordBtn_dcy2o_9",RU="_recordingControls_dcy2o_20",NU="_postRecordingControls_dcy2o_46",Jh={controls:wU,recordBtn:IU,recordingControls:RU,postRecordingControls:NU},CU=({isRecording:s,isPaused:e,hasRecording:t,isUploading:a=!1,onStart:o,onStop:l,onPause:d,onResume:m,onReset:g,onSave:_})=>u.jsxs("div",{className:Jh.controls,children:[!s&&!t&&u.jsx(Ne,{variant:"primary",size:"lg",onClick:o,leftIcon:u.jsx(fo,{size:20}),className:Jh.recordBtn,children:"Kayda Bala"}),s&&u.jsxs("div",{className:Jh.recordingControls,children:[e?u.jsx(Ne,{variant:"primary",size:"lg",onClick:m,leftIcon:u.jsx(Qx,{size:20}),children:"Devam Et"}):u.jsx(Ne,{variant:"secondary",size:"lg",onClick:d,leftIcon:u.jsx(Gx,{size:20}),children:"Duraklat"}),u.jsx(Ne,{variant:"danger",size:"lg",onClick:l,leftIcon:u.jsx(j6,{size:20}),children:"Durdur"})]}),t&&!s&&u.jsxs("div",{className:Jh.postRecordingControls,children:[u.jsx(Ne,{variant:"ghost",size:"lg",onClick:g,leftIcon:u.jsx(A6,{size:20}),children:"Yeniden Kaydet"}),u.jsx(Ne,{variant:"primary",size:"lg",onClick:_,leftIcon:u.jsx(Yx,{size:20}),isLoading:a,children:"Kaydet"})]})]}),kU="_timer_1j709_1",jU="_recording_1j709_12",DU="_paused_1j709_17",OU="_indicator_1j709_22",MU="_dot_1j709_37",zU="_time_1j709_1",LU="_status_1j709_65",lo={timer:kU,recording:jU,paused:DU,indicator:OU,dot:MU,time:zU,status:LU},PU=({duration:s,isRecording:e,isPaused:t})=>{const a=o=>{const l=Math.floor(o/3600),d=Math.floor(o%3600/60),m=o%60;return l>0?`${l.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`:`${d.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`};return u.jsxs("div",{className:`${lo.timer} ${e?lo.recording:""} ${t?lo.paused:""}`,children:[u.jsxs("div",{className:lo.indicator,children:[e&&!t&&u.jsx("span",{className:lo.dot}),u.jsx(rc,{size:20})]}),u.jsx("span",{className:lo.time,children:a(s)}),e&&u.jsx("span",{className:lo.status,children:t?"Duraklatld":"Kayt yaplyor..."})]})},UU="_page_1todg_1",VU="_topNav_1todg_13",BU="_backBtn_1todg_21",qU="_headerClassSelect_1todg_44",HU="_pageTitle_1todg_57",$U="_mainContainer_1todg_81",FU="_recorderCard_1todg_101",GU="_visualizerContainer_1todg_126",QU="_micCircle_1todg_136",KU="_recording_1todg_150",YU="_pulseCircles_1todg_156",WU="_pulse1_1todg_165",XU="_pulse2_1todg_166",ZU="_timerWrapper_1todg_198",JU="_timerDisplay_1todg_206",eV="_timerHint_1todg_214",tV="_actionsWrapper_1todg_222",nV="_mainRecordBtn_1todg_232",sV="_recordDot_1todg_245",iV="_orDivider_1todg_269",aV="_uploadZone_1todg_287",rV="_uploadIconBox_1todg_305",oV="_uploadText_1todg_317",lV="_guideSection_1todg_330",cV="_guideHeader_1todg_334",uV="_guideTitle_1todg_339",dV="_iconCircle_1todg_349",hV="_steps_1todg_353",fV="_step_1todg_353",mV="_stepNumber_1todg_374",pV="_stepTitle_1todg_388",gV="_stepDesc_1todg_395",_V="_featureGrid_1todg_401",yV="_featureItem_1todg_408",vV="_featureIcon_1todg_420",bV="_pageFooter_1todg_426",EV="_recoveryBanner_1todg_437",TV="_offlineBanner_1todg_438",SV="_errorBox_1todg_439",Oe={page:UU,topNav:VU,backBtn:BU,headerClassSelect:qU,pageTitle:HU,mainContainer:$U,recorderCard:FU,visualizerContainer:GU,micCircle:QU,recording:KU,pulseCircles:YU,pulse1:WU,pulse2:XU,timerWrapper:ZU,timerDisplay:JU,timerHint:eV,actionsWrapper:tV,mainRecordBtn:nV,recordDot:sV,orDivider:iV,uploadZone:aV,uploadIconBox:rV,uploadText:oV,guideSection:lV,guideHeader:cV,guideTitle:uV,iconCircle:dV,steps:hV,step:fV,stepNumber:mV,stepTitle:pV,stepDesc:gV,featureGrid:_V,featureItem:yV,featureIcon:vV,pageFooter:bV,recoveryBanner:EV,offlineBanner:TV,errorBox:SV},AV=()=>{const s=In(),e=Lt(M=>M.user),t=wn(M=>M.addToast),[a,o]=w.useState(!1),[l,d]=w.useState(null),[m,g]=w.useState(null),[_,y]=w.useState(navigator.onLine),b=w.useRef(null),S=w.useRef(null),N=w.useRef(null),[z,V]=w.useState("all");w.useEffect(()=>{e?.assignedClasses?.length>0&&V(e.assignedClasses[0])},[e]);const{isRecording:k,isPaused:H,duration:q,audioBlob:G,audioUrl:O,error:se,hasRecovery:he,isRecovering:D,startRecording:I,stopRecording:C,pauseRecording:P,resumeRecording:j,resetRecording:U,recoverRecording:A,dismissRecovery:pe}=xU();w.useEffect(()=>{const M=()=>{y(!0),b.current&&l?.state==="paused"&&(b.current.resume(),t({type:"info",title:"Balant Geldi",message:"Ykleme devam ettiriliyor..."}))},F=()=>{y(!1),b.current&&l?.state==="running"&&(b.current.pause(),t({type:"warning",title:"Balant Kesildi",message:"Ykleme duraklatld. Balant gelince devam edecek."}))};return window.addEventListener("online",M),window.addEventListener("offline",F),()=>{window.removeEventListener("online",M),window.removeEventListener("offline",F)}},[l?.state,t]);const be=async(M,F)=>{if(e){o(!0),g(null),d(null),S.current=M;try{let J=F;J||(J=await g9(e.id,{title:`Ders Kayd - ${new Date().toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}`,duration:q||0,classId:z}),N.current=J);const{controller:ie}=await _9(J,M,de=>{d(de)});b.current=ie,t({type:"success",title:"Kayt Yklendi!",message:"AI imdi ses kaydnz analiz edecek."}),S.current=null,N.current=null,b.current=null,s(`${ge.TEACHER.SESSIONS}/${J}`)}catch(J){console.error("[NewSession] Upload error:",J),g(J.message||"Ykleme baarsz. Ltfen tekrar deneyin.")}finally{o(!1)}}},W=async()=>{!G||!e||await be(G)},me=async M=>{const F=M.target.files?.[0];if(!(!F||!e)){if(!F.type.startsWith("audio/")){t({type:"warning",title:"Uyar",message:"Ltfen geerli bir ses dosyas sein."});return}await be(F)}},Ae=async()=>{const M=S.current||G;if(!M){t({type:"error",title:"Hata",message:"Yeniden yklenecek kayt bulunamad."});return}await be(M,N.current||void 0)},ue=()=>{b.current&&(b.current.cancel(),b.current=null),o(!1),d(null),g(null)},we=M=>{if(M===0)return"0 B";const F=1024,J=["B","KB","MB","GB"],ie=Math.floor(Math.log(M)/Math.log(F));return parseFloat((M/Math.pow(F,ie)).toFixed(1))+" "+J[ie]};return u.jsxs("div",{className:Oe.page,children:[u.jsxs("div",{className:Oe.topNav,children:[u.jsxs("button",{onClick:()=>s(ge.TEACHER.SESSIONS),className:Oe.backBtn,children:[u.jsx(ua,{size:18})," Geri Dn"]}),u.jsx("h1",{className:Oe.pageTitle,children:"Yeni Ders Kayd"}),u.jsxs("div",{className:Oe.headerClassSelect,children:[u.jsx("label",{children:"SINIF:"}),u.jsx(gs,{options:[{value:"all",label:"Tm Snflar"},...e?.assignedClasses?.map(M=>({value:M,label:M}))||[]],value:z,onChange:M=>V(M)})]})]}),u.jsxs("main",{className:Oe.mainContainer,children:[u.jsxs("section",{className:Oe.recorderCard,children:[he&&!k&&!G&&u.jsxs("div",{className:Oe.recoveryBanner,children:[u.jsx(Ro,{size:20,color:"#2563eb"}),u.jsxs("div",{className:Oe.recoveryText,children:[u.jsx("strong",{children:"Kaydedilmemi kayt bulundu!"}),u.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[u.jsx(Ne,{variant:"primary",size:"sm",onClick:A,isLoading:D,children:"Kurtar"}),u.jsx(Ne,{variant:"ghost",size:"sm",onClick:pe,children:"Sil"})]})]})]}),!_&&u.jsxs("div",{className:Oe.offlineBanner,children:[u.jsx(X6,{size:20,color:"#d97706"}),u.jsx("span",{children:"nternet balants yok. Kayt yerel olarak korunuyor."})]}),(se||m)&&u.jsxs("div",{className:Oe.errorBox,children:[u.jsx(Ro,{size:20,color:"#dc2626"}),u.jsx("span",{children:se||m}),!a&&m&&u.jsx(Ne,{size:"sm",variant:"ghost",onClick:Ae,style:{marginLeft:"auto"},children:u.jsx(Kx,{size:14})})]}),u.jsxs("div",{className:`${Oe.visualizerContainer} ${k?Oe.recording:""}`,children:[u.jsxs("div",{className:Oe.pulseCircles,children:[u.jsx("div",{className:Oe.pulse1}),u.jsx("div",{className:Oe.pulse2})]}),u.jsx("div",{className:`${Oe.micCircle} ${k?Oe.recording:""}`,children:u.jsx(fo,{size:44})})]}),u.jsxs("div",{className:Oe.timerWrapper,children:[u.jsx("div",{className:Oe.timerDisplay,children:u.jsx(PU,{duration:q,isRecording:k,isPaused:H})}),u.jsx("p",{className:Oe.timerHint,children:k?"Kayt Devam Ediyor":H?"Kayt Durduruldu":"Balamak iin butona dokun"})]}),u.jsxs("div",{className:Oe.actionsWrapper,children:[O&&!k&&u.jsxs("div",{style:{width:"100%",marginBottom:"4px"},children:[u.jsx("audio",{controls:!0,src:O,style:{width:"100%",height:"44px",borderRadius:"12px"}}),G&&u.jsxs("div",{style:{fontSize:"12px",color:"#94A3B8",textAlign:"center",marginTop:"4px",fontWeight:600},children:["Boyut: ",we(G.size)]})]}),!a&&u.jsx("div",{style:{width:"100%"},children:!k&&!G?u.jsxs(Ne,{variant:"primary",size:"lg",className:Oe.mainRecordBtn,onClick:I,children:[u.jsx("span",{className:Oe.recordDot}),"Kayda Bala"]}):u.jsx(CU,{isRecording:k,isPaused:H,hasRecording:!!G,isUploading:a,onStart:I,onStop:C,onPause:P,onResume:j,onReset:U,onSave:W})}),a&&l&&u.jsxs("div",{className:Oe.uploadBox,style:{width:"100%"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",fontSize:"15px",fontWeight:800},children:[u.jsx("span",{style:{color:"var(--color-primary)"},children:l.percent<100?"Buluta Aktarlyor...":"Analiz Hazrlanyor..."}),u.jsxs("span",{children:["%",l.percent]})]}),u.jsx("div",{style:{height:"10px",background:"var(--color-bg-light)",borderRadius:"10px",overflow:"hidden",border:"1px solid var(--color-border)"},children:u.jsx("div",{style:{height:"100%",background:"linear-gradient(90deg, var(--color-primary) 0%, #ec4899 100%)",width:`${l.percent}%`,transition:"width 0.4s cubic-bezier(0.1, 0.7, 0.1, 1)"}})}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"12px",fontSize:"13px",color:"var(--color-text-tertiary)",fontWeight:700},children:[u.jsxs("span",{children:[we(l.bytesTransferred)," / ",we(l.totalBytes)]}),u.jsx("button",{onClick:ue,style:{border:"none",background:"none",color:"#EF4444",fontWeight:800,cursor:"pointer",fontSize:"13px"},children:"ptali Durdur"})]})]}),!k&&!G&&!a&&!he&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:Oe.orDivider,children:"VEYA"}),u.jsxs("div",{className:Oe.uploadZone,onClick:()=>document.getElementById("audio-upload")?.click(),children:[u.jsx("input",{type:"file",id:"audio-upload",accept:"audio/*",hidden:!0,onChange:me}),u.jsx("div",{className:Oe.uploadIconBox,children:u.jsx($6,{size:22})}),u.jsxs("div",{className:Oe.uploadText,children:[u.jsx("strong",{children:"Dosya Ykle"}),u.jsx("p",{children:"Cihaznzdaki bir kayd sein"})]})]})]})]})]}),u.jsxs("section",{className:Oe.guideSection,children:[u.jsx("div",{className:Oe.guideHeader,children:u.jsxs("h2",{className:Oe.guideTitle,children:[u.jsx(pT,{size:20,className:Oe.iconCircle})," retim Sreci Nasl alr?"]})}),u.jsxs("div",{className:Oe.steps,children:[u.jsxs("div",{className:Oe.step,children:[u.jsx("div",{className:Oe.stepNumber,children:"01"}),u.jsxs("div",{className:Oe.stepContent,children:[u.jsx("h3",{className:Oe.stepTitle,children:"Dersinizi Kaydedin"}),u.jsx("p",{className:Oe.stepDesc,children:"Mikrofonunuzu an ve dersi normal aknda anlatn. Biz arka planda her eyi yksek kalitede kaydedelim."})]})]}),u.jsxs("div",{className:Oe.step,children:[u.jsx("div",{className:Oe.stepNumber,children:"02"}),u.jsxs("div",{className:Oe.stepContent,children:[u.jsx("h3",{className:Oe.stepTitle,children:"Yapay Zeka Dntrsn"}),u.jsx("p",{className:Oe.stepDesc,children:"Kayt bittikten saniyeler sonra yapay zekamz u ilemleri gerekletirir:"}),u.jsxs("div",{className:Oe.featureGrid,children:[u.jsxs("div",{className:Oe.featureItem,children:[u.jsx(Po,{size:14,className:Oe.featureIcon}),u.jsx("span",{children:"Yazya Dkme"})]}),u.jsxs("div",{className:Oe.featureItem,children:[u.jsx(cc,{size:14,className:Oe.featureIcon}),u.jsx("span",{children:"Ders zeti"})]}),u.jsxs("div",{className:Oe.featureItem,children:[u.jsx(pT,{size:14,className:Oe.featureIcon}),u.jsx("span",{children:"Ana Balklar"})]}),u.jsxs("div",{className:Oe.featureItem,children:[u.jsx($l,{size:14,className:Oe.featureIcon}),u.jsx("span",{children:"Snav Oluturma"})]})]})]})]})]})]})]}),u.jsx("footer",{className:Oe.pageFooter,children:"Enderunlala AI  Akll renme Platformu"})]})},fd="AIzaSyC4uLXTp0j-C25n1ZkoSV7K-QWhs2_BVDw",md="https://generativelanguage.googleapis.com/v1beta/models",xV=async s=>new Promise((e,t)=>{const a=new FileReader;a.onloadend=()=>{const o=a.result.split(",")[1];e(o)},a.onerror=t,a.readAsDataURL(s)}),wV=async s=>{const t=await(await fetch(s)).blob(),a=await xV(t),o=t.type||"audio/webm",l=await fetch(`${md}/gemini-flash-latest:generateContent?key=${fd}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{inline_data:{mime_type:o,data:a}},{text:`Bu bir snf ortamnda yaplm ders kayddr. Ltfen bu ses kaydn Trke olarak yazya dk.

Kurallar:
1. retmenin anlattklarn ana metin olarak yaz
2. renci sorular veya yorumlar varsa [renci: ...] eklinde belirt
3. Anlalmayan ksmlar [anlalmyor] olarak iaretle
4. Grlt veya alakasz sesler iin [grlt] yaz
5. Konumac deiikliklerini paragraflarla ayr

Sadece transkripti yaz, yorum ekleme.`}]}],generationConfig:{temperature:.1,topP:.8,maxOutputTokens:8192}})}),d=await l.json();if(!l.ok)throw new Error(d.error?.message||`Transkripsiyon baarsz (Kod: ${l.status})`);const m=d.candidates?.[0]?.content?.parts?.[0]?.text||"";return{text:m,segments:IV(m),language:"tr",confidence:.85}},IV=s=>s.split(`

`).filter(t=>t.trim()).map((t,a)=>{const o=t.includes("[renci:");return{startTime:a*30,endTime:(a+1)*30,text:t.trim(),speaker:o?"student":"teacher"}}),RV=async s=>{const e=await fetch(`${md}/gemini-flash-latest:generateContent?key=${fd}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`Aadaki ders transkriptini analiz et ve JSON formatnda yant ver.

TRANSKRIPT:
${s}

u bilgileri kar:
1. title: Dersin ksa ve aklayc bal (max 60 karakter)
2. subject: Ders ad (Matematik, Fizik, Tarih, vb.)
3. summary: Derste anlatlanlarn 2-3 cmlelik zeti
4. keyTopics: Derste ilenen ana konular listesi (max 5 madde)
5. keyConcepts: rencilerin renmesi gereken kavramlar (her biri iin term, definition, importance)
6. gradeLevel: Tahmini snf seviyesi (rn: "9. snf", "Lise")

SADECE JSON dndr, baka aklama ekleme. Format:
{
  "title": "...",
  "subject": "...",
  "summary": "...",
  "keyTopics": ["...", "..."],
  "keyConcepts": [
    {"term": "...", "definition": "...", "importance": "high|medium|low"}
  ],
  "gradeLevel": "..."
}`}]}],generationConfig:{temperature:.3,topP:.9,maxOutputTokens:2048}})}),t=await e.json();if(!e.ok)throw new Error(t.error?.message||`Analiz baarsz (Kod: ${e.status})`);const o=(t.candidates?.[0]?.content?.parts?.[0]?.text||"{}").match(/\{[\s\S]*\}/),l=JSON.parse(o?o[0]:"{}");return{title:l.title||"simsiz Ders",subject:l.subject||"Genel",summary:l.summary||"",keyTopics:l.keyTopics||[],keyConcepts:l.keyConcepts||[],duration:0,gradeLevel:l.gradeLevel}},NV=async(s,e,t={})=>{const{questionCount:a=10,difficulty:o="medium",questionTypes:l=["multiple_choice","true_false"]}=t,d=await fetch(`${md}/gemini-flash-latest:generateContent?key=${fd}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`Aadaki ders ieriine dayal, RENCNN KONUYU KAVRAMASINI SALAYACAK pedagojik bir snav olutur.

DERS BLGS:
Konu: ${e.subject}
Balk: ${e.title}
zet: ${e.summary}
Anahtar Kavramlar: ${e.keyConcepts.map(S=>S.term).join(", ")}

TRANSKRIPT:
${s.substring(0,4e3)}...

NEML KURALLAR:
1. Sen bir retmensin ve amacn rencinin konuyu renip renmediini lmek.
2. ASLA "Bu derste ne anlatld?", "retmenin amac nedir?", "Derste hangi rnek verildi?" gibi derse dardan bakan meta-sorular sorma.
3. Sorular dorudan konunun kendisine, kavramlara ve uygulama alanlarna odaklanmal (rn: "Mitoz blnmenin evreleri nelerdir?", "Verilen denklemde X katr?").
4. Sorular 'Sen' diliyle veya dorudan bilgi sorusu olarak sor.
5. Bloom taksonomisine gre "Bilgi", "Kavrama" ve "Uygulama" dzeyinde sorular ret.

SINAV GEREKSNMLER:
- Soru says: ${a}
- Zorluk: ${o} (easy=kolay, medium=orta, hard=zor)
- Soru tipleri: ${l.join(", ")}

Her soru iin format kurallar:
1. multiple_choice: 4 k, 1 doru cevap. klar eldirici ve mantkl olmal.
2. true_false: Kesin yarg bildiren cmleler kullan.

JSON formatnda dndr:
{
  "questions": [
    {
      "id": "q1",
      "type": "multiple_choice", (veya true_false)
      "question": "Soru metni...",
      "options": [{"id": "opt1", "text": "...", "isCorrect": true}], (Sadece oktan semeli iin)
      "correctAnswer": true, (Sadece doru/yanl iin)
      "explanation": "renci yanl yaparsa konuyu retecek aklayc geri bildirim.",
      "points": 10,
      "relatedConcept": "lgili anahtar kavram"
    }
  ],
  "difficulty": "${o}",
  "estimatedTime": 15
}

SADECE JSON dndr.`}]}],generationConfig:{temperature:.7,topP:.9,maxOutputTokens:4096}})}),m=await d.json();if(!d.ok)throw new Error(m.error?.message||`Quiz oluturulamad (Kod: ${d.status})`);const _=(m.candidates?.[0]?.content?.parts?.[0]?.text||"{}").match(/\{[\s\S]*\}/),y=JSON.parse(_?_[0]:'{"questions":[]}');return{questions:(y.questions||[]).map(S=>{const N=dc(),z={...S,id:N,createdAt:new Date,updatedAt:new Date,points:S.points||10,difficulty:S.difficulty||o};return S.type==="multiple_choice"&&(z.options=Array.isArray(S.options)?S.options.map((V,k)=>typeof V=="string"?{id:`opt_${k}`,text:V,isCorrect:k===Number(S.correctAnswer)}:{...V,id:V.id||`opt_${k}`}):[]),z}),difficulty:y.difficulty||o,estimatedTime:y.estimatedTime||15}},CV=async(s,e)=>{e?.("Ses kayd yazya dklyor...",10);const t=await wV(s);e?.("Transkript tamamland",40),e?.("Ders ierii analiz ediliyor...",50);const a=await RV(t.text);e?.("Analiz tamamland",70),e?.("Quiz sorular oluturuluyor...",80);const o=await NV(t.text,a);return e?.("lem tamamland!",100),{transcript:t,analysis:a,quiz:o}},kV=async s=>{const{topic:e,questionCount:t,difficulty:a,questionTypes:o,additionalInstructions:l}=s,d=`
    Aadaki konu ve kriterlere gre, RENCNN KONUYU KAVRAMASINI SALAYACAK pedagojik bir snav olutur.
    
    KONU:
    ${e}
    
    KRTERLER:
    - Soru Says: ${t}
    - Zorluk Seviyesi: ${a} (easy=kolay, medium=orta, hard=zor)
    - Soru Tipleri: ${o.join(", ")}
    ${l?`- Ek Talimatlar: ${l}`:""}

    NEML KURALLAR:
    1. Sen bir snav hazrlayan retmensin. Meta-sorular (rn: "Bu konuda ne anlatlr?") sorma.
    2. Dorudan konuyu, formlleri, tarihleri veya neden-sonu ilikilerini sor.
    3. Sorular net, anlalr ve eitim mfredatna uygun olmal.
    4. "multiple_choice" sorularnda yanl klar (eldiriciler) mantkl olmal, bariz hatal olmamal.
    5. Sadece multiple_choice ve true_false tiplerini kullan.
    
    IKTI FORMATI (JSON Array):
    Her soru aadaki TypeScript arayzne uygun olmaldr. "id" alann bo brakabilirsin, ben dolduracam.
    
    TPLER:
    1. multiple_choice:
       {
         type: "multiple_choice",
         question: "Soru metni",
         points: 10,
         difficulty: "${a}",
         explanation: "Aklama",
         options: [
           { id: "opt1", text: "Seenek 1", isCorrect: false },
           { id: "opt2", text: "Seenek 2", isCorrect: true },
           ...
         ]
       }
       
    2. true_false:
       {
         type: "true_false",
         question: "Soru metni",
         points: 10,
         difficulty: "${a}",
         explanation: "Aklama",
         correctAnswer: true // veya false
       }

    SADECE JSON ARRAY DNDR. Baka metin ekleme.
    `;try{const m=await fetch(`${md}/gemini-flash-latest:generateContent?key=${fd}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:d}]}],generationConfig:{temperature:.7,topP:.9,maxOutputTokens:8192}})}),g=await m.json().catch(()=>({}));if(!m.ok)throw new Error(g.error?.message||`AI servisi hata dndrd (Kod: ${m.status})`);const y=(g.candidates?.[0]?.content?.parts?.[0]?.text||"[]").match(/\[[\s\S]*\]/);return JSON.parse(y?y[0]:"[]").map(S=>{const N={...S,id:dc(),createdAt:new Date,updatedAt:new Date,points:S.points||10};return S.type==="multiple_choice"&&S.options&&(N.options=S.options.map((z,V)=>({...z,id:z.id||`opt_${V}`}))),N})}catch(m){throw console.error("AI Generation Error:",m),m}},jV=async s=>{const{question:e,errorMessage:t,instructions:a}=s,o=`
    Aadaki soru verisini incele ve belirtilen ynergelere gre DZELT veya YLETR.

    GRD SORUSU (JSON):
    ${JSON.stringify(e,null,2)}

    ${t?`HATA MESAJI (Bunu dzelt): ${t}`:""}
    ${a?`YNERGE (Buna gre iyiletir): ${a}`:"Bu soruyu daha net, anlalr ve pedagojik olarak daha kaliteli hale getir. klar glendir, aklamay detaylandr."}

    GREVLER:
    1. Eer JSON yaps bozuksa veya hatalysa (rn: options string gelmise), dzelt.
    2. Eer "multiple_choice" ise ve "options" string dizisi ise, nesne dizisine ({id, text, isCorrect}) evir.
    3. Eer veriler eksikse (rn: puan, zorluk), mantkl varsaylanlarla doldur.
    4. Soru metnini ve klar dilbilgisi asndan dzelt.
    5. "explanation" (aklama) alann eitici ve detayl hale getir.

    IKTI FORMATI (JSON):
    SADECE dzeltilmi/iyiletirilmi soru objesini (JSON) dndr. Baka hibir metin ekleme.
    {
      "id": "...",
      "type": "...",
      "question": "...",
      ...
    }
    `;try{const l=await fetch(`${md}/gemini-flash-latest:generateContent?key=${fd}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:o}]}],generationConfig:{temperature:.3,topP:.8,maxOutputTokens:2048}})}),d=await l.json().catch(()=>({}));if(!l.ok)throw new Error(d.error?.message||`AI iyiletirme baarsz (Kod: ${l.status})`);const g=(d.candidates?.[0]?.content?.parts?.[0]?.text||"{}").match(/\{[\s\S]*\}/),_=JSON.parse(g?g[0]:"{}");return{..._,id:e.id||_.id||dc(),points:Number(_.points)||10}}catch(l){throw console.error("AI Improvement Error:",l),l}},DV="_page_1ssdo_5",OV="_navRow_1ssdo_71",MV="_backLink_1ssdo_79",zV="_titleRow_1ssdo_117",LV="_title_1ssdo_117",PV="_deleteBtn_1ssdo_175",UV="_metaRow_1ssdo_217",VV="_subjectBadge_1ssdo_233",BV="_badgeRecorded_1ssdo_257",qV="_badgeTranscribed_1ssdo_269",HV="_badgeCompleted_1ssdo_293",$V="_badgeDefault_1ssdo_329",FV="_dateMeta_1ssdo_339",GV="_playerCard_1ssdo_359",QV="_playButton_1ssdo_403",KV="_playerContent_1ssdo_451",YV="_playerLabel_1ssdo_465",WV="_waveformContainer_1ssdo_483",XV="_waveformBar_1ssdo_499",ZV="_active_1ssdo_513",JV="_paused_1ssdo_521",eB="_playerRight_1ssdo_549",tB="_unifiedCard_1ssdo_589",nB="_unifiedHeader_1ssdo_607",sB="_headerIcon_1ssdo_625",iB="_headerText_1ssdo_645",aB="_unifiedBody_1ssdo_671",rB="_analysisSection_1ssdo_695",oB="_sectionTag_1ssdo_705",lB="_lessonTitle_1ssdo_725",cB="_tagsValues_1ssdo_741",uB="_tagItem_1ssdo_753",dB="_tagLabel_1ssdo_765",hB="_tagValue_1ssdo_779",fB="_summaryBlock_1ssdo_797",mB="_label_1ssdo_809",pB="_verticalDivider_1ssdo_843",gB="_quizSection_1ssdo_873",_B="_quizStatsGrid_1ssdo_889",yB="_quizStat_1ssdo_889",vB="_qValue_1ssdo_927",bB="_qLabel_1ssdo_941",EB="_actionArea_1ssdo_955",TB="_primaryActionBtn_1ssdo_963",SB="_startCard_1ssdo_1125",AB="_processingCard_1ssdo_1127",xB="_errorCard_1ssdo_1129",wB="_startIcon_1ssdo_1167",ve={page:DV,navRow:OV,backLink:MV,titleRow:zV,title:LV,deleteBtn:PV,metaRow:UV,subjectBadge:VV,badgeRecorded:BV,badgeTranscribed:qV,badgeCompleted:HV,badgeDefault:$V,dateMeta:FV,playerCard:GV,playButton:QV,playerContent:KV,playerLabel:YV,waveformContainer:WV,waveformBar:XV,active:ZV,paused:JV,playerRight:eB,unifiedCard:tB,unifiedHeader:nB,headerIcon:sB,headerText:iB,unifiedBody:aB,analysisSection:rB,sectionTag:oB,lessonTitle:lB,tagsValues:cB,tagItem:uB,tagLabel:dB,tagValue:hB,summaryBlock:fB,label:mB,verticalDivider:pB,quizSection:gB,quizStatsGrid:_B,quizStat:yB,qValue:vB,qLabel:bB,actionArea:EB,primaryActionBtn:TB,startCard:SB,processingCard:AB,errorCard:xB,startIcon:wB},IB=()=>{const{id:s}=Xu(),e=In(),t=wn(J=>J.addToast),a=Lt(J=>J.user),[o,l]=w.useState(!1),[d,m]=w.useState(null),[g,_]=w.useState(!0),[y,b]=w.useState("idle"),[S,N]=w.useState(0),[z,V]=w.useState(""),[k,H]=w.useState(!1),[q,G]=w.useState(null),[O,se]=w.useState(null),[he,D]=w.useState(!1),I=w.useRef(null),[C,P]=w.useState(0),[j,U]=w.useState(0),A=()=>{I.current&&P(I.current.currentTime)},pe=()=>{I.current&&U(I.current.duration)},be=()=>{I.current&&(he?I.current.pause():I.current.play(),D(!he))},W=J=>{if(isNaN(J))return"00:00";const ie=Math.floor(J/60),de=Math.floor(J%60);return`${ie.toString().padStart(2,"0")}:${de.toString().padStart(2,"0")}`};w.useEffect(()=>{(async()=>{if(s)try{const ie=await Lf(s);m(ie),ie?.analysisResults?(G(ie.analysisResults.analysis),se(ie.analysisResults.quiz),b("completed")):(ie?.status==="transcribed"||ie?.status==="completed")&&b("completed")}catch(ie){console.error("Error loading session:",ie),t({type:"error",title:"Hata",message:"Analiz yklenemedi."})}finally{_(!1)}})()},[s,t]);const me=w.useCallback(async()=>{if(!d?.audioUrl){t({type:"error",title:"Hata",message:"Ses kayd bulunamad."});return}b("transcribing");try{const J=await CV(d.audioUrl,(de,ye)=>{V(de),N(ye),ye<40?b("transcribing"):ye<70?b("analyzing"):ye<100&&b("generating")});G(J.analysis),se(J.quiz),b("completed"),await y9(d.id,{title:J.analysis.title,subject:J.analysis.subject,status:"transcribed",analysisResults:{transcript:J.transcript,analysis:J.analysis,quiz:J.quiz}});const ie=await Lf(d.id);m(ie),t({type:"success",title:"lem Tamamland!",message:"Ders kaydnz analiz edildi ve quiz tasla oluturuldu."})}catch(J){console.error("Processing error:",J),b("error"),t({type:"error",title:"lem Baarsz",message:J.message||"AI analizi srasnda bir hata olutu."})}},[d,t]),Ae=async()=>{if(!(!O||!a||!q))try{l(!0);const J=O.questions.map(ye=>{const ke={id:dc(),question:ye.question,points:ye.points,explanation:ye.explanation,difficulty:"medium",createdAt:new Date,updatedAt:new Date};return ye.type==="multiple_choice"?{...ke,type:ps.MULTIPLE_CHOICE,options:ye.options?.map((oe,fe)=>({id:oe.id||`opt_${fe}`,text:typeof oe=="string"?oe:oe.text||"",isCorrect:typeof oe=="object"?oe.isCorrect:fe===Number(ye.correctAnswer)}))||[]}:ye.type==="true_false"?{...ke,type:ps.TRUE_FALSE,correctAnswer:ye.correctAnswer}:ke}),ie={title:`${q.subject} - ${q.title} Snav`,description:q.summary,questions:J,settings:Vy,totalPoints:rr(J),estimatedDuration:mo(J),difficulty:O.difficulty,subject:q.subject,sessionId:d?.id,status:"draft",isPublic:!1},de=await ew(a.id,ie);t({type:"success",title:"Baarl",message:"Quiz tasla dzenleme iin oluturuldu."}),e(AM(ge.TEACHER.QUIZ_EDIT,{id:de.id}))}catch(J){console.error("Error creating quiz:",J),t({type:"error",title:"Hata",message:"Quiz oluturulamad."})}finally{l(!1)}},ue=()=>{const J=[{key:"transcribing",label:"Yazya Dkme",icon:Po},{key:"analyzing",label:"Analiz",icon:mT},{key:"generating",label:"Quiz Oluturma",icon:Wl}],ie=J.findIndex(de=>de.key===y);return u.jsxs("div",{className:ve.processingStatus,children:[u.jsxs("div",{className:ve.processingHeader,children:[u.jsx("div",{className:ve.processingIconWrapper,children:u.jsx($l,{size:32,color:"#9333EA"})}),u.jsx("h3",{className:ve.processingTitle,children:"AI Analiz Ediliyor"})]}),u.jsxs("div",{className:ve.progressContainer,children:[u.jsxs("div",{className:ve.progressLabel,children:[u.jsx("span",{children:z}),u.jsxs("span",{children:["%",S]})]}),u.jsx("div",{className:ve.progressBar,children:u.jsx("div",{className:ve.progressFill,style:{width:`${S}%`}})})]}),u.jsx("div",{className:ve.stepTimeline,children:J.map((de,ye)=>{const ke=de.icon,oe=de.key===y,fe=ye<ie||y==="completed";return u.jsxs("div",{className:`${ve.stepItem} ${oe?ve.active:""} ${fe?ve.completed:""}`,children:[u.jsx("div",{className:ve.stepIcon,children:fe?u.jsx(Li,{size:24}):u.jsx(ke,{size:24})}),u.jsx("span",{className:ve.stepLabel,children:de.label})]},de.key)})})]})},we=()=>!q||!O?null:u.jsx("div",{className:ve.results,children:u.jsxs("div",{className:ve.unifiedCard,children:[u.jsxs("div",{className:ve.unifiedHeader,children:[u.jsx("div",{className:ve.headerIcon,children:u.jsx($l,{size:24,color:"#7C3AED"})}),u.jsxs("div",{className:ve.headerText,children:[u.jsx("h2",{children:"Ders Analizi ve Snav Plan"}),u.jsx("p",{children:"Yapay zeka tarafndan oluturulan ders zeti ve snav tasla."})]})]}),u.jsxs("div",{className:ve.unifiedBody,children:[u.jsxs("div",{className:ve.analysisSection,children:[u.jsx("span",{className:ve.sectionTag,children:"DERS BLGLER"}),u.jsx("h3",{className:ve.lessonTitle,children:q.title}),u.jsxs("div",{className:ve.tagsValues,children:[u.jsxs("div",{className:ve.tagItem,children:[u.jsx("span",{className:ve.tagLabel,children:"DERS"}),u.jsx("span",{className:ve.tagValue,children:q.subject})]}),q.gradeLevel&&u.jsxs("div",{className:ve.tagItem,children:[u.jsx("span",{className:ve.tagLabel,children:"SEVYE"}),u.jsx("span",{className:ve.tagValue,children:q.gradeLevel})]})]}),u.jsxs("div",{className:ve.summaryBlock,children:[u.jsx("span",{className:ve.label,children:"ZET"}),u.jsx("p",{children:q.summary})]})]}),u.jsx("div",{className:ve.verticalDivider}),u.jsxs("div",{className:ve.quizSection,children:[u.jsx("span",{className:ve.sectionTag,children:"SINAV TASLAI"}),u.jsxs("div",{className:ve.quizStatsGrid,children:[u.jsxs("div",{className:ve.quizStat,children:[u.jsx("span",{className:ve.qValue,children:O.questions.length}),u.jsx("span",{className:ve.qLabel,children:"SORU"})]}),u.jsxs("div",{className:ve.quizStat,children:[u.jsx("span",{className:ve.qValue,children:O.estimatedTime}),u.jsx("span",{className:ve.qLabel,children:"DAKKA"})]}),u.jsxs("div",{className:ve.quizStat,children:[u.jsx("span",{className:ve.qValue,children:O.difficulty==="easy"?"Kolay":O.difficulty==="medium"?"Orta":"Zor"}),u.jsx("span",{className:ve.qLabel,children:"ZORLUK"})]})]}),u.jsx("div",{className:ve.actionArea,children:u.jsx(Ne,{className:ve.primaryActionBtn,leftIcon:u.jsx(g6,{size:18}),onClick:Ae,disabled:o,isLoading:o,children:"Sorular Dzenle ve Snav Olutur"})})]})]})]})}),M=async()=>{d&&H(!0)},F=async()=>{if(d)try{await Jx(d.id),t({type:"success",title:"Baarl",message:"Analiz silindi."}),e(ge.TEACHER.SESSIONS)}catch(J){console.error("Error deleting session:",J),t({type:"error",title:"Hata",message:"Analiz silinemedi."})}finally{H(!1)}};return g?u.jsx("div",{className:ve.loadingState,children:u.jsx(es,{size:"lg"})}):d?u.jsxs("div",{className:ve.page,children:[u.jsx("div",{className:ve.navRow,children:u.jsxs("button",{onClick:()=>e(ge.TEACHER.SESSIONS),className:ve.backLink,children:[u.jsx(ua,{size:20})," Geri Dn"]})}),u.jsxs("div",{className:ve.titleRow,children:[u.jsx("h1",{className:ve.title,children:q?.title||d.title||"Ders Kayd"}),u.jsx("button",{className:ve.deleteBtn,onClick:M,children:u.jsx(lc,{size:20})})]}),u.jsxs("div",{className:ve.metaRow,children:[u.jsx("span",{className:`${ve.subjectBadge} ${d.status==="recorded"?ve.badgeRecorded:d.status==="transcribed"?ve.badgeTranscribed:d.status==="completed"?ve.badgeCompleted:ve.badgeDefault}`,style:{marginRight:"8px"},children:d.status==="recorded"?"KAYITLI":d.status==="transcribed"?"ANALZ EDLD":d.status==="completed"?"TAMAMLANDI":d.status.toUpperCase()}),u.jsx("span",{className:ve.subjectBadge,children:q?.subject||d.subject||"GENEL"}),u.jsxs("span",{className:ve.dateMeta,children:[u.jsx(hm,{size:16}),d.createdAt&&new Date(d.createdAt.toDate?d.createdAt.toDate():d.createdAt).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),d.audioUrl&&u.jsxs("div",{className:ve.playerCard,children:[u.jsx("button",{className:ve.playButton,onClick:be,children:he?u.jsx(Gx,{size:32,fill:"white"}):u.jsx(Qx,{size:32,fill:"white"})}),u.jsxs("div",{className:ve.playerContent,children:[u.jsx("span",{className:ve.playerLabel,children:"DERS KAYDI"}),u.jsx("div",{className:ve.waveformContainer,children:Array.from({length:40}).map((J,ie)=>u.jsx("div",{className:`${ve.waveformBar} ${he?ve.active:""} ${he?"":ve.paused}`,style:{height:`${Math.max(30,Math.random()*100)}%`,animationDelay:`${ie*.05}s`}},ie))})]}),u.jsx("div",{className:ve.playerRight,children:u.jsxs("span",{style:{minWidth:"100px",textAlign:"right"},children:[W(C)," / ",W(j)]})}),u.jsx("audio",{ref:I,src:d.audioUrl,onTimeUpdate:A,onLoadedMetadata:pe,onEnded:()=>D(!1),style:{display:"none"}})]}),y==="idle"&&d.status==="recorded"&&!q&&u.jsx("div",{className:`${ve.startCard} ios-card`,children:u.jsxs("div",{className:ve.startContent,children:[u.jsx("div",{className:ve.startIcon,children:u.jsx($l,{size:40})}),u.jsx("h2",{children:"AI Analiz"}),u.jsx("p",{children:"Ses kaydnz yklendi. imdi AI ile analiz ederek ders ieriini, anahtar kavramlar ve quiz sorularn otomatik oluturun."}),u.jsx(Ne,{variant:"primary",size:"lg",onClick:me,leftIcon:u.jsx(mT,{size:20}),style:{width:"100%"},children:"AI Analizi Balat"})]})}),y!=="idle"&&y!=="completed"&&y!=="error"&&u.jsx("div",{className:`${ve.processingCard} ios-card`,children:ue()}),y==="error"&&u.jsxs("div",{className:`${ve.errorCard} ios-card`,children:[u.jsx(Ro,{size:48,className:ve.errorIcon}),u.jsx("h2",{children:"lem Baarsz"}),u.jsx("p",{children:"AI analizi srasnda bir hata olutu. Ltfen tekrar deneyin."}),u.jsx(Ne,{variant:"primary",onClick:me,leftIcon:u.jsx(Kx,{size:18}),children:"Tekrar Dene"})]}),(y==="completed"||q)&&we(),u.jsx(pm,{isOpen:k,onClose:()=>H(!1),onConfirm:F,title:"Analizi Sil",message:"Bu analizi ve ilikili tm verileri silmek istediinize emin misiniz? Bu ilem geri alnamaz.",confirmText:"Sil",isLoading:g})]}):u.jsxs("div",{className:ve.errorState,children:[u.jsx(Ro,{size:48}),u.jsx("h2",{children:"Analiz Bulunamad"}),u.jsx(Ne,{variant:"primary",onClick:()=>e(ge.TEACHER.SESSIONS),children:"AI Analizlere Dn"})]})},RB="_editorActions_1adg5_25",NB="_removeButton_1adg5_53",CB="_mcEditor_1adg5_108",kB="_optionsList_1adg5_114",jB="_optionItem_1adg5_120",DB="_optionLabel_1adg5_126",OB="_selected_1adg5_148",MB="_optionInput_1adg5_155",zB="_correct_1adg5_180",LB="_addOptionBtn_1adg5_185",PB="_tfEditor_1adg5_195",UB="_tfLabel_1adg5_201",VB="_tfOptions_1adg5_208",BB="_tfButton_1adg5_213",qB="_tfIcon_1adg5_244",ln={editorActions:RB,removeButton:NB,mcEditor:CB,optionsList:kB,optionItem:jB,optionLabel:DB,selected:OB,optionInput:MB,correct:zB,addOptionBtn:LB,tfEditor:PB,tfLabel:UB,tfOptions:VB,tfButton:BB,tfIcon:qB},HB=({question:s,onChange:e,readOnly:t=!1})=>{const a=w.useRef({}),o=y=>{y&&(y.style.height="auto",y.style.height=y.scrollHeight+"px")};w.useLayoutEffect(()=>{s.options.forEach(y=>{o(a.current[y.id])})},[s.options]);const l=(y,b)=>{if(t)return;const S=s.options.map(N=>N.id===y?{...N,...b}:N);e({options:S})},d=y=>{if(!t)if(s.allowMultiple){const b=s.options.map(S=>S.id===y?{...S,isCorrect:!S.isCorrect}:S);e({options:b})}else{const b=s.options.map(S=>({...S,isCorrect:S.id===y}));e({options:b})}},m=()=>{if(t)return;const y={id:`opt_${Date.now()}`,text:"",isCorrect:!1};e({options:[...s.options,y]})},g=y=>{if(t||s.options.length<=2)return;const b=s.options.filter(S=>S.id!==y);e({options:b})},_=["A","B","C","D","E","F","G","H"];return u.jsxs("div",{className:ln.mcEditor,children:[u.jsx("div",{className:ln.optionsList,children:s.options.map((y,b)=>u.jsxs("div",{className:`${ln.optionItem} ${y.isCorrect?ln.correct:""}`,children:[u.jsx("button",{type:"button",className:`${ln.optionLabel} ${y.isCorrect?ln.selected:""}`,onClick:()=>d(y.id),disabled:t,title:y.isCorrect?"Doru cevap":"Doru cevap olarak iaretle",children:y.isCorrect?u.jsx(Io,{size:18}):_[b]}),u.jsx("textarea",{ref:S=>{a.current[y.id]=S},value:y.text,onChange:S=>l(y.id,{text:S.target.value}),placeholder:`${_[b]} kk...`,className:ln.optionInput,readOnly:t,rows:1}),!t&&u.jsx("button",{type:"button",onClick:()=>g(y.id),className:ln.removeButton,disabled:s.options.length<=2,title:"kk sil",children:u.jsx(lc,{size:18})})]},y.id))}),!t&&u.jsx("div",{className:ln.editorActions,children:u.jsx(Ne,{variant:"ghost",size:"sm",leftIcon:u.jsx(mm,{size:18}),onClick:m,disabled:s.options.length>=8,className:ln.addOptionBtn,children:"k Ekle"})})]})},$B=({question:s,onChange:e,readOnly:t=!1})=>{const a=o=>{t||e({correctAnswer:o})};return u.jsxs("div",{className:ln.tfEditor,children:[!t&&u.jsx("p",{className:ln.tfLabel,children:"Doru cevab sein:"}),u.jsxs("div",{className:ln.tfOptions,children:[u.jsxs("button",{type:"button",className:`${ln.tfButton} ${s.correctAnswer===!0?ln.selected:""}`,onClick:()=>a(!0),disabled:t,children:[u.jsx("span",{className:ln.tfIcon,children:""}),"DORU"]}),u.jsxs("button",{type:"button",className:`${ln.tfButton} ${s.correctAnswer===!1?ln.selected:""}`,onClick:()=>a(!1),disabled:t,children:[u.jsx("span",{className:ln.tfIcon,children:""}),"YANLI"]})]})]})},FB="_editor_1je92_3",GB="_field_1je92_10",QB="_fieldHeader_1je92_16",KB="_label_1je92_22",YB="_questionInput_1je92_56",WB="_readOnly_1je92_78",XB="_noteBox_1je92_85",ZB="_purple_1je92_95",JB="_noteTextarea_1je92_100",hs={editor:FB,field:GB,fieldHeader:QB,label:KB,questionInput:YB,readOnly:WB,noteBox:XB,purple:ZB,noteTextarea:JB},eq=({question:s,onChange:e,readOnly:t=!1})=>{const a=w.useRef(null),o=w.useRef(null),l=m=>{m&&(m.style.height="auto",m.style.height=m.scrollHeight+"px")};w.useLayoutEffect(()=>{l(a.current),l(o.current)},[s.question,s.explanation]);const d=()=>{switch(s.type){case ps.MULTIPLE_CHOICE:return u.jsx(HB,{question:s,onChange:e,readOnly:t});case ps.TRUE_FALSE:return u.jsx($B,{question:s,onChange:e,readOnly:t});default:return u.jsx("div",{children:"Bilinmeyen soru tipi"})}};return u.jsxs("div",{className:`${hs.editor} ${t?hs.readOnly:""}`,children:[u.jsxs("div",{className:hs.field,children:[u.jsx("div",{className:hs.fieldHeader,children:u.jsx("label",{className:hs.label,children:"SORU METN *"})}),t?u.jsx("div",{className:hs.questionInput,style:{whiteSpace:"pre-wrap",border:"none",padding:0},children:s.question||"Soru metni belirtilmemi."}):u.jsx("textarea",{ref:a,value:s.question,onChange:m=>e({question:m.target.value}),placeholder:"Sorunuzu buraya yazn...",className:hs.questionInput,rows:1})]}),u.jsx("div",{className:hs.typeEditor,children:d()}),u.jsxs("div",{className:`${hs.noteBox} ${hs.purple}`,children:[u.jsx("label",{className:hs.label,children:"AIKLAMA (CEVAP SONRASI GSTERLR)"}),t?u.jsx("div",{className:hs.noteTextarea,style:{whiteSpace:"pre-wrap",border:"none",padding:0},children:s.explanation||"Aklama belirtilmemi."}):u.jsx("textarea",{ref:o,value:s.explanation||"",onChange:m=>e({explanation:m.target.value}),placeholder:"Bu sorunun cevabn aklayn...",className:hs.noteTextarea,rows:1})]})]})},tq="_editor_100vb_3",nq="_stickyHeader_100vb_15",sq="_headerTop_100vb_31",iq="_headerActions_100vb_46",aq="_titleArea_100vb_52",rq="_titleTextarea_100vb_56",oq="_metaInfo_100vb_81",lq="_statusBadge_100vb_90",cq="_draft_100vb_98",uq="_approved_100vb_103",dq="_published_100vb_108",hq="_dot_100vb_113",fq="_metaStat_100vb_117",mq="_previewBtn_100vb_129",pq="_saveActionBtn_100vb_147",gq="_workflowBtn_100vb_170",_q="_workflowBtnPrimary_100vb_171",yq="_descriptionRow_100vb_201",vq="_descTextarea_100vb_206",bq="_questionsList_100vb_219",Eq="_questionCard_100vb_226",Tq="_expanded_100vb_235",Sq="_questionHeader_100vb_240",Aq="_questionLeft_100vb_249",xq="_dragHandle_100vb_258",wq="_qIdentifier_100vb_270",Iq="_qMainContent_100vb_276",Rq="_qNumber_100vb_284",Nq="_qType_100vb_297",Cq="_multiple_choice_100vb_306",kq="_true_false_100vb_311",jq="_fill_blank_100vb_316",Dq="_open_ended_100vb_321",Oq="_matching_100vb_326",Mq="_qTextPreview_100vb_331",zq="_questionRight_100vb_348",Lq="_qActions_100vb_363",Pq="_qActionBtn_100vb_374",Uq="_expandCircle_100vb_398",Vq="_active_100vb_410",Bq="_questionContent_100vb_416",qq="_slideDown_100vb_1",Hq="_addSection_100vb_436",$q="_addBtnContainer_100vb_443",Fq="_mainAddBtn_100vb_449",Gq="_typeMenu_100vb_470",Qq="_springMenu_100vb_1",Kq="_decisionMenu_100vb_497",Yq="_decisionItem_100vb_503",Wq="_decisionIcon_100vb_522",Xq="_aiIcon_100vb_535",Zq="_decisionText_100vb_540",Jq="_menuHeader_100vb_558",e8="_backBtn_100vb_573",t8="_manualMenu_100vb_591",n8="_typeMenuItem_100vb_596",s8="_typeDot_100vb_618",i8="_aiMenu_100vb_633",a8="_aiInputWrapper_100vb_637",r8="_aiTopicInput_100vb_644",o8="_aiGenerateBtn_100vb_663",l8="_aiTypeSelector_100vb_670",c8="_aiLabel_100vb_677",u8="_aiTypeList_100vb_686",d8="_typeMenuItemActive_100vb_691",Ee={editor:tq,stickyHeader:nq,headerTop:sq,headerActions:iq,titleArea:aq,titleTextarea:rq,metaInfo:oq,statusBadge:lq,draft:cq,approved:uq,published:dq,dot:hq,metaStat:fq,previewBtn:mq,saveActionBtn:pq,workflowBtn:gq,workflowBtnPrimary:_q,descriptionRow:yq,descTextarea:vq,questionsList:bq,questionCard:Eq,expanded:Tq,questionHeader:Sq,questionLeft:Aq,dragHandle:xq,qIdentifier:wq,qMainContent:Iq,qNumber:Rq,qType:Nq,multiple_choice:Cq,true_false:kq,fill_blank:jq,open_ended:Dq,matching:Oq,qTextPreview:Mq,questionRight:zq,qActions:Lq,qActionBtn:Pq,delete:"_delete_100vb_393",expandCircle:Uq,active:Vq,questionContent:Bq,slideDown:qq,addSection:Hq,addBtnContainer:$q,mainAddBtn:Fq,typeMenu:Gq,springMenu:Qq,decisionMenu:Kq,decisionItem:Yq,decisionIcon:Wq,aiIcon:Xq,decisionText:Zq,menuHeader:Jq,backBtn:e8,manualMenu:t8,typeMenuItem:n8,typeDot:s8,aiMenu:i8,aiInputWrapper:a8,aiTopicInput:r8,aiGenerateBtn:o8,aiTypeSelector:l8,aiLabel:c8,aiTypeList:u8,typeMenuItemActive:d8},h8=({quiz:s,onSave:e,onPreview:t,onPublish:a,onApprove:o,isLoading:l=!1,hideHeader:d=!1})=>{const[m,g]=w.useState(()=>{const oe=Object.values(ps);return{...s,questions:s.questions.filter(fe=>oe.includes(fe.type))}}),[_,y]=w.useState(m.questions[0]?.id||null),[b,S]=w.useState(!1),[N,z]=w.useState("decision"),[V,k]=w.useState(""),[H,q]=w.useState(ps.MULTIPLE_CHOICE),[G,O]=w.useState(!1),[se,he]=w.useState(!1),[D,I]=w.useState(null),[C,P]=w.useState(null),[j,U]=w.useState(!1),A=wn(oe=>oe.addToast),pe=w.useRef(null);w.useEffect(()=>{const oe=fe=>{pe.current&&!pe.current.contains(fe.target)&&(S(!1),z("decision"))};return b&&document.addEventListener("mousedown",oe),()=>{document.removeEventListener("mousedown",oe)}},[b]),uo.useEffect(()=>{const oe=Object.values(ps);g({...s,questions:s.questions.filter(fe=>oe.includes(fe.type))}),he(!1)},[s]);const be=w.useCallback(oe=>{g(fe=>({...fe,...oe,updatedAt:new Date})),he(!0)},[]),W=w.useCallback(oe=>{const fe=T9(oe,m.questions.length);g(Ce=>({...Ce,questions:[...Ce.questions,fe],totalPoints:rr([...Ce.questions,fe]),estimatedDuration:mo([...Ce.questions,fe]),updatedAt:new Date})),y(fe.id),S(!1),he(!0)},[m.questions]),me=w.useCallback((oe,fe)=>{g(Ce=>{const ht=Ce.questions.map(an=>an.id===oe?{...an,...fe,updatedAt:new Date}:an);return{...Ce,questions:ht,totalPoints:rr(ht),estimatedDuration:mo(ht),updatedAt:new Date}}),he(!0)},[]),Ae=w.useCallback(oe=>{g(fe=>{const Ce=fe.questions.filter(ht=>ht.id!==oe).map((ht,an)=>({...ht,order:an}));return{...fe,questions:Ce,totalPoints:rr(Ce),estimatedDuration:mo(Ce),updatedAt:new Date}}),he(!0)},[]),ue=(oe,fe)=>{if(!j){oe.preventDefault();return}I(fe),oe.dataTransfer.effectAllowed="move",oe.dataTransfer.setData("text/plain",fe.toString());const Ce=oe.currentTarget;setTimeout(()=>{Ce.classList.add(Ee.dragging)},0)},we=(oe,fe)=>{oe.preventDefault(),oe.dataTransfer.dropEffect="move",C!==fe&&P(fe)},M=oe=>{oe.currentTarget.classList.remove(Ee.dragging),I(null),P(null),U(!1)},F=(oe,fe)=>{oe.preventDefault(),!(D===null||D===fe)&&(g(Ce=>{const ht=[...Ce.questions],[an]=ht.splice(D,1);return ht.splice(fe,0,an),{...Ce,questions:ht.map((Hn,Nn)=>({...Hn,order:Nn})),updatedAt:new Date}}),he(!0),I(null),P(null))},J=w.useCallback((oe,fe)=>{g(Ce=>{const ht=Ce.questions.findIndex(Nn=>Nn.id===oe);if(ht===-1)return Ce;const an=fe==="up"?ht-1:ht+1;if(an<0||an>=Ce.questions.length)return Ce;const Hn=[...Ce.questions];return[Hn[ht],Hn[an]]=[Hn[an],Hn[ht]],{...Ce,questions:Hn.map((Nn,kr)=>({...Nn,order:kr})),updatedAt:new Date}}),he(!0)},[]),ie=w.useCallback(()=>{e(m),he(!1)},[m,e]),de=w.useCallback(()=>{t&&t(m)},[m,t]),ye=async()=>{if(!V.trim()){A({type:"warning",title:"Uyar",message:"Ltfen bir konu veya metin girin."});return}O(!0);try{const oe=await kV({topic:V,questionCount:1,difficulty:"medium",questionTypes:[H]});if(oe.length>0){const fe=oe[0];fe.order=m.questions.length,g(Ce=>({...Ce,questions:[...Ce.questions,fe],totalPoints:rr([...Ce.questions,fe]),estimatedDuration:mo([...Ce.questions,fe]),updatedAt:new Date})),y(fe.id),k(""),S(!1),z("decision"),he(!0),A({type:"success",title:"Baarl",message:"Soru AI tarafndan retildi."})}}catch(oe){console.error("AI error:",oe),A({type:"error",title:"Hata",message:oe.message||"Soru retilirken bir hata olutu."})}finally{O(!1)}},ke=()=>{S(!b),z("decision")};return u.jsxs("div",{className:Ee.editor,children:[!d&&u.jsxs("div",{className:Ee.stickyHeader,children:[u.jsxs("div",{className:Ee.headerTop,children:[u.jsxs("div",{className:Ee.titleArea,children:[u.jsx("textarea",{value:m.title,onChange:oe=>be({title:oe.target.value}),placeholder:"Quiz Bal",className:Ee.titleTextarea,readOnly:m.status==="published"||m.status==="closed",rows:2}),u.jsxs("div",{className:Ee.metaInfo,children:[u.jsx("span",{className:`${Ee.statusBadge} ${Ee[m.status]}`,children:m.status==="draft"?"ONAY BEKLYOR":m.status==="approved"?"YAYINA HAZIR":m.status==="published"?"YAYINLANDI":m.status==="closed"?"KAPALI":"ARV"}),u.jsx("span",{className:Ee.dot,children:""}),u.jsxs("span",{className:Ee.metaStat,children:[u.jsx(Mf,{size:14})," ",m.totalPoints," Puan"]}),u.jsx("span",{className:Ee.dot,children:""}),u.jsxs("span",{className:Ee.metaStat,children:[u.jsx(rc,{size:14})," ~",m.estimatedDuration," dk"]})]})]}),u.jsxs("div",{className:Ee.headerActions,children:[u.jsx(Ne,{variant:"outline",size:"md",leftIcon:u.jsx(Ly,{size:18}),onClick:de,className:Ee.previewBtn,children:"nizle"}),m.status!=="published"&&m.status!=="closed"&&u.jsx(Ne,{variant:"primary",size:"md",leftIcon:u.jsx(Yx,{size:18}),onClick:ie,disabled:l||!se,className:Ee.saveActionBtn,children:"Kaydet"}),m.status==="draft"&&o&&u.jsx(Ne,{variant:"primary",size:"md",leftIcon:u.jsx(Mf,{size:18}),onClick:o,disabled:l||se,className:Ee.workflowBtn,children:"Onayla"}),m.status==="approved"&&a&&u.jsx(Ne,{variant:"primary",size:"md",leftIcon:u.jsx(Wx,{size:18}),onClick:a,disabled:l||se,className:Ee.workflowBtnPrimary,children:"Yaynla"})]})]}),u.jsx("div",{className:Ee.descriptionRow,children:u.jsx("textarea",{value:m.description||"",onChange:oe=>be({description:oe.target.value}),placeholder:"rencileriniz iin ksa bir aklama veya ynerge girin...",className:Ee.descTextarea,rows:1})})]}),u.jsx("div",{className:Ee.questionsList,children:m.questions.map((oe,fe)=>u.jsxs("div",{draggable:!l,onDragStart:Ce=>ue(Ce,fe),onDragOver:Ce=>we(Ce,fe),onDragEnd:M,onDrop:Ce=>F(Ce,fe),className:`
                            ${Ee.questionCard} 
                            ${_===oe.id?Ee.expanded:""}
                            ${C===fe&&D!==fe?Ee.dragOver:""}
                        `,children:[u.jsxs("div",{className:Ee.questionHeader,onClick:()=>y(_===oe.id?null:oe.id),children:[u.jsxs("div",{className:Ee.questionLeft,children:[m.status!=="published"&&m.status!=="closed"&&u.jsx("span",{className:Ee.dragHandle,onMouseDown:()=>U(!0),onMouseUp:()=>U(!1),children:u.jsx(Jz,{size:16})}),u.jsxs("div",{className:Ee.qIdentifier,children:[u.jsx("span",{className:Ee.qNumber,children:fe+1}),u.jsx("span",{className:`${Ee.qType} ${Ee[oe.type]}`,children:Ug[oe.type]})]}),u.jsx("div",{className:Ee.qMainContent,children:u.jsx("span",{className:Ee.qTextPreview,children:oe.question||"Soru metni girilmedi..."})})]}),u.jsxs("div",{className:Ee.questionRight,children:[m.status!=="published"&&m.status!=="closed"&&u.jsxs("div",{className:Ee.qActions,children:[u.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),J(oe.id,"up")},disabled:fe===0,className:Ee.qActionBtn,children:u.jsx(gz,{size:14})}),u.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),J(oe.id,"down")},disabled:fe===m.questions.length-1,className:Ee.qActionBtn,children:u.jsx(hz,{size:14})}),u.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),Ae(oe.id)},className:`${Ee.qActionBtn} ${Ee.delete}`,children:u.jsx(lc,{size:14})})]}),u.jsx("div",{className:`${Ee.expandCircle} ${_===oe.id?Ee.active:""}`,children:u.jsx(Vx,{size:18})})]})]}),_===oe.id&&u.jsx("div",{className:Ee.questionContent,children:u.jsx(eq,{question:oe,onChange:Ce=>me(oe.id,Ce),readOnly:m.status==="published"||m.status==="closed"})})]},oe.id))}),m.status!=="published"&&m.status!=="closed"&&u.jsx("div",{className:Ee.addSection,children:u.jsxs("div",{className:Ee.addBtnContainer,ref:pe,children:[u.jsx(Ne,{variant:"outline",leftIcon:u.jsx(mm,{size:20}),onClick:ke,className:Ee.mainAddBtn,children:"Yeni Soru Ekle"}),b&&u.jsxs("div",{className:Ee.typeMenu,children:[N==="decision"&&u.jsxs("div",{className:Ee.decisionMenu,children:[u.jsxs("button",{className:Ee.decisionItem,onClick:()=>z("manual"),children:[u.jsx("div",{className:Ee.decisionIcon,children:u.jsx(q6,{size:20})}),u.jsxs("div",{className:Ee.decisionText,children:[u.jsx("strong",{children:"Manuel Soru"}),u.jsx("span",{children:"Kendiniz yazn ve zelletirin"})]})]}),u.jsxs("button",{className:Ee.decisionItem,onClick:()=>z("ai"),children:[u.jsx("div",{className:`${Ee.decisionIcon} ${Ee.aiIcon}`,children:u.jsx($l,{size:20})}),u.jsxs("div",{className:Ee.decisionText,children:[u.jsx("strong",{children:"AI ile ret"}),u.jsx("span",{children:"Konu verin, GPT soruyu hazrlasn"})]})]})]}),N==="manual"&&u.jsxs("div",{className:Ee.manualMenu,children:[u.jsxs("div",{className:Ee.menuHeader,children:[u.jsx("button",{onClick:()=>z("decision"),className:Ee.backBtn,children:" Geri"}),u.jsx("span",{children:"Soru Tipi Sein"})]}),Object.entries(Ug).map(([oe,fe])=>u.jsxs("button",{className:Ee.typeMenuItem,onClick:()=>W(oe),children:[u.jsx("span",{className:`${Ee.typeDot} ${Ee[oe]}`}),fe]},oe))]}),N==="ai"&&u.jsxs("div",{className:Ee.aiMenu,children:[u.jsxs("div",{className:Ee.menuHeader,children:[u.jsx("button",{onClick:()=>z("decision"),className:Ee.backBtn,children:" Geri"}),u.jsx("span",{children:"AI Soru retici"})]}),u.jsxs("div",{className:Ee.aiInputWrapper,children:[u.jsxs("div",{className:Ee.aiTypeSelector,children:[u.jsx("label",{className:Ee.aiLabel,children:"Soru Tipi Sein:"}),u.jsx("div",{className:Ee.aiTypeList,children:Object.entries(Ug).map(([oe,fe])=>u.jsxs("button",{type:"button",className:`${Ee.typeMenuItem} ${H===oe?Ee.typeMenuItemActive:""}`,onClick:()=>q(oe),children:[u.jsx("span",{className:`${Ee.typeDot} ${Ee[oe]}`}),u.jsx("span",{style:{flex:1},children:fe}),H===oe&&u.jsx(Io,{size:16,style:{color:"var(--color-primary)"}})]},oe))})]}),u.jsx("textarea",{value:V,onChange:oe=>k(oe.target.value),placeholder:"Soru ne hakknda olsun? (rn: 'Fotosentez evreleri blou')",className:Ee.aiTopicInput,rows:3}),u.jsx(Ne,{variant:"primary",size:"sm",fullWidth:!0,leftIcon:u.jsx($l,{size:16}),onClick:ye,isLoading:G,disabled:G,className:Ee.aiGenerateBtn,children:"Soruyu ret"})]})]})]})]})})]})},f8="_card_1fkds_3",m8="_questionText_1fkds_31",p8="_optionsList_1fkds_46",g8="_optionButton_1fkds_58",_8="_selected_1fkds_86",y8="_radioCircle_1fkds_97",v8="_correct_1fkds_120",b8="_incorrect_1fkds_125",E8="_textArea_1fkds_183",T8="_errorFallback_1fkds_407",S8="_errorHeader_1fkds_428",A8="_errorIcon_1fkds_436",x8="_errorBody_1fkds_440",qt={card:f8,questionText:m8,optionsList:p8,optionButton:g8,selected:_8,radioCircle:y8,correct:v8,incorrect:b8,textArea:E8,errorFallback:T8,errorHeader:S8,errorIcon:A8,errorBody:x8},w8=({children:s,onFix:e,isUpdating:t,questionId:a})=>{const[o,l]=w.useState(!1),[d,m]=w.useState(!1),[g,_]=w.useState("");return w.useEffect(()=>{l(!1),m(!1),_("")},[a]),o?u.jsxs("div",{className:qt.errorFallback,children:[u.jsxs("div",{className:qt.errorHeader,children:[u.jsx(Xx,{className:qt.errorIcon,size:32}),u.jsx("h3",{children:"Ooopps! Bu Soru Hatal retilmi"})]}),u.jsx("div",{className:qt.errorBody,children:u.jsx("p",{children:"Bu soru AI tarafndan hatal bir formatta retildii iin grntlenemiyor."})}),e&&u.jsxs("div",{style:{display:"flex",gap:"8px",flexDirection:"column"},children:[d&&u.jsx("textarea",{value:g,onChange:y=>_(y.target.value),placeholder:"AI'ya zel bir talimatnz var m?...",className:qt.textArea}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[d&&u.jsx(Ne,{variant:"outline",onClick:()=>m(!1),children:"ptal"}),u.jsx(Ne,{variant:"primary",leftIcon:u.jsx(cc,{size:18}),onClick:()=>d?e(g):m(!0),isLoading:t,children:"AI ile yiletir"})]})]})]}):u.jsx(u.Fragment,{children:s})},Hy=s=>{const[e,t]=w.useState(!1),a=wn(l=>l.addToast),o=async l=>{if(s.onQuestionUpdate){t(!0);try{const d=await jV({question:s.question,instructions:l||"Soru format bozuk. Ltfen geerli ve kaliteli bir soru formatna dntr."});s.onQuestionUpdate(d),a({type:"success",title:"Baarl",message:"Soru onarld ve gncellendi."})}catch(d){console.error("Fix error:",d),a({type:"error",title:"Hata",message:"Soru onarlamad."})}finally{t(!1)}}};return u.jsx(w8,{questionId:s.question.id,onFix:s.onQuestionUpdate?o:void 0,isUpdating:e,children:u.jsx(I8,{...s})})},I8=({question:s,answer:e,onAnswerChange:t,readOnly:a=!1,showFeedback:o=!1})=>{const l=()=>{const m=s;return m.options?u.jsx("div",{className:qt.optionsList,children:m.options.map(g=>{const _=e===g.id,y=g.isCorrect;let b=`${qt.optionButton} ${_?qt.selected:""}`;return o&&(y?b+=` ${qt.correct}`:_&&!y&&(b+=` ${qt.incorrect}`)),u.jsxs("button",{className:b,onClick:()=>!a&&t(g.id),disabled:a,children:[u.jsxs("div",{className:qt.radioCircle,children:[o&&y&&u.jsx(Io,{size:14,strokeWidth:3,color:"#22c55e"}),o&&_&&!y&&u.jsx(No,{size:14,strokeWidth:3,color:"#ef4444"})]}),u.jsx("span",{children:g.text})]},g.id)})}):null},d=()=>{const m=s,g=[{id:"true",text:"Doru",value:!0},{id:"false",text:"Yanl",value:!1}];return u.jsx("div",{className:qt.optionsList,children:g.map(_=>{const y=e===_.value,b=m.correctAnswer===_.value;let S=`${qt.optionButton} ${y?qt.selected:""}`;return o&&(b?S+=` ${qt.correct}`:y&&!b&&(S+=` ${qt.incorrect}`)),u.jsxs("button",{className:S,onClick:()=>!a&&t(_.value),disabled:a,children:[u.jsxs("div",{className:qt.radioCircle,children:[o&&b&&u.jsx(Io,{size:14,strokeWidth:3,color:"#22c55e"}),o&&y&&!b&&u.jsx(No,{size:14,strokeWidth:3,color:"#ef4444"})]}),u.jsx("span",{children:_.text})]},_.id)})})};return u.jsxs("div",{className:qt.card,children:[u.jsx("div",{className:qt.questionText,children:s.question}),u.jsxs("div",{className:qt.answerArea,children:[s.type===ps.MULTIPLE_CHOICE&&l(),s.type===ps.TRUE_FALSE&&d()]}),o&&s.explanation&&u.jsxs("div",{className:qt.explanation,children:[u.jsx("strong",{children:"Aklama:"})," ",s.explanation]})]})},R8="_overlay_17gay_3",N8="_modal_17gay_23",C8="_header_17gay_41",k8="_headerTitle_17gay_55",j8="_closeButton_17gay_67",D8="_content_17gay_82",O8="_questionCounter_17gay_95",M8="_footer_17gay_109",z8="_navButtons_17gay_123",ia={overlay:R8,modal:N8,header:C8,headerTitle:k8,closeButton:j8,content:D8,questionCounter:O8,footer:M8,navButtons:z8},L8=({quiz:s,onClose:e,onQuestionUpdate:t})=>{const[a,o]=w.useState(0),[l,d]=w.useState({}),[m,g]=w.useState(!1),_=s.questions[a];if(!_)return null;const y=N=>{d(z=>({...z,[_.id]:N}))},b=()=>{a<s.questions.length-1&&o(N=>N+1)},S=()=>{a>0&&o(N=>N-1)};return u.jsx("div",{className:ia.overlay,onClick:e,children:u.jsxs("div",{className:ia.modal,onClick:N=>N.stopPropagation(),children:[u.jsxs("div",{className:ia.header,children:[u.jsxs("div",{className:ia.headerTitle,children:[s.title," ",u.jsx("span",{style:{fontSize:"14px",fontWeight:"normal",color:"#718096"},children:"(nizleme)"})]}),u.jsx("button",{className:ia.closeButton,onClick:e,children:u.jsx(No,{size:24})})]}),u.jsxs("div",{className:ia.content,children:[u.jsxs("div",{className:ia.questionCounter,children:["Soru ",a+1," / ",s.questions.length]}),u.jsx(Hy,{question:_,answer:l[_.id],onAnswerChange:y,onQuestionUpdate:N=>t?.(_.id,N),showFeedback:m})]}),u.jsxs("div",{className:ia.footer,children:[u.jsx(Ne,{variant:"ghost",onClick:()=>g(!m),leftIcon:u.jsx(Ly,{size:16}),children:m?"Cevaplar Gizle":"Cevaplar Gster"}),u.jsxs("div",{className:ia.navButtons,children:[u.jsx(Ne,{variant:"outline",onClick:S,disabled:a===0,leftIcon:u.jsx(Cz,{size:16}),children:"nceki"}),u.jsx(Ne,{variant:"primary",onClick:b,disabled:a===s.questions.length-1,rightIcon:u.jsx(Ri,{size:16}),children:"Sonraki"})]})]})]})})},P8="_modalContent_1nen0_1",U8="_infoBox_1nen0_13",V8="_infoIcon_1nen0_33",B8="_infoText_1nen0_43",q8="_sectionHeader_1nen0_53",H8="_sectionTitle_1nen0_65",$8="_selectAllBtn_1nen0_83",F8="_classList_1nen0_115",G8="_classItem_1nen0_133",Q8="_selected_1nen0_169",K8="_checkbox_1nen0_181",Y8="_className_1nen0_217",W8="_modalFooter_1nen0_237",X8="_submitBtn_1nen0_251",Z8="_emptyState_1nen0_271",J8="_warningIcon_1nen0_291",e7="_closeBtn_1nen0_327",Tn={modalContent:P8,infoBox:U8,infoIcon:V8,infoText:B8,sectionHeader:q8,sectionTitle:H8,selectAllBtn:$8,classList:F8,classItem:G8,selected:Q8,checkbox:K8,className:Y8,modalFooter:W8,submitBtn:X8,emptyState:Z8,warningIcon:J8,closeBtn:e7},t7=({isOpen:s,onClose:e,onPublish:t,assignedClasses:a,quizTitle:o,isLoading:l=!1})=>{const[d,m]=w.useState([]),g=b=>{m(S=>S.includes(b)?S.filter(N=>N!==b):[...S,b])},_=()=>{d.length===a.length?m([]):m(a)},y=()=>{d.length>0&&t(d)};return!a||a.length===0?u.jsx(zf,{isOpen:s,onClose:e,title:"Snav Yaynla",size:"md",children:u.jsxs("div",{className:Tn.emptyState,children:[u.jsx(Ro,{size:48,className:Tn.warningIcon}),u.jsx("h3",{children:"Snf Bulunamad"}),u.jsx("p",{children:"Snav yaynlamak iin nce dashboard zerinden snf eklemelisiniz."}),u.jsx(Ne,{variant:"outline",onClick:e,className:Tn.closeBtn,children:"Kapat"})]})}):u.jsx(zf,{isOpen:s,onClose:e,title:"Snav Yaynla",size:"md",footer:u.jsxs("div",{className:Tn.modalFooter,children:[u.jsx(Ne,{variant:"outline",onClick:e,disabled:l,children:"Vazge"}),u.jsx(Ne,{variant:"primary",onClick:y,disabled:d.length===0||l,leftIcon:u.jsx(Wx,{size:18}),className:Tn.submitBtn,children:l?"Gnderiliyor...":"rencilere Gnder"})]}),children:u.jsxs("div",{className:Tn.modalContent,children:[u.jsxs("div",{className:Tn.infoBox,children:[u.jsx(Li,{size:20,className:Tn.infoIcon}),u.jsxs("div",{className:Tn.infoText,children:[u.jsx("strong",{children:o})," adl snav artk yayna hazr. rencilerin eriebilmesi iin ltfen hedef snflar sein."]})]}),u.jsxs("div",{className:Tn.sectionHeader,children:[u.jsxs("div",{className:Tn.sectionTitle,children:[u.jsx(Qu,{size:18}),u.jsx("span",{children:"Hedef Snflar Sein"})]}),u.jsx("button",{className:Tn.selectAllBtn,onClick:_,children:d.length===a.length?"Seimi Kaldr":"Tmn Se"})]}),u.jsx("div",{className:Tn.classList,children:a.map(b=>u.jsxs("div",{className:`${Tn.classItem} ${d.includes(b)?Tn.selected:""}`,onClick:()=>g(b),children:[u.jsx("div",{className:Tn.checkbox,children:d.includes(b)&&u.jsx(Li,{size:16})}),u.jsx("span",{className:Tn.className,children:b})]},b))})]})})},n7="_page_1m8jj_1",s7="_navRow_1m8jj_26",i7="_backLink_1m8jj_33",a7="_content_1m8jj_56",r7="_loading_1m8jj_62",o7="_error_1m8jj_63",Nl={page:n7,navRow:s7,backLink:i7,content:a7,loading:r7,error:o7},vT=()=>{const{id:s}=Xu(),[e]=TR(),t=ts(),a=e.get("sessionId"),o=In(),l=Lt(I=>I.user),d=Lt(I=>I.isInitialized),{addToast:m}=wn(),[g,_]=w.useState(null),[y,b]=w.useState(!0),[S,N]=w.useState(!1),[z,V]=w.useState(null),[k,H]=w.useState(!1),[q,G]=w.useState(!1),O=t.pathname.endsWith("/new")||!s;w.useEffect(()=>{if(!d||!l)return;(async()=>{b(!0);try{if(O){let C="Yeni Quiz";if(a)try{const j=await Lf(a);j?.title&&(C=`${j.title} - Quiz`)}catch{}const P={id:"",title:C,description:"",sessionId:a||void 0,teacherId:l.id,questions:[],settings:Vy,status:"draft",totalPoints:0,estimatedDuration:0,createdAt:new Date,updatedAt:new Date};_(P),b(!1)}else if(s){const C=await Vo(s);if(!C){m({type:"error",title:"Hata",message:"Quiz bulunamad."}),o(ge.TEACHER.SESSIONS);return}_(C),b(!1)}}catch(C){console.error("Error loading quiz:",C),m({type:"error",title:"Hata",message:"Quiz yklenirken bir hata olutu."}),b(!1)}})()},[s,a,l,O,d,m,o]);const se=w.useCallback(async I=>{if(l)try{if(O){const C=await ew(l.id,{title:I.title,description:I.description,sessionId:a||void 0,questions:I.questions,settings:I.settings,classIds:I.classIds});_(C),m({type:"success",title:"Baarl",message:"Quiz oluturuldu."}),o(`/teacher/quizzes/${C.id}`,{replace:!0})}else s&&(await Vg(s,{title:I.title,description:I.description,questions:I.questions,settings:I.settings,classIds:I.classIds}),_(I),m({type:"success",title:"Baarl",message:"Quiz kaydedildi."}))}catch(C){console.error("Error saving quiz:",C),m({type:"error",title:"Hata",message:"Quiz kaydedilemedi."})}},[l,O,s,a,m,o]),he=w.useCallback(async I=>{if(!g||O||!s){m({type:"warning",title:"Uyar",message:"nce quiz'i kaydedin."});return}try{G(!0),await Vg(s,{classIds:I}),await S9(s),_(C=>C?{...C,status:"published",publishedAt:new Date,classIds:I}:null),m({type:"success",title:"Yaynland!",message:"Quiz seilen snflara gnderildi."}),H(!1)}catch(C){console.error("Error publishing quiz:",C),m({type:"error",title:"Hata",message:"Quiz yaynlanamad."})}finally{G(!1)}},[g,O,s,m]),D=w.useCallback(async()=>{if(!g||!s){m({type:"warning",title:"Uyar",message:"nce quiz'i kaydedin."});return}if(g.questions.length===0){m({type:"warning",title:"Uyar",message:"Quiz'e en az bir soru ekleyin."});return}try{await Vg(s,{status:"approved"}),_(I=>I?{...I,status:"approved"}:null),m({type:"success",title:"Onayland",message:"Quiz onayland, yaynlamaya hazr."})}catch(I){console.error("Error approving quiz:",I),m({type:"error",title:"Hata",message:"Quiz onaylanamad."})}},[g,s,m]);return!d||!l||y&&!g?u.jsx("div",{className:Nl.loading,children:u.jsx(es,{size:"lg"})}):g?u.jsxs("div",{className:Nl.page,children:[u.jsx("div",{className:Nl.navRow,children:u.jsxs("button",{className:Nl.backLink,onClick:()=>o(-1),children:[u.jsx(ua,{size:18})," Geri Dn"]})}),u.jsx("div",{className:Nl.content,children:u.jsx(h8,{quiz:g,onSave:se,onPublish:()=>H(!0),onApprove:D,onGenerateWithAI:()=>{},isLoading:y,onPreview:I=>{V(I),N(!0)}})}),S&&z&&u.jsx(L8,{quiz:z,onClose:()=>{N(!1),V(null)},onQuestionUpdate:(I,C)=>{_(P=>{if(!P)return null;const j=P.questions.map(U=>U.id===I?C:U);return{...P,questions:j}}),V(P=>{if(!P)return null;const j=P.questions.map(U=>U.id===I?C:U);return{...P,questions:j}})}}),k&&g&&u.jsx(t7,{isOpen:k,onClose:()=>H(!1),onPublish:he,quizTitle:g.title,assignedClasses:l?.assignedClasses||[],isLoading:q})]}):u.jsxs("div",{className:Nl.error,children:[u.jsx("p",{children:"Quiz yklenemedi."}),u.jsx(Ne,{variant:"primary",onClick:()=>o(-1),children:"Geri Dn"})]})},l7="_page_7jzy0_3",c7="_header_7jzy0_16",u7="_title_7jzy0_23",d7="_teacherName_7jzy0_30",h7="_subtitle_7jzy0_40",f7="_contextBar_7jzy0_46",m7="_contextItem_7jzy0_61",p7="_contextLabel_7jzy0_69",g7="_quizList_7jzy0_76",_7="_quizItem_7jzy0_82",y7="_quizIcon_7jzy0_100",v7="_quizInfo_7jzy0_111",b7="_quizTitle_7jzy0_115",E7="_badge_7jzy0_121",T7="_badgePublished_7jzy0_129",S7="_badgeDraft_7jzy0_134",A7="_badgeApproved_7jzy0_139",x7="_menuBtn_7jzy0_144",w7="_emptyState_7jzy0_154",We={page:l7,header:c7,title:u7,teacherName:d7,subtitle:h7,contextBar:f7,contextItem:m7,contextLabel:p7,quizList:g7,quizItem:_7,quizIcon:y7,quizInfo:v7,quizTitle:b7,badge:E7,badgePublished:T7,badgeDraft:S7,badgeApproved:A7,menuBtn:x7,emptyState:w7},I7=()=>{const s=In(),e=Lt(O=>O.user),t=wn(O=>O.addToast),[a,o]=w.useState([]),[l,d]=w.useState(!0),m=ts(),[g,_]=w.useState("all"),[y,b]=w.useState(()=>{const se=new URLSearchParams(m.search).get("status");return se==="published"||se==="closed"?se:"all"}),[S,N]=w.useState(null),[z,V]=w.useState(null);w.useEffect(()=>{k()},[e]),w.useEffect(()=>{e?.assignedClasses?.length>0&&_("all")},[e]);const k=async()=>{if(e)try{d(!0);const O=await gm(e.id);o(O)}catch(O){console.error("Error loading exams:",O),t({type:"error",title:"Hata",message:"Snavlar yklenemedi."})}finally{d(!1)}},H=O=>{const se=a.find(he=>he.id===O);se&&(V({id:O,title:se.title}),N(null))},q=async()=>{if(!z)return;const O=z.id;try{await tw(O),o(se=>se.filter(he=>he.id!==O)),t({type:"success",title:"Baarl",message:"Snav silindi."})}catch(se){console.error("Error deleting exam:",se),t({type:"error",title:"Hata",message:"Snav silinemedi."})}finally{V(null)}},G=a.filter(O=>{const se=!g||g==="all"||O.classId===g,he=y==="all"?O.status==="published"||O.status==="closed":O.status===y;return se&&he});return w.useEffect(()=>{const O=()=>N(null);return document.addEventListener("click",O),()=>document.removeEventListener("click",O)},[]),u.jsxs("div",{className:We.page,children:[u.jsxs("div",{className:We.header,children:[u.jsxs("div",{className:We.headerTitle,children:[u.jsxs("h1",{className:We.title,children:["Merhaba, ",u.jsx("span",{className:We.teacherName,children:e?.displayName||"retmenim"})]}),u.jsx("p",{className:We.subtitle,children:"Yaynladnz snavlar ve sonularn buradan takip edebilirsiniz."})]}),u.jsxs("div",{className:We.contextBar,children:[u.jsxs("div",{className:We.contextItem,children:[u.jsx("label",{className:We.contextLabel,children:"KURUM SEN"}),u.jsx(gs,{options:[{value:"enderun",label:"Enderun Koleji Merkez"}],value:"enderun",onChange:()=>{},icon:u.jsx(oc,{size:18})})]}),u.jsxs("div",{className:We.contextItem,children:[u.jsx("label",{className:We.contextLabel,children:"AKTF SINIF"}),u.jsx(gs,{options:[{value:"all",label:"Tm Snflar"},...e?.assignedClasses?.map(O=>({value:O,label:O}))||[]],value:g,onChange:O=>_(O),placeholder:"Snf Sein"})]}),u.jsxs("div",{className:We.contextItem,children:[u.jsx("label",{className:We.contextLabel,children:"DURUM FLTRES"}),u.jsx(gs,{options:[{value:"all",label:"Hepsi"},{value:"published",label:"Aktif Snavlar"},{value:"closed",label:"Sonulanan Snavlar"}],value:y,onChange:O=>b(O)})]})]})]}),l?u.jsx("div",{className:We.emptyState,children:u.jsx(es,{size:"lg"})}):G.length===0?u.jsxs("div",{className:We.emptyState,children:[u.jsx("div",{style:{color:"var(--color-text-tertiary)",marginBottom:"16px"},children:u.jsx(Po,{size:48,strokeWidth:1})}),u.jsx("h3",{children:"Yaynda hi snav yok"}),u.jsx("p",{children:"Tamamlanan ve yaynlanan snavlarnz burada grnr."})]}):u.jsx("div",{className:We.quizList,children:G.map(O=>u.jsxs("div",{className:`${We.quizItem} ${We.itemPublished}`,onClick:()=>s(`${ge.TEACHER.QUIZZES}/${O.id}`),children:[u.jsx("div",{className:We.quizIcon,children:O.status==="published"?u.jsx(Ku,{size:20}):u.jsx(Li,{size:20})}),u.jsxs("div",{className:We.quizInfo,children:[u.jsx("div",{className:We.quizTitle,children:O.title.includes("-")?O.title.split("-").slice(1).join("-").trim():O.title}),u.jsxs("div",{className:We.quizMeta,children:[O.subject&&u.jsxs(u.Fragment,{children:[u.jsx("span",{children:O.subject}),u.jsx("span",{children:""})]}),u.jsx("span",{children:O.createdAt?new Date(O.createdAt).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}),u.jsx("span",{children:""}),u.jsxs("span",{children:[O.questions?.length||0," Soru"]})]}),u.jsxs("div",{className:We.statusWrapper,children:[O.status==="draft"&&u.jsx("span",{className:`${We.badge} ${We.badgeDraft}`,children:"Onay Bekliyor"}),O.status==="approved"&&u.jsx("span",{className:`${We.badge} ${We.badgeApproved}`,children:"Yayna Hazr"}),O.status==="published"&&u.jsx("span",{className:`${We.badge} ${We.badgePublished}`,children:"Yaynland"}),O.status==="closed"&&u.jsx("span",{className:`${We.badge} ${We.badgeDefault}`,children:"Tamamland"})]})]}),u.jsx("div",{className:We.quizActions,onClick:se=>se.stopPropagation(),children:u.jsxs("div",{style:{position:"relative"},children:[u.jsx("button",{className:We.menuBtn,onClick:se=>{se.stopPropagation(),N(S===O.id?null:O.id)},children:u.jsx(Hx,{size:20})}),S===O.id&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{position:"fixed",inset:0,zIndex:99},onClick:()=>N(null)}),u.jsxs("div",{className:We.menuDropdown,children:[u.jsx("button",{className:We.menuItem,onClick:()=>s(`${ge.TEACHER.QUIZZES}/${O.id}`),children:"Dzenle"}),u.jsx("button",{className:`${We.menuItem} ${We.menuItemDanger}`,onClick:()=>H(O.id),children:"Sil"})]})]})]})})]},O.id))}),u.jsx(pm,{isOpen:!!z,onClose:()=>V(null),onConfirm:q,title:"Snav Sil",message:`"${z?.title}" isimli snav silmek istediinize emin misiniz? Bu ilem geri alnamaz.`,confirmText:"Snav Sil",isLoading:l})]})},ow="users",R7=async s=>{const e=Rn(bt,ow,s),t=await zo(e);return t.exists()?{id:t.id,...t.data()}:null},N7=async()=>{const s=Rr(Ls(bt,ow),ga("role","==","student"));return(await Nr(s)).docs.map(t=>({id:t.id,...t.data()}))},C7="_page_1r7ug_3",k7="_title_1r7ug_35",j7="_subtitle_1r7ug_43",D7="_statValue_1r7ug_71",O7="_statLabel_1r7ug_78",M7="_avatar_1r7ug_111",z7="_studentName_1r7ug_130",L7="_arrow_1r7ug_166",P7="_emptyState_1r7ug_171",at={page:C7,title:k7,subtitle:j7,statValue:D7,statLabel:O7,avatar:M7,studentName:z7,arrow:L7,emptyState:P7},U7=()=>{const{id:s}=Xu(),e=In(),[t,a]=w.useState(null),[o,l]=w.useState([]),[d,m]=w.useState({}),[g,_]=w.useState(!0);w.useEffect(()=>{(async()=>{if(s)try{const[S,N]=await Promise.all([Vo(s),sw(s)]);S&&a(S),l(N);const z=Array.from(new Set(N.map(k=>k.studentId))),V={};await Promise.all(z.map(async k=>{const H=await R7(k);H&&(V[k]=H)})),m(V)}catch(S){console.error("Failed to fetch submissions:",S)}finally{_(!1)}})()},[s]);const y=b=>b?new Intl.DateTimeFormat("tr-TR",{day:"2-digit",month:"long",hour:"2-digit",minute:"2-digit"}).format(b):"-";return g?u.jsx("div",{className:at.loadingState,children:u.jsx(es,{size:"lg"})}):t?u.jsx("div",{className:at.page,children:u.jsxs("div",{className:at.container,children:[u.jsxs("div",{className:at.pageHeader,children:[u.jsx(Ne,{variant:"ghost",size:"sm",leftIcon:u.jsx(ua,{size:18}),onClick:()=>e(-1),children:"Geri"}),u.jsxs("div",{children:[u.jsxs("h1",{className:at.title,children:[t.title," - Sonular"]}),u.jsx("p",{className:at.subtitle,children:"renci katlmlar ve puanlamalar"})]})]}),u.jsxs("div",{className:at.quizStats,children:[u.jsxs("div",{className:at.statItem,children:[u.jsx("span",{className:at.statLabel,children:"Katlm"}),u.jsx("span",{className:at.statValue,children:o.length})]}),u.jsxs("div",{className:at.statItem,children:[u.jsx("span",{className:at.statLabel,children:"Ort. Puan"}),u.jsxs("span",{className:at.statValue,children:[o.length>0?Math.round(o.reduce((b,S)=>b+(S.percentage||0),0)/o.length):0,"%"]})]})]}),o.length===0?u.jsxs(ql,{className:at.emptyState,children:[u.jsx(zy,{size:48,color:"#94a3b8"}),u.jsx("h3",{children:"Henz katlm yok"}),u.jsx("p",{children:"rencileriniz snav tamamladnda sonular burada grnecektir."})]}):u.jsx("div",{className:at.list,children:o.map(b=>{const S=d[b.studentId],N=b.status==="graded";return u.jsxs("div",{className:at.item,onClick:()=>e(`/teacher/quizzes/${t.id}/submissions/${b.id}`),children:[u.jsxs("div",{className:at.itemMain,children:[u.jsx("div",{className:at.avatar,children:u.jsx(Uy,{size:24})}),u.jsxs("div",{className:at.info,children:[u.jsx("h4",{className:at.studentName,children:S?.displayName||"Bilinmeyen renci"}),u.jsxs("div",{className:at.meta,children:[u.jsxs("span",{className:at.metaItem,children:[u.jsx(hm,{size:14}),y(b.submittedAt)]}),u.jsxs("span",{className:at.metaItem,children:[u.jsx(rc,{size:14}),Math.floor((b.duration||0)/60)," dk ",(b.duration||0)%60," sn"]})]})]})]}),u.jsxs("div",{className:at.results,children:[u.jsx("div",{className:at.status,children:N?u.jsxs("span",{className:at.badgeGraded,children:[u.jsx(Li,{size:14})," Puanland"]}):u.jsxs("span",{className:at.badgePending,children:[u.jsx(qz,{size:14})," Bekliyor"]})}),u.jsxs("div",{className:at.score,children:[u.jsxs("span",{className:at.scoreValue,children:[b.score," / ",b.totalPoints]}),u.jsx("div",{className:at.percentageBar,children:u.jsx("div",{className:at.percentageFill,style:{width:`${b.percentage}%`,backgroundColor:b.percentage&&b.percentage>=60?"#22c55e":"#f59e0b"}})})]}),u.jsx(Ri,{size:20,className:at.arrow})]})]},b.id)})})]})}):u.jsxs("div",{className:at.errorState,children:[u.jsx("h2",{children:"Snav bulunamad."}),u.jsx(Ne,{onClick:()=>e(-1),children:"Geri Dn"})]})},V7="_page_1qchn_5",B7="_header_1qchn_33",q7="_greeting_1qchn_63",H7="_teacherName_1qchn_77",$7="_subtitle_1qchn_85",F7="_contextBar_1qchn_99",G7="_contextItem_1qchn_135",Q7="_contextLabel_1qchn_151",K7="_animateFadeIn_1qchn_171",Y7="_gridContainer_1qchn_205",W7="_classCard_1qchn_245",X7="_classCardTop_1qchn_267",Z7="_className_1qchn_281",J7="_cardIconBox_1qchn_297",eH="_cardStatsRow_1qchn_325",tH="_statBlock_1qchn_355",nH="_statHead_1qchn_387",sH="_statValue_1qchn_409",iH="_scoreBadge_1qchn_425",aH="_viewDetailsBtn_1qchn_443",rH="_breadcrumb_1qchn_491",oH="_detailHeader_1qchn_507",lH="_detailTitle_1qchn_543",cH="_detailSubtitle_1qchn_559",uH="_headerStats_1qchn_575",dH="_headerStatItem_1qchn_607",hH="_hLabel_1qchn_619",fH="_hValue_1qchn_639",mH="_quizList_1qchn_657",pH="_quizCard_1qchn_669",gH="_quizIcon_1qchn_723",_H="_quizContent_1qchn_747",yH="_quizMainInfo_1qchn_755",vH="_quizTitle_1qchn_767",bH="_quizDate_1qchn_779",EH="_quizMeta_1qchn_795",TH="_tag_1qchn_807",SH="_quizStats_1qchn_825",AH="_qStat_1qchn_851",xH="_qLabel_1qchn_863",wH="_qValue_1qchn_877",IH="_examScoreBig_1qchn_905",RH="_tagRow_1qchn_929",NH="_dateTag_1qchn_943",CH="_scoreCircle_1qchn_967",kH="_reportGrid_1qchn_997",jH="_sectionCard_1qchn_1021",DH="_cardHeader_1qchn_1031",OH="_collapsibleHeader_1qchn_1073",MH="_headerLeft_1qchn_1093",zH="_collapsibleContent_1qchn_1105",LH="_open_1qchn_1119",PH="_studentTable_1qchn_1137",UH="_tableHead_1qchn_1145",VH="_tableRow_1qchn_1195",BH="_stName_1qchn_1241",qH="_stDetail_1qchn_1261",HH="_avatar_1qchn_1285",$H="_stScore_1qchn_1317",FH="_questionGrid_1qchn_1367",GH="_qStatItem_1qchn_1381",QH="_qTop_1qchn_1407",KH="_qPrc_1qchn_1423",YH="_qProg_1qchn_1433",WH="_qFill_1qchn_1449",XH="_warningBox_1qchn_1463",ZH="_emptyState_1qchn_1501",JH="_questionsContainer_1qchn_1517",e$="_questionResultCard_1qchn_1531",t$="_correctCard_1qchn_1547",n$="_incorrectCard_1qchn_1557",s$="_qResultHeader_1qchn_1567",i$="_qNumber_1qchn_1581",a$="_statusCorrect_1qchn_1595",r$="_statusIncorrect_1qchn_1613",o$="_qText_1qchn_1631",l$="_optionsList_1qchn_1647",c$="_optionItem_1qchn_1659",u$="_optCorrectSelected_1qchn_1683",d$="_optWrongSelected_1qchn_1697",h$="_optCorrectMissed_1qchn_1711",f$="_optMarker_1qchn_1725",te={page:V7,header:B7,greeting:q7,teacherName:H7,subtitle:$7,contextBar:F7,contextItem:G7,contextLabel:Q7,animateFadeIn:K7,gridContainer:Y7,classCard:W7,classCardTop:X7,className:Z7,cardIconBox:J7,cardStatsRow:eH,statBlock:tH,statHead:nH,statValue:sH,scoreBadge:iH,viewDetailsBtn:aH,breadcrumb:rH,detailHeader:oH,detailTitle:lH,detailSubtitle:cH,headerStats:uH,headerStatItem:dH,hLabel:hH,hValue:fH,quizList:mH,quizCard:pH,quizIcon:gH,quizContent:_H,quizMainInfo:yH,quizTitle:vH,quizDate:bH,quizMeta:EH,tag:TH,quizStats:SH,qStat:AH,qLabel:xH,qValue:wH,examScoreBig:IH,tagRow:RH,dateTag:NH,scoreCircle:CH,reportGrid:kH,sectionCard:jH,cardHeader:DH,collapsibleHeader:OH,headerLeft:MH,collapsibleContent:zH,open:LH,studentTable:PH,tableHead:UH,tableRow:VH,stName:BH,stDetail:qH,avatar:HH,stScore:$H,questionGrid:FH,qStatItem:GH,qTop:QH,qPrc:KH,qProg:YH,qFill:WH,warningBox:XH,emptyState:ZH,questionsContainer:JH,questionResultCard:e$,correctCard:t$,incorrectCard:n$,qResultHeader:s$,qNumber:i$,statusCorrect:a$,statusIncorrect:r$,qText:o$,optionsList:l$,optionItem:c$,optCorrectSelected:u$,optWrongSelected:d$,optCorrectMissed:h$,optMarker:f$},m$=()=>{const s=Lt(ue=>ue.user),e=wn(ue=>ue.addToast),[t,a]=w.useState("classes"),[o,l]=w.useState(null),[d,m]=w.useState(null),[g,_]=w.useState(null),[y,b]=w.useState("all"),[S,N]=w.useState(!0),[z,V]=w.useState([]),[k,H]=w.useState([]),[q,G]=w.useState([]),[O,se]=w.useState(!0),[he,D]=w.useState(!0),I=async()=>{if(s){N(!0);try{const[ue,we]=await Promise.all([gm(s.id),N7()]);V(ue),G(we);const F=ue.filter(de=>de.status==="published"||de.status==="closed").map(de=>de.id).map(de=>sw(de)),ie=(await Promise.all(F)).flat();H(ie)}catch(ue){console.error("Error fetching reports data:",ue),e({type:"error",title:"Hata",message:"Rapor verileri yklenemedi."})}finally{N(!1)}}};w.useEffect(()=>{I()},[s,e]);const C=ue=>ue>=85?"#10B981":ue>=60?"#F59E0B":"#EF4444",P=ue=>{if(!ue)return"-";const we=ue instanceof Date?ue:ue.toDate();return new Intl.DateTimeFormat("tr-TR",{day:"numeric",month:"long",year:"numeric"}).format(we)},j=w.useMemo(()=>{const ue=s?.assignedClasses||[],we=Array.from(new Set(z.map(F=>F.classId||"Genel")));let M=ue.length>0?ue:we;return y!=="all"&&(M=M.filter(F=>F===y)),M.map(F=>{const J=F.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),ie=z.filter(oe=>{const fe=oe.classId?.replace(/[^a-zA-Z0-9]/g,"").toUpperCase()||"";return(oe.classId===F||fe&&fe===J)&&(oe.status==="published"||oe.status==="closed")}),de=k.filter(oe=>{const fe=z.find(ht=>ht.id===oe.quizId),Ce=fe?.classId?.replace(/[^a-zA-Z0-9]/g,"").toUpperCase()||"";return fe?.classId===F||Ce&&Ce===J}),ye=de.length>0?Math.round(de.reduce((oe,fe)=>oe+(fe.percentage||0),0)/de.length):0,ke=q.filter(oe=>{const fe=oe,Ce=fe.classId||fe.class||"";if(Ce===F)return!0;const ht=Ce.replace(/[^a-zA-Z0-9]/g,"").toUpperCase();return ht&&ht===J}).length;return{name:F,quizCount:ie.length,submissionCount:de.length,avgScore:ye,studentCount:ke}}).sort((F,J)=>J.avgScore-F.avgScore)},[s,z,k,q,y]),U=()=>u.jsxs("div",{className:te.animateFadeIn,children:[u.jsxs("div",{className:te.header,children:[u.jsxs("div",{className:te.headerTitle,children:[u.jsxs("h1",{className:te.greeting,children:["Merhaba, ",u.jsx("span",{className:te.teacherName,children:s?.displayName||"retmenim"})]}),u.jsx("p",{className:te.subtitle,children:"te bugnk durumunuz ve son aktiviteleriniz."})]}),u.jsxs("div",{className:te.contextBar,children:[u.jsxs("div",{className:te.contextItem,children:[u.jsx("label",{className:te.contextLabel,children:"KURUM SEN"}),u.jsx(gs,{options:[{value:"enderun",label:"Enderun Koleji Merkez"}],value:"enderun",onChange:()=>{},icon:u.jsx(oc,{size:18})})]}),u.jsxs("div",{className:te.contextItem,children:[u.jsx("label",{className:te.contextLabel,children:"AKTF SINIF"}),u.jsx(gs,{options:[{value:"all",label:"Tm Snflar"},...s?.assignedClasses?.map(ue=>({value:ue,label:ue}))||[]],value:y,onChange:ue=>b(ue),placeholder:"Snf Sein"})]})]})]}),u.jsx("div",{className:te.gridContainer,children:j.map((ue,we)=>u.jsxs("div",{className:te.classCard,onClick:()=>{l(ue.name),a("class_detail")},children:[u.jsxs("div",{className:te.classCardTop,children:[u.jsx("h3",{className:te.className,children:ue.name}),u.jsx("div",{className:te.cardIconBox,children:u.jsx(Qu,{size:20})})]}),u.jsxs("div",{className:te.cardStatsRow,children:[u.jsxs("div",{className:te.statBlock,children:[u.jsxs("div",{className:te.statHead,children:[u.jsx(Px,{size:14}),u.jsx("span",{children:"GENEL ORT."})]}),u.jsx("div",{className:te.statValue,children:u.jsxs("span",{className:te.scoreBadge,style:{backgroundColor:`${C(ue.avgScore)}15`,color:C(ue.avgScore)},children:["%",ue.avgScore]})})]}),u.jsxs("div",{className:te.statBlock,children:[u.jsxs("div",{className:te.statHead,children:[u.jsx(G6,{size:14}),u.jsx("span",{children:"MEVCUT"})]}),u.jsxs("div",{className:te.statValue,children:[ue.studentCount," r."]})]}),u.jsxs("div",{className:te.statBlock,children:[u.jsxs("div",{className:te.statHead,children:[u.jsx(qx,{size:14}),u.jsx("span",{children:"SINAV"})]}),u.jsxs("div",{className:te.statValue,children:[ue.quizCount," Adet"]})]})]}),u.jsx("button",{className:te.viewDetailsBtn,children:"DETAYLARI GRNTLE"})]},we))}),j.length===0&&u.jsx("div",{className:te.emptyState,children:u.jsx("p",{children:"Henz atanm bir snfnz veya snavnz bulunmuyor."})}),u.jsx("div",{style:{marginTop:"40px"},children:u.jsx(aw,{onDataGenerated:I})})]}),A=w.useMemo(()=>{if(!o)return null;const ue=z.filter(M=>{if(M.status!=="published"&&M.status!=="closed")return!1;const F=M.classId?.replace(/[^a-zA-Z0-9]/g,"").toUpperCase()||"",J=o.replace(/[^a-zA-Z0-9]/g,"").toUpperCase();return M.classId===o||F&&F===J?!0:k.some(de=>de.quizId===M.id&&q.find(ye=>ye.id===de.studentId)?.classId===o)}).map(M=>{const F=k.filter(ie=>ie.quizId===M.id),J=F.length>0?Math.round(F.reduce((ie,de)=>ie+(de.percentage||0),0)/F.length):0;return{...M,avgScore:J,submissionCount:F.length}}),we=ue.length>0?Math.round(ue.reduce((M,F)=>M+F.avgScore,0)/ue.length):0;return{className:o,quizzes:ue,overallAvg:we,totalSubmissions:ue.reduce((M,F)=>M+F.submissionCount,0)}},[o,z,k,q]),pe=()=>A?u.jsxs("div",{className:te.animateFadeIn,children:[u.jsx("div",{className:te.breadcrumb,children:u.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>a("classes"),leftIcon:u.jsx(ua,{size:16}),children:"Snflara Dn"})}),u.jsxs("div",{className:te.detailHeader,children:[u.jsxs("div",{children:[u.jsxs("h1",{className:te.detailTitle,children:[A.className," Snf"]}),u.jsx("p",{className:te.detailSubtitle,children:"Snav bazl performans analizi"})]}),u.jsxs("div",{className:te.headerStats,children:[u.jsxs("div",{className:te.headerStatItem,children:[u.jsx("span",{className:te.hLabel,children:"Genel Baar"}),u.jsxs("span",{className:te.hValue,style:{color:C(A.overallAvg)},children:["%",A.overallAvg]})]}),u.jsxs("div",{className:te.headerStatItem,children:[u.jsx("span",{className:te.hLabel,children:"Toplam Snav"}),u.jsx("span",{className:te.hValue,children:A.quizzes.length})]})]})]}),u.jsx("div",{className:te.quizList,children:A.quizzes.length>0?A.quizzes.map(ue=>u.jsxs("div",{className:te.quizCard,onClick:()=>{m(ue.id),a("quiz_detail")},children:[u.jsx("div",{className:te.quizIcon,children:u.jsx(Po,{size:24})}),u.jsxs("div",{className:te.quizContent,children:[u.jsxs("div",{className:te.quizMainInfo,children:[u.jsx("h3",{className:te.quizTitle,children:ue.title.includes("-")?ue.title.split("-").slice(1).join("-").trim():ue.title}),u.jsxs("span",{className:te.quizDate,children:[u.jsx(hm,{size:14}),P(ue.createdAt)]})]}),u.jsx("div",{className:te.quizMeta,children:u.jsx("span",{className:te.tag,children:ue.subject})})]}),u.jsxs("div",{className:te.quizStats,children:[u.jsxs("div",{className:te.qStat,children:[u.jsx("span",{className:te.qLabel,children:"Katlm"}),u.jsx("span",{className:te.qValue,children:ue.submissionCount})]}),u.jsxs("div",{className:te.qStat,children:[u.jsx("span",{className:te.qLabel,children:"Ortalama"}),u.jsxs("div",{className:te.scoreBadge,style:{backgroundColor:`${C(ue.avgScore)}15`,color:C(ue.avgScore)},children:["%",ue.avgScore]})]}),u.jsx(Ri,{size:20,className:te.arrow})]})]},ue.id)):u.jsx("div",{className:te.emptyState,children:u.jsx("p",{children:"Bu snfa ait yaynlanm snav bulunamad."})})})]}):null,be=w.useMemo(()=>{if(!d)return null;const ue=z.find(de=>de.id===d),we=k.filter(de=>de.quizId===d);if(!ue)return null;const M=we.length>0?Math.round(we.reduce((de,ye)=>de+(ye.percentage||0),0)/we.length):0,F=we.map(de=>{const ye=q.find(ke=>ke.id===de.studentId);return{submission:de,studentName:ye?.displayName||"Bilinmeyen renci",score:de.percentage||0}}).sort((de,ye)=>ye.score-de.score),J=ue.questions.map((de,ye)=>{let ke=0;return we.forEach(oe=>{oe.answers.find(Ce=>Ce.questionId===de.id)?.isCorrect&&ke++}),{...de,index:ye+1,correctPercentage:we.length>0?Math.round(ke/we.length*100):0}}),ie=J.filter(de=>de.correctPercentage<50);return{quiz:ue,avgScore:M,participation:we.length,studentList:F,questionAnalysis:J,lowPerformanceParams:ie}},[d,z,k,q]),W=()=>{if(!be)return null;const{quiz:ue,avgScore:we,studentList:M,questionAnalysis:F,lowPerformanceParams:J}=be;return u.jsxs("div",{className:te.animateFadeIn,children:[u.jsx("div",{className:te.breadcrumb,children:u.jsxs(Ne,{variant:"ghost",size:"sm",onClick:()=>a("class_detail"),leftIcon:u.jsx(ua,{size:16}),children:[o," Snavlarna Dn"]})}),u.jsxs("div",{className:te.detailHeader,children:[u.jsxs("div",{children:[u.jsxs("div",{className:te.tagRow,children:[u.jsx("span",{className:te.tag,children:ue.subject}),u.jsx("span",{className:te.dateTag,children:P(ue.createdAt)})]}),u.jsx("h1",{className:te.detailTitle,children:ue.title})]}),u.jsxs("div",{className:te.examScoreBig,style:{color:C(we)},children:[u.jsxs("div",{className:te.scoreCircle,children:["%",we]}),u.jsx("span",{children:"Snf Ortalamas"})]})]}),u.jsxs("div",{className:te.reportGrid,children:[u.jsx("div",{className:te.colLeft,children:u.jsxs(ql,{className:te.sectionCard,children:[u.jsxs("div",{className:`${te.cardHeader} ${te.collapsibleHeader}`,onClick:()=>se(!O),children:[u.jsxs("div",{className:te.headerLeft,children:[u.jsx(Qu,{size:20}),u.jsx("h3",{children:"renci Sralamas"})]}),u.jsx(Ri,{size:20,style:{transform:O?"rotate(90deg)":"none",transition:"transform 0.2s"}})]}),u.jsx("div",{className:`${te.collapsibleContent} ${O?te.open:""}`,children:u.jsxs("div",{className:te.studentTable,children:[u.jsxs("div",{className:te.tableHead,children:[u.jsx("span",{children:"renci"}),u.jsx("span",{children:"Puan"}),u.jsx("span",{children:"Detay"})]}),u.jsxs("div",{className:te.tableBody,children:[M.map((ie,de)=>u.jsxs("div",{className:te.tableRow,style:{cursor:"pointer"},onClick:()=>{_(ie.submission.id),a("student_detail")},children:[u.jsxs("div",{className:te.stName,children:[u.jsx("div",{className:te.avatar,children:ie.studentName.charAt(0)}),ie.studentName]}),u.jsx("div",{className:te.stScore,style:{color:C(ie.score)},children:ie.score}),u.jsx("div",{className:te.stDetail,children:u.jsx(Ri,{size:16,color:"#94a3b8"})})]},de)),M.length===0&&u.jsx("div",{className:te.emptyTable,children:"Henz katlm yok."})]})]})})]})}),u.jsx("div",{className:te.colRight,children:u.jsxs(ql,{className:te.sectionCard,children:[u.jsxs("div",{className:`${te.cardHeader} ${te.collapsibleHeader}`,onClick:()=>D(!he),children:[u.jsxs("div",{className:te.headerLeft,children:[u.jsx(zy,{size:20}),u.jsx("h3",{children:"Soru Analizi"})]}),u.jsx(Ri,{size:20,style:{transform:he?"rotate(90deg)":"none",transition:"transform 0.2s"}})]}),u.jsxs("div",{className:`${te.collapsibleContent} ${he?te.open:""}`,children:[J.length>0&&u.jsxs("div",{className:te.warningBox,children:[u.jsx(Fx,{size:16}),u.jsxs("span",{children:[u.jsxs("strong",{children:[J.length," soru"]})," snf genelinde %50'nin altnda baar ald."]})]}),u.jsx("div",{className:te.questionGrid,children:F.map(ie=>u.jsxs("div",{className:te.qStatItem,children:[u.jsxs("div",{className:te.qTop,children:[u.jsxs("span",{className:te.qIdx,children:["Soru ",ie.index]}),u.jsxs("span",{className:te.qPrc,style:{color:C(ie.correctPercentage)},children:["%",ie.correctPercentage]})]}),u.jsx("div",{className:te.qProg,children:u.jsx("div",{className:te.qFill,style:{width:`${ie.correctPercentage}%`,backgroundColor:C(ie.correctPercentage)}})})]},ie.id))})]})]})})]})]})},me=w.useMemo(()=>{if(!g||!d)return null;const ue=k.find(F=>F.id===g),we=z.find(F=>F.id===d),M=q.find(F=>F.id===ue?.studentId);return!ue||!we||!M?null:{quiz:we,submission:ue,student:M}},[g,d,k,z,q]),Ae=()=>{if(!me)return null;const{quiz:ue,submission:we,student:M}=me;return u.jsxs("div",{className:te.animateFadeIn,children:[u.jsx("div",{className:te.breadcrumb,children:u.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>a("quiz_detail"),leftIcon:u.jsx(ua,{size:16}),children:"Genel Sonulara Dn"})}),u.jsxs("div",{className:te.detailHeader,children:[u.jsxs("div",{children:[u.jsx("h1",{className:te.detailTitle,children:M.displayName}),u.jsx("p",{className:te.detailSubtitle,children:ue.title})]}),u.jsxs("div",{className:te.examScoreBig,style:{color:C(we.percentage||0)},children:[u.jsxs("div",{className:te.scoreCircle,children:["%",we.percentage]}),u.jsx("span",{children:"renci Puan"})]})]}),u.jsx("div",{className:te.questionsContainer,children:ue.questions.map((F,J)=>{const ie=we.answers.find(ye=>ye.questionId===F.id),de=ie?.isCorrect;return u.jsxs(ql,{className:`${te.questionResultCard} ${de?te.correctCard:te.incorrectCard}`,children:[u.jsxs("div",{className:te.qResultHeader,children:[u.jsxs("span",{className:te.qNumber,children:["Soru ",J+1]}),de?u.jsxs("span",{className:te.statusCorrect,children:[u.jsx(Bx,{size:16})," Doru"]}):u.jsxs("span",{className:te.statusIncorrect,children:[u.jsx(Pz,{size:16})," Yanl"]})]}),u.jsx("div",{className:te.qText,children:F.question}),u.jsxs("div",{className:te.optionsList,children:[F.type==="multiple_choice"&&F.options.map(ye=>{const ke=ie?.selectedOptionIds?.includes(ye.id),oe=ye.isCorrect;let fe=te.optionItem;return ke&&oe?fe+=` ${te.optCorrectSelected}`:ke&&!oe?fe+=` ${te.optWrongSelected}`:!ke&&oe&&(fe+=` ${te.optCorrectMissed}`),u.jsxs("div",{className:fe,children:[u.jsxs("div",{className:te.optMarker,children:[ke&&oe&&u.jsx(Io,{size:14}),ke&&!oe&&u.jsx(No,{size:14}),!ke&&oe&&u.jsx(Io,{size:14})]}),ye.text]},ye.id)}),F.type==="true_false"&&u.jsxs("div",{className:te.booleanResult,children:[u.jsx("div",{className:`${te.optionItem} ${ie?.booleanAnswer===!0?de?te.optCorrectSelected:te.optWrongSelected:F.correctAnswer===!0?te.optCorrectMissed:""}`,children:"Doru"}),u.jsx("div",{className:`${te.optionItem} ${ie?.booleanAnswer===!1?de?te.optCorrectSelected:te.optWrongSelected:F.correctAnswer===!1?te.optCorrectMissed:""}`,children:"Yanl"})]})]})]},F.id)})})]})};return S?u.jsx("div",{className:te.page,children:u.jsx("div",{className:te.loadingState,children:u.jsx(es,{size:"lg"})})}):u.jsxs("div",{className:te.page,children:[t==="classes"&&U(),t==="class_detail"&&pe(),t==="quiz_detail"&&W(),t==="student_detail"&&Ae()]})},p$="_page_1bz1p_5",g$="_header_1bz1p_33",_$="_headerTitle_1bz1p_47",y$="_greeting_1bz1p_57",v$="_subtitle_1bz1p_83",b$="_contextBar_1bz1p_109",E$="_contextItem_1bz1p_139",T$="_contextLabel_1bz1p_153",S$="_vibrantActionBtn_1bz1p_171",A$="_liveRecordBtn_1bz1p_229",x$="_liveIcon_1bz1p_289",w$="_pulse_1bz1p_1",I$="_statsGrid_1bz1p_335",R$="_statCard_1bz1p_377",N$="_primary_1bz1p_431",C$="_accent_1bz1p_441",k$="_secondary_1bz1p_451",j$="_teacher_1bz1p_461",D$="_statIconWrapper_1bz1p_471",O$="_statInfo_1bz1p_507",M$="_statValue_1bz1p_521",z$="_statLabel_1bz1p_549",L$="_statBgIcon_1bz1p_565",P$="_contentGrid_1bz1p_609",U$="_activityCard_1bz1p_635",V$="_sectionHeader_1bz1p_661",B$="_seeAllLink_1bz1p_677",q$="_activityList_1bz1p_693",H$="_activityItem_1bz1p_705",$$="_itemPublished_1bz1p_751",F$="_activityIconBox_1bz1p_761",G$="_itemCompleted_1bz1p_771",Q$="_activityContent_1bz1p_815",K$="_activityTitle_1bz1p_831",Y$="_activityMeta_1bz1p_847",W$="_activityArrow_1bz1p_861",X$="_bgSuccess_1bz1p_869",Z$="_bgWarning_1bz1p_877",J$="_colorSuccess_1bz1p_885",eF="_statusLive_1bz1p_895",tF="_emptyState_1bz1p_907",nF="_loadingState_1bz1p_923",ze={page:p$,header:g$,headerTitle:_$,greeting:y$,subtitle:v$,contextBar:b$,contextItem:E$,contextLabel:T$,vibrantActionBtn:S$,liveRecordBtn:A$,liveIcon:x$,pulse:w$,statsGrid:I$,statCard:R$,primary:N$,accent:C$,secondary:k$,teacher:j$,statIconWrapper:D$,statInfo:O$,statValue:M$,statLabel:z$,statBgIcon:L$,contentGrid:P$,activityCard:U$,sectionHeader:V$,seeAllLink:B$,activityList:q$,activityItem:H$,itemPublished:$$,activityIconBox:F$,itemCompleted:G$,activityContent:Q$,activityTitle:K$,activityMeta:Y$,activityArrow:W$,bgSuccess:X$,bgWarning:Z$,colorSuccess:J$,statusLive:eF,emptyState:tF,loadingState:nF},sF=()=>{const{user:s}=Lt(),e=In(),t=s,[a,o]=w.useState([]),[l,d]=w.useState([]),[m,g]=w.useState(!0);w.useEffect(()=>{(async()=>{if(s)try{g(!0);const[b,S]=await Promise.all([By(),nw(s.id)]);o(b),d(S)}catch(b){console.error("Error fetching student dashboard data:",b)}finally{g(!1)}})()},[s]);const _=[{icon:u.jsx(T_,{size:24}),label:"TAMAMLANAN",value:l.length.toString(),color:"primary",path:ge.STUDENT.RESULTS},{icon:u.jsx(Wl,{size:24}),label:"AKTF SINAVLAR",value:a.length.toString(),color:"accent",path:ge.STUDENT.QUIZZES},{icon:u.jsx(O6,{size:24}),label:"ORTALAMA BAARI",value:l.length>0?`%${Math.round(l.reduce((y,b)=>y+(b.percentage||0),0)/l.length)}`:"%0",color:"secondary",path:ge.STUDENT.RESULTS},{icon:u.jsx(Ku,{size:24}),label:"ZM SRES",value:l.length>0?`${Math.round(l.reduce((y,b)=>y+(b.duration||0),0)/(l.length*60))} dk`:"0 dk",color:"teacher",path:ge.STUDENT.RESULTS}];return m?u.jsx("div",{className:ze.page,children:u.jsxs("div",{className:ze.loadingState,children:[u.jsx(es,{size:"lg"}),u.jsx("p",{children:"renci Paneli ykleniyor..."})]})}):u.jsxs("div",{className:ze.page,children:[u.jsxs("div",{className:ze.header,children:[u.jsxs("div",{className:ze.headerTitle,children:[u.jsxs("h1",{className:ze.greeting,children:["Selam, ",s?.displayName||"renci"," "]}),u.jsx("p",{className:ze.subtitle,children:"Snavlarn zmeye ve baarn artrmaya hazr msn?"})]}),u.jsxs("div",{className:ze.contextBar,children:[u.jsxs("div",{className:ze.contextItem,children:[u.jsx("label",{className:ze.contextLabel,children:"KURUM"}),u.jsx(gs,{options:[{value:"enderun",label:"Enderun Koleji Merkez"}],value:"enderun",onChange:()=>{},icon:u.jsx(oc,{size:18})})]}),u.jsxs("div",{className:ze.contextItem,children:[u.jsx("label",{className:ze.contextLabel,children:"SINIFIM"}),u.jsx(gs,{options:[{value:"current",label:t?.classId||"9-A"}],value:"current",onChange:()=>{},icon:u.jsx($x,{size:18})})]}),u.jsx(Ne,{variant:"primary",size:"md",leftIcon:u.jsx(Wl,{size:20}),className:ze.vibrantActionBtn,onClick:()=>e(ge.STUDENT.QUIZZES),children:"Puanlarm Gr"}),u.jsx(Ne,{variant:"danger",size:"md",leftIcon:u.jsx(Ku,{size:20,className:ze.liveIcon}),className:ze.liveRecordBtn,onClick:()=>e(ge.STUDENT.QUIZZES),children:"Snavlara Git"})]})]}),u.jsx("div",{className:ze.statsGrid,children:_.map((y,b)=>u.jsxs("div",{className:`${ze.statCard} ${ze[y.color]}`,onClick:()=>e(y.path),style:{cursor:"pointer"},children:[u.jsx("div",{className:ze.statHeader,children:u.jsx("div",{className:ze.statIconWrapper,children:y.icon})}),u.jsxs("div",{className:ze.statInfo,children:[u.jsx("span",{className:ze.statValue,children:y.value}),u.jsx("span",{className:ze.statLabel,children:y.label})]}),u.jsx("div",{className:ze.statBgIcon,children:y.icon})]},b))}),u.jsxs("div",{className:ze.contentGrid,children:[u.jsxs(ql,{variant:"default",padding:"lg",className:ze.activityCard,children:[u.jsx(uT,{children:u.jsxs("div",{className:ze.sectionHeader,children:[u.jsx(dT,{subtitle:"zmeni bekleyen gncel snavlar",children:"Atanan Snavlar"}),u.jsx(or,{to:ge.STUDENT.QUIZZES,className:ze.seeAllLink,children:"Tmn Gr"})]})}),u.jsx(hT,{children:u.jsx("div",{className:ze.activityList,children:a.length>0?a.slice(0,5).map(y=>u.jsxs("div",{className:`${ze.activityItem} ${ze.itemPublished}`,onClick:()=>e(`${ge.STUDENT.QUIZ_PLAYER.replace(":id",y.id)}`),children:[u.jsx("div",{className:ze.activityIconBox,children:u.jsx(Mf,{size:18})}),u.jsxs("div",{className:ze.activityContent,children:[u.jsx("h4",{className:ze.activityTitle,children:y.title}),u.jsxs("span",{className:ze.activityMeta,children:[y.questions.length," Soru  ",y.estimatedDuration," dk  ",u.jsx("span",{className:ze.statusLive,children:"YAYINDA"})]})]}),u.jsx(Ri,{size:16,className:ze.activityArrow})]},y.id)):u.jsxs("div",{className:ze.emptyState,children:[u.jsx("p",{children:"u an atanm yeni bir snavn yok."}),u.jsx("p",{className:ze.emptySubtitle,children:"retmenlerin snav yaynladnda burada grnecek."})]})})})]}),u.jsxs(ql,{variant:"default",padding:"lg",className:ze.activityCard,children:[u.jsx(uT,{children:u.jsxs("div",{className:ze.sectionHeader,children:[u.jsx(dT,{subtitle:"En son tamamladn snav sonular",children:"Son Sonular"}),u.jsx(or,{to:ge.STUDENT.RESULTS,className:ze.seeAllLink,children:"Tmn Gr"})]})}),u.jsx(hT,{children:u.jsx("div",{className:ze.activityList,children:l.length>0?l.slice(0,5).map(y=>{const b=a.find(S=>S.id===y.quizId);return u.jsxs("div",{className:`${ze.activityItem} ${ze.itemCompleted}`,onClick:()=>e(`${ge.STUDENT.QUIZ_RESULT.replace(":id",y.id)}`),children:[u.jsx("div",{className:ze.activityIconBox,children:y.percentage>=70?u.jsx(T_,{size:18}):u.jsx(Mf,{size:18})}),u.jsxs("div",{className:ze.activityContent,children:[u.jsx("h4",{className:ze.activityTitle,children:b?.title||"Snav Sonucu"}),u.jsxs("span",{className:ze.activityMeta,children:["Baar: %",y.percentage,"  ",y.submittedAt?new Date(y.submittedAt).toLocaleDateString("tr-TR"):"-"]})]}),u.jsx(Ri,{size:16,className:ze.activityArrow})]},y.id)}):u.jsxs("div",{className:ze.emptyState,children:[u.jsx("p",{children:"Henz tamamladn bir snav yok."}),u.jsx(or,{to:ge.STUDENT.QUIZZES,className:ze.emptyAction,children:"lk snavn zmeye bala"})]})})})]})]})]})},iF="_container_11ks3_1",aF="_header_11ks3_8",rF="_headerGlass_11ks3_15",oF="_brand_11ks3_28",lF="_logoBox_11ks3_34",cF="_brandText_11ks3_46",uF="_appName_11ks3_52",dF="_divider_11ks3_59",hF="_pageTitle_11ks3_64",fF="_headerRight_11ks3_74",mF="_progressSection_11ks3_80",pF="_progressHeader_11ks3_93",gF="_progressBar_11ks3_103",_F="_progressFill_11ks3_110",yF="_timer_11ks3_117",vF="_warning_11ks3_131",bF="_userSection_11ks3_149",EF="_userAvatar_11ks3_157",TF="_userName_11ks3_168",SF="_content_11ks3_174",AF="_contentWrapper_11ks3_180",xF="_footer_11ks3_187",wF="_footerContent_11ks3_192",Tt={container:iF,header:aF,headerGlass:rF,brand:oF,logoBox:lF,brandText:cF,appName:uF,divider:dF,pageTitle:hF,headerRight:fF,progressSection:mF,progressHeader:pF,progressBar:gF,progressFill:_F,timer:yF,warning:vF,userSection:bF,userAvatar:EF,userName:TF,content:SF,contentWrapper:AF,footer:xF,footerContent:wF},po=({children:s,title:e="Snav",totalQuestions:t=0,currentQuestionIndex:a=0,timeRemaining:o})=>{const{user:l}=Lt(),d=g=>{const _=Math.floor(g/60),y=g%60;return`${_.toString().padStart(2,"0")}:${y.toString().padStart(2,"0")}`},m=t>0?(a+1)/t*100:0;return u.jsxs("div",{className:Tt.container,children:[u.jsx("header",{className:Tt.header,children:u.jsxs("div",{className:Tt.headerGlass,children:[u.jsxs("div",{className:Tt.brand,children:[u.jsx("div",{className:Tt.logoBox,children:u.jsx(Wl,{size:20})}),u.jsxs("div",{className:Tt.brandText,children:[u.jsx("span",{className:Tt.appName,children:"Enderun Lala"}),u.jsx("span",{className:Tt.divider,children:"/"}),u.jsx("span",{className:Tt.pageTitle,children:e})]})]}),u.jsxs("div",{className:Tt.headerRight,children:[t>0&&u.jsxs("div",{className:Tt.progressSection,children:[u.jsxs("div",{className:Tt.progressHeader,children:[u.jsxs("span",{className:Tt.progressLabel,children:["SORU ",a+1," / ",t]}),u.jsxs("span",{className:Tt.progressPercent,children:["%",Math.round(m)]})]}),u.jsx("div",{className:Tt.progressBar,children:u.jsx("div",{className:Tt.progressFill,style:{width:`${m}%`}})})]}),o!==void 0&&u.jsxs("div",{className:`${Tt.timer} ${o<60?Tt.warning:""}`,children:[u.jsx("div",{className:Tt.timerIcon,children:u.jsx(rc,{size:16})}),u.jsx("span",{className:Tt.timerValue,children:d(o)})]}),u.jsxs("div",{className:Tt.userSection,children:[u.jsx("div",{className:Tt.userAvatar,children:u.jsx(Uy,{size:16})}),u.jsx("span",{className:Tt.userName,children:l?.displayName?.split(" ")[0]})]})]})]})}),u.jsx("main",{className:Tt.content,children:u.jsx("div",{className:Tt.contentWrapper,children:s})}),u.jsx("footer",{className:Tt.footer,children:u.jsxs("div",{className:Tt.footerContent,children:[" ",new Date().getFullYear()," Enderun Lala  Baarlar Dileriz"]})})]})},IF=({quizId:s,questions:e,timeLimit:t,onComplete:a})=>{const[o,l]=w.useState(0),[d,m]=w.useState({}),[g,_]=w.useState(t?t*60:void 0),[y,b]=w.useState(!1),[S,N]=w.useState(!1),z=`quiz_session_${s}`;w.useEffect(()=>{if(!s)return;const G=localStorage.getItem(z);if(G)try{const O=JSON.parse(G);m(O.answers||{}),l(O.currentIndex||0),O.timeRemaining&&_(O.timeRemaining)}catch(O){console.error("Failed to load quiz session",O)}N(!0)},[s]),w.useEffect(()=>{if(!S||!s||e.length===0)return;if(y){localStorage.removeItem(z);return}const G={answers:d,currentIndex:o,timeRemaining:g,updatedAt:Date.now()};localStorage.setItem(z,JSON.stringify(G))},[d,o,g,y,s,S,e.length]),w.useEffect(()=>{if(g===void 0||y||!S)return;if(g<=0){q(!0);return}const G=setInterval(()=>{_(O=>O!==void 0?O-1:void 0)},1e3);return()=>clearInterval(G)},[g,y,S]);const V=G=>{if(y)return;const O=e[o];O&&m(se=>({...se,[O.id]:G}))},k=()=>{o<e.length-1&&l(G=>G+1)},H=()=>{o>0&&l(G=>G-1)},q=w.useCallback(async(G=!1)=>{const O=Object.keys(d).length;if(!G&&O===0)throw new Error("Hibir soruya cevap vermediniz. Ltfen en az bir soruyu yantlayn.");try{a&&await a({quizId:s,answers:d,completedAt:new Date,timeSpent:t?t*60-(g||0):0}),localStorage.removeItem(z),b(!0)}catch(se){throw console.error("Completion error:",se),se}},[d,s,t,g,a]);return{currentQuestionIndex:o,currentQuestion:e[o],answers:d,timeRemaining:g,isCompleted:y,handleAnswerChange:V,handleNext:k,handlePrevious:H,handleComplete:q,progress:(o+1)/e.length*100}},RF="_container_1834s_1",NF="_questionCard_1834s_20",CF="_navigation_1834s_32",kF="_loadingContainer_1834s_44",jF="_completedContainer_1834s_54",DF="_completedIcon_1834s_77",OF="_completedTitle_1834s_89",MF="_completedText_1834s_96",zF="_statsGrid_1834s_103",LF="_statItem_1834s_110",PF="_statLabel_1834s_119",UF="_statValue_1834s_127",On={container:RF,questionCard:NF,navigation:CF,loadingContainer:kF,completedContainer:jF,completedIcon:DF,completedTitle:OF,completedText:MF,statsGrid:zF,statItem:LF,statLabel:PF,statValue:UF},VF=()=>{const{id:s}=Xu(),e=In(),{user:t}=Lt(),{addToast:a}=wn(),o=uo.useRef(!1),[l,d]=w.useState(null),[m,g]=w.useState(!0),[_,y]=w.useState(null),[b,S]=w.useState(null),[N,z]=w.useState(!1);w.useEffect(()=>{t&&(async()=>{if(!(!s||!t||o.current)){o.current=!0;try{const U=await Vo(s);if(!U){y("Quiz bulunamad."),g(!1);return}const pe=(await qy(s,t.id)).find(be=>be.status==="in_progress");if(pe)console.log("Resuming active submission:",pe.id),S(pe.id);else{console.log("Starting new submission for quiz:",s);try{const be=await A9(s,t.id);S(be.id)}catch(be){if(be.message==="Maximum attempts reached")y("Bu snav iin maksimum deneme hakknz doldurdunuz.");else throw be;g(!1);return}}d(U)}catch(U){console.error("Quiz init error:",U),y("Quiz yklenirken bir hata olutu: "+(U.message||"Bilinmeyen hata"))}finally{g(!1)}}})()},[s,t]);const{currentQuestionIndex:V,currentQuestion:k,answers:H,timeRemaining:q,isCompleted:G,handleAnswerChange:O,handleNext:se,handlePrevious:he,handleComplete:D}=IF({quizId:s||"",questions:l?.questions||[],timeLimit:l?.settings?.timeLimit,onComplete:async j=>{if(!(!b||N)){z(!0);try{console.log("Submitting results:",j);const U=Object.entries(j.answers).map(([A,pe])=>{const be=l?.questions.find(me=>me.id===A);if(!be)return null;const W={questionId:A,questionType:be.type};return be.type==="multiple_choice"?W.selectedOptionIds=[pe]:be.type==="true_false"&&(W.booleanAnswer=pe),W}).filter(Boolean);await w9(b,U),a({type:"success",title:"Baarl",message:"Snav baaryla gnderildi."}),e(`/student/quiz/result/${b}`)}catch(U){throw console.error("Submission error:",U),new Error("Snav gnderilirken hata olutu: "+(U.message||"Bilinmeyen hata"))}finally{z(!1)}}}}),I=async()=>{try{await D()}catch(j){a({type:"error",title:"Hata",message:j.message||"Ltfen testi bitirmeden nce sorular yantlayn."})}};if(m)return u.jsx(po,{children:u.jsxs("div",{className:On.loadingContainer,children:[u.jsx(es,{size:"lg"}),u.jsx("p",{children:"Snav ykleniyor..."})]})});if(_)return u.jsx(po,{children:u.jsxs("div",{style:{textAlign:"center",padding:"4rem"},children:[u.jsx("h2",{children:" Hata"}),u.jsx("p",{children:_}),u.jsx(Ne,{variant:"outline",onClick:()=>e("/student/dashboard"),children:"Panele Dn"})]})});if(!l)return null;if(G||N)return u.jsx(po,{title:l.title,children:u.jsx("div",{className:On.completedContainer,children:N?u.jsxs("div",{className:On.loadingContainer,children:[u.jsx(es,{size:"lg"}),u.jsx("p",{children:"Cevaplar gnderiliyor..."})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:On.completedIcon,children:u.jsx(Li,{size:48,strokeWidth:2.5})}),u.jsx("h2",{className:On.completedTitle,children:"Snav Tamamland!"}),u.jsx("p",{className:On.completedText,children:"Yantlarnz baaryla kaydedildi. Katlmnz iin teekkrler."}),u.jsxs("div",{className:On.statsGrid,children:[u.jsxs("div",{className:On.statItem,children:[u.jsx("span",{className:On.statLabel,children:"Toplam Soru"}),u.jsx("span",{className:On.statValue,children:l.questions.length})]}),u.jsxs("div",{className:On.statItem,children:[u.jsx("span",{className:On.statLabel,children:"Durum"}),u.jsx("span",{className:On.statValue,style:{color:"#16a34a"},children:"Gnderildi"})]})]}),u.jsx(Ne,{variant:"primary",fullWidth:!0,onClick:()=>e("/student/dashboard"),children:"Ana Sayfaya Dn"})]})})});const C=V===l.questions.length-1,P=V===0;return u.jsx(po,{title:l.title,totalQuestions:l.questions.length,currentQuestionIndex:V,timeRemaining:q,children:u.jsxs("div",{className:On.container,children:[u.jsx("div",{className:On.questionCard,children:u.jsx(Hy,{question:k,answer:H[k.id],onAnswerChange:O,readOnly:N})}),u.jsxs("div",{className:On.navigation,children:[u.jsx(Ne,{variant:"outline",onClick:he,disabled:P||N,leftIcon:u.jsx(ua,{size:18}),children:"nceki Soru"}),C?u.jsx(Ne,{variant:"primary",onClick:I,disabled:N,leftIcon:u.jsx(Wz,{size:18}),style:{backgroundColor:"#16a34a",borderColor:"#16a34a"},children:N?"Gnderiliyor...":"Snav Bitir"}):u.jsx(Ne,{variant:"primary",onClick:se,disabled:N,rightIcon:u.jsx(Hl,{size:18}),children:"Sonraki Soru"})]})]})})},BF="_page_19p61_1",qF="_header_19p61_20",HF="_title_19p61_24",$F="_subtitle_19p61_32",FF="_quizList_19p61_38",GF="_quizItem_19p61_44",QF="_itemActive_19p61_64",KF="_quizIcon_19p61_69",YF="_itemCompleted_19p61_74",WF="_quizInfo_19p61_102",XF="_quizTitle_19p61_106",ZF="_quizMeta_19p61_113",JF="_duration_19p61_122",eG="_statusWrapper_19p61_128",tG="_badge_19p61_132",nG="_badgePublished_19p61_142",sG="_badgeSuccess_19p61_150",iG="_startLink_19p61_158",aG="_completedLink_19p61_168",rG="_actionArrow_19p61_183",oG="_emptyState_19p61_191",lG="_emptyIcon_19p61_200",cG="_loadingContainer_19p61_218",uG="_quizActions_19p61_235",St={page:BF,header:qF,title:HF,subtitle:$F,quizList:FF,quizItem:GF,itemActive:QF,quizIcon:KF,itemCompleted:YF,quizInfo:WF,quizTitle:XF,quizMeta:ZF,duration:JF,statusWrapper:eG,badge:tG,badgePublished:nG,badgeSuccess:sG,startLink:iG,completedLink:aG,actionArrow:rG,emptyState:oG,emptyIcon:lG,loadingContainer:cG,quizActions:uG},dG=()=>{const s=In(),{user:e}=Lt(),[t,a]=w.useState([]),[o,l]=w.useState([]),[d,m]=w.useState(!0);return w.useEffect(()=>{(async()=>{if(e)try{const[_,y]=await Promise.all([By(),qy("",e.id)]);a(_),l(y)}catch(_){console.error("Failed to fetch quizzes:",_)}finally{m(!1)}})()},[e]),d?u.jsx("div",{className:St.page,children:u.jsxs("div",{className:St.loadingContainer,children:[u.jsx(es,{size:"lg"}),u.jsx("p",{children:"Snavlar ykleniyor..."})]})}):u.jsxs("div",{className:St.page,children:[u.jsx("div",{className:St.header,children:u.jsxs("div",{className:St.headerTitle,children:[u.jsx("h1",{className:St.title,children:"Aktif Snavlarm"}),u.jsx("p",{className:St.subtitle,children:"retmenlerin tarafndan hazrlanan ve zmeni bekleyen snavlar."})]})}),t.length===0?u.jsxs("div",{className:St.emptyState,children:[u.jsx("div",{className:St.emptyIcon,children:u.jsx(Wl,{size:64,strokeWidth:1})}),u.jsx("h3",{children:"Henz aktif bir snav yok"}),u.jsx("p",{children:"retmenlerin yeni snavlar yaynladnda burada grnecektir."})]}):u.jsx("div",{className:St.quizList,children:t.map(g=>{const _=o.find(b=>b.quizId===g.id),y=_?.status==="submitted"||_?.status==="graded";return u.jsxs("div",{className:`${St.quizItem} ${y?St.itemCompleted:St.itemActive}`,onClick:()=>{s(y?`/student/quiz/result/${_?.id}`:`/student/quiz/${g.id}`)},children:[u.jsx("div",{className:St.quizIcon,children:y?u.jsx(Bx,{size:24}):u.jsx(qx,{size:24})}),u.jsxs("div",{className:St.quizInfo,children:[u.jsx("div",{className:St.quizTitle,children:g.title}),u.jsxs("div",{className:St.quizMeta,children:[u.jsx("span",{children:g.subject||"Genel"}),u.jsx("span",{children:""}),u.jsxs("span",{children:[g.questions.length," Soru"]}),u.jsx("span",{children:""}),u.jsxs("div",{className:St.duration,children:[u.jsx(rc,{size:16}),u.jsxs("span",{children:[g.estimatedDuration," dk"]})]})]}),u.jsx("div",{className:St.statusWrapper,children:y?u.jsxs("span",{className:`${St.badge} ${St.badgeSuccess}`,children:["TAMAMLANDI (%",_?.percentage,")"]}):u.jsx("span",{className:`${St.badge} ${St.badgePublished}`,children:"YAYINDA"})})]}),u.jsx("div",{className:St.quizActions,children:u.jsxs("div",{className:y?St.completedLink:St.startLink,children:[y?"Sonuca Git":"Snava Bala",u.jsx(Ri,{size:20,className:St.actionArrow})]})})]},g.id)})})]})},hG="_container_1wp9k_1",fG="_summaryCard_1wp9k_20",mG="_summaryHeader_1wp9k_31",pG="_title_1wp9k_39",gG="_badge_1wp9k_46",_G="_badgePassed_1wp9k_54",yG="_badgeFailed_1wp9k_59",vG="_statsGrid_1wp9k_64",bG="_statItem_1wp9k_76",EG="_scoreCircle_1wp9k_83",TG="_passed_1wp9k_95",SG="_failed_1wp9k_101",AG="_statValue_1wp9k_107",xG="_statLabel_1wp9k_113",wG="_detailsHeader_1wp9k_121",IG="_icon_1wp9k_129",RG="_detailsTitle_1wp9k_133",NG="_questionList_1wp9k_139",CG="_questionItem_1wp9k_145",kG="_questionHeader_1wp9k_153",jG="_questionMeta_1wp9k_162",DG="_qNumber_1wp9k_168",OG="_pointBadge_1wp9k_175",MG="_resultIcon_1wp9k_183",zG="_iconCorrect_1wp9k_193",LG="_iconIncorrect_1wp9k_197",PG="_actions_1wp9k_201",Je={container:hG,summaryCard:fG,summaryHeader:mG,title:pG,badge:gG,badgePassed:_G,badgeFailed:yG,statsGrid:vG,statItem:bG,scoreCircle:EG,passed:TG,failed:SG,statValue:AG,statLabel:xG,detailsHeader:wG,icon:IG,detailsTitle:RG,questionList:NG,questionItem:CG,questionHeader:kG,questionMeta:jG,qNumber:DG,pointBadge:OG,resultIcon:MG,iconCorrect:zG,iconIncorrect:LG,actions:PG},UG=()=>{const{id:s}=Xu(),e=In(),[t,a]=w.useState(null),[o,l]=w.useState(null),[d,m]=w.useState(!0),[g,_]=w.useState(null);w.useEffect(()=>{(async()=>{if(s)try{const H=await x9(s);if(!H){_("Sonu bulunamad."),m(!1);return}a(H);const q=await Vo(H.quizId);q?l(q):_("lgili snav bilgisi bulunamad.")}catch(H){console.error(H),_("Veriler yklenirken bir hata olutu.")}finally{m(!1)}})()},[s]);const y=k=>{if(!k)return"00:00";const H=Math.floor(k/60),q=k%60;return`${H.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`},b=k=>{switch(k.questionType){case"multiple_choice":return k.selectedOptionIds?.[0];case"true_false":return k.booleanAnswer;default:return null}};if(d)return u.jsx(po,{children:u.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"100px"},children:u.jsx(es,{size:"lg"})})});if(g||!t||!o)return u.jsx(po,{children:u.jsxs("div",{style:{textAlign:"center",padding:"4rem"},children:[u.jsx("h2",{children:" Hata"}),u.jsx("p",{children:g||"Verilere ulalamad."}),u.jsx(Ne,{variant:"outline",onClick:()=>e("/student/dashboard"),children:"Panele Dn"})]})});const{percentage:S=0,score:N=0,totalPoints:z,passed:V}=t;return u.jsx(po,{title:"Snav Sonucu",children:u.jsxs("div",{className:Je.container,children:[u.jsxs("div",{className:Je.summaryCard,children:[u.jsxs("div",{className:Je.summaryHeader,children:[u.jsxs("h2",{className:Je.title,children:[o.title," - Snav zeti"]}),u.jsx("div",{className:`${Je.badge} ${V?Je.badgePassed:Je.badgeFailed}`,children:V?"BAARILI":"BAARISIZ"})]}),u.jsxs("div",{className:Je.statsGrid,children:[u.jsxs("div",{className:Je.statItem,children:[u.jsx("div",{className:`${Je.scoreCircle} ${V?Je.passed:Je.failed}`,children:u.jsxs("span",{className:Je.scoreText,children:["%",S]})}),u.jsx("span",{className:Je.statLabel,children:"Baar Oran"})]}),u.jsxs("div",{className:Je.statItem,children:[u.jsxs("span",{className:Je.statValue,children:[N," / ",z]}),u.jsx("span",{className:Je.statLabel,children:"Toplam Puan"})]}),u.jsxs("div",{className:Je.statItem,children:[u.jsx("span",{className:Je.statValue,children:y(t.duration)}),u.jsx("span",{className:Je.statLabel,children:"Harcanan Sre"})]}),u.jsxs("div",{className:Je.statItem,children:[u.jsxs("span",{className:Je.statValue,children:[t.attemptNumber,"."]}),u.jsx("span",{className:Je.statLabel,children:"Deneme"})]})]})]}),u.jsxs("div",{className:Je.detailsHeader,children:[u.jsx(zy,{size:24,className:Je.icon}),u.jsx("h3",{className:Je.detailsTitle,children:"Soru Detaylar"})]}),u.jsx("div",{className:Je.questionList,children:o.questions.map((k,H)=>{const q=t.answers.find(O=>O.questionId===k.id),G=q?.isCorrect;return u.jsxs("div",{className:Je.questionItem,children:[u.jsxs("div",{className:Je.questionHeader,children:[u.jsxs("div",{className:Je.questionMeta,children:[u.jsxs("span",{className:Je.qNumber,children:["Soru ",H+1]}),u.jsxs("span",{className:Je.pointBadge,children:[k.points," Puan"]})]}),u.jsx("div",{className:`${Je.resultIcon} ${G?Je.iconCorrect:Je.iconIncorrect}`,children:G?u.jsx(Io,{size:16,strokeWidth:3}):u.jsx(No,{size:16,strokeWidth:3})})]}),u.jsx(Hy,{question:k,answer:q?b(q):null,onAnswerChange:()=>{},readOnly:!0,showFeedback:o.settings.showCorrectAnswers==="immediately"||o.settings.showCorrectAnswers==="after_submission"}),q?.feedback&&u.jsxs("div",{style:{marginTop:"1rem",padding:"0.75rem",backgroundColor:"#f8fafc",borderRadius:"8px",fontSize:"0.875rem",borderLeft:"4px solid #3b82f6"},children:[u.jsx("strong",{children:"retmen Notu:"})," ",q.feedback]})]},k.id)})}),u.jsxs("div",{className:Je.actions,children:[u.jsx(Ne,{variant:"outline",leftIcon:u.jsx(ua,{size:18}),onClick:()=>e("/student/dashboard"),children:"Panele Dn"}),u.jsx(Ne,{variant:"primary",leftIcon:u.jsx(Po,{size:18}),onClick:()=>e("/student/results"),children:"Tm Sonularm"})]})]})})},VG="_page_ui81i_1",BG="_header_ui81i_20",qG="_title_ui81i_35",HG="_subtitle_ui81i_43",$G="_summaryStats_ui81i_49",FG="_summaryCard_ui81i_55",GG="_summaryIcon_ui81i_66",QG="_summaryText_ui81i_77",KG="_summaryValue_ui81i_82",YG="_summaryLabel_ui81i_89",WG="_resetBtn_ui81i_96",XG="_resultsList_ui81i_115",ZG="_resultItem_ui81i_121",JG="_resultMain_ui81i_139",eQ="_itemCompleted_ui81i_145",tQ="_iconWrapper_ui81i_150",nQ="_quizInfo_ui81i_166",sQ="_quizTitle_ui81i_172",iQ="_quizMeta_ui81i_178",aQ="_metaItem_ui81i_187",rQ="_resultStats_ui81i_193",oQ="_scoreInfo_ui81i_199",lQ="_scoreLabel_ui81i_205",cQ="_scoreValue_ui81i_212",uQ="_percentageBadge_ui81i_218",dQ="_badgePassed_ui81i_225",hQ="_badgeFailed_ui81i_231",fQ="_detailsBtn_ui81i_237",mQ="_emptyState_ui81i_248",pQ="_vibrantBtn_ui81i_267",gQ="_loadingContainer_ui81i_275",Qe={page:VG,header:BG,title:qG,subtitle:HG,summaryStats:$G,summaryCard:FG,summaryIcon:GG,summaryText:QG,summaryValue:KG,summaryLabel:YG,resetBtn:WG,resultsList:XG,resultItem:ZG,resultMain:JG,itemCompleted:eQ,iconWrapper:tQ,quizInfo:nQ,quizTitle:sQ,quizMeta:iQ,metaItem:aQ,resultStats:rQ,scoreInfo:oQ,scoreLabel:lQ,scoreValue:cQ,percentageBadge:uQ,badgePassed:dQ,badgeFailed:hQ,detailsBtn:fQ,emptyState:mQ,vibrantBtn:pQ,loadingContainer:gQ},_Q=()=>{const{user:s}=Lt(),e=In(),{addToast:t}=wn(),[a,o]=w.useState([]),[l,d]=w.useState({}),[m,g]=w.useState(!0),[_,y]=w.useState(!1);w.useEffect(()=>{(async()=>{if(s)try{const H=(await nw(s.id)).filter(O=>O.status==="submitted"||O.status==="graded");o(H);const q=Array.from(new Set(H.map(O=>O.quizId))),G={};await Promise.all(q.map(async O=>{const se=await Vo(O);se&&(G[O]=se)})),d(G)}catch(k){console.error("Failed to fetch results:",k)}finally{g(!1)}})()},[s]);const b=async()=>{s&&y(!0)},S=async()=>{if(s)try{g(!0),await I9(s.id),o([]),d({}),t({type:"success",title:"Sfrland",message:"Tm snav gemiiniz silindi."})}catch(V){console.error("Reset failed:",V),t({type:"error",title:"Hata",message:"Sfrlama ilemi baarsz oldu."})}finally{g(!1),y(!1)}},N=V=>V?new Intl.DateTimeFormat("tr-TR",{day:"2-digit",month:"long",year:"numeric"}).format(V):"-";if(m)return u.jsx("div",{className:Qe.page,children:u.jsxs("div",{className:Qe.loadingContainer,children:[u.jsx(es,{size:"lg"}),u.jsx("p",{children:"Sonular ykleniyor..."})]})});const z=a.length>0?Math.round(a.reduce((V,k)=>V+(k.percentage||0),0)/a.length):0;return u.jsxs("div",{className:Qe.page,children:[u.jsxs("div",{className:Qe.header,children:[u.jsxs("div",{className:Qe.headerInfo,children:[u.jsx("h2",{className:Qe.title,children:"Baar Gemiim"}),u.jsx("p",{className:Qe.subtitle,children:"Katldn tm snavlarn detayl analizlerini buradan inceleyebilirsin."})]}),u.jsxs("div",{className:Qe.summaryStats,children:[u.jsxs("div",{className:Qe.summaryCard,children:[u.jsx("div",{className:Qe.summaryIcon,children:u.jsx(T_,{size:20})}),u.jsxs("div",{className:Qe.summaryText,children:[u.jsx("span",{className:Qe.summaryValue,children:a.length}),u.jsx("span",{className:Qe.summaryLabel,children:"Snav"})]})]}),u.jsxs("div",{className:Qe.summaryCard,children:[u.jsx("div",{className:Qe.summaryIcon,children:u.jsx(Px,{size:20})}),u.jsxs("div",{className:Qe.summaryText,children:[u.jsxs("span",{className:Qe.summaryValue,children:["%",z]}),u.jsx("span",{className:Qe.summaryLabel,children:"Ortalama"})]})]}),u.jsx("button",{className:Qe.resetBtn,onClick:b,title:"Tm Gemii Temizle",children:u.jsx(lc,{size:20})})]})]}),a.length===0?u.jsxs("div",{className:Qe.emptyState,children:[u.jsx(Po,{size:48,strokeWidth:1}),u.jsx("h3",{children:"Henz bir snav sonucun yok"}),u.jsx("p",{children:"Snavlar zdkten sonra baar analizlerini burada grebilirsin."}),u.jsx(Ne,{variant:"primary",className:Qe.vibrantBtn,onClick:()=>e("/student/quizzes"),children:"Snavlar Gr"})]}):u.jsx("div",{className:Qe.resultsList,children:a.map(V=>{const k=l[V.quizId],H=V.passed;return u.jsxs("div",{className:`${Qe.resultItem} ${Qe.itemCompleted}`,onClick:()=>e(`/student/quiz/result/${V.id}`),children:[u.jsxs("div",{className:Qe.resultMain,children:[u.jsx("div",{className:Qe.iconWrapper,children:u.jsx(yz,{size:24})}),u.jsxs("div",{className:Qe.quizInfo,children:[u.jsx("h4",{className:Qe.quizTitle,children:k?.title||"Snav Sonucu"}),u.jsxs("div",{className:Qe.quizMeta,children:[u.jsxs("span",{className:Qe.metaItem,children:[u.jsx(hm,{size:14}),N(V.submittedAt||V.startedAt)]}),u.jsxs("span",{className:Qe.metaItem,children:[u.jsx(rc,{size:14}),Math.floor((V.duration||0)/60)," dk"]})]})]})]}),u.jsxs("div",{className:Qe.resultStats,children:[u.jsxs("div",{className:Qe.scoreInfo,children:[u.jsx("span",{className:Qe.scoreLabel,children:"PUAN"}),u.jsxs("span",{className:Qe.scoreValue,children:[V.score," / ",V.totalPoints]})]}),u.jsx("div",{className:Qe.percentageInfo,children:u.jsxs("div",{className:`${Qe.percentageBadge} ${H?Qe.badgePassed:Qe.badgeFailed}`,children:["%",V.percentage]})}),u.jsxs(Ne,{variant:"ghost",size:"sm",className:Qe.detailsBtn,children:["Detaylar Gr",u.jsx(Ri,{size:16,style:{marginLeft:"4px"}})]})]})]},V.id)})}),u.jsx(pm,{isOpen:_,onClose:()=>y(!1),onConfirm:S,title:"Gemii Temizle",message:"Tm snav gemiiniz silinecektir. Bu ilem geri alnamaz. Emin misiniz?",confirmText:"Sfrla",isLoading:m})]})},qg=({title:s})=>u.jsxs("div",{style:{padding:"2rem"},children:[u.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:600},children:s}),u.jsx("p",{style:{color:"#64748b",marginTop:"0.5rem"},children:"Bu sayfa yaknda eklenecek."})]}),yQ=()=>{const{setFirebaseUser:s,setUser:e,setLoading:t,setInitialized:a}=Lt();return w.useEffect(()=>{const o=uk(dm,async l=>{if(s(l),l)try{const d=await zo(Rn(bt,"users",l.uid));d.exists()&&e({id:d.id,...d.data()})}catch(d){console.error("Error fetching user:",d)}else e(null);t(!1),a(!0)});return()=>o()},[s,e,t,a]),u.jsxs(yR,{children:[u.jsxs(Q2,{children:[u.jsx(zt,{path:ge.LOGIN,element:u.jsx(p9,{})}),u.jsx(zt,{path:ge.HOME,element:u.jsx(mf,{to:ge.LOGIN,replace:!0})}),u.jsx(zt,{path:ge.REGISTER,element:u.jsx(qg,{title:"Kayt Ol"})}),u.jsx(zt,{path:ge.FORGOT_PASSWORD,element:u.jsx(qg,{title:"ifremi Unuttum"})}),u.jsxs(zt,{element:u.jsx(Dn,{children:u.jsx(Y5,{})}),children:[u.jsx(zt,{path:ge.TEACHER.DASHBOARD,element:u.jsx(Dn,{allowedRoles:["teacher"],children:u.jsx(UP,{})})}),u.jsx(zt,{path:ge.TEACHER.SESSIONS,element:u.jsx(Dn,{allowedRoles:["teacher"],children:u.jsx(gU,{})})}),u.jsx(zt,{path:ge.TEACHER.NEW_SESSION,element:u.jsx(Dn,{allowedRoles:["teacher"],children:u.jsx(AV,{})})}),u.jsx(zt,{path:ge.TEACHER.SESSION_DETAIL,element:u.jsx(Dn,{allowedRoles:["teacher"],children:u.jsx(IB,{})})}),u.jsx(zt,{path:ge.TEACHER.QUIZZES,element:u.jsx(Dn,{allowedRoles:["teacher"],children:u.jsx(I7,{})})}),u.jsx(zt,{path:ge.TEACHER.NEW_QUIZ,element:u.jsx(Dn,{allowedRoles:["teacher"],children:u.jsx(vT,{})})}),u.jsx(zt,{path:ge.TEACHER.QUIZ_EDIT,element:u.jsx(Dn,{allowedRoles:["teacher"],children:u.jsx(vT,{})})}),u.jsx(zt,{path:ge.TEACHER.QUIZ_RESULTS,element:u.jsx(Dn,{allowedRoles:["teacher"],children:u.jsx(U7,{})})}),u.jsx(zt,{path:ge.TEACHER.REPORTS,element:u.jsx(Dn,{allowedRoles:["teacher"],children:u.jsx(m$,{})})}),u.jsx(zt,{path:ge.STUDENT.DASHBOARD,element:u.jsx(Dn,{allowedRoles:["student"],children:u.jsx(sF,{})})}),u.jsx(zt,{path:ge.STUDENT.QUIZZES,element:u.jsx(Dn,{allowedRoles:["student"],children:u.jsx(dG,{})})}),u.jsx(zt,{path:ge.STUDENT.QUIZ_PLAYER,element:u.jsx(Dn,{allowedRoles:["student"],children:u.jsx(VF,{})})}),u.jsx(zt,{path:ge.STUDENT.QUIZ_RESULT,element:u.jsx(Dn,{allowedRoles:["student"],children:u.jsx(UG,{})})}),u.jsx(zt,{path:ge.STUDENT.RESULTS,element:u.jsx(Dn,{allowedRoles:["student"],children:u.jsx(_Q,{})})}),u.jsx(zt,{path:ge.ADMIN.DASHBOARD,element:u.jsx(Dn,{allowedRoles:["admin"],children:u.jsx(qg,{title:"Ynetici Paneli"})})})]}),u.jsx(zt,{path:"*",element:u.jsx(mf,{to:ge.LOGIN,replace:!0})})]}),u.jsx(WL,{})]})};QI.createRoot(document.getElementById("root")).render(u.jsx(uo.StrictMode,{children:u.jsx(yQ,{})}));
