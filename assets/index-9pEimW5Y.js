(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function _T(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var fg={exports:{}},ru={};var cb;function z2(){if(cb)return ru;cb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,o,l){var d=null;if(l!==void 0&&(d=""+l),o.key!==void 0&&(d=""+o.key),"key"in o){l={};for(var m in o)m!=="key"&&(l[m]=o[m])}else l=o;return o=l.ref,{$$typeof:s,type:a,key:d,ref:o!==void 0?o:null,props:l}}return ru.Fragment=e,ru.jsx=t,ru.jsxs=t,ru}var ub;function L2(){return ub||(ub=1,fg.exports=z2()),fg.exports}var u=L2(),mg={exports:{}},Be={};var db;function P2(){if(db)return Be;db=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),S=Symbol.iterator;function N(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,j={};function B(O,Y,F){this.props=O,this.context=Y,this.refs=j,this.updater=F||M}B.prototype.isReactComponent={},B.prototype.setState=function(O,Y){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Y,"setState")},B.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function H(){}H.prototype=B.prototype;function z(O,Y,F){this.props=O,this.context=Y,this.refs=j,this.updater=F||M}var G=z.prototype=new H;G.constructor=z,P(G,B.prototype),G.isPureReactComponent=!0;var de=Array.isArray;function X(){}var k={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function C(O,Y,F){var oe=F.ref;return{$$typeof:s,type:O,key:Y,ref:oe!==void 0?oe:null,props:F}}function L(O,Y){return C(O.type,Y,O.props)}function D(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function U(O){var Y={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(F){return Y[F]})}var A=/\/+/g;function pe(O,Y){return typeof O=="object"&&O!==null&&O.key!=null?U(""+O.key):Y.toString(36)}function Re(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(X,X):(O.status="pending",O.then(function(Y){O.status==="pending"&&(O.status="fulfilled",O.value=Y)},function(Y){O.status==="pending"&&(O.status="rejected",O.reason=Y)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Z(O,Y,F,oe,me){var he=typeof O;(he==="undefined"||he==="boolean")&&(O=null);var Ne=!1;if(O===null)Ne=!0;else switch(he){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(O.$$typeof){case s:case e:Ne=!0;break;case v:return Ne=O._init,Z(Ne(O._payload),Y,F,oe,me)}}if(Ne)return me=me(O),Ne=oe===""?"."+pe(O,0):oe,de(me)?(F="",Ne!=null&&(F=Ne.replace(A,"$&/")+"/"),Z(me,Y,F,"",function(we){return we})):me!=null&&(D(me)&&(me=L(me,F+(me.key==null||O&&O.key===me.key?"":(""+me.key).replace(A,"$&/")+"/")+Ne)),Y.push(me)),1;Ne=0;var ce=oe===""?".":oe+":";if(de(O))for(var fe=0;fe<O.length;fe++)oe=O[fe],he=ce+pe(oe,fe),Ne+=Z(oe,Y,F,he,me);else if(fe=N(O),typeof fe=="function")for(O=fe.call(O),fe=0;!(oe=O.next()).done;)oe=oe.value,he=ce+pe(oe,fe++),Ne+=Z(oe,Y,F,he,me);else if(he==="object"){if(typeof O.then=="function")return Z(Re(O),Y,F,oe,me);throw Y=String(O),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function ge(O,Y,F){if(O==null)return O;var oe=[],me=0;return Z(O,oe,"","",function(he){return Y.call(F,he,me++)}),oe}function Ae(O){if(O._status===-1){var Y=O._result;Y=Y(),Y.then(function(F){(O._status===0||O._status===-1)&&(O._status=1,O._result=F)},function(F){(O._status===0||O._status===-1)&&(O._status=2,O._result=F)}),O._status===-1&&(O._status=0,O._result=Y)}if(O._status===1)return O._result.default;throw O._result}var Fe=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},ue={map:ge,forEach:function(O,Y,F){ge(O,function(){Y.apply(this,arguments)},F)},count:function(O){var Y=0;return ge(O,function(){Y++}),Y},toArray:function(O){return ge(O,function(Y){return Y})||[]},only:function(O){if(!D(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Be.Activity=b,Be.Children=ue,Be.Component=B,Be.Fragment=t,Be.Profiler=o,Be.PureComponent=z,Be.StrictMode=a,Be.Suspense=g,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Be.__COMPILER_RUNTIME={__proto__:null,c:function(O){return k.H.useMemoCache(O)}},Be.cache=function(O){return function(){return O.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(O,Y,F){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var oe=P({},O.props),me=O.key;if(Y!=null)for(he in Y.key!==void 0&&(me=""+Y.key),Y)!I.call(Y,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&Y.ref===void 0||(oe[he]=Y[he]);var he=arguments.length-2;if(he===1)oe.children=F;else if(1<he){for(var Ne=Array(he),ce=0;ce<he;ce++)Ne[ce]=arguments[ce+2];oe.children=Ne}return C(O.type,me,oe)},Be.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Be.createElement=function(O,Y,F){var oe,me={},he=null;if(Y!=null)for(oe in Y.key!==void 0&&(he=""+Y.key),Y)I.call(Y,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(me[oe]=Y[oe]);var Ne=arguments.length-2;if(Ne===1)me.children=F;else if(1<Ne){for(var ce=Array(Ne),fe=0;fe<Ne;fe++)ce[fe]=arguments[fe+2];me.children=ce}if(O&&O.defaultProps)for(oe in Ne=O.defaultProps,Ne)me[oe]===void 0&&(me[oe]=Ne[oe]);return C(O,he,me)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(O){return{$$typeof:m,render:O}},Be.isValidElement=D,Be.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:Ae}},Be.memo=function(O,Y){return{$$typeof:_,type:O,compare:Y===void 0?null:Y}},Be.startTransition=function(O){var Y=k.T,F={};k.T=F;try{var oe=O(),me=k.S;me!==null&&me(F,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(X,Fe)}catch(he){Fe(he)}finally{Y!==null&&F.types!==null&&(Y.types=F.types),k.T=Y}},Be.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Be.use=function(O){return k.H.use(O)},Be.useActionState=function(O,Y,F){return k.H.useActionState(O,Y,F)},Be.useCallback=function(O,Y){return k.H.useCallback(O,Y)},Be.useContext=function(O){return k.H.useContext(O)},Be.useDebugValue=function(){},Be.useDeferredValue=function(O,Y){return k.H.useDeferredValue(O,Y)},Be.useEffect=function(O,Y){return k.H.useEffect(O,Y)},Be.useEffectEvent=function(O){return k.H.useEffectEvent(O)},Be.useId=function(){return k.H.useId()},Be.useImperativeHandle=function(O,Y,F){return k.H.useImperativeHandle(O,Y,F)},Be.useInsertionEffect=function(O,Y){return k.H.useInsertionEffect(O,Y)},Be.useLayoutEffect=function(O,Y){return k.H.useLayoutEffect(O,Y)},Be.useMemo=function(O,Y){return k.H.useMemo(O,Y)},Be.useOptimistic=function(O,Y){return k.H.useOptimistic(O,Y)},Be.useReducer=function(O,Y,F){return k.H.useReducer(O,Y,F)},Be.useRef=function(O){return k.H.useRef(O)},Be.useState=function(O){return k.H.useState(O)},Be.useSyncExternalStore=function(O,Y,F){return k.H.useSyncExternalStore(O,Y,F)},Be.useTransition=function(){return k.H.useTransition()},Be.version="19.2.4",Be}var hb;function S_(){return hb||(hb=1,mg.exports=P2()),mg.exports}var w=S_();const ao=_T(w);var pg={exports:{}},ou={},gg={exports:{}},_g={};var fb;function V2(){return fb||(fb=1,(function(s){function e(Z,ge){var Ae=Z.length;Z.push(ge);e:for(;0<Ae;){var Fe=Ae-1>>>1,ue=Z[Fe];if(0<o(ue,ge))Z[Fe]=ge,Z[Ae]=ue,Ae=Fe;else break e}}function t(Z){return Z.length===0?null:Z[0]}function a(Z){if(Z.length===0)return null;var ge=Z[0],Ae=Z.pop();if(Ae!==ge){Z[0]=Ae;e:for(var Fe=0,ue=Z.length,O=ue>>>1;Fe<O;){var Y=2*(Fe+1)-1,F=Z[Y],oe=Y+1,me=Z[oe];if(0>o(F,Ae))oe<ue&&0>o(me,F)?(Z[Fe]=me,Z[oe]=Ae,Fe=oe):(Z[Fe]=F,Z[Y]=Ae,Fe=Y);else if(oe<ue&&0>o(me,Ae))Z[Fe]=me,Z[oe]=Ae,Fe=oe;else break e}}return ge}function o(Z,ge){var Ae=Z.sortIndex-ge.sortIndex;return Ae!==0?Ae:Z.id-ge.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var d=Date,m=d.now();s.unstable_now=function(){return d.now()-m}}var g=[],_=[],v=1,b=null,S=3,N=!1,M=!1,P=!1,j=!1,B=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function G(Z){for(var ge=t(_);ge!==null;){if(ge.callback===null)a(_);else if(ge.startTime<=Z)a(_),ge.sortIndex=ge.expirationTime,e(g,ge);else break;ge=t(_)}}function de(Z){if(P=!1,G(Z),!M)if(t(g)!==null)M=!0,X||(X=!0,U());else{var ge=t(_);ge!==null&&Re(de,ge.startTime-Z)}}var X=!1,k=-1,I=5,C=-1;function L(){return j?!0:!(s.unstable_now()-C<I)}function D(){if(j=!1,X){var Z=s.unstable_now();C=Z;var ge=!0;try{e:{M=!1,P&&(P=!1,H(k),k=-1),N=!0;var Ae=S;try{t:{for(G(Z),b=t(g);b!==null&&!(b.expirationTime>Z&&L());){var Fe=b.callback;if(typeof Fe=="function"){b.callback=null,S=b.priorityLevel;var ue=Fe(b.expirationTime<=Z);if(Z=s.unstable_now(),typeof ue=="function"){b.callback=ue,G(Z),ge=!0;break t}b===t(g)&&a(g),G(Z)}else a(g);b=t(g)}if(b!==null)ge=!0;else{var O=t(_);O!==null&&Re(de,O.startTime-Z),ge=!1}}break e}finally{b=null,S=Ae,N=!1}ge=void 0}}finally{ge?U():X=!1}}}var U;if(typeof z=="function")U=function(){z(D)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,pe=A.port2;A.port1.onmessage=D,U=function(){pe.postMessage(null)}}else U=function(){B(D,0)};function Re(Z,ge){k=B(function(){Z(s.unstable_now())},ge)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Z){Z.callback=null},s.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Z?Math.floor(1e3/Z):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(Z){switch(S){case 1:case 2:case 3:var ge=3;break;default:ge=S}var Ae=S;S=ge;try{return Z()}finally{S=Ae}},s.unstable_requestPaint=function(){j=!0},s.unstable_runWithPriority=function(Z,ge){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var Ae=S;S=Z;try{return ge()}finally{S=Ae}},s.unstable_scheduleCallback=function(Z,ge,Ae){var Fe=s.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?Fe+Ae:Fe):Ae=Fe,Z){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Ae+ue,Z={id:v++,callback:ge,priorityLevel:Z,startTime:Ae,expirationTime:ue,sortIndex:-1},Ae>Fe?(Z.sortIndex=Ae,e(_,Z),t(g)===null&&Z===t(_)&&(P?(H(k),k=-1):P=!0,Re(de,Ae-Fe))):(Z.sortIndex=ue,e(g,Z),M||N||(M=!0,X||(X=!0,U()))),Z},s.unstable_shouldYield=L,s.unstable_wrapCallback=function(Z){var ge=S;return function(){var Ae=S;S=ge;try{return Z.apply(this,arguments)}finally{S=Ae}}}})(_g)),_g}var mb;function U2(){return mb||(mb=1,gg.exports=V2()),gg.exports}var yg={exports:{}},Nn={};var pb;function B2(){if(pb)return Nn;pb=1;var s=S_();function e(g){var _="https://react.dev/errors/"+g;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)_+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(g,_,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:_,implementation:v}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,_){if(g==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Nn.createPortal=function(g,_){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return l(g,_,null,v)},Nn.flushSync=function(g){var _=d.T,v=a.p;try{if(d.T=null,a.p=2,g)return g()}finally{d.T=_,a.p=v,a.d.f()}},Nn.preconnect=function(g,_){typeof g=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,a.d.C(g,_))},Nn.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},Nn.preinit=function(g,_){if(typeof g=="string"&&_&&typeof _.as=="string"){var v=_.as,b=m(v,_.crossOrigin),S=typeof _.integrity=="string"?_.integrity:void 0,N=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;v==="style"?a.d.S(g,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:b,integrity:S,fetchPriority:N}):v==="script"&&a.d.X(g,{crossOrigin:b,integrity:S,fetchPriority:N,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Nn.preinitModule=function(g,_){if(typeof g=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var v=m(_.as,_.crossOrigin);a.d.M(g,{crossOrigin:v,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&a.d.M(g)},Nn.preload=function(g,_){if(typeof g=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var v=_.as,b=m(v,_.crossOrigin);a.d.L(g,v,{crossOrigin:b,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Nn.preloadModule=function(g,_){if(typeof g=="string")if(_){var v=m(_.as,_.crossOrigin);a.d.m(g,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:v,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else a.d.m(g)},Nn.requestFormReset=function(g){a.d.r(g)},Nn.unstable_batchedUpdates=function(g,_){return g(_)},Nn.useFormState=function(g,_,v){return d.H.useFormState(g,_,v)},Nn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Nn.version="19.2.4",Nn}var gb;function yT(){if(gb)return yg.exports;gb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),yg.exports=B2(),yg.exports}var _b;function q2(){if(_b)return ou;_b=1;var s=U2(),e=S_(),t=yT();function a(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,r=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(r=i.return),n=i.return;while(n)}return i.tag===3?r:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(a(188))}function _(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(a(188));return i!==n?null:n}for(var r=n,c=i;;){var f=r.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){r=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===r)return g(f),n;if(p===c)return g(f),i;p=p.sibling}throw Error(a(188))}if(r.return!==c.return)r=f,c=p;else{for(var E=!1,x=f.child;x;){if(x===r){E=!0,r=f,c=p;break}if(x===c){E=!0,c=f,r=p;break}x=x.sibling}if(!E){for(x=p.child;x;){if(x===r){E=!0,r=p,c=f;break}if(x===c){E=!0,c=p,r=f;break}x=x.sibling}if(!E)throw Error(a(189))}}if(r.alternate!==c)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?n:i}function v(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=v(n),i!==null)return i;n=n.sibling}return null}var b=Object.assign,S=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),z=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var A=Symbol.for("react.client.reference");function pe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===A?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case B:return"Profiler";case j:return"StrictMode";case de:return"Suspense";case X:return"SuspenseList";case C:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case M:return"Portal";case z:return n.displayName||"Context";case H:return(n._context.displayName||"Context")+".Consumer";case G:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case k:return i=n.displayName||null,i!==null?i:pe(n.type)||"Memo";case I:i=n._payload,n=n._init;try{return pe(n(i))}catch{}}return null}var Re=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ae={pending:!1,data:null,method:null,action:null},Fe=[],ue=-1;function O(n){return{current:n}}function Y(n){0>ue||(n.current=Fe[ue],Fe[ue]=null,ue--)}function F(n,i){ue++,Fe[ue]=n.current,n.current=i}var oe=O(null),me=O(null),he=O(null),Ne=O(null);function ce(n,i){switch(F(he,i),F(me,n),F(oe,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?j0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=j0(i),n=D0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Y(oe),F(oe,n)}function fe(){Y(oe),Y(me),Y(he)}function we(n){n.memoizedState!==null&&F(Ne,n);var i=oe.current,r=D0(i,n.type);i!==r&&(F(me,n),F(oe,r))}function it(n){me.current===n&&(Y(oe),Y(me)),Ne.current===n&&(Y(Ne),nu._currentValue=Ae)}var It,Hn;function Rn(n){if(It===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);It=i&&i[1]||"",Hn=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+It+n+Hn}var wr=!1;function Ir(n,i){if(!n||wr)return"";wr=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(te){var J=te}Reflect.construct(n,[],re)}else{try{re.call()}catch(te){J=te}n.call(re.prototype)}}else{try{throw Error()}catch(te){J=te}(re=n())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(te){if(te&&J&&typeof te.stack=="string")return[te.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),E=p[0],x=p[1];if(E&&x){var V=E.split(`
`),W=x.split(`
`);for(f=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;f<W.length&&!W[f].includes("DetermineComponentFrameRoot");)f++;if(c===V.length||f===W.length)for(c=V.length-1,f=W.length-1;1<=c&&0<=f&&V[c]!==W[f];)f--;for(;1<=c&&0<=f;c--,f--)if(V[c]!==W[f]){if(c!==1||f!==1)do if(c--,f--,0>f||V[c]!==W[f]){var se=`
`+V[c].replace(" at new "," at ");return n.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",n.displayName)),se}while(1<=c&&0<=f);break}}}finally{wr=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?Rn(r):""}function sc(n,i){switch(n.tag){case 26:case 27:case 5:return Rn(n.type);case 16:return Rn("Lazy");case 13:return n.child!==i&&i!==null?Rn("Suspense Fallback"):Rn("Suspense");case 19:return Rn("SuspenseList");case 0:case 15:return Ir(n.type,!1);case 11:return Ir(n.type.render,!1);case 1:return Ir(n.type,!0);case 31:return Rn("Activity");default:return""}}function ic(n){try{var i="",r=null;do i+=sc(n,r),r=n,n=n.return;while(n);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Gt=Object.prototype.hasOwnProperty,rn=s.unstable_scheduleCallback,ma=s.unstable_cancelCallback,pm=s.unstable_shouldYield,fd=s.unstable_requestPaint,Ln=s.unstable_now,Rr=s.unstable_getCurrentPriorityLevel,ac=s.unstable_ImmediatePriority,rc=s.unstable_UserBlockingPriority,pa=s.unstable_NormalPriority,gm=s.unstable_LowPriority,md=s.unstable_IdlePriority,pd=s.log,gd=s.unstable_setDisableYieldValue,Ms=null,pn=null;function ys(n){if(typeof pd=="function"&&gd(n),pn&&typeof pn.setStrictMode=="function")try{pn.setStrictMode(Ms,n)}catch{}}var Pt=Math.clz32?Math.clz32:yd,_d=Math.log,zo=Math.LN2;function yd(n){return n>>>=0,n===0?32:31-(_d(n)/zo|0)|0}var ni=256,Nr=262144,Qt=4194304;function si(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ii(n,i,r){var c=n.pendingLanes;if(c===0)return 0;var f=0,p=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var x=c&134217727;return x!==0?(c=x&~p,c!==0?f=si(c):(E&=x,E!==0?f=si(E):r||(r=x&~n,r!==0&&(f=si(r))))):(x=c&~p,x!==0?f=si(x):E!==0?f=si(E):r||(r=c&~n,r!==0&&(f=si(r)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,r=i&-i,p>=r||p===32&&(r&4194048)!==0)?i:f}function zs(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function _m(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vd(){var n=Qt;return Qt<<=1,(Qt&62914560)===0&&(Qt=4194304),n}function ai(n){for(var i=[],r=0;31>r;r++)i.push(n);return i}function Cr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ym(n,i,r,c,f,p){var E=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var x=n.entanglements,V=n.expirationTimes,W=n.hiddenUpdates;for(r=E&~r;0<r;){var se=31-Pt(r),re=1<<se;x[se]=0,V[se]=-1;var J=W[se];if(J!==null)for(W[se]=null,se=0;se<J.length;se++){var te=J[se];te!==null&&(te.lane&=-536870913)}r&=~re}c!==0&&kr(n,c,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(E&~i))}function kr(n,i,r){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-Pt(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|r&261930}function oc(n,i){var r=n.entangledLanes|=i;for(n=n.entanglements;r;){var c=31-Pt(r),f=1<<c;f&i|n[c]&i&&(n[c]|=i),r&=~f}}function lc(n,i){var r=i&-i;return r=(r&42)!==0?1:jr(r),(r&(n.suspendedLanes|i))!==0?0:r}function jr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Li(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function bd(){var n=ge.p;return n!==0?n:(n=window.event,n===void 0?32:nb(n.type))}function Ls(n,i){var r=ge.p;try{return ge.p=n,i()}finally{ge.p=r}}var Ps=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Ps,un="__reactProps$"+Ps,ri="__reactContainer$"+Ps,Lo="__reactEvents$"+Ps,vm="__reactListeners$"+Ps,Ed="__reactHandles$"+Ps,Td="__reactResources$"+Ps,oi="__reactMarker$"+Ps;function Po(n){delete n[Kt],delete n[un],delete n[Lo],delete n[vm],delete n[Ed]}function li(n){var i=n[Kt];if(i)return i;for(var r=n.parentNode;r;){if(i=r[ri]||r[Kt]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(n=U0(n);n!==null;){if(r=n[Kt])return r;n=U0(n)}return i}n=r,r=n.parentNode}return null}function vs(n){if(n=n[Kt]||n[ri]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function es(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(a(33))}function ci(n){var i=n[Td];return i||(i=n[Td]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Yt(n){n[oi]=!0}var cc=new Set,uc={};function ui(n,i){di(n,i),di(n+"Capture",i)}function di(n,i){for(uc[n]=i,n=0;n<i.length;n++)cc.add(i[n])}var dc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hc={},fc={};function Sd(n){return Gt.call(fc,n)?!0:Gt.call(hc,n)?!1:dc.test(n)?fc[n]=!0:(hc[n]=!0,!1)}function Vo(n,i,r){if(Sd(i))if(r===null)n.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+r)}}function ts(n,i,r){if(r===null)n.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+r)}}function Wt(n,i,r,c){if(c===null)n.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(i,r,""+c)}}function dn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ga(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function mc(n,i,r){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,p=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){r=""+E,p.call(this,E)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(E){r=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function ft(n){if(!n._valueTracker){var i=ga(n)?"checked":"value";n._valueTracker=mc(n,i,""+n[i])}}function Dr(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var r=i.getValue(),c="";return n&&(c=ga(n)?n.checked?"true":"false":n.value),n=c,n!==r?(i.setValue(n),!0):!1}function hi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Or=/[\n"\\]/g;function $n(n){return n.replace(Or,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Uo(n,i,r,c,f,p,E,x){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),i!=null?E==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+dn(i)):n.value!==""+dn(i)&&(n.value=""+dn(i)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),i!=null?pc(n,E,dn(i)):r!=null?pc(n,E,dn(r)):c!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.name=""+dn(x):n.removeAttribute("name")}function Ad(n,i,r,c,f,p,E,x){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),i!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){ft(n);return}r=r!=null?""+dn(r):"",i=i!=null?""+dn(i):r,x||i===n.value||(n.value=i),n.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=x?n.checked:!!c,n.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E),ft(n)}function pc(n,i,r){i==="number"&&hi(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function _a(n,i,r,c){if(n=n.options,i){i={};for(var f=0;f<r.length;f++)i["$"+r[f]]=!0;for(r=0;r<n.length;r++)f=i.hasOwnProperty("$"+n[r].value),n[r].selected!==f&&(n[r].selected=f),f&&c&&(n[r].defaultSelected=!0)}else{for(r=""+dn(r),i=null,f=0;f<n.length;f++){if(n[f].value===r){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function xd(n,i,r){if(i!=null&&(i=""+dn(i),i!==n.value&&(n.value=i),r==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=r!=null?""+dn(r):""}function ya(n,i,r,c){if(i==null){if(c!=null){if(r!=null)throw Error(a(92));if(Re(c)){if(1<c.length)throw Error(a(93));c=c[0]}r=c}r==null&&(r=""),i=r}r=dn(i),n.defaultValue=r,c=n.textContent,c===r&&c!==""&&c!==null&&(n.value=c),ft(n)}function Fn(n,i){if(i){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=i;return}}n.textContent=i}var wd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gc(n,i,r){var c=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,r):typeof r!="number"||r===0||wd.has(i)?i==="float"?n.cssFloat=r:n[i]=(""+r).trim():n[i]=r+"px"}function _c(n,i,r){if(i!=null&&typeof i!="object")throw Error(a(62));if(n=n.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&r[f]!==c&&gc(n,f,c)}else for(var p in i)i.hasOwnProperty(p)&&gc(n,p,i[p])}function Bo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Id=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),va=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qo(n){return va.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Vs(){}var yc=null;function bs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ba=null,fi=null;function Mr(n){var i=vs(n);if(i&&(n=i.stateNode)){var r=n[un]||null;e:switch(n=i.stateNode,i.type){case"input":if(Uo(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+$n(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var c=r[i];if(c!==n&&c.form===n.form){var f=c[un]||null;if(!f)throw Error(a(90));Uo(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<r.length;i++)c=r[i],c.form===n.form&&Dr(c)}break e;case"textarea":xd(n,r.value,r.defaultValue);break e;case"select":i=r.value,i!=null&&_a(n,!!r.multiple,i,!1)}}}var Ho=!1;function Ea(n,i,r){if(Ho)return n(i,r);Ho=!0;try{var c=n(i);return c}finally{if(Ho=!1,(ba!==null||fi!==null)&&(bh(),ba&&(i=ba,n=fi,fi=ba=null,Mr(i),n)))for(i=0;i<n.length;i++)Mr(n[i])}}function Us(n,i){var r=n.stateNode;if(r===null)return null;var c=r[un]||null;if(c===null)return null;r=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(a(231,i,typeof r));return r}var Es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zr=!1;if(Es)try{var gt={};Object.defineProperty(gt,"passive",{get:function(){zr=!0}}),window.addEventListener("test",gt,gt),window.removeEventListener("test",gt,gt)}catch{zr=!1}var mi=null,vc=null,Lr=null;function bc(){if(Lr)return Lr;var n,i=vc,r=i.length,c,f="value"in mi?mi.value:mi.textContent,p=f.length;for(n=0;n<r&&i[n]===f[n];n++);var E=r-n;for(c=1;c<=E&&i[r-c]===f[p-c];c++);return Lr=f.slice(n,1<c?1-c:void 0)}function Pr(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Pi(){return!0}function Bs(){return!1}function gn(n){function i(r,c,f,p,E){this._reactName=r,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var x in n)n.hasOwnProperty(x)&&(r=n[x],this[x]=r?r(p):p[x]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Pi:Bs,this.isPropagationStopped=Bs,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),i}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pi=gn(Vi),Ta=b({},Vi,{view:0,detail:0}),Ec=gn(Ta),Sa,$o,gi,Fo=b({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Aa,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==gi&&(gi&&n.type==="mousemove"?(Sa=n.screenX-gi.screenX,$o=n.screenY-gi.screenY):$o=Sa=0,gi=n),Sa)},movementY:function(n){return"movementY"in n?n.movementY:$o}}),Tc=gn(Fo),Vr=b({},Fo,{dataTransfer:0}),Rd=gn(Vr),Nd=b({},Ta,{relatedTarget:0}),Ur=gn(Nd),Sc=b({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),Cd=gn(Sc),Go=b({},Vi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),kd=gn(Go),jd=b({},Vi,{data:0}),_i=gn(jd),Dd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Od={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Md={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zd(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Md[n])?!!i[n]:!1}function Aa(){return zd}var Pn=b({},Ta,{key:function(n){if(n.key){var i=Dd[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Pr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Od[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Aa,charCode:function(n){return n.type==="keypress"?Pr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Pr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ld=gn(Pn),Pd=b({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ui=gn(Pd),h=b({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Aa}),y=gn(h),T=b({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=gn(T),Q=b({},Fo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ee=gn(Q),_e=b({},Vi,{newState:0,oldState:0}),He=gn(_e),Vt=[9,13,27,32],ct=Es&&"CompositionEvent"in window,Rt=null;Es&&"documentMode"in document&&(Rt=document.documentMode);var Ts=Es&&"TextEvent"in window&&!Rt,yi=Es&&(!ct||Rt&&8<Rt&&11>=Rt),qs=" ",Hs=!1;function Br(n,i){switch(n){case"keyup":return Vt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ko=!1;function rw(n,i){switch(n){case"compositionend":return Qo(i);case"keypress":return i.which!==32?null:(Hs=!0,qs);case"textInput":return n=i.data,n===qs&&Hs?null:n;default:return null}}function ow(n,i){if(Ko)return n==="compositionend"||!ct&&Br(n,i)?(n=bc(),Lr=vc=mi=null,Ko=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return yi&&i.locale!=="ko"?null:i.data;default:return null}}var lw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hy(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!lw[n.type]:i==="textarea"}function $y(n,i,r,c){ba?fi?fi.push(c):fi=[c]:ba=c,i=Ih(i,"onChange"),0<i.length&&(r=new pi("onChange","change",null,r,c),n.push({event:r,listeners:i}))}var Ac=null,xc=null;function cw(n){w0(n,0)}function Vd(n){var i=es(n);if(Dr(i))return n}function Fy(n,i){if(n==="change")return i}var Gy=!1;if(Es){var bm;if(Es){var Em="oninput"in document;if(!Em){var Qy=document.createElement("div");Qy.setAttribute("oninput","return;"),Em=typeof Qy.oninput=="function"}bm=Em}else bm=!1;Gy=bm&&(!document.documentMode||9<document.documentMode)}function Ky(){Ac&&(Ac.detachEvent("onpropertychange",Yy),xc=Ac=null)}function Yy(n){if(n.propertyName==="value"&&Vd(xc)){var i=[];$y(i,xc,n,bs(n)),Ea(cw,i)}}function uw(n,i,r){n==="focusin"?(Ky(),Ac=i,xc=r,Ac.attachEvent("onpropertychange",Yy)):n==="focusout"&&Ky()}function dw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Vd(xc)}function hw(n,i){if(n==="click")return Vd(i)}function fw(n,i){if(n==="input"||n==="change")return Vd(i)}function mw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var ns=typeof Object.is=="function"?Object.is:mw;function wc(n,i){if(ns(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var r=Object.keys(n),c=Object.keys(i);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var f=r[c];if(!Gt.call(i,f)||!ns(n[f],i[f]))return!1}return!0}function Wy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Xy(n,i){var r=Wy(n);n=0;for(var c;r;){if(r.nodeType===3){if(c=n+r.textContent.length,n<=i&&c>=i)return{node:r,offset:i-n};n=c}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Wy(r)}}function Zy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Zy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Jy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=hi(n.document);i instanceof n.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)n=i.contentWindow;else break;i=hi(n.document)}return i}function Tm(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var pw=Es&&"documentMode"in document&&11>=document.documentMode,Yo=null,Sm=null,Ic=null,Am=!1;function ev(n,i,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Am||Yo==null||Yo!==hi(c)||(c=Yo,"selectionStart"in c&&Tm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ic&&wc(Ic,c)||(Ic=c,c=Ih(Sm,"onSelect"),0<c.length&&(i=new pi("onSelect","select",null,i,r),n.push({event:i,listeners:c}),i.target=Yo)))}function qr(n,i){var r={};return r[n.toLowerCase()]=i.toLowerCase(),r["Webkit"+n]="webkit"+i,r["Moz"+n]="moz"+i,r}var Wo={animationend:qr("Animation","AnimationEnd"),animationiteration:qr("Animation","AnimationIteration"),animationstart:qr("Animation","AnimationStart"),transitionrun:qr("Transition","TransitionRun"),transitionstart:qr("Transition","TransitionStart"),transitioncancel:qr("Transition","TransitionCancel"),transitionend:qr("Transition","TransitionEnd")},xm={},tv={};Es&&(tv=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function Hr(n){if(xm[n])return xm[n];if(!Wo[n])return n;var i=Wo[n],r;for(r in i)if(i.hasOwnProperty(r)&&r in tv)return xm[n]=i[r];return n}var nv=Hr("animationend"),sv=Hr("animationiteration"),iv=Hr("animationstart"),gw=Hr("transitionrun"),_w=Hr("transitionstart"),yw=Hr("transitioncancel"),av=Hr("transitionend"),rv=new Map,wm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wm.push("scrollEnd");function $s(n,i){rv.set(n,i),ui(i,[n])}var Ud=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Ss=[],Xo=0,Im=0;function Bd(){for(var n=Xo,i=Im=Xo=0;i<n;){var r=Ss[i];Ss[i++]=null;var c=Ss[i];Ss[i++]=null;var f=Ss[i];Ss[i++]=null;var p=Ss[i];if(Ss[i++]=null,c!==null&&f!==null){var E=c.pending;E===null?f.next=f:(f.next=E.next,E.next=f),c.pending=f}p!==0&&ov(r,f,p)}}function qd(n,i,r,c){Ss[Xo++]=n,Ss[Xo++]=i,Ss[Xo++]=r,Ss[Xo++]=c,Im|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Rm(n,i,r,c){return qd(n,i,r,c),Hd(n)}function $r(n,i){return qd(n,null,null,i),Hd(n)}function ov(n,i,r){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r);for(var f=!1,p=n.return;p!==null;)p.childLanes|=r,c=p.alternate,c!==null&&(c.childLanes|=r),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&i!==null&&(f=31-Pt(r),n=p.hiddenUpdates,c=n[f],c===null?n[f]=[i]:c.push(i),i.lane=r|536870912),p):null}function Hd(n){if(50<Yc)throw Yc=0,Lp=null,Error(a(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Zo={};function vw(n,i,r,c){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(n,i,r,c){return new vw(n,i,r,c)}function Nm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Bi(n,i){var r=n.alternate;return r===null?(r=ss(n.tag,i,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=i,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,i=n.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function lv(n,i){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,i=r.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function $d(n,i,r,c,f,p){var E=0;if(c=n,typeof n=="function")Nm(n)&&(E=1);else if(typeof n=="string")E=A2(n,r,oe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case C:return n=ss(31,r,i,f),n.elementType=C,n.lanes=p,n;case P:return Fr(r.children,f,p,i);case j:E=8,f|=24;break;case B:return n=ss(12,r,i,f|2),n.elementType=B,n.lanes=p,n;case de:return n=ss(13,r,i,f),n.elementType=de,n.lanes=p,n;case X:return n=ss(19,r,i,f),n.elementType=X,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case z:E=10;break e;case H:E=9;break e;case G:E=11;break e;case k:E=14;break e;case I:E=16,c=null;break e}E=29,r=Error(a(130,n===null?"null":typeof n,"")),c=null}return i=ss(E,r,i,f),i.elementType=n,i.type=c,i.lanes=p,i}function Fr(n,i,r,c){return n=ss(7,n,c,i),n.lanes=r,n}function Cm(n,i,r){return n=ss(6,n,null,i),n.lanes=r,n}function cv(n){var i=ss(18,null,null,0);return i.stateNode=n,i}function km(n,i,r){return i=ss(4,n.children!==null?n.children:[],n.key,i),i.lanes=r,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var uv=new WeakMap;function As(n,i){if(typeof n=="object"&&n!==null){var r=uv.get(n);return r!==void 0?r:(i={value:n,source:i,stack:ic(i)},uv.set(n,i),i)}return{value:n,source:i,stack:ic(i)}}var Jo=[],el=0,Fd=null,Rc=0,xs=[],ws=0,xa=null,vi=1,bi="";function qi(n,i){Jo[el++]=Rc,Jo[el++]=Fd,Fd=n,Rc=i}function dv(n,i,r){xs[ws++]=vi,xs[ws++]=bi,xs[ws++]=xa,xa=n;var c=vi;n=bi;var f=32-Pt(c)-1;c&=~(1<<f),r+=1;var p=32-Pt(i)+f;if(30<p){var E=f-f%5;p=(c&(1<<E)-1).toString(32),c>>=E,f-=E,vi=1<<32-Pt(i)+f|r<<f|c,bi=p+n}else vi=1<<p|r<<f|c,bi=n}function jm(n){n.return!==null&&(qi(n,1),dv(n,1,0))}function Dm(n){for(;n===Fd;)Fd=Jo[--el],Jo[el]=null,Rc=Jo[--el],Jo[el]=null;for(;n===xa;)xa=xs[--ws],xs[ws]=null,bi=xs[--ws],xs[ws]=null,vi=xs[--ws],xs[ws]=null}function hv(n,i){xs[ws++]=vi,xs[ws++]=bi,xs[ws++]=xa,vi=i.id,bi=i.overflow,xa=n}var _n=null,At=null,nt=!1,wa=null,Is=!1,Om=Error(a(519));function Ia(n){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nc(As(i,n)),Om}function fv(n){var i=n.stateNode,r=n.type,c=n.memoizedProps;switch(i[Kt]=n,i[un]=c,r){case"dialog":We("cancel",i),We("close",i);break;case"iframe":case"object":case"embed":We("load",i);break;case"video":case"audio":for(r=0;r<Xc.length;r++)We(Xc[r],i);break;case"source":We("error",i);break;case"img":case"image":case"link":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"input":We("invalid",i),Ad(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":We("invalid",i);break;case"textarea":We("invalid",i),ya(i,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||c.suppressHydrationWarning===!0||C0(i.textContent,r)?(c.popover!=null&&(We("beforetoggle",i),We("toggle",i)),c.onScroll!=null&&We("scroll",i),c.onScrollEnd!=null&&We("scrollend",i),c.onClick!=null&&(i.onclick=Vs),i=!0):i=!1,i||Ia(n,!0)}function mv(n){for(_n=n.return;_n;)switch(_n.tag){case 5:case 31:case 13:Is=!1;return;case 27:case 3:Is=!0;return;default:_n=_n.return}}function tl(n){if(n!==_n)return!1;if(!nt)return mv(n),nt=!0,!1;var i=n.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||Zp(n.type,n.memoizedProps)),r=!r),r&&At&&Ia(n),mv(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));At=V0(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));At=V0(n)}else i===27?(i=At,Ba(n.type)?(n=sg,sg=null,At=n):At=i):At=_n?Ns(n.stateNode.nextSibling):null;return!0}function Gr(){At=_n=null,nt=!1}function Mm(){var n=wa;return n!==null&&(Yn===null?Yn=n:Yn.push.apply(Yn,n),wa=null),n}function Nc(n){wa===null?wa=[n]:wa.push(n)}var zm=O(null),Qr=null,Hi=null;function Ra(n,i,r){F(zm,i._currentValue),i._currentValue=r}function $i(n){n._currentValue=zm.current,Y(zm)}function Lm(n,i,r){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===r)break;n=n.return}}function Pm(n,i,r,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var E=f.child;p=p.firstContext;e:for(;p!==null;){var x=p;p=f;for(var V=0;V<i.length;V++)if(x.context===i[V]){p.lanes|=r,x=p.alternate,x!==null&&(x.lanes|=r),Lm(p.return,r,n),c||(E=null);break e}p=x.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(a(341));E.lanes|=r,p=E.alternate,p!==null&&(p.lanes|=r),Lm(E,r,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function nl(n,i,r,c){n=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(a(387));if(E=E.memoizedProps,E!==null){var x=f.type;ns(f.pendingProps.value,E.value)||(n!==null?n.push(x):n=[x])}}else if(f===Ne.current){if(E=f.alternate,E===null)throw Error(a(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(nu):n=[nu])}f=f.return}n!==null&&Pm(i,n,r,c),i.flags|=262144}function Gd(n){for(n=n.firstContext;n!==null;){if(!ns(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Kr(n){Qr=n,Hi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function yn(n){return pv(Qr,n)}function Qd(n,i){return Qr===null&&Kr(n),pv(n,i)}function pv(n,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},Hi===null){if(n===null)throw Error(a(308));Hi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Hi=Hi.next=i;return r}var bw=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(r,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(r){return r()})}},Ew=s.unstable_scheduleCallback,Tw=s.unstable_NormalPriority,Xt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vm(){return{controller:new bw,data:new Map,refCount:0}}function Cc(n){n.refCount--,n.refCount===0&&Ew(Tw,function(){n.controller.abort()})}var kc=null,Um=0,sl=0,il=null;function Sw(n,i){if(kc===null){var r=kc=[];Um=0,sl=Hp(),il={status:"pending",value:void 0,then:function(c){r.push(c)}}}return Um++,i.then(gv,gv),i}function gv(){if(--Um===0&&kc!==null){il!==null&&(il.status="fulfilled");var n=kc;kc=null,sl=0,il=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function Aw(n,i){var r=[],c={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<r.length;f++)(0,r[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),c}var _v=Z.S;Z.S=function(n,i){e0=Ln(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Sw(n,i),_v!==null&&_v(n,i)};var Yr=O(null);function Bm(){var n=Yr.current;return n!==null?n:bt.pooledCache}function Kd(n,i){i===null?F(Yr,Yr.current):F(Yr,i.pool)}function yv(){var n=Bm();return n===null?null:{parent:Xt._currentValue,pool:n}}var al=Error(a(460)),qm=Error(a(474)),Yd=Error(a(542)),Wd={then:function(){}};function vv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function bv(n,i,r){switch(r=n[r],r===void 0?n.push(i):r!==i&&(i.then(Vs,Vs),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Tv(n),n;default:if(typeof i.status=="string")i.then(Vs,Vs);else{if(n=bt,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Tv(n),n}throw Xr=i,al}}function Wr(n){try{var i=n._init;return i(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Xr=r,al):r}}var Xr=null;function Ev(){if(Xr===null)throw Error(a(459));var n=Xr;return Xr=null,n}function Tv(n){if(n===al||n===Yd)throw Error(a(483))}var rl=null,jc=0;function Xd(n){var i=jc;return jc+=1,rl===null&&(rl=[]),bv(rl,n,i)}function Dc(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Zd(n,i){throw i.$$typeof===S?Error(a(525)):(n=Object.prototype.toString.call(i),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Sv(n){function i($,q){if(n){var K=$.deletions;K===null?($.deletions=[q],$.flags|=16):K.push(q)}}function r($,q){if(!n)return null;for(;q!==null;)i($,q),q=q.sibling;return null}function c($){for(var q=new Map;$!==null;)$.key!==null?q.set($.key,$):q.set($.index,$),$=$.sibling;return q}function f($,q){return $=Bi($,q),$.index=0,$.sibling=null,$}function p($,q,K){return $.index=K,n?(K=$.alternate,K!==null?(K=K.index,K<q?($.flags|=67108866,q):K):($.flags|=67108866,q)):($.flags|=1048576,q)}function E($){return n&&$.alternate===null&&($.flags|=67108866),$}function x($,q,K,ie){return q===null||q.tag!==6?(q=Cm(K,$.mode,ie),q.return=$,q):(q=f(q,K),q.return=$,q)}function V($,q,K,ie){var je=K.type;return je===P?se($,q,K.props.children,ie,K.key):q!==null&&(q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===I&&Wr(je)===q.type)?(q=f(q,K.props),Dc(q,K),q.return=$,q):(q=$d(K.type,K.key,K.props,null,$.mode,ie),Dc(q,K),q.return=$,q)}function W($,q,K,ie){return q===null||q.tag!==4||q.stateNode.containerInfo!==K.containerInfo||q.stateNode.implementation!==K.implementation?(q=km(K,$.mode,ie),q.return=$,q):(q=f(q,K.children||[]),q.return=$,q)}function se($,q,K,ie,je){return q===null||q.tag!==7?(q=Fr(K,$.mode,ie,je),q.return=$,q):(q=f(q,K),q.return=$,q)}function re($,q,K){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Cm(""+q,$.mode,K),q.return=$,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case N:return K=$d(q.type,q.key,q.props,null,$.mode,K),Dc(K,q),K.return=$,K;case M:return q=km(q,$.mode,K),q.return=$,q;case I:return q=Wr(q),re($,q,K)}if(Re(q)||U(q))return q=Fr(q,$.mode,K,null),q.return=$,q;if(typeof q.then=="function")return re($,Xd(q),K);if(q.$$typeof===z)return re($,Qd($,q),K);Zd($,q)}return null}function J($,q,K,ie){var je=q!==null?q.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return je!==null?null:x($,q,""+K,ie);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case N:return K.key===je?V($,q,K,ie):null;case M:return K.key===je?W($,q,K,ie):null;case I:return K=Wr(K),J($,q,K,ie)}if(Re(K)||U(K))return je!==null?null:se($,q,K,ie,null);if(typeof K.then=="function")return J($,q,Xd(K),ie);if(K.$$typeof===z)return J($,q,Qd($,K),ie);Zd($,K)}return null}function te($,q,K,ie,je){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return $=$.get(K)||null,x(q,$,""+ie,je);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case N:return $=$.get(ie.key===null?K:ie.key)||null,V(q,$,ie,je);case M:return $=$.get(ie.key===null?K:ie.key)||null,W(q,$,ie,je);case I:return ie=Wr(ie),te($,q,K,ie,je)}if(Re(ie)||U(ie))return $=$.get(K)||null,se(q,$,ie,je,null);if(typeof ie.then=="function")return te($,q,K,Xd(ie),je);if(ie.$$typeof===z)return te($,q,K,Qd(q,ie),je);Zd(q,ie)}return null}function Ie($,q,K,ie){for(var je=null,rt=null,Ce=q,Ge=q=0,Ze=null;Ce!==null&&Ge<K.length;Ge++){Ce.index>Ge?(Ze=Ce,Ce=null):Ze=Ce.sibling;var ot=J($,Ce,K[Ge],ie);if(ot===null){Ce===null&&(Ce=Ze);break}n&&Ce&&ot.alternate===null&&i($,Ce),q=p(ot,q,Ge),rt===null?je=ot:rt.sibling=ot,rt=ot,Ce=Ze}if(Ge===K.length)return r($,Ce),nt&&qi($,Ge),je;if(Ce===null){for(;Ge<K.length;Ge++)Ce=re($,K[Ge],ie),Ce!==null&&(q=p(Ce,q,Ge),rt===null?je=Ce:rt.sibling=Ce,rt=Ce);return nt&&qi($,Ge),je}for(Ce=c(Ce);Ge<K.length;Ge++)Ze=te(Ce,$,Ge,K[Ge],ie),Ze!==null&&(n&&Ze.alternate!==null&&Ce.delete(Ze.key===null?Ge:Ze.key),q=p(Ze,q,Ge),rt===null?je=Ze:rt.sibling=Ze,rt=Ze);return n&&Ce.forEach(function(Ga){return i($,Ga)}),nt&&qi($,Ge),je}function ze($,q,K,ie){if(K==null)throw Error(a(151));for(var je=null,rt=null,Ce=q,Ge=q=0,Ze=null,ot=K.next();Ce!==null&&!ot.done;Ge++,ot=K.next()){Ce.index>Ge?(Ze=Ce,Ce=null):Ze=Ce.sibling;var Ga=J($,Ce,ot.value,ie);if(Ga===null){Ce===null&&(Ce=Ze);break}n&&Ce&&Ga.alternate===null&&i($,Ce),q=p(Ga,q,Ge),rt===null?je=Ga:rt.sibling=Ga,rt=Ga,Ce=Ze}if(ot.done)return r($,Ce),nt&&qi($,Ge),je;if(Ce===null){for(;!ot.done;Ge++,ot=K.next())ot=re($,ot.value,ie),ot!==null&&(q=p(ot,q,Ge),rt===null?je=ot:rt.sibling=ot,rt=ot);return nt&&qi($,Ge),je}for(Ce=c(Ce);!ot.done;Ge++,ot=K.next())ot=te(Ce,$,Ge,ot.value,ie),ot!==null&&(n&&ot.alternate!==null&&Ce.delete(ot.key===null?Ge:ot.key),q=p(ot,q,Ge),rt===null?je=ot:rt.sibling=ot,rt=ot);return n&&Ce.forEach(function(M2){return i($,M2)}),nt&&qi($,Ge),je}function vt($,q,K,ie){if(typeof K=="object"&&K!==null&&K.type===P&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case N:e:{for(var je=K.key;q!==null;){if(q.key===je){if(je=K.type,je===P){if(q.tag===7){r($,q.sibling),ie=f(q,K.props.children),ie.return=$,$=ie;break e}}else if(q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===I&&Wr(je)===q.type){r($,q.sibling),ie=f(q,K.props),Dc(ie,K),ie.return=$,$=ie;break e}r($,q);break}else i($,q);q=q.sibling}K.type===P?(ie=Fr(K.props.children,$.mode,ie,K.key),ie.return=$,$=ie):(ie=$d(K.type,K.key,K.props,null,$.mode,ie),Dc(ie,K),ie.return=$,$=ie)}return E($);case M:e:{for(je=K.key;q!==null;){if(q.key===je)if(q.tag===4&&q.stateNode.containerInfo===K.containerInfo&&q.stateNode.implementation===K.implementation){r($,q.sibling),ie=f(q,K.children||[]),ie.return=$,$=ie;break e}else{r($,q);break}else i($,q);q=q.sibling}ie=km(K,$.mode,ie),ie.return=$,$=ie}return E($);case I:return K=Wr(K),vt($,q,K,ie)}if(Re(K))return Ie($,q,K,ie);if(U(K)){if(je=U(K),typeof je!="function")throw Error(a(150));return K=je.call(K),ze($,q,K,ie)}if(typeof K.then=="function")return vt($,q,Xd(K),ie);if(K.$$typeof===z)return vt($,q,Qd($,K),ie);Zd($,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,q!==null&&q.tag===6?(r($,q.sibling),ie=f(q,K),ie.return=$,$=ie):(r($,q),ie=Cm(K,$.mode,ie),ie.return=$,$=ie),E($)):r($,q)}return function($,q,K,ie){try{jc=0;var je=vt($,q,K,ie);return rl=null,je}catch(Ce){if(Ce===al||Ce===Yd)throw Ce;var rt=ss(29,Ce,null,$.mode);return rt.lanes=ie,rt.return=$,rt}}}var Zr=Sv(!0),Av=Sv(!1),Na=!1;function Hm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $m(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ca(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ka(n,i,r){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ut&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=Hd(n),ov(n,null,r),i}return qd(n,c,i,r),Hd(n)}function Oc(n,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,r|=c,i.lanes=r,oc(n,r)}}function Fm(n,i){var r=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var f=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var E={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?f=p=E:p=p.next=E,r=r.next}while(r!==null);p===null?f=p=i:p=p.next=i}else f=p=i;r={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=i:n.next=i,r.lastBaseUpdate=i}var Gm=!1;function Mc(){if(Gm){var n=il;if(n!==null)throw n}}function zc(n,i,r,c){Gm=!1;var f=n.updateQueue;Na=!1;var p=f.firstBaseUpdate,E=f.lastBaseUpdate,x=f.shared.pending;if(x!==null){f.shared.pending=null;var V=x,W=V.next;V.next=null,E===null?p=W:E.next=W,E=V;var se=n.alternate;se!==null&&(se=se.updateQueue,x=se.lastBaseUpdate,x!==E&&(x===null?se.firstBaseUpdate=W:x.next=W,se.lastBaseUpdate=V))}if(p!==null){var re=f.baseState;E=0,se=W=V=null,x=p;do{var J=x.lane&-536870913,te=J!==x.lane;if(te?(Xe&J)===J:(c&J)===J){J!==0&&J===sl&&(Gm=!0),se!==null&&(se=se.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var Ie=n,ze=x;J=i;var vt=r;switch(ze.tag){case 1:if(Ie=ze.payload,typeof Ie=="function"){re=Ie.call(vt,re,J);break e}re=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=ze.payload,J=typeof Ie=="function"?Ie.call(vt,re,J):Ie,J==null)break e;re=b({},re,J);break e;case 2:Na=!0}}J=x.callback,J!==null&&(n.flags|=64,te&&(n.flags|=8192),te=f.callbacks,te===null?f.callbacks=[J]:te.push(J))}else te={lane:J,tag:x.tag,payload:x.payload,callback:x.callback,next:null},se===null?(W=se=te,V=re):se=se.next=te,E|=J;if(x=x.next,x===null){if(x=f.shared.pending,x===null)break;te=x,x=te.next,te.next=null,f.lastBaseUpdate=te,f.shared.pending=null}}while(!0);se===null&&(V=re),f.baseState=V,f.firstBaseUpdate=W,f.lastBaseUpdate=se,p===null&&(f.shared.lanes=0),za|=E,n.lanes=E,n.memoizedState=re}}function xv(n,i){if(typeof n!="function")throw Error(a(191,n));n.call(i)}function wv(n,i){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)xv(r[n],i)}var ol=O(null),Jd=O(0);function Iv(n,i){n=Ji,F(Jd,n),F(ol,i),Ji=n|i.baseLanes}function Qm(){F(Jd,Ji),F(ol,ol.current)}function Km(){Ji=Jd.current,Y(ol),Y(Jd)}var is=O(null),Rs=null;function ja(n){var i=n.alternate;F(Ut,Ut.current&1),F(is,n),Rs===null&&(i===null||ol.current!==null||i.memoizedState!==null)&&(Rs=n)}function Ym(n){F(Ut,Ut.current),F(is,n),Rs===null&&(Rs=n)}function Rv(n){n.tag===22?(F(Ut,Ut.current),F(is,n),Rs===null&&(Rs=n)):Da()}function Da(){F(Ut,Ut.current),F(is,is.current)}function as(n){Y(is),Rs===n&&(Rs=null),Y(Ut)}var Ut=O(0);function eh(n){for(var i=n;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||tg(r)||ng(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Fi=0,$e=null,_t=null,Zt=null,th=!1,ll=!1,Jr=!1,nh=0,Lc=0,cl=null,xw=0;function Ot(){throw Error(a(321))}function Wm(n,i){if(i===null)return!1;for(var r=0;r<i.length&&r<n.length;r++)if(!ns(n[r],i[r]))return!1;return!0}function Xm(n,i,r,c,f,p){return Fi=p,$e=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Z.H=n===null||n.memoizedState===null?d1:hp,Jr=!1,p=r(c,f),Jr=!1,ll&&(p=Cv(i,r,c,f)),Nv(n),p}function Nv(n){Z.H=Uc;var i=_t!==null&&_t.next!==null;if(Fi=0,Zt=_t=$e=null,th=!1,Lc=0,cl=null,i)throw Error(a(300));n===null||Jt||(n=n.dependencies,n!==null&&Gd(n)&&(Jt=!0))}function Cv(n,i,r,c){$e=n;var f=0;do{if(ll&&(cl=null),Lc=0,ll=!1,25<=f)throw Error(a(301));if(f+=1,Zt=_t=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Z.H=h1,p=i(r,c)}while(ll);return p}function ww(){var n=Z.H,i=n.useState()[0];return i=typeof i.then=="function"?Pc(i):i,n=n.useState()[0],(_t!==null?_t.memoizedState:null)!==n&&($e.flags|=1024),i}function Zm(){var n=nh!==0;return nh=0,n}function Jm(n,i,r){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~r}function ep(n){if(th){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}th=!1}Fi=0,Zt=_t=$e=null,ll=!1,Lc=nh=0,cl=null}function Vn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?$e.memoizedState=Zt=n:Zt=Zt.next=n,Zt}function Bt(){if(_t===null){var n=$e.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var i=Zt===null?$e.memoizedState:Zt.next;if(i!==null)Zt=i,_t=n;else{if(n===null)throw $e.alternate===null?Error(a(467)):Error(a(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Zt===null?$e.memoizedState=Zt=n:Zt=Zt.next=n}return Zt}function sh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pc(n){var i=Lc;return Lc+=1,cl===null&&(cl=[]),n=bv(cl,n,i),i=$e,(Zt===null?i.memoizedState:Zt.next)===null&&(i=i.alternate,Z.H=i===null||i.memoizedState===null?d1:hp),n}function ih(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Pc(n);if(n.$$typeof===z)return yn(n)}throw Error(a(438,String(n)))}function tp(n){var i=null,r=$e.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var c=$e.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=sh(),$e.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(n),c=0;c<n;c++)r[c]=L;return i.index++,r}function Gi(n,i){return typeof i=="function"?i(n):i}function ah(n){var i=Bt();return np(i,_t,n)}function np(n,i,r){var c=n.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=r;var f=n.baseQueue,p=c.pending;if(p!==null){if(f!==null){var E=f.next;f.next=p.next,p.next=E}i.baseQueue=f=p,c.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{i=f.next;var x=E=null,V=null,W=i,se=!1;do{var re=W.lane&-536870913;if(re!==W.lane?(Xe&re)===re:(Fi&re)===re){var J=W.revertLane;if(J===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),re===sl&&(se=!0);else if((Fi&J)===J){W=W.next,J===sl&&(se=!0);continue}else re={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},V===null?(x=V=re,E=p):V=V.next=re,$e.lanes|=J,za|=J;re=W.action,Jr&&r(p,re),p=W.hasEagerState?W.eagerState:r(p,re)}else J={lane:re,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},V===null?(x=V=J,E=p):V=V.next=J,$e.lanes|=re,za|=re;W=W.next}while(W!==null&&W!==i);if(V===null?E=p:V.next=x,!ns(p,n.memoizedState)&&(Jt=!0,se&&(r=il,r!==null)))throw r;n.memoizedState=p,n.baseState=E,n.baseQueue=V,c.lastRenderedState=p}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function sp(n){var i=Bt(),r=i.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=n;var c=r.dispatch,f=r.pending,p=i.memoizedState;if(f!==null){r.pending=null;var E=f=f.next;do p=n(p,E.action),E=E.next;while(E!==f);ns(p,i.memoizedState)||(Jt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),r.lastRenderedState=p}return[p,c]}function kv(n,i,r){var c=$e,f=Bt(),p=nt;if(p){if(r===void 0)throw Error(a(407));r=r()}else r=i();var E=!ns((_t||f).memoizedState,r);if(E&&(f.memoizedState=r,Jt=!0),f=f.queue,rp(Ov.bind(null,c,f,n),[n]),f.getSnapshot!==i||E||Zt!==null&&Zt.memoizedState.tag&1){if(c.flags|=2048,ul(9,{destroy:void 0},Dv.bind(null,c,f,r,i),null),bt===null)throw Error(a(349));p||(Fi&127)!==0||jv(c,i,r)}return r}function jv(n,i,r){n.flags|=16384,n={getSnapshot:i,value:r},i=$e.updateQueue,i===null?(i=sh(),$e.updateQueue=i,i.stores=[n]):(r=i.stores,r===null?i.stores=[n]:r.push(n))}function Dv(n,i,r,c){i.value=r,i.getSnapshot=c,Mv(i)&&zv(n)}function Ov(n,i,r){return r(function(){Mv(i)&&zv(n)})}function Mv(n){var i=n.getSnapshot;n=n.value;try{var r=i();return!ns(n,r)}catch{return!0}}function zv(n){var i=$r(n,2);i!==null&&Wn(i,n,2)}function ip(n){var i=Vn();if(typeof n=="function"){var r=n;if(n=r(),Jr){ys(!0);try{r()}finally{ys(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:n},i}function Lv(n,i,r,c){return n.baseState=r,np(n,_t,typeof c=="function"?c:Gi)}function Iw(n,i,r,c,f){if(lh(n))throw Error(a(485));if(n=i.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};Z.T!==null?r(!0):p.isTransition=!1,c(p),r=i.pending,r===null?(p.next=i.pending=p,Pv(i,p)):(p.next=r.next,i.pending=r.next=p)}}function Pv(n,i){var r=i.action,c=i.payload,f=n.state;if(i.isTransition){var p=Z.T,E={};Z.T=E;try{var x=r(f,c),V=Z.S;V!==null&&V(E,x),Vv(n,i,x)}catch(W){ap(n,i,W)}finally{p!==null&&E.types!==null&&(p.types=E.types),Z.T=p}}else try{p=r(f,c),Vv(n,i,p)}catch(W){ap(n,i,W)}}function Vv(n,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){Uv(n,i,c)},function(c){return ap(n,i,c)}):Uv(n,i,r)}function Uv(n,i,r){i.status="fulfilled",i.value=r,Bv(i),n.state=r,i=n.pending,i!==null&&(r=i.next,r===i?n.pending=null:(r=r.next,i.next=r,Pv(n,r)))}function ap(n,i,r){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=r,Bv(i),i=i.next;while(i!==c)}n.action=null}function Bv(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function qv(n,i){return i}function Hv(n,i){if(nt){var r=bt.formState;if(r!==null){e:{var c=$e;if(nt){if(At){t:{for(var f=At,p=Is;f.nodeType!==8;){if(!p){f=null;break t}if(f=Ns(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){At=Ns(f.nextSibling),c=f.data==="F!";break e}}Ia(c)}c=!1}c&&(i=r[0])}}return r=Vn(),r.memoizedState=r.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qv,lastRenderedState:i},r.queue=c,r=l1.bind(null,$e,c),c.dispatch=r,c=ip(!1),p=dp.bind(null,$e,!1,c.queue),c=Vn(),f={state:i,dispatch:null,action:n,pending:null},c.queue=f,r=Iw.bind(null,$e,f,p,r),f.dispatch=r,c.memoizedState=n,[i,r,!1]}function $v(n){var i=Bt();return Fv(i,_t,n)}function Fv(n,i,r){if(i=np(n,i,qv)[0],n=ah(Gi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Pc(i)}catch(E){throw E===al?Yd:E}else c=i;i=Bt();var f=i.queue,p=f.dispatch;return r!==i.memoizedState&&($e.flags|=2048,ul(9,{destroy:void 0},Rw.bind(null,f,r),null)),[c,p,n]}function Rw(n,i){n.action=i}function Gv(n){var i=Bt(),r=_t;if(r!==null)return Fv(i,r,n);Bt(),i=i.memoizedState,r=Bt();var c=r.queue.dispatch;return r.memoizedState=n,[i,c,!1]}function ul(n,i,r,c){return n={tag:n,create:r,deps:c,inst:i,next:null},i=$e.updateQueue,i===null&&(i=sh(),$e.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=n.next=n:(c=r.next,r.next=n,n.next=c,i.lastEffect=n),n}function Qv(){return Bt().memoizedState}function rh(n,i,r,c){var f=Vn();$e.flags|=n,f.memoizedState=ul(1|i,{destroy:void 0},r,c===void 0?null:c)}function oh(n,i,r,c){var f=Bt();c=c===void 0?null:c;var p=f.memoizedState.inst;_t!==null&&c!==null&&Wm(c,_t.memoizedState.deps)?f.memoizedState=ul(i,p,r,c):($e.flags|=n,f.memoizedState=ul(1|i,p,r,c))}function Kv(n,i){rh(8390656,8,n,i)}function rp(n,i){oh(2048,8,n,i)}function Nw(n){$e.flags|=4;var i=$e.updateQueue;if(i===null)i=sh(),$e.updateQueue=i,i.events=[n];else{var r=i.events;r===null?i.events=[n]:r.push(n)}}function Yv(n){var i=Bt().memoizedState;return Nw({ref:i,nextImpl:n}),function(){if((ut&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Wv(n,i){return oh(4,2,n,i)}function Xv(n,i){return oh(4,4,n,i)}function Zv(n,i){if(typeof i=="function"){n=n();var r=i(n);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Jv(n,i,r){r=r!=null?r.concat([n]):null,oh(4,4,Zv.bind(null,i,n),r)}function op(){}function e1(n,i){var r=Bt();i=i===void 0?null:i;var c=r.memoizedState;return i!==null&&Wm(i,c[1])?c[0]:(r.memoizedState=[n,i],n)}function t1(n,i){var r=Bt();i=i===void 0?null:i;var c=r.memoizedState;if(i!==null&&Wm(i,c[1]))return c[0];if(c=n(),Jr){ys(!0);try{n()}finally{ys(!1)}}return r.memoizedState=[c,i],c}function lp(n,i,r){return r===void 0||(Fi&1073741824)!==0&&(Xe&261930)===0?n.memoizedState=i:(n.memoizedState=r,n=n0(),$e.lanes|=n,za|=n,r)}function n1(n,i,r,c){return ns(r,i)?r:ol.current!==null?(n=lp(n,r,c),ns(n,i)||(Jt=!0),n):(Fi&42)===0||(Fi&1073741824)!==0&&(Xe&261930)===0?(Jt=!0,n.memoizedState=r):(n=n0(),$e.lanes|=n,za|=n,i)}function s1(n,i,r,c,f){var p=ge.p;ge.p=p!==0&&8>p?p:8;var E=Z.T,x={};Z.T=x,dp(n,!1,i,r);try{var V=f(),W=Z.S;if(W!==null&&W(x,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var se=Aw(V,c);Vc(n,i,se,ls(n))}else Vc(n,i,c,ls(n))}catch(re){Vc(n,i,{then:function(){},status:"rejected",reason:re},ls())}finally{ge.p=p,E!==null&&x.types!==null&&(E.types=x.types),Z.T=E}}function Cw(){}function cp(n,i,r,c){if(n.tag!==5)throw Error(a(476));var f=i1(n).queue;s1(n,f,i,Ae,r===null?Cw:function(){return a1(n),r(c)})}function i1(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Ae,baseState:Ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:Ae},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:r},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function a1(n){var i=i1(n);i.next===null&&(i=n.alternate.memoizedState),Vc(n,i.next.queue,{},ls())}function up(){return yn(nu)}function r1(){return Bt().memoizedState}function o1(){return Bt().memoizedState}function kw(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var r=ls();n=Ca(r);var c=ka(i,n,r);c!==null&&(Wn(c,i,r),Oc(c,i,r)),i={cache:Vm()},n.payload=i;return}i=i.return}}function jw(n,i,r){var c=ls();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},lh(n)?c1(i,r):(r=Rm(n,i,r,c),r!==null&&(Wn(r,n,c),u1(r,i,c)))}function l1(n,i,r){var c=ls();Vc(n,i,r,c)}function Vc(n,i,r,c){var f={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(lh(n))c1(i,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var E=i.lastRenderedState,x=p(E,r);if(f.hasEagerState=!0,f.eagerState=x,ns(x,E))return qd(n,i,f,0),bt===null&&Bd(),!1}catch{}if(r=Rm(n,i,f,c),r!==null)return Wn(r,n,c),u1(r,i,c),!0}return!1}function dp(n,i,r,c){if(c={lane:2,revertLane:Hp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},lh(n)){if(i)throw Error(a(479))}else i=Rm(n,r,c,2),i!==null&&Wn(i,n,2)}function lh(n){var i=n.alternate;return n===$e||i!==null&&i===$e}function c1(n,i){ll=th=!0;var r=n.pending;r===null?i.next=i:(i.next=r.next,r.next=i),n.pending=i}function u1(n,i,r){if((r&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,r|=c,i.lanes=r,oc(n,r)}}var Uc={readContext:yn,use:ih,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot};Uc.useEffectEvent=Ot;var d1={readContext:yn,use:ih,useCallback:function(n,i){return Vn().memoizedState=[n,i===void 0?null:i],n},useContext:yn,useEffect:Kv,useImperativeHandle:function(n,i,r){r=r!=null?r.concat([n]):null,rh(4194308,4,Zv.bind(null,i,n),r)},useLayoutEffect:function(n,i){return rh(4194308,4,n,i)},useInsertionEffect:function(n,i){rh(4,2,n,i)},useMemo:function(n,i){var r=Vn();i=i===void 0?null:i;var c=n();if(Jr){ys(!0);try{n()}finally{ys(!1)}}return r.memoizedState=[c,i],c},useReducer:function(n,i,r){var c=Vn();if(r!==void 0){var f=r(i);if(Jr){ys(!0);try{r(i)}finally{ys(!1)}}}else f=i;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=jw.bind(null,$e,n),[c.memoizedState,n]},useRef:function(n){var i=Vn();return n={current:n},i.memoizedState=n},useState:function(n){n=ip(n);var i=n.queue,r=l1.bind(null,$e,i);return i.dispatch=r,[n.memoizedState,r]},useDebugValue:op,useDeferredValue:function(n,i){var r=Vn();return lp(r,n,i)},useTransition:function(){var n=ip(!1);return n=s1.bind(null,$e,n.queue,!0,!1),Vn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,r){var c=$e,f=Vn();if(nt){if(r===void 0)throw Error(a(407));r=r()}else{if(r=i(),bt===null)throw Error(a(349));(Xe&127)!==0||jv(c,i,r)}f.memoizedState=r;var p={value:r,getSnapshot:i};return f.queue=p,Kv(Ov.bind(null,c,p,n),[n]),c.flags|=2048,ul(9,{destroy:void 0},Dv.bind(null,c,p,r,i),null),r},useId:function(){var n=Vn(),i=bt.identifierPrefix;if(nt){var r=bi,c=vi;r=(c&~(1<<32-Pt(c)-1)).toString(32)+r,i="_"+i+"R_"+r,r=nh++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=xw++,i="_"+i+"r_"+r.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:up,useFormState:Hv,useActionState:Hv,useOptimistic:function(n){var i=Vn();i.memoizedState=i.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=dp.bind(null,$e,!0,r),r.dispatch=i,[n,i]},useMemoCache:tp,useCacheRefresh:function(){return Vn().memoizedState=kw.bind(null,$e)},useEffectEvent:function(n){var i=Vn(),r={impl:n};return i.memoizedState=r,function(){if((ut&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},hp={readContext:yn,use:ih,useCallback:e1,useContext:yn,useEffect:rp,useImperativeHandle:Jv,useInsertionEffect:Wv,useLayoutEffect:Xv,useMemo:t1,useReducer:ah,useRef:Qv,useState:function(){return ah(Gi)},useDebugValue:op,useDeferredValue:function(n,i){var r=Bt();return n1(r,_t.memoizedState,n,i)},useTransition:function(){var n=ah(Gi)[0],i=Bt().memoizedState;return[typeof n=="boolean"?n:Pc(n),i]},useSyncExternalStore:kv,useId:r1,useHostTransitionStatus:up,useFormState:$v,useActionState:$v,useOptimistic:function(n,i){var r=Bt();return Lv(r,_t,n,i)},useMemoCache:tp,useCacheRefresh:o1};hp.useEffectEvent=Yv;var h1={readContext:yn,use:ih,useCallback:e1,useContext:yn,useEffect:rp,useImperativeHandle:Jv,useInsertionEffect:Wv,useLayoutEffect:Xv,useMemo:t1,useReducer:sp,useRef:Qv,useState:function(){return sp(Gi)},useDebugValue:op,useDeferredValue:function(n,i){var r=Bt();return _t===null?lp(r,n,i):n1(r,_t.memoizedState,n,i)},useTransition:function(){var n=sp(Gi)[0],i=Bt().memoizedState;return[typeof n=="boolean"?n:Pc(n),i]},useSyncExternalStore:kv,useId:r1,useHostTransitionStatus:up,useFormState:Gv,useActionState:Gv,useOptimistic:function(n,i){var r=Bt();return _t!==null?Lv(r,_t,n,i):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:tp,useCacheRefresh:o1};h1.useEffectEvent=Yv;function fp(n,i,r,c){i=n.memoizedState,r=r(c,i),r=r==null?i:b({},i,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var mp={enqueueSetState:function(n,i,r){n=n._reactInternals;var c=ls(),f=Ca(c);f.payload=i,r!=null&&(f.callback=r),i=ka(n,f,c),i!==null&&(Wn(i,n,c),Oc(i,n,c))},enqueueReplaceState:function(n,i,r){n=n._reactInternals;var c=ls(),f=Ca(c);f.tag=1,f.payload=i,r!=null&&(f.callback=r),i=ka(n,f,c),i!==null&&(Wn(i,n,c),Oc(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var r=ls(),c=Ca(r);c.tag=2,i!=null&&(c.callback=i),i=ka(n,c,r),i!==null&&(Wn(i,n,r),Oc(i,n,r))}};function f1(n,i,r,c,f,p,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,E):i.prototype&&i.prototype.isPureReactComponent?!wc(r,c)||!wc(f,p):!0}function m1(n,i,r,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,c),i.state!==n&&mp.enqueueReplaceState(i,i.state,null)}function eo(n,i){var r=i;if("ref"in i){r={};for(var c in i)c!=="ref"&&(r[c]=i[c])}if(n=n.defaultProps){r===i&&(r=b({},r));for(var f in n)r[f]===void 0&&(r[f]=n[f])}return r}function p1(n){Ud(n)}function g1(n){console.error(n)}function _1(n){Ud(n)}function ch(n,i){try{var r=n.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function y1(n,i,r){try{var c=n.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function pp(n,i,r){return r=Ca(r),r.tag=3,r.payload={element:null},r.callback=function(){ch(n,i)},r}function v1(n){return n=Ca(n),n.tag=3,n}function b1(n,i,r,c){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var p=c.value;n.payload=function(){return f(p)},n.callback=function(){y1(i,r,c)}}var E=r.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){y1(i,r,c),typeof f!="function"&&(La===null?La=new Set([this]):La.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})})}function Dw(n,i,r,c,f){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=r.alternate,i!==null&&nl(i,r,f,!0),r=is.current,r!==null){switch(r.tag){case 31:case 13:return Rs===null?Eh():r.alternate===null&&Mt===0&&(Mt=3),r.flags&=-257,r.flags|=65536,r.lanes=f,c===Wd?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([c]):i.add(c),Up(n,c,f)),!1;case 22:return r.flags|=65536,c===Wd?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([c]):r.add(c)),Up(n,c,f)),!1}throw Error(a(435,r.tag))}return Up(n,c,f),Eh(),!1}if(nt)return i=is.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==Om&&(n=Error(a(422),{cause:c}),Nc(As(n,r)))):(c!==Om&&(i=Error(a(423),{cause:c}),Nc(As(i,r))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=As(c,r),f=pp(n.stateNode,c,f),Fm(n,f),Mt!==4&&(Mt=2)),!1;var p=Error(a(520),{cause:c});if(p=As(p,r),Kc===null?Kc=[p]:Kc.push(p),Mt!==4&&(Mt=2),i===null)return!0;c=As(c,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,n=f&-f,r.lanes|=n,n=pp(r.stateNode,c,n),Fm(r,n),!1;case 1:if(i=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(La===null||!La.has(p))))return r.flags|=65536,f&=-f,r.lanes|=f,f=v1(f),b1(f,n,r,c),Fm(r,f),!1}r=r.return}while(r!==null);return!1}var gp=Error(a(461)),Jt=!1;function vn(n,i,r,c){i.child=n===null?Av(i,null,r,c):Zr(i,n.child,r,c)}function E1(n,i,r,c,f){r=r.render;var p=i.ref;if("ref"in c){var E={};for(var x in c)x!=="ref"&&(E[x]=c[x])}else E=c;return Kr(i),c=Xm(n,i,r,E,p,f),x=Zm(),n!==null&&!Jt?(Jm(n,i,f),Qi(n,i,f)):(nt&&x&&jm(i),i.flags|=1,vn(n,i,c,f),i.child)}function T1(n,i,r,c,f){if(n===null){var p=r.type;return typeof p=="function"&&!Nm(p)&&p.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=p,S1(n,i,p,c,f)):(n=$d(r.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,!Ap(n,f)){var E=p.memoizedProps;if(r=r.compare,r=r!==null?r:wc,r(E,c)&&n.ref===i.ref)return Qi(n,i,f)}return i.flags|=1,n=Bi(p,c),n.ref=i.ref,n.return=i,i.child=n}function S1(n,i,r,c,f){if(n!==null){var p=n.memoizedProps;if(wc(p,c)&&n.ref===i.ref)if(Jt=!1,i.pendingProps=c=p,Ap(n,f))(n.flags&131072)!==0&&(Jt=!0);else return i.lanes=n.lanes,Qi(n,i,f)}return _p(n,i,r,c,f)}function A1(n,i,r,c){var f=c.children,p=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,n!==null){for(c=i.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~p}else c=0,i.child=null;return x1(n,i,p,r,c)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Kd(i,p!==null?p.cachePool:null),p!==null?Iv(i,p):Qm(),Rv(i);else return c=i.lanes=536870912,x1(n,i,p!==null?p.baseLanes|r:r,r,c)}else p!==null?(Kd(i,p.cachePool),Iv(i,p),Da(),i.memoizedState=null):(n!==null&&Kd(i,null),Qm(),Da());return vn(n,i,f,r),i.child}function Bc(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function x1(n,i,r,c,f){var p=Bm();return p=p===null?null:{parent:Xt._currentValue,pool:p},i.memoizedState={baseLanes:r,cachePool:p},n!==null&&Kd(i,null),Qm(),Rv(i),n!==null&&nl(n,i,c,!0),i.childLanes=f,null}function uh(n,i){return i=hh({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function w1(n,i,r){return Zr(i,n.child,null,r),n=uh(i,i.pendingProps),n.flags|=2,as(i),i.memoizedState=null,n}function Ow(n,i,r){var c=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(nt){if(c.mode==="hidden")return n=uh(i,c),i.lanes=536870912,Bc(null,n);if(Ym(i),(n=At)?(n=P0(n,Is),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:xa!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},r=cv(n),r.return=i,i.child=r,_n=i,At=null)):n=null,n===null)throw Ia(i);return i.lanes=536870912,null}return uh(i,c)}var p=n.memoizedState;if(p!==null){var E=p.dehydrated;if(Ym(i),f)if(i.flags&256)i.flags&=-257,i=w1(n,i,r);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(a(558));else if(Jt||nl(n,i,r,!1),f=(r&n.childLanes)!==0,Jt||f){if(c=bt,c!==null&&(E=lc(c,r),E!==0&&E!==p.retryLane))throw p.retryLane=E,$r(n,E),Wn(c,n,E),gp;Eh(),i=w1(n,i,r)}else n=p.treeContext,At=Ns(E.nextSibling),_n=i,nt=!0,wa=null,Is=!1,n!==null&&hv(i,n),i=uh(i,c),i.flags|=4096;return i}return n=Bi(n.child,{mode:c.mode,children:c.children}),n.ref=i.ref,i.child=n,n.return=i,n}function dh(n,i){var r=i.ref;if(r===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(n===null||n.ref!==r)&&(i.flags|=4194816)}}function _p(n,i,r,c,f){return Kr(i),r=Xm(n,i,r,c,void 0,f),c=Zm(),n!==null&&!Jt?(Jm(n,i,f),Qi(n,i,f)):(nt&&c&&jm(i),i.flags|=1,vn(n,i,r,f),i.child)}function I1(n,i,r,c,f,p){return Kr(i),i.updateQueue=null,r=Cv(i,c,r,f),Nv(n),c=Zm(),n!==null&&!Jt?(Jm(n,i,p),Qi(n,i,p)):(nt&&c&&jm(i),i.flags|=1,vn(n,i,r,p),i.child)}function R1(n,i,r,c,f){if(Kr(i),i.stateNode===null){var p=Zo,E=r.contextType;typeof E=="object"&&E!==null&&(p=yn(E)),p=new r(c,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=mp,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=c,p.state=i.memoizedState,p.refs={},Hm(i),E=r.contextType,p.context=typeof E=="object"&&E!==null?yn(E):Zo,p.state=i.memoizedState,E=r.getDerivedStateFromProps,typeof E=="function"&&(fp(i,r,E,c),p.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&mp.enqueueReplaceState(p,p.state,null),zc(i,c,p,f),Mc(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){p=i.stateNode;var x=i.memoizedProps,V=eo(r,x);p.props=V;var W=p.context,se=r.contextType;E=Zo,typeof se=="object"&&se!==null&&(E=yn(se));var re=r.getDerivedStateFromProps;se=typeof re=="function"||typeof p.getSnapshotBeforeUpdate=="function",x=i.pendingProps!==x,se||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x||W!==E)&&m1(i,p,c,E),Na=!1;var J=i.memoizedState;p.state=J,zc(i,c,p,f),Mc(),W=i.memoizedState,x||J!==W||Na?(typeof re=="function"&&(fp(i,r,re,c),W=i.memoizedState),(V=Na||f1(i,r,V,c,J,W,E))?(se||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=W),p.props=c,p.state=W,p.context=E,c=V):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{p=i.stateNode,$m(n,i),E=i.memoizedProps,se=eo(r,E),p.props=se,re=i.pendingProps,J=p.context,W=r.contextType,V=Zo,typeof W=="object"&&W!==null&&(V=yn(W)),x=r.getDerivedStateFromProps,(W=typeof x=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==re||J!==V)&&m1(i,p,c,V),Na=!1,J=i.memoizedState,p.state=J,zc(i,c,p,f),Mc();var te=i.memoizedState;E!==re||J!==te||Na||n!==null&&n.dependencies!==null&&Gd(n.dependencies)?(typeof x=="function"&&(fp(i,r,x,c),te=i.memoizedState),(se=Na||f1(i,r,se,c,J,te,V)||n!==null&&n.dependencies!==null&&Gd(n.dependencies))?(W||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,te,V),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,te,V)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&J===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&J===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=te),p.props=c,p.state=te,p.context=V,c=se):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&J===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&J===n.memoizedState||(i.flags|=1024),c=!1)}return p=c,dh(n,i),c=(i.flags&128)!==0,p||c?(p=i.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,n!==null&&c?(i.child=Zr(i,n.child,null,f),i.child=Zr(i,null,r,f)):vn(n,i,r,f),i.memoizedState=p.state,n=i.child):n=Qi(n,i,f),n}function N1(n,i,r,c){return Gr(),i.flags|=256,vn(n,i,r,c),i.child}var yp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vp(n){return{baseLanes:n,cachePool:yv()}}function bp(n,i,r){return n=n!==null?n.childLanes&~r:0,i&&(n|=os),n}function C1(n,i,r){var c=i.pendingProps,f=!1,p=(i.flags&128)!==0,E;if((E=p)||(E=n!==null&&n.memoizedState===null?!1:(Ut.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,n===null){if(nt){if(f?ja(i):Da(),(n=At)?(n=P0(n,Is),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:xa!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},r=cv(n),r.return=i,i.child=r,_n=i,At=null)):n=null,n===null)throw Ia(i);return ng(n)?i.lanes=32:i.lanes=536870912,null}var x=c.children;return c=c.fallback,f?(Da(),f=i.mode,x=hh({mode:"hidden",children:x},f),c=Fr(c,f,r,null),x.return=i,c.return=i,x.sibling=c,i.child=x,c=i.child,c.memoizedState=vp(r),c.childLanes=bp(n,E,r),i.memoizedState=yp,Bc(null,c)):(ja(i),Ep(i,x))}var V=n.memoizedState;if(V!==null&&(x=V.dehydrated,x!==null)){if(p)i.flags&256?(ja(i),i.flags&=-257,i=Tp(n,i,r)):i.memoizedState!==null?(Da(),i.child=n.child,i.flags|=128,i=null):(Da(),x=c.fallback,f=i.mode,c=hh({mode:"visible",children:c.children},f),x=Fr(x,f,r,null),x.flags|=2,c.return=i,x.return=i,c.sibling=x,i.child=c,Zr(i,n.child,null,r),c=i.child,c.memoizedState=vp(r),c.childLanes=bp(n,E,r),i.memoizedState=yp,i=Bc(null,c));else if(ja(i),ng(x)){if(E=x.nextSibling&&x.nextSibling.dataset,E)var W=E.dgst;E=W,c=Error(a(419)),c.stack="",c.digest=E,Nc({value:c,source:null,stack:null}),i=Tp(n,i,r)}else if(Jt||nl(n,i,r,!1),E=(r&n.childLanes)!==0,Jt||E){if(E=bt,E!==null&&(c=lc(E,r),c!==0&&c!==V.retryLane))throw V.retryLane=c,$r(n,c),Wn(E,n,c),gp;tg(x)||Eh(),i=Tp(n,i,r)}else tg(x)?(i.flags|=192,i.child=n.child,i=null):(n=V.treeContext,At=Ns(x.nextSibling),_n=i,nt=!0,wa=null,Is=!1,n!==null&&hv(i,n),i=Ep(i,c.children),i.flags|=4096);return i}return f?(Da(),x=c.fallback,f=i.mode,V=n.child,W=V.sibling,c=Bi(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,W!==null?x=Bi(W,x):(x=Fr(x,f,r,null),x.flags|=2),x.return=i,c.return=i,c.sibling=x,i.child=c,Bc(null,c),c=i.child,x=n.child.memoizedState,x===null?x=vp(r):(f=x.cachePool,f!==null?(V=Xt._currentValue,f=f.parent!==V?{parent:V,pool:V}:f):f=yv(),x={baseLanes:x.baseLanes|r,cachePool:f}),c.memoizedState=x,c.childLanes=bp(n,E,r),i.memoizedState=yp,Bc(n.child,c)):(ja(i),r=n.child,n=r.sibling,r=Bi(r,{mode:"visible",children:c.children}),r.return=i,r.sibling=null,n!==null&&(E=i.deletions,E===null?(i.deletions=[n],i.flags|=16):E.push(n)),i.child=r,i.memoizedState=null,r)}function Ep(n,i){return i=hh({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function hh(n,i){return n=ss(22,n,null,i),n.lanes=0,n}function Tp(n,i,r){return Zr(i,n.child,null,r),n=Ep(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function k1(n,i,r){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),Lm(n.return,i,r)}function Sp(n,i,r,c,f,p){var E=n.memoizedState;E===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:f,treeForkCount:p}:(E.isBackwards=i,E.rendering=null,E.renderingStartTime=0,E.last=c,E.tail=r,E.tailMode=f,E.treeForkCount=p)}function j1(n,i,r){var c=i.pendingProps,f=c.revealOrder,p=c.tail;c=c.children;var E=Ut.current,x=(E&2)!==0;if(x?(E=E&1|2,i.flags|=128):E&=1,F(Ut,E),vn(n,i,c,r),c=nt?Rc:0,!x&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&k1(n,r,i);else if(n.tag===19)k1(n,r,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(r=i.child,f=null;r!==null;)n=r.alternate,n!==null&&eh(n)===null&&(f=r),r=r.sibling;r=f,r===null?(f=i.child,i.child=null):(f=r.sibling,r.sibling=null),Sp(i,!1,f,r,p,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&eh(n)===null){i.child=f;break}n=f.sibling,f.sibling=r,r=f,f=n}Sp(i,!0,r,null,p,c);break;case"together":Sp(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function Qi(n,i,r){if(n!==null&&(i.dependencies=n.dependencies),za|=i.lanes,(r&i.childLanes)===0)if(n!==null){if(nl(n,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(a(153));if(i.child!==null){for(n=i.child,r=Bi(n,n.pendingProps),i.child=r,r.return=i;n.sibling!==null;)n=n.sibling,r=r.sibling=Bi(n,n.pendingProps),r.return=i;r.sibling=null}return i.child}function Ap(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Gd(n)))}function Mw(n,i,r){switch(i.tag){case 3:ce(i,i.stateNode.containerInfo),Ra(i,Xt,n.memoizedState.cache),Gr();break;case 27:case 5:we(i);break;case 4:ce(i,i.stateNode.containerInfo);break;case 10:Ra(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Ym(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(ja(i),i.flags|=128,null):(r&i.child.childLanes)!==0?C1(n,i,r):(ja(i),n=Qi(n,i,r),n!==null?n.sibling:null);ja(i);break;case 19:var f=(n.flags&128)!==0;if(c=(r&i.childLanes)!==0,c||(nl(n,i,r,!1),c=(r&i.childLanes)!==0),f){if(c)return j1(n,i,r);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),F(Ut,Ut.current),c)break;return null;case 22:return i.lanes=0,A1(n,i,r,i.pendingProps);case 24:Ra(i,Xt,n.memoizedState.cache)}return Qi(n,i,r)}function D1(n,i,r){if(n!==null)if(n.memoizedProps!==i.pendingProps)Jt=!0;else{if(!Ap(n,r)&&(i.flags&128)===0)return Jt=!1,Mw(n,i,r);Jt=(n.flags&131072)!==0}else Jt=!1,nt&&(i.flags&1048576)!==0&&dv(i,Rc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(n=Wr(i.elementType),i.type=n,typeof n=="function")Nm(n)?(c=eo(n,c),i.tag=1,i=R1(null,i,n,c,r)):(i.tag=0,i=_p(null,i,n,c,r));else{if(n!=null){var f=n.$$typeof;if(f===G){i.tag=11,i=E1(null,i,n,c,r);break e}else if(f===k){i.tag=14,i=T1(null,i,n,c,r);break e}}throw i=pe(n)||n,Error(a(306,i,""))}}return i;case 0:return _p(n,i,i.type,i.pendingProps,r);case 1:return c=i.type,f=eo(c,i.pendingProps),R1(n,i,c,f,r);case 3:e:{if(ce(i,i.stateNode.containerInfo),n===null)throw Error(a(387));c=i.pendingProps;var p=i.memoizedState;f=p.element,$m(n,i),zc(i,c,null,r);var E=i.memoizedState;if(c=E.cache,Ra(i,Xt,c),c!==p.cache&&Pm(i,[Xt],r,!0),Mc(),c=E.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=N1(n,i,c,r);break e}else if(c!==f){f=As(Error(a(424)),i),Nc(f),i=N1(n,i,c,r);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,At=Ns(n.firstChild),_n=i,nt=!0,wa=null,Is=!0,r=Av(i,null,c,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Gr(),c===f){i=Qi(n,i,r);break e}vn(n,i,c,r)}i=i.child}return i;case 26:return dh(n,i),n===null?(r=$0(i.type,null,i.pendingProps,null))?i.memoizedState=r:nt||(r=i.type,n=i.pendingProps,c=Rh(he.current).createElement(r),c[Kt]=i,c[un]=n,bn(c,r,n),Yt(c),i.stateNode=c):i.memoizedState=$0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return we(i),n===null&&nt&&(c=i.stateNode=B0(i.type,i.pendingProps,he.current),_n=i,Is=!0,f=At,Ba(i.type)?(sg=f,At=Ns(c.firstChild)):At=f),vn(n,i,i.pendingProps.children,r),dh(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&nt&&((f=c=At)&&(c=d2(c,i.type,i.pendingProps,Is),c!==null?(i.stateNode=c,_n=i,At=Ns(c.firstChild),Is=!1,f=!0):f=!1),f||Ia(i)),we(i),f=i.type,p=i.pendingProps,E=n!==null?n.memoizedProps:null,c=p.children,Zp(f,p)?c=null:E!==null&&Zp(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=Xm(n,i,ww,null,null,r),nu._currentValue=f),dh(n,i),vn(n,i,c,r),i.child;case 6:return n===null&&nt&&((n=r=At)&&(r=h2(r,i.pendingProps,Is),r!==null?(i.stateNode=r,_n=i,At=null,n=!0):n=!1),n||Ia(i)),null;case 13:return C1(n,i,r);case 4:return ce(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Zr(i,null,c,r):vn(n,i,c,r),i.child;case 11:return E1(n,i,i.type,i.pendingProps,r);case 7:return vn(n,i,i.pendingProps,r),i.child;case 8:return vn(n,i,i.pendingProps.children,r),i.child;case 12:return vn(n,i,i.pendingProps.children,r),i.child;case 10:return c=i.pendingProps,Ra(i,i.type,c.value),vn(n,i,c.children,r),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,Kr(i),f=yn(f),c=c(f),i.flags|=1,vn(n,i,c,r),i.child;case 14:return T1(n,i,i.type,i.pendingProps,r);case 15:return S1(n,i,i.type,i.pendingProps,r);case 19:return j1(n,i,r);case 31:return Ow(n,i,r);case 22:return A1(n,i,r,i.pendingProps);case 24:return Kr(i),c=yn(Xt),n===null?(f=Bm(),f===null&&(f=bt,p=Vm(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=r),f=p),i.memoizedState={parent:c,cache:f},Hm(i),Ra(i,Xt,f)):((n.lanes&r)!==0&&($m(n,i),zc(i,null,null,r),Mc()),f=n.memoizedState,p=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Ra(i,Xt,c)):(c=p.cache,Ra(i,Xt,c),c!==f.cache&&Pm(i,[Xt],r,!0))),vn(n,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Ki(n){n.flags|=4}function xp(n,i,r,c,f){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(r0())n.flags|=8192;else throw Xr=Wd,qm}else n.flags&=-16777217}function O1(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Y0(i))if(r0())n.flags|=8192;else throw Xr=Wd,qm}function fh(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?vd():536870912,n.lanes|=i,ml|=i)}function qc(n,i){if(!nt)switch(n.tailMode){case"hidden":i=n.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function xt(n){var i=n.alternate!==null&&n.alternate.child===n.child,r=0,c=0;if(i)for(var f=n.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=r,i}function zw(n,i,r){var c=i.pendingProps;switch(Dm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(i),null;case 1:return xt(i),null;case 3:return r=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),$i(Xt),fe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(tl(i)?Ki(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Mm())),xt(i),null;case 26:var f=i.type,p=i.memoizedState;return n===null?(Ki(i),p!==null?(xt(i),O1(i,p)):(xt(i),xp(i,f,null,c,r))):p?p!==n.memoizedState?(Ki(i),xt(i),O1(i,p)):(xt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==c&&Ki(i),xt(i),xp(i,f,n,c,r)),null;case 27:if(it(i),r=he.current,f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&Ki(i);else{if(!c){if(i.stateNode===null)throw Error(a(166));return xt(i),null}n=oe.current,tl(i)?fv(i):(n=B0(f,c,r),i.stateNode=n,Ki(i))}return xt(i),null;case 5:if(it(i),f=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&Ki(i);else{if(!c){if(i.stateNode===null)throw Error(a(166));return xt(i),null}if(p=oe.current,tl(i))fv(i);else{var E=Rh(he.current);switch(p){case 1:p=E.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=E.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=E.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=E.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=E.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?E.createElement("select",{is:c.is}):E.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?E.createElement(f,{is:c.is}):E.createElement(f)}}p[Kt]=i,p[un]=c;e:for(E=i.child;E!==null;){if(E.tag===5||E.tag===6)p.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===i)break e;for(;E.sibling===null;){if(E.return===null||E.return===i)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}i.stateNode=p;e:switch(bn(p,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ki(i)}}return xt(i),xp(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,r),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&Ki(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(a(166));if(n=he.current,tl(i)){if(n=i.stateNode,r=i.memoizedProps,c=null,f=_n,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Kt]=i,n=!!(n.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||C0(n.nodeValue,r)),n||Ia(i,!0)}else n=Rh(n).createTextNode(c),n[Kt]=i,i.stateNode=n}return xt(i),null;case 31:if(r=i.memoizedState,n===null||n.memoizedState!==null){if(c=tl(i),r!==null){if(n===null){if(!c)throw Error(a(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[Kt]=i}else Gr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;xt(i),n=!1}else r=Mm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return i.flags&256?(as(i),i):(as(i),null);if((i.flags&128)!==0)throw Error(a(558))}return xt(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=tl(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Kt]=i}else Gr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;xt(i),f=!1}else f=Mm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(as(i),i):(as(i),null)}return as(i),(i.flags&128)!==0?(i.lanes=r,i):(r=c!==null,n=n!==null&&n.memoizedState!==null,r&&(c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048)),r!==n&&r&&(i.child.flags|=8192),fh(i,i.updateQueue),xt(i),null);case 4:return fe(),n===null&&Qp(i.stateNode.containerInfo),xt(i),null;case 10:return $i(i.type),xt(i),null;case 19:if(Y(Ut),c=i.memoizedState,c===null)return xt(i),null;if(f=(i.flags&128)!==0,p=c.rendering,p===null)if(f)qc(c,!1);else{if(Mt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(p=eh(n),p!==null){for(i.flags|=128,qc(c,!1),n=p.updateQueue,i.updateQueue=n,fh(i,n),i.subtreeFlags=0,n=r,r=i.child;r!==null;)lv(r,n),r=r.sibling;return F(Ut,Ut.current&1|2),nt&&qi(i,c.treeForkCount),i.child}n=n.sibling}c.tail!==null&&Ln()>yh&&(i.flags|=128,f=!0,qc(c,!1),i.lanes=4194304)}else{if(!f)if(n=eh(p),n!==null){if(i.flags|=128,f=!0,n=n.updateQueue,i.updateQueue=n,fh(i,n),qc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!nt)return xt(i),null}else 2*Ln()-c.renderingStartTime>yh&&r!==536870912&&(i.flags|=128,f=!0,qc(c,!1),i.lanes=4194304);c.isBackwards?(p.sibling=i.child,i.child=p):(n=c.last,n!==null?n.sibling=p:i.child=p,c.last=p)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Ln(),n.sibling=null,r=Ut.current,F(Ut,f?r&1|2:r&1),nt&&qi(i,c.treeForkCount),n):(xt(i),null);case 22:case 23:return as(i),Km(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(r&536870912)!==0&&(i.flags&128)===0&&(xt(i),i.subtreeFlags&6&&(i.flags|=8192)):xt(i),r=i.updateQueue,r!==null&&fh(i,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==r&&(i.flags|=2048),n!==null&&Y(Yr),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),$i(Xt),xt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function Lw(n,i){switch(Dm(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return $i(Xt),fe(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return it(i),null;case 31:if(i.memoizedState!==null){if(as(i),i.alternate===null)throw Error(a(340));Gr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(as(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Gr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Y(Ut),null;case 4:return fe(),null;case 10:return $i(i.type),null;case 22:case 23:return as(i),Km(),n!==null&&Y(Yr),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return $i(Xt),null;case 25:return null;default:return null}}function M1(n,i){switch(Dm(i),i.tag){case 3:$i(Xt),fe();break;case 26:case 27:case 5:it(i);break;case 4:fe();break;case 31:i.memoizedState!==null&&as(i);break;case 13:as(i);break;case 19:Y(Ut);break;case 10:$i(i.type);break;case 22:case 23:as(i),Km(),n!==null&&Y(Yr);break;case 24:$i(Xt)}}function Hc(n,i){try{var r=i.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var f=c.next;r=f;do{if((r.tag&n)===n){c=void 0;var p=r.create,E=r.inst;c=p(),E.destroy=c}r=r.next}while(r!==f)}}catch(x){pt(i,i.return,x)}}function Oa(n,i,r){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&n)===n){var E=c.inst,x=E.destroy;if(x!==void 0){E.destroy=void 0,f=i;var V=r,W=x;try{W()}catch(se){pt(f,V,se)}}}c=c.next}while(c!==p)}}catch(se){pt(i,i.return,se)}}function z1(n){var i=n.updateQueue;if(i!==null){var r=n.stateNode;try{wv(i,r)}catch(c){pt(n,n.return,c)}}}function L1(n,i,r){r.props=eo(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(c){pt(n,i,c)}}function $c(n,i){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof r=="function"?n.refCleanup=r(c):r.current=c}}catch(f){pt(n,i,f)}}function Ei(n,i){var r=n.ref,c=n.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(f){pt(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){pt(n,i,f)}else r.current=null}function P1(n){var i=n.type,r=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break e;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(f){pt(n,n.return,f)}}function wp(n,i,r){try{var c=n.stateNode;a2(c,n.type,r,i),c[un]=i}catch(f){pt(n,n.return,f)}}function V1(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ba(n.type)||n.tag===4}function Ip(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||V1(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ba(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Rp(n,i,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(n),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=Vs));else if(c!==4&&(c===27&&Ba(n.type)&&(r=n.stateNode,i=null),n=n.child,n!==null))for(Rp(n,i,r),n=n.sibling;n!==null;)Rp(n,i,r),n=n.sibling}function mh(n,i,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?r.insertBefore(n,i):r.appendChild(n);else if(c!==4&&(c===27&&Ba(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(mh(n,i,r),n=n.sibling;n!==null;)mh(n,i,r),n=n.sibling}function U1(n){var i=n.stateNode,r=n.memoizedProps;try{for(var c=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);bn(i,c,r),i[Kt]=n,i[un]=r}catch(p){pt(n,n.return,p)}}var Yi=!1,en=!1,Np=!1,B1=typeof WeakSet=="function"?WeakSet:Set,hn=null;function Pw(n,i){if(n=n.containerInfo,Wp=Mh,n=Jy(n),Tm(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var E=0,x=-1,V=-1,W=0,se=0,re=n,J=null;t:for(;;){for(var te;re!==r||f!==0&&re.nodeType!==3||(x=E+f),re!==p||c!==0&&re.nodeType!==3||(V=E+c),re.nodeType===3&&(E+=re.nodeValue.length),(te=re.firstChild)!==null;)J=re,re=te;for(;;){if(re===n)break t;if(J===r&&++W===f&&(x=E),J===p&&++se===c&&(V=E),(te=re.nextSibling)!==null)break;re=J,J=re.parentNode}re=te}r=x===-1||V===-1?null:{start:x,end:V}}else r=null}r=r||{start:0,end:0}}else r=null;for(Xp={focusedElem:n,selectionRange:r},Mh=!1,hn=i;hn!==null;)if(i=hn,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,hn=n;else for(;hn!==null;){switch(i=hn,p=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)f=n[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,r=i,f=p.memoizedProps,p=p.memoizedState,c=r.stateNode;try{var Ie=eo(r.type,f);n=c.getSnapshotBeforeUpdate(Ie,p),c.__reactInternalSnapshotBeforeUpdate=n}catch(ze){pt(r,r.return,ze)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,r=n.nodeType,r===9)eg(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":eg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=i.sibling,n!==null){n.return=i.return,hn=n;break}hn=i.return}}function q1(n,i,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:Xi(n,r),c&4&&Hc(5,r);break;case 1:if(Xi(n,r),c&4)if(n=r.stateNode,i===null)try{n.componentDidMount()}catch(E){pt(r,r.return,E)}else{var f=eo(r.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(E){pt(r,r.return,E)}}c&64&&z1(r),c&512&&$c(r,r.return);break;case 3:if(Xi(n,r),c&64&&(n=r.updateQueue,n!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{wv(n,i)}catch(E){pt(r,r.return,E)}}break;case 27:i===null&&c&4&&U1(r);case 26:case 5:Xi(n,r),i===null&&c&4&&P1(r),c&512&&$c(r,r.return);break;case 12:Xi(n,r);break;case 31:Xi(n,r),c&4&&F1(n,r);break;case 13:Xi(n,r),c&4&&G1(n,r),c&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=Qw.bind(null,r),f2(n,r))));break;case 22:if(c=r.memoizedState!==null||Yi,!c){i=i!==null&&i.memoizedState!==null||en,f=Yi;var p=en;Yi=c,(en=i)&&!p?Zi(n,r,(r.subtreeFlags&8772)!==0):Xi(n,r),Yi=f,en=p}break;case 30:break;default:Xi(n,r)}}function H1(n){var i=n.alternate;i!==null&&(n.alternate=null,H1(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Po(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Nt=null,Gn=!1;function Wi(n,i,r){for(r=r.child;r!==null;)$1(n,i,r),r=r.sibling}function $1(n,i,r){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Ms,r)}catch{}switch(r.tag){case 26:en||Ei(r,i),Wi(n,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:en||Ei(r,i);var c=Nt,f=Gn;Ba(r.type)&&(Nt=r.stateNode,Gn=!1),Wi(n,i,r),Jc(r.stateNode),Nt=c,Gn=f;break;case 5:en||Ei(r,i);case 6:if(c=Nt,f=Gn,Nt=null,Wi(n,i,r),Nt=c,Gn=f,Nt!==null)if(Gn)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(r.stateNode)}catch(p){pt(r,i,p)}else try{Nt.removeChild(r.stateNode)}catch(p){pt(r,i,p)}break;case 18:Nt!==null&&(Gn?(n=Nt,z0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),Tl(n)):z0(Nt,r.stateNode));break;case 4:c=Nt,f=Gn,Nt=r.stateNode.containerInfo,Gn=!0,Wi(n,i,r),Nt=c,Gn=f;break;case 0:case 11:case 14:case 15:Oa(2,r,i),en||Oa(4,r,i),Wi(n,i,r);break;case 1:en||(Ei(r,i),c=r.stateNode,typeof c.componentWillUnmount=="function"&&L1(r,i,c)),Wi(n,i,r);break;case 21:Wi(n,i,r);break;case 22:en=(c=en)||r.memoizedState!==null,Wi(n,i,r),en=c;break;default:Wi(n,i,r)}}function F1(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Tl(n)}catch(r){pt(i,i.return,r)}}}function G1(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Tl(n)}catch(r){pt(i,i.return,r)}}function Vw(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new B1),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new B1),i;default:throw Error(a(435,n.tag))}}function ph(n,i){var r=Vw(n);i.forEach(function(c){if(!r.has(c)){r.add(c);var f=Kw.bind(null,n,c);c.then(f,f)}})}function Qn(n,i){var r=i.deletions;if(r!==null)for(var c=0;c<r.length;c++){var f=r[c],p=n,E=i,x=E;e:for(;x!==null;){switch(x.tag){case 27:if(Ba(x.type)){Nt=x.stateNode,Gn=!1;break e}break;case 5:Nt=x.stateNode,Gn=!1;break e;case 3:case 4:Nt=x.stateNode.containerInfo,Gn=!0;break e}x=x.return}if(Nt===null)throw Error(a(160));$1(p,E,f),Nt=null,Gn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Q1(i,n),i=i.sibling}var Fs=null;function Q1(n,i){var r=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Qn(i,n),Kn(n),c&4&&(Oa(3,n,n.return),Hc(3,n),Oa(5,n,n.return));break;case 1:Qn(i,n),Kn(n),c&512&&(en||r===null||Ei(r,r.return)),c&64&&Yi&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var f=Fs;if(Qn(i,n),Kn(n),c&512&&(en||r===null||Ei(r,r.return)),c&4){var p=r!==null?r.memoizedState:null;if(c=n.memoizedState,r===null)if(c===null)if(n.stateNode===null){e:{c=n.type,r=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":p=f.getElementsByTagName("title")[0],(!p||p[oi]||p[Kt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(c),f.head.insertBefore(p,f.querySelector("head > title"))),bn(p,c,r),p[Kt]=n,Yt(p),c=p;break e;case"link":var E=Q0("link","href",f).get(c+(r.href||""));if(E){for(var x=0;x<E.length;x++)if(p=E[x],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){E.splice(x,1);break t}}p=f.createElement(c),bn(p,c,r),f.head.appendChild(p);break;case"meta":if(E=Q0("meta","content",f).get(c+(r.content||""))){for(x=0;x<E.length;x++)if(p=E[x],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){E.splice(x,1);break t}}p=f.createElement(c),bn(p,c,r),f.head.appendChild(p);break;default:throw Error(a(468,c))}p[Kt]=n,Yt(p),c=p}n.stateNode=c}else K0(f,n.type,n.stateNode);else n.stateNode=G0(f,c,n.memoizedProps);else p!==c?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,c===null?K0(f,n.type,n.stateNode):G0(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&wp(n,n.memoizedProps,r.memoizedProps)}break;case 27:Qn(i,n),Kn(n),c&512&&(en||r===null||Ei(r,r.return)),r!==null&&c&4&&wp(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Qn(i,n),Kn(n),c&512&&(en||r===null||Ei(r,r.return)),n.flags&32){f=n.stateNode;try{Fn(f,"")}catch(Ie){pt(n,n.return,Ie)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,wp(n,f,r!==null?r.memoizedProps:f)),c&1024&&(Np=!0);break;case 6:if(Qn(i,n),Kn(n),c&4){if(n.stateNode===null)throw Error(a(162));c=n.memoizedProps,r=n.stateNode;try{r.nodeValue=c}catch(Ie){pt(n,n.return,Ie)}}break;case 3:if(kh=null,f=Fs,Fs=Nh(i.containerInfo),Qn(i,n),Fs=f,Kn(n),c&4&&r!==null&&r.memoizedState.isDehydrated)try{Tl(i.containerInfo)}catch(Ie){pt(n,n.return,Ie)}Np&&(Np=!1,K1(n));break;case 4:c=Fs,Fs=Nh(n.stateNode.containerInfo),Qn(i,n),Kn(n),Fs=c;break;case 12:Qn(i,n),Kn(n);break;case 31:Qn(i,n),Kn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,ph(n,c)));break;case 13:Qn(i,n),Kn(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(_h=Ln()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,ph(n,c)));break;case 22:f=n.memoizedState!==null;var V=r!==null&&r.memoizedState!==null,W=Yi,se=en;if(Yi=W||f,en=se||V,Qn(i,n),en=se,Yi=W,Kn(n),c&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(r===null||V||Yi||en||to(n)),r=null,i=n;;){if(i.tag===5||i.tag===26){if(r===null){V=r=i;try{if(p=V.stateNode,f)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{x=V.stateNode;var re=V.memoizedProps.style,J=re!=null&&re.hasOwnProperty("display")?re.display:null;x.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Ie){pt(V,V.return,Ie)}}}else if(i.tag===6){if(r===null){V=i;try{V.stateNode.nodeValue=f?"":V.memoizedProps}catch(Ie){pt(V,V.return,Ie)}}}else if(i.tag===18){if(r===null){V=i;try{var te=V.stateNode;f?L0(te,!0):L0(V.stateNode,!1)}catch(Ie){pt(V,V.return,Ie)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,ph(n,r))));break;case 19:Qn(i,n),Kn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,ph(n,c)));break;case 30:break;case 21:break;default:Qn(i,n),Kn(n)}}function Kn(n){var i=n.flags;if(i&2){try{for(var r,c=n.return;c!==null;){if(V1(c)){r=c;break}c=c.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var f=r.stateNode,p=Ip(n);mh(n,p,f);break;case 5:var E=r.stateNode;r.flags&32&&(Fn(E,""),r.flags&=-33);var x=Ip(n);mh(n,x,E);break;case 3:case 4:var V=r.stateNode.containerInfo,W=Ip(n);Rp(n,W,V);break;default:throw Error(a(161))}}catch(se){pt(n,n.return,se)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function K1(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;K1(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Xi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)q1(n,i.alternate,i),i=i.sibling}function to(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Oa(4,i,i.return),to(i);break;case 1:Ei(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&L1(i,i.return,r),to(i);break;case 27:Jc(i.stateNode);case 26:case 5:Ei(i,i.return),to(i);break;case 22:i.memoizedState===null&&to(i);break;case 30:to(i);break;default:to(i)}n=n.sibling}}function Zi(n,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=n,p=i,E=p.flags;switch(p.tag){case 0:case 11:case 15:Zi(f,p,r),Hc(4,p);break;case 1:if(Zi(f,p,r),c=p,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(W){pt(c,c.return,W)}if(c=p,f=c.updateQueue,f!==null){var x=c.stateNode;try{var V=f.shared.hiddenCallbacks;if(V!==null)for(f.shared.hiddenCallbacks=null,f=0;f<V.length;f++)xv(V[f],x)}catch(W){pt(c,c.return,W)}}r&&E&64&&z1(p),$c(p,p.return);break;case 27:U1(p);case 26:case 5:Zi(f,p,r),r&&c===null&&E&4&&P1(p),$c(p,p.return);break;case 12:Zi(f,p,r);break;case 31:Zi(f,p,r),r&&E&4&&F1(f,p);break;case 13:Zi(f,p,r),r&&E&4&&G1(f,p);break;case 22:p.memoizedState===null&&Zi(f,p,r),$c(p,p.return);break;case 30:break;default:Zi(f,p,r)}i=i.sibling}}function Cp(n,i){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&Cc(r))}function kp(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Cc(n))}function Gs(n,i,r,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Y1(n,i,r,c),i=i.sibling}function Y1(n,i,r,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Gs(n,i,r,c),f&2048&&Hc(9,i);break;case 1:Gs(n,i,r,c);break;case 3:Gs(n,i,r,c),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Cc(n)));break;case 12:if(f&2048){Gs(n,i,r,c),n=i.stateNode;try{var p=i.memoizedProps,E=p.id,x=p.onPostCommit;typeof x=="function"&&x(E,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(V){pt(i,i.return,V)}}else Gs(n,i,r,c);break;case 31:Gs(n,i,r,c);break;case 13:Gs(n,i,r,c);break;case 23:break;case 22:p=i.stateNode,E=i.alternate,i.memoizedState!==null?p._visibility&2?Gs(n,i,r,c):Fc(n,i):p._visibility&2?Gs(n,i,r,c):(p._visibility|=2,dl(n,i,r,c,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Cp(E,i);break;case 24:Gs(n,i,r,c),f&2048&&kp(i.alternate,i);break;default:Gs(n,i,r,c)}}function dl(n,i,r,c,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=n,E=i,x=r,V=c,W=E.flags;switch(E.tag){case 0:case 11:case 15:dl(p,E,x,V,f),Hc(8,E);break;case 23:break;case 22:var se=E.stateNode;E.memoizedState!==null?se._visibility&2?dl(p,E,x,V,f):Fc(p,E):(se._visibility|=2,dl(p,E,x,V,f)),f&&W&2048&&Cp(E.alternate,E);break;case 24:dl(p,E,x,V,f),f&&W&2048&&kp(E.alternate,E);break;default:dl(p,E,x,V,f)}i=i.sibling}}function Fc(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=n,c=i,f=c.flags;switch(c.tag){case 22:Fc(r,c),f&2048&&Cp(c.alternate,c);break;case 24:Fc(r,c),f&2048&&kp(c.alternate,c);break;default:Fc(r,c)}i=i.sibling}}var Gc=8192;function hl(n,i,r){if(n.subtreeFlags&Gc)for(n=n.child;n!==null;)W1(n,i,r),n=n.sibling}function W1(n,i,r){switch(n.tag){case 26:hl(n,i,r),n.flags&Gc&&n.memoizedState!==null&&x2(r,Fs,n.memoizedState,n.memoizedProps);break;case 5:hl(n,i,r);break;case 3:case 4:var c=Fs;Fs=Nh(n.stateNode.containerInfo),hl(n,i,r),Fs=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Gc,Gc=16777216,hl(n,i,r),Gc=c):hl(n,i,r));break;default:hl(n,i,r)}}function X1(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Qc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];hn=c,J1(c,n)}X1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Z1(n),n=n.sibling}function Z1(n){switch(n.tag){case 0:case 11:case 15:Qc(n),n.flags&2048&&Oa(9,n,n.return);break;case 3:Qc(n);break;case 12:Qc(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,gh(n)):Qc(n);break;default:Qc(n)}}function gh(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];hn=c,J1(c,n)}X1(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Oa(8,i,i.return),gh(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,gh(i));break;default:gh(i)}n=n.sibling}}function J1(n,i){for(;hn!==null;){var r=hn;switch(r.tag){case 0:case 11:case 15:Oa(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Cc(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,hn=c;else e:for(r=n;hn!==null;){c=hn;var f=c.sibling,p=c.return;if(H1(c),c===r){hn=null;break e}if(f!==null){f.return=p,hn=f;break e}hn=p}}}var Uw={getCacheForType:function(n){var i=yn(Xt),r=i.data.get(n);return r===void 0&&(r=n(),i.data.set(n,r)),r},cacheSignal:function(){return yn(Xt).controller.signal}},Bw=typeof WeakMap=="function"?WeakMap:Map,ut=0,bt=null,Ye=null,Xe=0,mt=0,rs=null,Ma=!1,fl=!1,jp=!1,Ji=0,Mt=0,za=0,no=0,Dp=0,os=0,ml=0,Kc=null,Yn=null,Op=!1,_h=0,e0=0,yh=1/0,vh=null,La=null,on=0,Pa=null,pl=null,ea=0,Mp=0,zp=null,t0=null,Yc=0,Lp=null;function ls(){return(ut&2)!==0&&Xe!==0?Xe&-Xe:Z.T!==null?Hp():bd()}function n0(){if(os===0)if((Xe&536870912)===0||nt){var n=Nr;Nr<<=1,(Nr&3932160)===0&&(Nr=262144),os=n}else os=536870912;return n=is.current,n!==null&&(n.flags|=32),os}function Wn(n,i,r){(n===bt&&(mt===2||mt===9)||n.cancelPendingCommit!==null)&&(gl(n,0),Va(n,Xe,os,!1)),Cr(n,r),((ut&2)===0||n!==bt)&&(n===bt&&((ut&2)===0&&(no|=r),Mt===4&&Va(n,Xe,os,!1)),Ti(n))}function s0(n,i,r){if((ut&6)!==0)throw Error(a(327));var c=!r&&(i&127)===0&&(i&n.expiredLanes)===0||zs(n,i),f=c?$w(n,i):Vp(n,i,!0),p=c;do{if(f===0){fl&&!c&&Va(n,i,0,!1);break}else{if(r=n.current.alternate,p&&!qw(r)){f=Vp(n,i,!1),p=!1;continue}if(f===2){if(p=i,n.errorRecoveryDisabledLanes&p)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var x=n;f=Kc;var V=x.current.memoizedState.isDehydrated;if(V&&(gl(x,E).flags|=256),E=Vp(x,E,!1),E!==2){if(jp&&!V){x.errorRecoveryDisabledLanes|=p,no|=p,f=4;break e}p=Yn,Yn=f,p!==null&&(Yn===null?Yn=p:Yn.push.apply(Yn,p))}f=E}if(p=!1,f!==2)continue}}if(f===1){gl(n,0),Va(n,i,0,!0);break}e:{switch(c=n,p=f,p){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Va(c,i,os,!Ma);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=_h+300-Ln(),10<f)){if(Va(c,i,os,!Ma),ii(c,0,!0)!==0)break e;ea=i,c.timeoutHandle=O0(i0.bind(null,c,r,Yn,vh,Op,i,os,no,ml,Ma,p,"Throttled",-0,0),f);break e}i0(c,r,Yn,vh,Op,i,os,no,ml,Ma,p,null,-0,0)}}break}while(!0);Ti(n)}function i0(n,i,r,c,f,p,E,x,V,W,se,re,J,te){if(n.timeoutHandle=-1,re=i.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vs},W1(i,p,re);var Ie=(p&62914560)===p?_h-Ln():(p&4194048)===p?e0-Ln():0;if(Ie=w2(re,Ie),Ie!==null){ea=p,n.cancelPendingCommit=Ie(h0.bind(null,n,i,p,r,c,f,E,x,V,se,re,null,J,te)),Va(n,p,E,!W);return}}h0(n,i,p,r,c,f,E,x,V)}function qw(n){for(var i=n;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var f=r[c],p=f.getSnapshot;f=f.value;try{if(!ns(p(),f))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Va(n,i,r,c){i&=~Dp,i&=~no,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var f=i;0<f;){var p=31-Pt(f),E=1<<p;c[p]=-1,f&=~E}r!==0&&kr(n,r,i)}function bh(){return(ut&6)===0?(Wc(0),!1):!0}function Pp(){if(Ye!==null){if(mt===0)var n=Ye.return;else n=Ye,Hi=Qr=null,ep(n),rl=null,jc=0,n=Ye;for(;n!==null;)M1(n.alternate,n),n=n.return;Ye=null}}function gl(n,i){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,l2(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),ea=0,Pp(),bt=n,Ye=r=Bi(n.current,null),Xe=i,mt=0,rs=null,Ma=!1,fl=zs(n,i),jp=!1,ml=os=Dp=no=za=Mt=0,Yn=Kc=null,Op=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var f=31-Pt(c),p=1<<f;i|=n[f],c&=~p}return Ji=i,Bd(),r}function a0(n,i){$e=null,Z.H=Uc,i===al||i===Yd?(i=Ev(),mt=3):i===qm?(i=Ev(),mt=4):mt=i===gp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,rs=i,Ye===null&&(Mt=1,ch(n,As(i,n.current)))}function r0(){var n=is.current;return n===null?!0:(Xe&4194048)===Xe?Rs===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?n===Rs:!1}function o0(){var n=Z.H;return Z.H=Uc,n===null?Uc:n}function l0(){var n=Z.A;return Z.A=Uw,n}function Eh(){Mt=4,Ma||(Xe&4194048)!==Xe&&is.current!==null||(fl=!0),(za&134217727)===0&&(no&134217727)===0||bt===null||Va(bt,Xe,os,!1)}function Vp(n,i,r){var c=ut;ut|=2;var f=o0(),p=l0();(bt!==n||Xe!==i)&&(vh=null,gl(n,i)),i=!1;var E=Mt;e:do try{if(mt!==0&&Ye!==null){var x=Ye,V=rs;switch(mt){case 8:Pp(),E=6;break e;case 3:case 2:case 9:case 6:is.current===null&&(i=!0);var W=mt;if(mt=0,rs=null,_l(n,x,V,W),r&&fl){E=0;break e}break;default:W=mt,mt=0,rs=null,_l(n,x,V,W)}}Hw(),E=Mt;break}catch(se){a0(n,se)}while(!0);return i&&n.shellSuspendCounter++,Hi=Qr=null,ut=c,Z.H=f,Z.A=p,Ye===null&&(bt=null,Xe=0,Bd()),E}function Hw(){for(;Ye!==null;)c0(Ye)}function $w(n,i){var r=ut;ut|=2;var c=o0(),f=l0();bt!==n||Xe!==i?(vh=null,yh=Ln()+500,gl(n,i)):fl=zs(n,i);e:do try{if(mt!==0&&Ye!==null){i=Ye;var p=rs;t:switch(mt){case 1:mt=0,rs=null,_l(n,i,p,1);break;case 2:case 9:if(vv(p)){mt=0,rs=null,u0(i);break}i=function(){mt!==2&&mt!==9||bt!==n||(mt=7),Ti(n)},p.then(i,i);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:vv(p)?(mt=0,rs=null,u0(i)):(mt=0,rs=null,_l(n,i,p,7));break;case 5:var E=null;switch(Ye.tag){case 26:E=Ye.memoizedState;case 5:case 27:var x=Ye;if(E?Y0(E):x.stateNode.complete){mt=0,rs=null;var V=x.sibling;if(V!==null)Ye=V;else{var W=x.return;W!==null?(Ye=W,Th(W)):Ye=null}break t}}mt=0,rs=null,_l(n,i,p,5);break;case 6:mt=0,rs=null,_l(n,i,p,6);break;case 8:Pp(),Mt=6;break e;default:throw Error(a(462))}}Fw();break}catch(se){a0(n,se)}while(!0);return Hi=Qr=null,Z.H=c,Z.A=f,ut=r,Ye!==null?0:(bt=null,Xe=0,Bd(),Mt)}function Fw(){for(;Ye!==null&&!pm();)c0(Ye)}function c0(n){var i=D1(n.alternate,n,Ji);n.memoizedProps=n.pendingProps,i===null?Th(n):Ye=i}function u0(n){var i=n,r=i.alternate;switch(i.tag){case 15:case 0:i=I1(r,i,i.pendingProps,i.type,void 0,Xe);break;case 11:i=I1(r,i,i.pendingProps,i.type.render,i.ref,Xe);break;case 5:ep(i);default:M1(r,i),i=Ye=lv(i,Ji),i=D1(r,i,Ji)}n.memoizedProps=n.pendingProps,i===null?Th(n):Ye=i}function _l(n,i,r,c){Hi=Qr=null,ep(i),rl=null,jc=0;var f=i.return;try{if(Dw(n,f,i,r,Xe)){Mt=1,ch(n,As(r,n.current)),Ye=null;return}}catch(p){if(f!==null)throw Ye=f,p;Mt=1,ch(n,As(r,n.current)),Ye=null;return}i.flags&32768?(nt||c===1?n=!0:fl||(Xe&536870912)!==0?n=!1:(Ma=n=!0,(c===2||c===9||c===3||c===6)&&(c=is.current,c!==null&&c.tag===13&&(c.flags|=16384))),d0(i,n)):Th(i)}function Th(n){var i=n;do{if((i.flags&32768)!==0){d0(i,Ma);return}n=i.return;var r=zw(i.alternate,i,Ji);if(r!==null){Ye=r;return}if(i=i.sibling,i!==null){Ye=i;return}Ye=i=n}while(i!==null);Mt===0&&(Mt=5)}function d0(n,i){do{var r=Lw(n.alternate,n);if(r!==null){r.flags&=32767,Ye=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(n=n.sibling,n!==null)){Ye=n;return}Ye=n=r}while(n!==null);Mt=6,Ye=null}function h0(n,i,r,c,f,p,E,x,V){n.cancelPendingCommit=null;do Sh();while(on!==0);if((ut&6)!==0)throw Error(a(327));if(i!==null){if(i===n.current)throw Error(a(177));if(p=i.lanes|i.childLanes,p|=Im,ym(n,r,p,E,x,V),n===bt&&(Ye=bt=null,Xe=0),pl=i,Pa=n,ea=r,Mp=p,zp=f,t0=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Yw(pa,function(){return _0(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null,f=ge.p,ge.p=2,E=ut,ut|=4;try{Pw(n,i,r)}finally{ut=E,ge.p=f,Z.T=c}}on=1,f0(),m0(),p0()}}function f0(){if(on===1){on=0;var n=Pa,i=pl,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=Z.T,Z.T=null;var c=ge.p;ge.p=2;var f=ut;ut|=4;try{Q1(i,n);var p=Xp,E=Jy(n.containerInfo),x=p.focusedElem,V=p.selectionRange;if(E!==x&&x&&x.ownerDocument&&Zy(x.ownerDocument.documentElement,x)){if(V!==null&&Tm(x)){var W=V.start,se=V.end;if(se===void 0&&(se=W),"selectionStart"in x)x.selectionStart=W,x.selectionEnd=Math.min(se,x.value.length);else{var re=x.ownerDocument||document,J=re&&re.defaultView||window;if(J.getSelection){var te=J.getSelection(),Ie=x.textContent.length,ze=Math.min(V.start,Ie),vt=V.end===void 0?ze:Math.min(V.end,Ie);!te.extend&&ze>vt&&(E=vt,vt=ze,ze=E);var $=Xy(x,ze),q=Xy(x,vt);if($&&q&&(te.rangeCount!==1||te.anchorNode!==$.node||te.anchorOffset!==$.offset||te.focusNode!==q.node||te.focusOffset!==q.offset)){var K=re.createRange();K.setStart($.node,$.offset),te.removeAllRanges(),ze>vt?(te.addRange(K),te.extend(q.node,q.offset)):(K.setEnd(q.node,q.offset),te.addRange(K))}}}}for(re=[],te=x;te=te.parentNode;)te.nodeType===1&&re.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<re.length;x++){var ie=re[x];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Mh=!!Wp,Xp=Wp=null}finally{ut=f,ge.p=c,Z.T=r}}n.current=i,on=2}}function m0(){if(on===2){on=0;var n=Pa,i=pl,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=Z.T,Z.T=null;var c=ge.p;ge.p=2;var f=ut;ut|=4;try{q1(n,i.alternate,i)}finally{ut=f,ge.p=c,Z.T=r}}on=3}}function p0(){if(on===4||on===3){on=0,fd();var n=Pa,i=pl,r=ea,c=t0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?on=5:(on=0,pl=Pa=null,g0(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(La=null),Li(r),i=i.stateNode,pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Ms,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=Z.T,f=ge.p,ge.p=2,Z.T=null;try{for(var p=n.onRecoverableError,E=0;E<c.length;E++){var x=c[E];p(x.value,{componentStack:x.stack})}}finally{Z.T=i,ge.p=f}}(ea&3)!==0&&Sh(),Ti(n),f=n.pendingLanes,(r&261930)!==0&&(f&42)!==0?n===Lp?Yc++:(Yc=0,Lp=n):Yc=0,Wc(0)}}function g0(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Cc(i)))}function Sh(){return f0(),m0(),p0(),_0()}function _0(){if(on!==5)return!1;var n=Pa,i=Mp;Mp=0;var r=Li(ea),c=Z.T,f=ge.p;try{ge.p=32>r?32:r,Z.T=null,r=zp,zp=null;var p=Pa,E=ea;if(on=0,pl=Pa=null,ea=0,(ut&6)!==0)throw Error(a(331));var x=ut;if(ut|=4,Z1(p.current),Y1(p,p.current,E,r),ut=x,Wc(0,!1),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Ms,p)}catch{}return!0}finally{ge.p=f,Z.T=c,g0(n,i)}}function y0(n,i,r){i=As(r,i),i=pp(n.stateNode,i,2),n=ka(n,i,2),n!==null&&(Cr(n,2),Ti(n))}function pt(n,i,r){if(n.tag===3)y0(n,n,r);else for(;i!==null;){if(i.tag===3){y0(i,n,r);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(La===null||!La.has(c))){n=As(r,n),r=v1(2),c=ka(i,r,2),c!==null&&(b1(r,c,i,n),Cr(c,2),Ti(c));break}}i=i.return}}function Up(n,i,r){var c=n.pingCache;if(c===null){c=n.pingCache=new Bw;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(r)||(jp=!0,f.add(r),n=Gw.bind(null,n,i,r),i.then(n,n))}function Gw(n,i,r){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,bt===n&&(Xe&r)===r&&(Mt===4||Mt===3&&(Xe&62914560)===Xe&&300>Ln()-_h?(ut&2)===0&&gl(n,0):Dp|=r,ml===Xe&&(ml=0)),Ti(n)}function v0(n,i){i===0&&(i=vd()),n=$r(n,i),n!==null&&(Cr(n,i),Ti(n))}function Qw(n){var i=n.memoizedState,r=0;i!==null&&(r=i.retryLane),v0(n,r)}function Kw(n,i){var r=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(r=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(i),v0(n,r)}function Yw(n,i){return rn(n,i)}var Ah=null,yl=null,Bp=!1,xh=!1,qp=!1,Ua=0;function Ti(n){n!==yl&&n.next===null&&(yl===null?Ah=yl=n:yl=yl.next=n),xh=!0,Bp||(Bp=!0,Xw())}function Wc(n,i){if(!qp&&xh){qp=!0;do for(var r=!1,c=Ah;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var p=0;else{var E=c.suspendedLanes,x=c.pingedLanes;p=(1<<31-Pt(42|n)+1)-1,p&=f&~(E&~x),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,S0(c,p))}else p=Xe,p=ii(c,c===bt?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||zs(c,p)||(r=!0,S0(c,p));c=c.next}while(r);qp=!1}}function Ww(){b0()}function b0(){xh=Bp=!1;var n=0;Ua!==0&&o2()&&(n=Ua);for(var i=Ln(),r=null,c=Ah;c!==null;){var f=c.next,p=E0(c,i);p===0?(c.next=null,r===null?Ah=f:r.next=f,f===null&&(yl=r)):(r=c,(n!==0||(p&3)!==0)&&(xh=!0)),c=f}on!==0&&on!==5||Wc(n),Ua!==0&&(Ua=0)}function E0(n,i){for(var r=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var E=31-Pt(p),x=1<<E,V=f[E];V===-1?((x&r)===0||(x&c)!==0)&&(f[E]=_m(x,i)):V<=i&&(n.expiredLanes|=x),p&=~x}if(i=bt,r=Xe,r=ii(n,n===i?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,r===0||n===i&&(mt===2||mt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&ma(c),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||zs(n,r)){if(i=r&-r,i===n.callbackPriority)return i;switch(c!==null&&ma(c),Li(r)){case 2:case 8:r=rc;break;case 32:r=pa;break;case 268435456:r=md;break;default:r=pa}return c=T0.bind(null,n),r=rn(r,c),n.callbackPriority=i,n.callbackNode=r,i}return c!==null&&c!==null&&ma(c),n.callbackPriority=2,n.callbackNode=null,2}function T0(n,i){if(on!==0&&on!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(Sh()&&n.callbackNode!==r)return null;var c=Xe;return c=ii(n,n===bt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(s0(n,c,i),E0(n,Ln()),n.callbackNode!=null&&n.callbackNode===r?T0.bind(null,n):null)}function S0(n,i){if(Sh())return null;s0(n,i,!0)}function Xw(){c2(function(){(ut&6)!==0?rn(ac,Ww):b0()})}function Hp(){if(Ua===0){var n=sl;n===0&&(n=ni,ni<<=1,(ni&261888)===0&&(ni=256)),Ua=n}return Ua}function A0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:qo(""+n)}function x0(n,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,n.id&&r.setAttribute("form",n.id),i.parentNode.insertBefore(r,i),n=new FormData(n),r.parentNode.removeChild(r),n}function Zw(n,i,r,c,f){if(i==="submit"&&r&&r.stateNode===f){var p=A0((f[un]||null).action),E=c.submitter;E&&(i=(i=E[un]||null)?A0(i.formAction):E.getAttribute("formAction"),i!==null&&(p=i,E=null));var x=new pi("action","action",null,c,f);n.push({event:x,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ua!==0){var V=E?x0(f,E):new FormData(f);cp(r,{pending:!0,data:V,method:f.method,action:p},null,V)}}else typeof p=="function"&&(x.preventDefault(),V=E?x0(f,E):new FormData(f),cp(r,{pending:!0,data:V,method:f.method,action:p},p,V))},currentTarget:f}]})}}for(var $p=0;$p<wm.length;$p++){var Fp=wm[$p],Jw=Fp.toLowerCase(),e2=Fp[0].toUpperCase()+Fp.slice(1);$s(Jw,"on"+e2)}$s(nv,"onAnimationEnd"),$s(sv,"onAnimationIteration"),$s(iv,"onAnimationStart"),$s("dblclick","onDoubleClick"),$s("focusin","onFocus"),$s("focusout","onBlur"),$s(gw,"onTransitionRun"),$s(_w,"onTransitionStart"),$s(yw,"onTransitionCancel"),$s(av,"onTransitionEnd"),di("onMouseEnter",["mouseout","mouseover"]),di("onMouseLeave",["mouseout","mouseover"]),di("onPointerEnter",["pointerout","pointerover"]),di("onPointerLeave",["pointerout","pointerover"]),ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ui("onBeforeInput",["compositionend","keypress","textInput","paste"]),ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xc));function w0(n,i){i=(i&4)!==0;for(var r=0;r<n.length;r++){var c=n[r],f=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var E=c.length-1;0<=E;E--){var x=c[E],V=x.instance,W=x.currentTarget;if(x=x.listener,V!==p&&f.isPropagationStopped())break e;p=x,f.currentTarget=W;try{p(f)}catch(se){Ud(se)}f.currentTarget=null,p=V}else for(E=0;E<c.length;E++){if(x=c[E],V=x.instance,W=x.currentTarget,x=x.listener,V!==p&&f.isPropagationStopped())break e;p=x,f.currentTarget=W;try{p(f)}catch(se){Ud(se)}f.currentTarget=null,p=V}}}}function We(n,i){var r=i[Lo];r===void 0&&(r=i[Lo]=new Set);var c=n+"__bubble";r.has(c)||(I0(i,n,2,!1),r.add(c))}function Gp(n,i,r){var c=0;i&&(c|=4),I0(r,n,c,i)}var wh="_reactListening"+Math.random().toString(36).slice(2);function Qp(n){if(!n[wh]){n[wh]=!0,cc.forEach(function(r){r!=="selectionchange"&&(t2.has(r)||Gp(r,!1,n),Gp(r,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[wh]||(i[wh]=!0,Gp("selectionchange",!1,i))}}function I0(n,i,r,c){switch(nb(i)){case 2:var f=N2;break;case 8:f=C2;break;default:f=lg}r=f.bind(null,i,r,n),f=void 0,!zr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,r,{capture:!0,passive:f}):n.addEventListener(i,r,!0):f!==void 0?n.addEventListener(i,r,{passive:f}):n.addEventListener(i,r,!1)}function Kp(n,i,r,c,f){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var x=c.stateNode.containerInfo;if(x===f)break;if(E===4)for(E=c.return;E!==null;){var V=E.tag;if((V===3||V===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;x!==null;){if(E=li(x),E===null)return;if(V=E.tag,V===5||V===6||V===26||V===27){c=p=E;continue e}x=x.parentNode}}c=c.return}Ea(function(){var W=p,se=bs(r),re=[];e:{var J=rv.get(n);if(J!==void 0){var te=pi,Ie=n;switch(n){case"keypress":if(Pr(r)===0)break e;case"keydown":case"keyup":te=Ld;break;case"focusin":Ie="focus",te=Ur;break;case"focusout":Ie="blur",te=Ur;break;case"beforeblur":case"afterblur":te=Ur;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Rd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=y;break;case nv:case sv:case iv:te=Cd;break;case av:te=R;break;case"scroll":case"scrollend":te=Ec;break;case"wheel":te=ee;break;case"copy":case"cut":case"paste":te=kd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Ui;break;case"toggle":case"beforetoggle":te=He}var ze=(i&4)!==0,vt=!ze&&(n==="scroll"||n==="scrollend"),$=ze?J!==null?J+"Capture":null:J;ze=[];for(var q=W,K;q!==null;){var ie=q;if(K=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||K===null||$===null||(ie=Us(q,$),ie!=null&&ze.push(Zc(q,ie,K))),vt)break;q=q.return}0<ze.length&&(J=new te(J,Ie,null,r,se),re.push({event:J,listeners:ze}))}}if((i&7)===0){e:{if(J=n==="mouseover"||n==="pointerover",te=n==="mouseout"||n==="pointerout",J&&r!==yc&&(Ie=r.relatedTarget||r.fromElement)&&(li(Ie)||Ie[ri]))break e;if((te||J)&&(J=se.window===se?se:(J=se.ownerDocument)?J.defaultView||J.parentWindow:window,te?(Ie=r.relatedTarget||r.toElement,te=W,Ie=Ie?li(Ie):null,Ie!==null&&(vt=l(Ie),ze=Ie.tag,Ie!==vt||ze!==5&&ze!==27&&ze!==6)&&(Ie=null)):(te=null,Ie=W),te!==Ie)){if(ze=Tc,ie="onMouseLeave",$="onMouseEnter",q="mouse",(n==="pointerout"||n==="pointerover")&&(ze=Ui,ie="onPointerLeave",$="onPointerEnter",q="pointer"),vt=te==null?J:es(te),K=Ie==null?J:es(Ie),J=new ze(ie,q+"leave",te,r,se),J.target=vt,J.relatedTarget=K,ie=null,li(se)===W&&(ze=new ze($,q+"enter",Ie,r,se),ze.target=K,ze.relatedTarget=vt,ie=ze),vt=ie,te&&Ie)t:{for(ze=n2,$=te,q=Ie,K=0,ie=$;ie;ie=ze(ie))K++;ie=0;for(var je=q;je;je=ze(je))ie++;for(;0<K-ie;)$=ze($),K--;for(;0<ie-K;)q=ze(q),ie--;for(;K--;){if($===q||q!==null&&$===q.alternate){ze=$;break t}$=ze($),q=ze(q)}ze=null}else ze=null;te!==null&&R0(re,J,te,ze,!1),Ie!==null&&vt!==null&&R0(re,vt,Ie,ze,!0)}}e:{if(J=W?es(W):window,te=J.nodeName&&J.nodeName.toLowerCase(),te==="select"||te==="input"&&J.type==="file")var rt=Fy;else if(Hy(J))if(Gy)rt=fw;else{rt=dw;var Ce=uw}else te=J.nodeName,!te||te.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?W&&Bo(W.elementType)&&(rt=Fy):rt=hw;if(rt&&(rt=rt(n,W))){$y(re,rt,r,se);break e}Ce&&Ce(n,J,W),n==="focusout"&&W&&J.type==="number"&&W.memoizedProps.value!=null&&pc(J,"number",J.value)}switch(Ce=W?es(W):window,n){case"focusin":(Hy(Ce)||Ce.contentEditable==="true")&&(Yo=Ce,Sm=W,Ic=null);break;case"focusout":Ic=Sm=Yo=null;break;case"mousedown":Am=!0;break;case"contextmenu":case"mouseup":case"dragend":Am=!1,ev(re,r,se);break;case"selectionchange":if(pw)break;case"keydown":case"keyup":ev(re,r,se)}var Ge;if(ct)e:{switch(n){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Ko?Br(n,r)&&(Ze="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(Ze="onCompositionStart");Ze&&(yi&&r.locale!=="ko"&&(Ko||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Ko&&(Ge=bc()):(mi=se,vc="value"in mi?mi.value:mi.textContent,Ko=!0)),Ce=Ih(W,Ze),0<Ce.length&&(Ze=new _i(Ze,n,null,r,se),re.push({event:Ze,listeners:Ce}),Ge?Ze.data=Ge:(Ge=Qo(r),Ge!==null&&(Ze.data=Ge)))),(Ge=Ts?rw(n,r):ow(n,r))&&(Ze=Ih(W,"onBeforeInput"),0<Ze.length&&(Ce=new _i("onBeforeInput","beforeinput",null,r,se),re.push({event:Ce,listeners:Ze}),Ce.data=Ge)),Zw(re,n,W,r,se)}w0(re,i)})}function Zc(n,i,r){return{instance:n,listener:i,currentTarget:r}}function Ih(n,i){for(var r=i+"Capture",c=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Us(n,r),f!=null&&c.unshift(Zc(n,f,p)),f=Us(n,i),f!=null&&c.push(Zc(n,f,p))),n.tag===3)return c;n=n.return}return[]}function n2(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function R0(n,i,r,c,f){for(var p=i._reactName,E=[];r!==null&&r!==c;){var x=r,V=x.alternate,W=x.stateNode;if(x=x.tag,V!==null&&V===c)break;x!==5&&x!==26&&x!==27||W===null||(V=W,f?(W=Us(r,p),W!=null&&E.unshift(Zc(r,W,V))):f||(W=Us(r,p),W!=null&&E.push(Zc(r,W,V)))),r=r.return}E.length!==0&&n.push({event:i,listeners:E})}var s2=/\r\n?/g,i2=/\u0000|\uFFFD/g;function N0(n){return(typeof n=="string"?n:""+n).replace(s2,`
`).replace(i2,"")}function C0(n,i){return i=N0(i),N0(n)===i}function yt(n,i,r,c,f,p){switch(r){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Fn(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Fn(n,""+c);break;case"className":ts(n,"class",c);break;case"tabIndex":ts(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ts(n,r,c);break;case"style":_c(n,c,p);break;case"data":if(i!=="object"){ts(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||r!=="href")){n.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=qo(""+c),n.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(i!=="input"&&yt(n,i,"name",f.name,f,null),yt(n,i,"formEncType",f.formEncType,f,null),yt(n,i,"formMethod",f.formMethod,f,null),yt(n,i,"formTarget",f.formTarget,f,null)):(yt(n,i,"encType",f.encType,f,null),yt(n,i,"method",f.method,f,null),yt(n,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=qo(""+c),n.setAttribute(r,c);break;case"onClick":c!=null&&(n.onclick=Vs);break;case"onScroll":c!=null&&We("scroll",n);break;case"onScrollEnd":c!=null&&We("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=r}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}r=qo(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""+c):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":c===!0?n.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,c):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(r,c):n.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(r):n.setAttribute(r,c);break;case"popover":We("beforetoggle",n),We("toggle",n),Vo(n,"popover",c);break;case"xlinkActuate":Wt(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Wt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Wt(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Wt(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Wt(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Wt(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Wt(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Wt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Wt(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Vo(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Id.get(r)||r,Vo(n,r,c))}}function Yp(n,i,r,c,f,p){switch(r){case"style":_c(n,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=r}}break;case"children":typeof c=="string"?Fn(n,c):(typeof c=="number"||typeof c=="bigint")&&Fn(n,""+c);break;case"onScroll":c!=null&&We("scroll",n);break;case"onScrollEnd":c!=null&&We("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Vs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uc.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),i=r.slice(2,f?r.length-7:void 0),p=n[un]||null,p=p!=null?p[r]:null,typeof p=="function"&&n.removeEventListener(i,p,f),typeof c=="function")){typeof p!="function"&&p!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(i,c,f);break e}r in n?n[r]=c:c===!0?n.setAttribute(r,""):Vo(n,r,c)}}}function bn(n,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",n),We("load",n);var c=!1,f=!1,p;for(p in r)if(r.hasOwnProperty(p)){var E=r[p];if(E!=null)switch(p){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:yt(n,i,p,E,r,null)}}f&&yt(n,i,"srcSet",r.srcSet,r,null),c&&yt(n,i,"src",r.src,r,null);return;case"input":We("invalid",n);var x=p=E=f=null,V=null,W=null;for(c in r)if(r.hasOwnProperty(c)){var se=r[c];if(se!=null)switch(c){case"name":f=se;break;case"type":E=se;break;case"checked":V=se;break;case"defaultChecked":W=se;break;case"value":p=se;break;case"defaultValue":x=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,i));break;default:yt(n,i,c,se,r,null)}}Ad(n,p,x,V,W,E,f,!1);return;case"select":We("invalid",n),c=E=p=null;for(f in r)if(r.hasOwnProperty(f)&&(x=r[f],x!=null))switch(f){case"value":p=x;break;case"defaultValue":E=x;break;case"multiple":c=x;default:yt(n,i,f,x,r,null)}i=p,r=E,n.multiple=!!c,i!=null?_a(n,!!c,i,!1):r!=null&&_a(n,!!c,r,!0);return;case"textarea":We("invalid",n),p=f=c=null;for(E in r)if(r.hasOwnProperty(E)&&(x=r[E],x!=null))switch(E){case"value":c=x;break;case"defaultValue":f=x;break;case"children":p=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(a(91));break;default:yt(n,i,E,x,r,null)}ya(n,c,f,p);return;case"option":for(V in r)r.hasOwnProperty(V)&&(c=r[V],c!=null)&&(V==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":yt(n,i,V,c,r,null));return;case"dialog":We("beforetoggle",n),We("toggle",n),We("cancel",n),We("close",n);break;case"iframe":case"object":We("load",n);break;case"video":case"audio":for(c=0;c<Xc.length;c++)We(Xc[c],n);break;case"image":We("error",n),We("load",n);break;case"details":We("toggle",n);break;case"embed":case"source":case"link":We("error",n),We("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in r)if(r.hasOwnProperty(W)&&(c=r[W],c!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:yt(n,i,W,c,r,null)}return;default:if(Bo(i)){for(se in r)r.hasOwnProperty(se)&&(c=r[se],c!==void 0&&Yp(n,i,se,c,r,void 0));return}}for(x in r)r.hasOwnProperty(x)&&(c=r[x],c!=null&&yt(n,i,x,c,r,null))}function a2(n,i,r,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,E=null,x=null,V=null,W=null,se=null;for(te in r){var re=r[te];if(r.hasOwnProperty(te)&&re!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":V=re;default:c.hasOwnProperty(te)||yt(n,i,te,null,c,re)}}for(var J in c){var te=c[J];if(re=r[J],c.hasOwnProperty(J)&&(te!=null||re!=null))switch(J){case"type":p=te;break;case"name":f=te;break;case"checked":W=te;break;case"defaultChecked":se=te;break;case"value":E=te;break;case"defaultValue":x=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,i));break;default:te!==re&&yt(n,i,J,te,c,re)}}Uo(n,E,x,V,W,se,p,f);return;case"select":te=E=x=J=null;for(p in r)if(V=r[p],r.hasOwnProperty(p)&&V!=null)switch(p){case"value":break;case"multiple":te=V;default:c.hasOwnProperty(p)||yt(n,i,p,null,c,V)}for(f in c)if(p=c[f],V=r[f],c.hasOwnProperty(f)&&(p!=null||V!=null))switch(f){case"value":J=p;break;case"defaultValue":x=p;break;case"multiple":E=p;default:p!==V&&yt(n,i,f,p,c,V)}i=x,r=E,c=te,J!=null?_a(n,!!r,J,!1):!!c!=!!r&&(i!=null?_a(n,!!r,i,!0):_a(n,!!r,r?[]:"",!1));return;case"textarea":te=J=null;for(x in r)if(f=r[x],r.hasOwnProperty(x)&&f!=null&&!c.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:yt(n,i,x,null,c,f)}for(E in c)if(f=c[E],p=r[E],c.hasOwnProperty(E)&&(f!=null||p!=null))switch(E){case"value":J=f;break;case"defaultValue":te=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==p&&yt(n,i,E,f,c,p)}xd(n,J,te);return;case"option":for(var Ie in r)J=r[Ie],r.hasOwnProperty(Ie)&&J!=null&&!c.hasOwnProperty(Ie)&&(Ie==="selected"?n.selected=!1:yt(n,i,Ie,null,c,J));for(V in c)J=c[V],te=r[V],c.hasOwnProperty(V)&&J!==te&&(J!=null||te!=null)&&(V==="selected"?n.selected=J&&typeof J!="function"&&typeof J!="symbol":yt(n,i,V,J,c,te));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in r)J=r[ze],r.hasOwnProperty(ze)&&J!=null&&!c.hasOwnProperty(ze)&&yt(n,i,ze,null,c,J);for(W in c)if(J=c[W],te=r[W],c.hasOwnProperty(W)&&J!==te&&(J!=null||te!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(a(137,i));break;default:yt(n,i,W,J,c,te)}return;default:if(Bo(i)){for(var vt in r)J=r[vt],r.hasOwnProperty(vt)&&J!==void 0&&!c.hasOwnProperty(vt)&&Yp(n,i,vt,void 0,c,J);for(se in c)J=c[se],te=r[se],!c.hasOwnProperty(se)||J===te||J===void 0&&te===void 0||Yp(n,i,se,J,c,te);return}}for(var $ in r)J=r[$],r.hasOwnProperty($)&&J!=null&&!c.hasOwnProperty($)&&yt(n,i,$,null,c,J);for(re in c)J=c[re],te=r[re],!c.hasOwnProperty(re)||J===te||J==null&&te==null||yt(n,i,re,J,c,te)}function k0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function r2(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var f=r[c],p=f.transferSize,E=f.initiatorType,x=f.duration;if(p&&x&&k0(E)){for(E=0,x=f.responseEnd,c+=1;c<r.length;c++){var V=r[c],W=V.startTime;if(W>x)break;var se=V.transferSize,re=V.initiatorType;se&&k0(re)&&(V=V.responseEnd,E+=se*(V<x?1:(x-W)/(V-W)))}if(--c,i+=8*(p+E)/(f.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Wp=null,Xp=null;function Rh(n){return n.nodeType===9?n:n.ownerDocument}function j0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function D0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Zp(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Jp=null;function o2(){var n=window.event;return n&&n.type==="popstate"?n===Jp?!1:(Jp=n,!0):(Jp=null,!1)}var O0=typeof setTimeout=="function"?setTimeout:void 0,l2=typeof clearTimeout=="function"?clearTimeout:void 0,M0=typeof Promise=="function"?Promise:void 0,c2=typeof queueMicrotask=="function"?queueMicrotask:typeof M0<"u"?function(n){return M0.resolve(null).then(n).catch(u2)}:O0;function u2(n){setTimeout(function(){throw n})}function Ba(n){return n==="head"}function z0(n,i){var r=i,c=0;do{var f=r.nextSibling;if(n.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(c===0){n.removeChild(f),Tl(i);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")Jc(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,Jc(r);for(var p=r.firstChild;p;){var E=p.nextSibling,x=p.nodeName;p[oi]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&p.rel.toLowerCase()==="stylesheet"||r.removeChild(p),p=E}}else r==="body"&&Jc(n.ownerDocument.body);r=f}while(r);Tl(i)}function L0(n,i){var r=n;n=0;do{var c=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=c}while(r)}function eg(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":eg(r),Po(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function d2(n,i,r,c){for(;n.nodeType===1;){var f=r;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[oi])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=Ns(n.nextSibling),n===null)break}return null}function h2(n,i,r){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Ns(n.nextSibling),n===null))return null;return n}function P0(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Ns(n.nextSibling),n===null))return null;return n}function tg(n){return n.data==="$?"||n.data==="$~"}function ng(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function f2(n,i){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||r.readyState!=="loading")i();else{var c=function(){i(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Ns(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var sg=null;function V0(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(i===0)return Ns(n.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}n=n.nextSibling}return null}function U0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return n;i--}else r!=="/$"&&r!=="/&"||i++}n=n.previousSibling}return null}function B0(n,i,r){switch(i=Rh(r),n){case"html":if(n=i.documentElement,!n)throw Error(a(452));return n;case"head":if(n=i.head,!n)throw Error(a(453));return n;case"body":if(n=i.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function Jc(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Po(n)}var Cs=new Map,q0=new Set;function Nh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ta=ge.d;ge.d={f:m2,r:p2,D:g2,C:_2,L:y2,m:v2,X:E2,S:b2,M:T2};function m2(){var n=ta.f(),i=bh();return n||i}function p2(n){var i=vs(n);i!==null&&i.tag===5&&i.type==="form"?a1(i):ta.r(n)}var vl=typeof document>"u"?null:document;function H0(n,i,r){var c=vl;if(c&&typeof i=="string"&&i){var f=$n(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),q0.has(f)||(q0.add(f),n={rel:n,crossOrigin:r,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),bn(i,"link",n),Yt(i),c.head.appendChild(i)))}}function g2(n){ta.D(n),H0("dns-prefetch",n,null)}function _2(n,i){ta.C(n,i),H0("preconnect",n,i)}function y2(n,i,r){ta.L(n,i,r);var c=vl;if(c&&n&&i){var f='link[rel="preload"][as="'+$n(i)+'"]';i==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+$n(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+$n(r.imageSizes)+'"]')):f+='[href="'+$n(n)+'"]';var p=f;switch(i){case"style":p=bl(n);break;case"script":p=El(n)}Cs.has(p)||(n=b({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:n,as:i},r),Cs.set(p,n),c.querySelector(f)!==null||i==="style"&&c.querySelector(eu(p))||i==="script"&&c.querySelector(tu(p))||(i=c.createElement("link"),bn(i,"link",n),Yt(i),c.head.appendChild(i)))}}function v2(n,i){ta.m(n,i);var r=vl;if(r&&n){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+$n(c)+'"][href="'+$n(n)+'"]',p=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=El(n)}if(!Cs.has(p)&&(n=b({rel:"modulepreload",href:n},i),Cs.set(p,n),r.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(tu(p)))return}c=r.createElement("link"),bn(c,"link",n),Yt(c),r.head.appendChild(c)}}}function b2(n,i,r){ta.S(n,i,r);var c=vl;if(c&&n){var f=ci(c).hoistableStyles,p=bl(n);i=i||"default";var E=f.get(p);if(!E){var x={loading:0,preload:null};if(E=c.querySelector(eu(p)))x.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":i},r),(r=Cs.get(p))&&ig(n,r);var V=E=c.createElement("link");Yt(V),bn(V,"link",n),V._p=new Promise(function(W,se){V.onload=W,V.onerror=se}),V.addEventListener("load",function(){x.loading|=1}),V.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Ch(E,i,c)}E={type:"stylesheet",instance:E,count:1,state:x},f.set(p,E)}}}function E2(n,i){ta.X(n,i);var r=vl;if(r&&n){var c=ci(r).hoistableScripts,f=El(n),p=c.get(f);p||(p=r.querySelector(tu(f)),p||(n=b({src:n,async:!0},i),(i=Cs.get(f))&&ag(n,i),p=r.createElement("script"),Yt(p),bn(p,"link",n),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function T2(n,i){ta.M(n,i);var r=vl;if(r&&n){var c=ci(r).hoistableScripts,f=El(n),p=c.get(f);p||(p=r.querySelector(tu(f)),p||(n=b({src:n,async:!0,type:"module"},i),(i=Cs.get(f))&&ag(n,i),p=r.createElement("script"),Yt(p),bn(p,"link",n),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function $0(n,i,r,c){var f=(f=he.current)?Nh(f):null;if(!f)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=bl(r.href),r=ci(f).hoistableStyles,c=r.get(i),c||(c={type:"style",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=bl(r.href);var p=ci(f).hoistableStyles,E=p.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,E),(p=f.querySelector(eu(n)))&&!p._p&&(E.instance=p,E.state.loading=5),Cs.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Cs.set(n,r),p||S2(f,n,r,E.state))),i&&c===null)throw Error(a(528,""));return E}if(i&&c!==null)throw Error(a(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=El(r),r=ci(f).hoistableScripts,c=r.get(i),c||(c={type:"script",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function bl(n){return'href="'+$n(n)+'"'}function eu(n){return'link[rel="stylesheet"]['+n+"]"}function F0(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function S2(n,i,r,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),bn(i,"link",r),Yt(i),n.head.appendChild(i))}function El(n){return'[src="'+$n(n)+'"]'}function tu(n){return"script[async]"+n}function G0(n,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+$n(r.href)+'"]');if(c)return i.instance=c,Yt(c),c;var f=b({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Yt(c),bn(c,"style",f),Ch(c,r.precedence,n),i.instance=c;case"stylesheet":f=bl(r.href);var p=n.querySelector(eu(f));if(p)return i.state.loading|=4,i.instance=p,Yt(p),p;c=F0(r),(f=Cs.get(f))&&ig(c,f),p=(n.ownerDocument||n).createElement("link"),Yt(p);var E=p;return E._p=new Promise(function(x,V){E.onload=x,E.onerror=V}),bn(p,"link",c),i.state.loading|=4,Ch(p,r.precedence,n),i.instance=p;case"script":return p=El(r.src),(f=n.querySelector(tu(p)))?(i.instance=f,Yt(f),f):(c=r,(f=Cs.get(p))&&(c=b({},r),ag(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Yt(f),bn(f,"link",c),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Ch(c,r.precedence,n));return i.instance}function Ch(n,i,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,p=f,E=0;E<c.length;E++){var x=c[E];if(x.dataset.precedence===i)p=x;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(n,i.firstChild))}function ig(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function ag(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var kh=null;function Q0(n,i,r){if(kh===null){var c=new Map,f=kh=new Map;f.set(r,c)}else f=kh,c=f.get(r),c||(c=new Map,f.set(r,c));if(c.has(n))return c;for(c.set(n,null),r=r.getElementsByTagName(n),f=0;f<r.length;f++){var p=r[f];if(!(p[oi]||p[Kt]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(i)||"";E=n+E;var x=c.get(E);x?x.push(p):c.set(E,[p])}}return c}function K0(n,i,r){n=n.ownerDocument||n,n.head.insertBefore(r,i==="title"?n.querySelector("head > title"):null)}function A2(n,i,r){if(r===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Y0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function x2(n,i,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=bl(c.href),p=i.querySelector(eu(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=jh.bind(n),i.then(n,n)),r.state.loading|=4,r.instance=p,Yt(p);return}p=i.ownerDocument||i,c=F0(c),(f=Cs.get(f))&&ig(c,f),p=p.createElement("link"),Yt(p);var E=p;E._p=new Promise(function(x,V){E.onload=x,E.onerror=V}),bn(p,"link",c),r.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=jh.bind(n),i.addEventListener("load",r),i.addEventListener("error",r))}}var rg=0;function w2(n,i){return n.stylesheets&&n.count===0&&Oh(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var c=setTimeout(function(){if(n.stylesheets&&Oh(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+i);0<n.imgBytes&&rg===0&&(rg=62500*r2());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Oh(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>rg?50:800)+i);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function jh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Oh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Dh=null;function Oh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Dh=new Map,i.forEach(I2,n),Dh=null,jh.call(n))}function I2(n,i){if(!(i.state.loading&4)){var r=Dh.get(n);if(r)var c=r.get(null);else{r=new Map,Dh.set(n,r);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var E=f[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(r.set(E.dataset.precedence,E),c=E)}c&&r.set(null,c)}f=i.instance,E=f.getAttribute("data-precedence"),p=r.get(E)||c,p===c&&r.set(null,f),r.set(E,f),this.count++,c=jh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var nu={$$typeof:z,Provider:null,Consumer:null,_currentValue:Ae,_currentValue2:Ae,_threadCount:0};function R2(n,i,r,c,f,p,E,x,V){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ai(0),this.hiddenUpdates=ai(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function W0(n,i,r,c,f,p,E,x,V,W,se,re){return n=new R2(n,i,r,E,V,W,se,re,x),i=1,p===!0&&(i|=24),p=ss(3,null,null,i),n.current=p,p.stateNode=n,i=Vm(),i.refCount++,n.pooledCache=i,i.refCount++,p.memoizedState={element:c,isDehydrated:r,cache:i},Hm(p),n}function X0(n){return n?(n=Zo,n):Zo}function Z0(n,i,r,c,f,p){f=X0(f),c.context===null?c.context=f:c.pendingContext=f,c=Ca(i),c.payload={element:r},p=p===void 0?null:p,p!==null&&(c.callback=p),r=ka(n,c,i),r!==null&&(Wn(r,n,i),Oc(r,n,i))}function J0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<i?r:i}}function og(n,i){J0(n,i),(n=n.alternate)&&J0(n,i)}function eb(n){if(n.tag===13||n.tag===31){var i=$r(n,67108864);i!==null&&Wn(i,n,67108864),og(n,67108864)}}function tb(n){if(n.tag===13||n.tag===31){var i=ls();i=jr(i);var r=$r(n,i);r!==null&&Wn(r,n,i),og(n,i)}}var Mh=!0;function N2(n,i,r,c){var f=Z.T;Z.T=null;var p=ge.p;try{ge.p=2,lg(n,i,r,c)}finally{ge.p=p,Z.T=f}}function C2(n,i,r,c){var f=Z.T;Z.T=null;var p=ge.p;try{ge.p=8,lg(n,i,r,c)}finally{ge.p=p,Z.T=f}}function lg(n,i,r,c){if(Mh){var f=cg(c);if(f===null)Kp(n,i,c,zh,r),sb(n,c);else if(j2(f,n,i,r,c))c.stopPropagation();else if(sb(n,c),i&4&&-1<k2.indexOf(n)){for(;f!==null;){var p=vs(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=si(p.pendingLanes);if(E!==0){var x=p;for(x.pendingLanes|=2,x.entangledLanes|=2;E;){var V=1<<31-Pt(E);x.entanglements[1]|=V,E&=~V}Ti(p),(ut&6)===0&&(yh=Ln()+500,Wc(0))}}break;case 31:case 13:x=$r(p,2),x!==null&&Wn(x,p,2),bh(),og(p,2)}if(p=cg(c),p===null&&Kp(n,i,c,zh,r),p===f)break;f=p}f!==null&&c.stopPropagation()}else Kp(n,i,c,null,r)}}function cg(n){return n=bs(n),ug(n)}var zh=null;function ug(n){if(zh=null,n=li(n),n!==null){var i=l(n);if(i===null)n=null;else{var r=i.tag;if(r===13){if(n=d(i),n!==null)return n;n=null}else if(r===31){if(n=m(i),n!==null)return n;n=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return zh=n,null}function nb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rr()){case ac:return 2;case rc:return 8;case pa:case gm:return 32;case md:return 268435456;default:return 32}default:return 32}}var dg=!1,qa=null,Ha=null,$a=null,su=new Map,iu=new Map,Fa=[],k2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sb(n,i){switch(n){case"focusin":case"focusout":qa=null;break;case"dragenter":case"dragleave":Ha=null;break;case"mouseover":case"mouseout":$a=null;break;case"pointerover":case"pointerout":su.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":iu.delete(i.pointerId)}}function au(n,i,r,c,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:r,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},i!==null&&(i=vs(i),i!==null&&eb(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function j2(n,i,r,c,f){switch(i){case"focusin":return qa=au(qa,n,i,r,c,f),!0;case"dragenter":return Ha=au(Ha,n,i,r,c,f),!0;case"mouseover":return $a=au($a,n,i,r,c,f),!0;case"pointerover":var p=f.pointerId;return su.set(p,au(su.get(p)||null,n,i,r,c,f)),!0;case"gotpointercapture":return p=f.pointerId,iu.set(p,au(iu.get(p)||null,n,i,r,c,f)),!0}return!1}function ib(n){var i=li(n.target);if(i!==null){var r=l(i);if(r!==null){if(i=r.tag,i===13){if(i=d(r),i!==null){n.blockedOn=i,Ls(n.priority,function(){tb(r)});return}}else if(i===31){if(i=m(r),i!==null){n.blockedOn=i,Ls(n.priority,function(){tb(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Lh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var r=cg(n.nativeEvent);if(r===null){r=n.nativeEvent;var c=new r.constructor(r.type,r);yc=c,r.target.dispatchEvent(c),yc=null}else return i=vs(r),i!==null&&eb(i),n.blockedOn=r,!1;i.shift()}return!0}function ab(n,i,r){Lh(n)&&r.delete(i)}function D2(){dg=!1,qa!==null&&Lh(qa)&&(qa=null),Ha!==null&&Lh(Ha)&&(Ha=null),$a!==null&&Lh($a)&&($a=null),su.forEach(ab),iu.forEach(ab)}function Ph(n,i){n.blockedOn===i&&(n.blockedOn=null,dg||(dg=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,D2)))}var Vh=null;function rb(n){Vh!==n&&(Vh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Vh===n&&(Vh=null);for(var i=0;i<n.length;i+=3){var r=n[i],c=n[i+1],f=n[i+2];if(typeof c!="function"){if(ug(c||r)===null)continue;break}var p=vs(r);p!==null&&(n.splice(i,3),i-=3,cp(p,{pending:!0,data:f,method:r.method,action:c},c,f))}}))}function Tl(n){function i(V){return Ph(V,n)}qa!==null&&Ph(qa,n),Ha!==null&&Ph(Ha,n),$a!==null&&Ph($a,n),su.forEach(i),iu.forEach(i);for(var r=0;r<Fa.length;r++){var c=Fa[r];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Fa.length&&(r=Fa[0],r.blockedOn===null);)ib(r),r.blockedOn===null&&Fa.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var f=r[c],p=r[c+1],E=f[un]||null;if(typeof p=="function")E||rb(r);else if(E){var x=null;if(p&&p.hasAttribute("formAction")){if(f=p,E=p[un]||null)x=E.formAction;else if(ug(f)!==null)continue}else x=E.action;typeof x=="function"?r[c+1]=x:(r.splice(c,3),c-=3),rb(r)}}}function ob(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(E){return f=E})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function hg(n){this._internalRoot=n}Uh.prototype.render=hg.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(a(409));var r=i.current,c=ls();Z0(r,c,n,i,null,null)},Uh.prototype.unmount=hg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Z0(n.current,2,null,n,null,null),bh(),i[ri]=null}};function Uh(n){this._internalRoot=n}Uh.prototype.unstable_scheduleHydration=function(n){if(n){var i=bd();n={blockedOn:null,target:n,priority:i};for(var r=0;r<Fa.length&&i!==0&&i<Fa[r].priority;r++);Fa.splice(r,0,n),r===0&&ib(n)}};var lb=e.version;if(lb!=="19.2.4")throw Error(a(527,lb,"19.2.4"));ge.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=_(i),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var O2={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bh.isDisabled&&Bh.supportsFiber)try{Ms=Bh.inject(O2),pn=Bh}catch{}}return ou.createRoot=function(n,i){if(!o(n))throw Error(a(299));var r=!1,c="",f=p1,p=g1,E=_1;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError)),i=W0(n,1,!1,null,null,r,c,null,f,p,E,ob),n[ri]=i.current,Qp(n),new hg(i)},ou.hydrateRoot=function(n,i,r){if(!o(n))throw Error(a(299));var c=!1,f="",p=p1,E=g1,x=_1,V=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(E=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError),r.formState!==void 0&&(V=r.formState)),i=W0(n,1,!0,i,r??null,c,f,V,p,E,x,ob),i.context=X0(null),r=i.current,c=ls(),c=jr(c),f=Ca(c),f.callback=null,ka(r,f,c),r=c,i.current.lanes=r,Cr(i,r),Ti(i),n[ri]=i.current,Qp(n),new Uh(i)},ou.version="19.2.4",ou}var yb;function H2(){if(yb)return pg.exports;yb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),pg.exports=q2(),pg.exports}var $2=H2();const F2=_T($2);var vb="popstate";function G2(s={}){function e(o,l){let{pathname:d="/",search:m="",hash:g=""}=xo(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),Bg("",{pathname:d,search:m,hash:g},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let d=o.document.querySelector("base"),m="";if(d&&d.getAttribute("href")){let g=o.location.href,_=g.indexOf("#");m=_===-1?g:g.slice(0,_)}return m+"#"+(typeof l=="string"?l:wu(l))}function a(o,l){ms(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return K2(e,t,a,s)}function Ct(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function ms(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Q2(){return Math.random().toString(36).substring(2,10)}function bb(s,e){return{usr:s.state,key:s.key,idx:e}}function Bg(s,e,t=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?xo(e):e,state:t,key:e&&e.key||a||Q2()}}function wu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function xo(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function K2(s,e,t,a={}){let{window:o=document.defaultView,v5Compat:l=!1}=a,d=o.history,m="POP",g=null,_=v();_==null&&(_=0,d.replaceState({...d.state,idx:_},""));function v(){return(d.state||{idx:null}).idx}function b(){m="POP";let j=v(),B=j==null?null:j-_;_=j,g&&g({action:m,location:P.location,delta:B})}function S(j,B){m="PUSH";let H=Bg(P.location,j,B);t&&t(H,j),_=v()+1;let z=bb(H,_),G=P.createHref(H);try{d.pushState(z,"",G)}catch(de){if(de instanceof DOMException&&de.name==="DataCloneError")throw de;o.location.assign(G)}l&&g&&g({action:m,location:P.location,delta:1})}function N(j,B){m="REPLACE";let H=Bg(P.location,j,B);t&&t(H,j),_=v();let z=bb(H,_),G=P.createHref(H);d.replaceState(z,"",G),l&&g&&g({action:m,location:P.location,delta:0})}function M(j){return Y2(j)}let P={get action(){return m},get location(){return s(o,d)},listen(j){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(vb,b),g=j,()=>{o.removeEventListener(vb,b),g=null}},createHref(j){return e(o,j)},createURL:M,encodeLocation(j){let B=M(j);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:S,replace:N,go(j){return d.go(j)}};return P}function Y2(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(t,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:wu(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}function vT(s,e,t="/"){return W2(s,e,t,!1)}function W2(s,e,t,a){let o=typeof e=="string"?xo(e):e,l=la(o.pathname||"/",t);if(l==null)return null;let d=bT(s);X2(d);let m=null;for(let g=0;m==null&&g<d.length;++g){let _=lI(l);m=rI(d[g],_,a)}return m}function bT(s,e=[],t=[],a="",o=!1){let l=(d,m,g=o,_)=>{let v={relativePath:_===void 0?d.path||"":_,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(a)&&g)return;Ct(v.relativePath.startsWith(a),`Absolute route path "${v.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(a.length)}let b=aa([a,v.relativePath]),S=t.concat(v);d.children&&d.children.length>0&&(Ct(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),bT(d.children,e,S,b,g)),!(d.path==null&&!d.index)&&e.push({path:b,score:iI(b,d.index),routesMeta:S})};return s.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))l(d,m);else for(let g of ET(d.path))l(d,m,!0,g)}),e}function ET(s){let e=s.split("/");if(e.length===0)return[];let[t,...a]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return o?[l,""]:[l];let d=ET(a.join("/")),m=[];return m.push(...d.map(g=>g===""?l:[l,g].join("/"))),o&&m.push(...d),m.map(g=>s.startsWith("/")&&g===""?"/":g)}function X2(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:aI(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var Z2=/^:[\w-]+$/,J2=3,eI=2,tI=1,nI=10,sI=-2,Eb=s=>s==="*";function iI(s,e){let t=s.split("/"),a=t.length;return t.some(Eb)&&(a+=sI),e&&(a+=eI),t.filter(o=>!Eb(o)).reduce((o,l)=>o+(Z2.test(l)?J2:l===""?tI:nI),a)}function aI(s,e){return s.length===e.length&&s.slice(0,-1).every((a,o)=>a===e[o])?s[s.length-1]-e[e.length-1]:0}function rI(s,e,t=!1){let{routesMeta:a}=s,o={},l="/",d=[];for(let m=0;m<a.length;++m){let g=a[m],_=m===a.length-1,v=l==="/"?e:e.slice(l.length)||"/",b=ff({path:g.relativePath,caseSensitive:g.caseSensitive,end:_},v),S=g.route;if(!b&&_&&t&&!a[a.length-1].route.index&&(b=ff({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!b)return null;Object.assign(o,b.params),d.push({params:o,pathname:aa([l,b.pathname]),pathnameBase:hI(aa([l,b.pathnameBase])),route:S}),b.pathnameBase!=="/"&&(l=aa([l,b.pathnameBase]))}return d}function ff(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,a]=oI(s.path,s.caseSensitive,s.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:a.reduce((_,{paramName:v,isOptional:b},S)=>{if(v==="*"){let M=m[S]||"";d=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const N=m[S];return b&&!N?_[v]=void 0:_[v]=(N||"").replace(/%2F/g,"/"),_},{}),pathname:l,pathnameBase:d,pattern:s}}function oI(s,e=!1,t=!0){ms(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,g)=>(a.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function lI(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ms(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function la(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=s.charAt(t);return a&&a!=="/"?null:s.slice(t)||"/"}var cI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function uI(s,e="/"){let{pathname:t,search:a="",hash:o=""}=typeof s=="string"?xo(s):s,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=Tb(t.substring(1),"/"):l=Tb(t,e)):l=e,{pathname:l,search:fI(a),hash:mI(o)}}function Tb(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function vg(s,e,t,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function dI(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function A_(s){let e=dI(s);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function x_(s,e,t,a=!1){let o;typeof s=="string"?o=xo(s):(o={...s},Ct(!o.pathname||!o.pathname.includes("?"),vg("?","pathname","search",o)),Ct(!o.pathname||!o.pathname.includes("#"),vg("#","pathname","hash",o)),Ct(!o.search||!o.search.includes("#"),vg("#","search","hash",o)));let l=s===""||o.pathname==="",d=l?"/":o.pathname,m;if(d==null)m=t;else{let b=e.length-1;if(!a&&d.startsWith("..")){let S=d.split("/");for(;S[0]==="..";)S.shift(),b-=1;o.pathname=S.join("/")}m=b>=0?e[b]:"/"}let g=uI(o,m),_=d&&d!=="/"&&d.endsWith("/"),v=(l||d===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(_||v)&&(g.pathname+="/"),g}var aa=s=>s.join("/").replace(/\/\/+/g,"/"),hI=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),fI=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,mI=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,pI=class{constructor(s,e,t,a=!1){this.status=s,this.statusText=e||"",this.internal=a,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function gI(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function _I(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var TT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ST(s,e){let t=s;if(typeof t!="string"||!cI.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let a=t,o=!1;if(TT)try{let l=new URL(window.location.href),d=t.startsWith("//")?new URL(l.protocol+t):new URL(t),m=la(d.pathname,e);d.origin===l.origin&&m!=null?t=m+d.search+d.hash:o=!0}catch{ms(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:o,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var AT=["POST","PUT","PATCH","DELETE"];new Set(AT);var yI=["GET",...AT];new Set(yI);var Hl=w.createContext(null);Hl.displayName="DataRouter";var Lf=w.createContext(null);Lf.displayName="DataRouterState";var vI=w.createContext(!1),xT=w.createContext({isTransitioning:!1});xT.displayName="ViewTransition";var bI=w.createContext(new Map);bI.displayName="Fetchers";var EI=w.createContext(null);EI.displayName="Await";var gs=w.createContext(null);gs.displayName="Navigation";var $u=w.createContext(null);$u.displayName="Location";var Os=w.createContext({outlet:null,matches:[],isDataRoute:!1});Os.displayName="Route";var w_=w.createContext(null);w_.displayName="RouteError";var wT="REACT_ROUTER_ERROR",TI="REDIRECT",SI="ROUTE_ERROR_RESPONSE";function AI(s){if(s.startsWith(`${wT}:${TI}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function xI(s){if(s.startsWith(`${wT}:${SI}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new pI(e.status,e.statusText,e.data)}catch{}}function wI(s,{relative:e}={}){Ct($l(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=w.useContext(gs),{hash:o,pathname:l,search:d}=Gu(s,{relative:e}),m=l;return t!=="/"&&(m=l==="/"?t:aa([t,l])),a.createHref({pathname:m,search:d,hash:o})}function $l(){return w.useContext($u)!=null}function qn(){return Ct($l(),"useLocation() may be used only in the context of a <Router> component."),w.useContext($u).location}var IT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function RT(s){w.useContext(gs).static||w.useLayoutEffect(s)}function In(){let{isDataRoute:s}=w.useContext(Os);return s?BI():II()}function II(){Ct($l(),"useNavigate() may be used only in the context of a <Router> component.");let s=w.useContext(Hl),{basename:e,navigator:t}=w.useContext(gs),{matches:a}=w.useContext(Os),{pathname:o}=qn(),l=JSON.stringify(A_(a)),d=w.useRef(!1);return RT(()=>{d.current=!0}),w.useCallback((g,_={})=>{if(ms(d.current,IT),!d.current)return;if(typeof g=="number"){t.go(g);return}let v=x_(g,JSON.parse(l),o,_.relative==="path");s==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:aa([e,v.pathname])),(_.replace?t.replace:t.push)(v,_.state,_)},[e,t,l,o,s])}var RI=w.createContext(null);function NI(s){let e=w.useContext(Os).outlet;return w.useMemo(()=>e&&w.createElement(RI.Provider,{value:s},e),[e,s])}function Fu(){let{matches:s}=w.useContext(Os),e=s[s.length-1];return e?e.params:{}}function Gu(s,{relative:e}={}){let{matches:t}=w.useContext(Os),{pathname:a}=qn(),o=JSON.stringify(A_(t));return w.useMemo(()=>x_(s,JSON.parse(o),a,e==="path"),[s,o,a,e])}function CI(s,e){return NT(s,e)}function NT(s,e,t,a,o){Ct($l(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=w.useContext(gs),{matches:d}=w.useContext(Os),m=d[d.length-1],g=m?m.params:{},_=m?m.pathname:"/",v=m?m.pathnameBase:"/",b=m&&m.route;{let H=b&&b.path||"";kT(_,!b||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${_}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let S=qn(),N;if(e){let H=typeof e=="string"?xo(e):e;Ct(v==="/"||H.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${H.pathname}" was given in the \`location\` prop.`),N=H}else N=S;let M=N.pathname||"/",P=M;if(v!=="/"){let H=v.replace(/^\//,"").split("/");P="/"+M.replace(/^\//,"").split("/").slice(H.length).join("/")}let j=vT(s,{pathname:P});ms(b||j!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),ms(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=MI(j&&j.map(H=>Object.assign({},H,{params:Object.assign({},g,H.params),pathname:aa([v,l.encodeLocation?l.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?v:aa([v,l.encodeLocation?l.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),d,t,a,o);return e&&B?w.createElement($u.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},B):B}function kI(){let s=UI(),e=gI(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:l},"ErrorBoundary")," or"," ",w.createElement("code",{style:l},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),t?w.createElement("pre",{style:o},t):null,d)}var jI=w.createElement(kI,null),CT=class extends w.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=xI(s.digest);t&&(s=t)}let e=s!==void 0?w.createElement(Os.Provider,{value:this.props.routeContext},w.createElement(w_.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?w.createElement(DI,{error:s},e):e}};CT.contextType=vI;var bg=new WeakMap;function DI({children:s,error:e}){let{basename:t}=w.useContext(gs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=AI(e.digest);if(a){let o=bg.get(e);if(o)throw o;let l=ST(a.location,t);if(TT&&!bg.get(e))if(l.isExternal||a.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:a.replace}));throw bg.set(e,d),d}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return s}function OI({routeContext:s,match:e,children:t}){let a=w.useContext(Hl);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(Os.Provider,{value:s},t)}function MI(s,e=[],t=null,a=null,o=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let l=s,d=t?.errors;if(d!=null){let v=l.findIndex(b=>b.route.id&&d?.[b.route.id]!==void 0);Ct(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let m=!1,g=-1;if(t)for(let v=0;v<l.length;v++){let b=l[v];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(g=v),b.route.id){let{loaderData:S,errors:N}=t,M=b.route.loader&&!S.hasOwnProperty(b.route.id)&&(!N||N[b.route.id]===void 0);if(b.route.lazy||M){m=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}let _=t&&a?(v,b)=>{a(v,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:_I(t.matches),errorInfo:b})}:void 0;return l.reduceRight((v,b,S)=>{let N,M=!1,P=null,j=null;t&&(N=d&&b.route.id?d[b.route.id]:void 0,P=b.route.errorElement||jI,m&&(g<0&&S===0?(kT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,j=null):g===S&&(M=!0,j=b.route.hydrateFallbackElement||null)));let B=e.concat(l.slice(0,S+1)),H=()=>{let z;return N?z=P:M?z=j:b.route.Component?z=w.createElement(b.route.Component,null):b.route.element?z=b.route.element:z=v,w.createElement(OI,{match:b,routeContext:{outlet:v,matches:B,isDataRoute:t!=null},children:z})};return t&&(b.route.ErrorBoundary||b.route.errorElement||S===0)?w.createElement(CT,{location:t.location,revalidation:t.revalidation,component:P,error:N,children:H(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:_}):H()},null)}function I_(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zI(s){let e=w.useContext(Hl);return Ct(e,I_(s)),e}function LI(s){let e=w.useContext(Lf);return Ct(e,I_(s)),e}function PI(s){let e=w.useContext(Os);return Ct(e,I_(s)),e}function R_(s){let e=PI(s),t=e.matches[e.matches.length-1];return Ct(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function VI(){return R_("useRouteId")}function UI(){let s=w.useContext(w_),e=LI("useRouteError"),t=R_("useRouteError");return s!==void 0?s:e.errors?.[t]}function BI(){let{router:s}=zI("useNavigate"),e=R_("useNavigate"),t=w.useRef(!1);return RT(()=>{t.current=!0}),w.useCallback(async(o,l={})=>{ms(t.current,IT),t.current&&(typeof o=="number"?await s.navigate(o):await s.navigate(o,{fromRouteId:e,...l}))},[s,e])}var Sb={};function kT(s,e,t){!e&&!Sb[s]&&(Sb[s]=!0,ms(!1,t))}w.memo(qI);function qI({routes:s,future:e,state:t,onError:a}){return NT(s,void 0,t,a,e)}function mf({to:s,replace:e,state:t,relative:a}){Ct($l(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=w.useContext(gs);ms(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=w.useContext(Os),{pathname:d}=qn(),m=In(),g=x_(s,A_(l),d,a==="path"),_=JSON.stringify(g);return w.useEffect(()=>{m(JSON.parse(_),{replace:e,state:t,relative:a})},[m,_,a,e,t]),null}function HI(s){return NI(s.context)}function Lt(s){Ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $I({basename:s="/",children:e=null,location:t,navigationType:a="POP",navigator:o,static:l=!1,unstable_useTransitions:d}){Ct(!$l(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=s.replace(/^\/*/,"/"),g=w.useMemo(()=>({basename:m,navigator:o,static:l,unstable_useTransitions:d,future:{}}),[m,o,l,d]);typeof t=="string"&&(t=xo(t));let{pathname:_="/",search:v="",hash:b="",state:S=null,key:N="default"}=t,M=w.useMemo(()=>{let P=la(_,m);return P==null?null:{location:{pathname:P,search:v,hash:b,state:S,key:N},navigationType:a}},[m,_,v,b,S,N,a]);return ms(M!=null,`<Router basename="${m}"> is not able to match the URL "${_}${v}${b}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:w.createElement(gs.Provider,{value:g},w.createElement($u.Provider,{children:e,value:M}))}function FI({children:s,location:e}){return CI(qg(s),e)}function qg(s,e=[]){let t=[];return w.Children.forEach(s,(a,o)=>{if(!w.isValidElement(a))return;let l=[...e,o];if(a.type===w.Fragment){t.push.apply(t,qg(a.props.children,l));return}Ct(a.type===Lt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ct(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=qg(a.props.children,l)),t.push(d)}),t}var Zh="get",Jh="application/x-www-form-urlencoded";function Pf(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function GI(s){return Pf(s)&&s.tagName.toLowerCase()==="button"}function QI(s){return Pf(s)&&s.tagName.toLowerCase()==="form"}function KI(s){return Pf(s)&&s.tagName.toLowerCase()==="input"}function YI(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function WI(s,e){return s.button===0&&(!e||e==="_self")&&!YI(s)}function Hg(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let a=s[t];return e.concat(Array.isArray(a)?a.map(o=>[t,o]):[[t,a]])},[]))}function XI(s,e){let t=Hg(s);return e&&e.forEach((a,o)=>{t.has(o)||e.getAll(o).forEach(l=>{t.append(o,l)})}),t}var qh=null;function ZI(){if(qh===null)try{new FormData(document.createElement("form"),0),qh=!1}catch{qh=!0}return qh}var JI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Eg(s){return s!=null&&!JI.has(s)?(ms(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jh}"`),null):s}function eR(s,e){let t,a,o,l,d;if(QI(s)){let m=s.getAttribute("action");a=m?la(m,e):null,t=s.getAttribute("method")||Zh,o=Eg(s.getAttribute("enctype"))||Jh,l=new FormData(s)}else if(GI(s)||KI(s)&&(s.type==="submit"||s.type==="image")){let m=s.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||m.getAttribute("action");if(a=g?la(g,e):null,t=s.getAttribute("formmethod")||m.getAttribute("method")||Zh,o=Eg(s.getAttribute("formenctype"))||Eg(m.getAttribute("enctype"))||Jh,l=new FormData(m,s),!ZI()){let{name:_,type:v,value:b}=s;if(v==="image"){let S=_?`${_}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else _&&l.append(_,b)}}else{if(Pf(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Zh,a=null,o=Jh,d=s}return l&&o==="text/plain"&&(d=l,l=void 0),{action:a,method:t.toLowerCase(),encType:o,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function N_(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function tR(s,e,t,a){let o=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${a}`:o.pathname=`${o.pathname}.${a}`:o.pathname==="/"?o.pathname=`_root.${a}`:e&&la(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${a}`,o}async function nR(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sR(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function iR(s,e,t){let a=await Promise.all(s.map(async o=>{let l=e.routes[o.route.id];if(l){let d=await nR(l,t);return d.links?d.links():[]}return[]}));return lR(a.flat(1).filter(sR).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Ab(s,e,t,a,o,l){let d=(g,_)=>t[_]?g.route.id!==t[_].route.id:!0,m=(g,_)=>t[_].pathname!==g.pathname||t[_].route.path?.endsWith("*")&&t[_].params["*"]!==g.params["*"];return l==="assets"?e.filter((g,_)=>d(g,_)||m(g,_)):l==="data"?e.filter((g,_)=>{let v=a.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(d(g,_)||m(g,_))return!0;if(g.route.shouldRevalidate){let b=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function aR(s,e,{includeHydrateFallback:t}={}){return rR(s.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function rR(s){return[...new Set(s)]}function oR(s){let e={},t=Object.keys(s).sort();for(let a of t)e[a]=s[a];return e}function lR(s,e){let t=new Set;return new Set(e),s.reduce((a,o)=>{let l=JSON.stringify(oR(o));return t.has(l)||(t.add(l),a.push({key:l,link:o})),a},[])}function jT(){let s=w.useContext(Hl);return N_(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function cR(){let s=w.useContext(Lf);return N_(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var C_=w.createContext(void 0);C_.displayName="FrameworkContext";function DT(){let s=w.useContext(C_);return N_(s,"You must render this element inside a <HydratedRouter> element"),s}function uR(s,e){let t=w.useContext(C_),[a,o]=w.useState(!1),[l,d]=w.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:_,onMouseLeave:v,onTouchStart:b}=e,S=w.useRef(null);w.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let P=B=>{B.forEach(H=>{d(H.isIntersecting)})},j=new IntersectionObserver(P,{threshold:.5});return S.current&&j.observe(S.current),()=>{j.disconnect()}}},[s]),w.useEffect(()=>{if(a){let P=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(P)}}},[a]);let N=()=>{o(!0)},M=()=>{o(!1),d(!1)};return t?s!=="intent"?[l,S,{}]:[l,S,{onFocus:lu(m,N),onBlur:lu(g,M),onMouseEnter:lu(_,N),onMouseLeave:lu(v,M),onTouchStart:lu(b,N)}]:[!1,S,{}]}function lu(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function dR({page:s,...e}){let{router:t}=jT(),a=w.useMemo(()=>vT(t.routes,s,t.basename),[t.routes,s,t.basename]);return a?w.createElement(fR,{page:s,matches:a,...e}):null}function hR(s){let{manifest:e,routeModules:t}=DT(),[a,o]=w.useState([]);return w.useEffect(()=>{let l=!1;return iR(s,e,t).then(d=>{l||o(d)}),()=>{l=!0}},[s,e,t]),a}function fR({page:s,matches:e,...t}){let a=qn(),{future:o,manifest:l,routeModules:d}=DT(),{basename:m}=jT(),{loaderData:g,matches:_}=cR(),v=w.useMemo(()=>Ab(s,e,_,l,a,"data"),[s,e,_,l,a]),b=w.useMemo(()=>Ab(s,e,_,l,a,"assets"),[s,e,_,l,a]),S=w.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let P=new Set,j=!1;if(e.forEach(H=>{let z=l.routes[H.route.id];!z||!z.hasLoader||(!v.some(G=>G.route.id===H.route.id)&&H.route.id in g&&d[H.route.id]?.shouldRevalidate||z.hasClientLoader?j=!0:P.add(H.route.id))}),P.size===0)return[];let B=tR(s,m,o.unstable_trailingSlashAwareDataRequests,"data");return j&&P.size>0&&B.searchParams.set("_routes",e.filter(H=>P.has(H.route.id)).map(H=>H.route.id).join(",")),[B.pathname+B.search]},[m,o.unstable_trailingSlashAwareDataRequests,g,a,l,v,e,s,d]),N=w.useMemo(()=>aR(b,l),[b,l]),M=hR(b);return w.createElement(w.Fragment,null,S.map(P=>w.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...t})),N.map(P=>w.createElement("link",{key:P,rel:"modulepreload",href:P,...t})),M.map(({key:P,link:j})=>w.createElement("link",{key:P,nonce:t.nonce,...j,crossOrigin:j.crossOrigin??t.crossOrigin})))}function mR(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var pR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{pR&&(window.__reactRouterVersion="7.13.0")}catch{}function gR({basename:s,children:e,unstable_useTransitions:t,window:a}){let o=w.useRef();o.current==null&&(o.current=G2({window:a,v5Compat:!0}));let l=o.current,[d,m]=w.useState({action:l.action,location:l.location}),g=w.useCallback(_=>{t===!1?m(_):w.startTransition(()=>m(_))},[t]);return w.useLayoutEffect(()=>l.listen(g),[l,g]),w.createElement($I,{basename:s,children:e,location:d.location,navigationType:d.action,navigator:l,unstable_useTransitions:t})}var OT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Iu=w.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:o,reloadDocument:l,replace:d,state:m,target:g,to:_,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:S,...N},M){let{basename:P,unstable_useTransitions:j}=w.useContext(gs),B=typeof _=="string"&&OT.test(_),H=ST(_,P);_=H.to;let z=wI(_,{relative:o}),[G,de,X]=uR(a,N),k=vR(_,{replace:d,state:m,target:g,preventScrollReset:v,relative:o,viewTransition:b,unstable_defaultShouldRevalidate:S,unstable_useTransitions:j});function I(L){e&&e(L),L.defaultPrevented||k(L)}let C=w.createElement("a",{...N,...X,href:H.absoluteURL||z,onClick:H.isExternal||l?e:I,ref:mR(M,de),target:g,"data-discover":!B&&t==="render"?"true":void 0});return G&&!B?w.createElement(w.Fragment,null,C,w.createElement(dR,{page:z})):C});Iu.displayName="Link";var MT=w.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:o=!1,style:l,to:d,viewTransition:m,children:g,..._},v){let b=Gu(d,{relative:_.relative}),S=qn(),N=w.useContext(Lf),{navigator:M,basename:P}=w.useContext(gs),j=N!=null&&xR(b)&&m===!0,B=M.encodeLocation?M.encodeLocation(b).pathname:b.pathname,H=S.pathname,z=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(H=H.toLowerCase(),z=z?z.toLowerCase():null,B=B.toLowerCase()),z&&P&&(z=la(z,P)||z);const G=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let de=H===B||!o&&H.startsWith(B)&&H.charAt(G)==="/",X=z!=null&&(z===B||!o&&z.startsWith(B)&&z.charAt(B.length)==="/"),k={isActive:de,isPending:X,isTransitioning:j},I=de?e:void 0,C;typeof a=="function"?C=a(k):C=[a,de?"active":null,X?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let L=typeof l=="function"?l(k):l;return w.createElement(Iu,{..._,"aria-current":I,className:C,ref:v,style:L,to:d,viewTransition:m},typeof g=="function"?g(k):g)});MT.displayName="NavLink";var _R=w.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:o,state:l,method:d=Zh,action:m,onSubmit:g,relative:_,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:S,...N},M)=>{let{unstable_useTransitions:P}=w.useContext(gs),j=SR(),B=AR(m,{relative:_}),H=d.toLowerCase()==="get"?"get":"post",z=typeof m=="string"&&OT.test(m),G=de=>{if(g&&g(de),de.defaultPrevented)return;de.preventDefault();let X=de.nativeEvent.submitter,k=X?.getAttribute("formmethod")||d,I=()=>j(X||de.currentTarget,{fetcherKey:e,method:k,navigate:t,replace:o,state:l,relative:_,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:S});P&&t!==!1?w.startTransition(()=>I()):I()};return w.createElement("form",{ref:M,method:H,action:B,onSubmit:a?g:G,...N,"data-discover":!z&&s==="render"?"true":void 0})});_R.displayName="Form";function yR(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zT(s){let e=w.useContext(Hl);return Ct(e,yR(s)),e}function vR(s,{target:e,replace:t,state:a,preventScrollReset:o,relative:l,viewTransition:d,unstable_defaultShouldRevalidate:m,unstable_useTransitions:g}={}){let _=In(),v=qn(),b=Gu(s,{relative:l});return w.useCallback(S=>{if(WI(S,e)){S.preventDefault();let N=t!==void 0?t:wu(v)===wu(b),M=()=>_(s,{replace:N,state:a,preventScrollReset:o,relative:l,viewTransition:d,unstable_defaultShouldRevalidate:m});g?w.startTransition(()=>M()):M()}},[v,_,b,t,a,e,s,o,l,d,m,g])}function bR(s){ms(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=w.useRef(Hg(s)),t=w.useRef(!1),a=qn(),o=w.useMemo(()=>XI(a.search,t.current?null:e.current),[a.search]),l=In(),d=w.useCallback((m,g)=>{const _=Hg(typeof m=="function"?m(new URLSearchParams(o)):m);t.current=!0,l("?"+_,g)},[l,o]);return[o,d]}var ER=0,TR=()=>`__${String(++ER)}__`;function SR(){let{router:s}=zT("useSubmit"),{basename:e}=w.useContext(gs),t=VI(),a=s.fetch,o=s.navigate;return w.useCallback(async(l,d={})=>{let{action:m,method:g,encType:_,formData:v,body:b}=eR(l,e);if(d.navigate===!1){let S=d.fetcherKey||TR();await a(S,t,d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:v,body:b,formMethod:d.method||g,formEncType:d.encType||_,flushSync:d.flushSync})}else await o(d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:v,body:b,formMethod:d.method||g,formEncType:d.encType||_,replace:d.replace,state:d.state,fromRouteId:t,flushSync:d.flushSync,viewTransition:d.viewTransition})},[a,o,e,t])}function AR(s,{relative:e}={}){let{basename:t}=w.useContext(gs),a=w.useContext(Os);Ct(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),l={...Gu(s||".",{relative:e})},d=qn();if(s==null){l.search=d.search;let m=new URLSearchParams(l.search),g=m.getAll("index");if(g.some(v=>v==="")){m.delete("index"),g.filter(b=>b).forEach(b=>m.append("index",b));let v=m.toString();l.search=v?`?${v}`:""}}return(!s||s===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:aa([t,l.pathname])),wu(l)}function xR(s,{relative:e}={}){let t=w.useContext(xT);Ct(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=zT("useViewTransitionState"),o=Gu(s,{relative:e});if(!t.isTransitioning)return!1;let l=la(t.currentLocation.pathname,a)||t.currentLocation.pathname,d=la(t.nextLocation.pathname,a)||t.nextLocation.pathname;return ff(o.pathname,d)!=null||ff(o.pathname,l)!=null}var LT=yT();const wR=()=>{};var xb={};const PT=function(s){const e=[];let t=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},IR=function(s){const e=[];let t=0,a=0;for(;t<s.length;){const o=s[t++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const l=s[t++];e[a++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=s[t++],d=s[t++],m=s[t++],g=((o&7)<<18|(l&63)<<12|(d&63)<<6|m&63)-65536;e[a++]=String.fromCharCode(55296+(g>>10)),e[a++]=String.fromCharCode(56320+(g&1023))}else{const l=s[t++],d=s[t++];e[a++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},VT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const l=s[o],d=o+1<s.length,m=d?s[o+1]:0,g=o+2<s.length,_=g?s[o+2]:0,v=l>>2,b=(l&3)<<4|m>>4;let S=(m&15)<<2|_>>6,N=_&63;g||(N=64,d||(S=64)),a.push(t[v],t[b],t[S],t[N])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(PT(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):IR(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const l=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const _=o<s.length?t[s.charAt(o)]:64;++o;const b=o<s.length?t[s.charAt(o)]:64;if(++o,l==null||m==null||_==null||b==null)throw new RR;const S=l<<2|m>>4;if(a.push(S),_!==64){const N=m<<4&240|_>>2;if(a.push(N),b!==64){const M=_<<6&192|b;a.push(M)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class RR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NR=function(s){const e=PT(s);return VT.encodeByteArray(e,!0)},pf=function(s){return NR(s).replace(/\./g,"")},UT=function(s){try{return VT.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function CR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const kR=()=>CR().__FIREBASE_DEFAULTS__,jR=()=>{if(typeof process>"u"||typeof xb>"u")return;const s=xb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},DR=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&UT(s[1]);return e&&JSON.parse(e)},Vf=()=>{try{return wR()||kR()||jR()||DR()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},BT=s=>Vf()?.emulatorHosts?.[s],qT=s=>{const e=BT(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},HT=()=>Vf()?.config,$T=s=>Vf()?.[`_${s}`];class OR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}function yr(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function k_(s){return(await fetch(s,{credentials:"include"})).ok}function FT(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...s};return[pf(JSON.stringify(t)),pf(JSON.stringify(d)),""].join(".")}const vu={};function MR(){const s={prod:[],emulator:[]};for(const e of Object.keys(vu))vu[e]?s.emulator.push(e):s.prod.push(e);return s}function zR(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let wb=!1;function j_(s,e){if(typeof window>"u"||typeof document>"u"||!yr(window.location.host)||vu[s]===e||vu[s]||wb)return;vu[s]=e;function t(S){return`__firebase__banner__${S}`}const a="__firebase__banner",l=MR().prod.length>0;function d(){const S=document.getElementById(a);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,N){S.setAttribute("width","24"),S.setAttribute("id",N),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function _(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{wb=!0,d()},S}function v(S,N){S.setAttribute("id",N),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function b(){const S=zR(a),N=t("text"),M=document.getElementById(N)||document.createElement("span"),P=t("learnmore"),j=document.getElementById(P)||document.createElement("a"),B=t("preprendIcon"),H=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const z=S.element;m(z),v(j,P);const G=_();g(H,B),z.append(H,M,j,G),document.body.appendChild(z)}l?(M.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function Mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mn())}function PR(){const s=Vf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UR(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function BR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qR(){const s=Mn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function HR(){return!PR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $R(){try{return typeof indexedDB=="object"}catch{return!1}}function FR(){return new Promise((s,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const GR="FirebaseError";class zi extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=GR,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qu.prototype.create)}}class Qu{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?QR(l,a):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new zi(o,m,a)}}function QR(s,e){return s.replace(KR,(t,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const KR=/\{\$([^}]+)}/g;function YR(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function fo(s,e){if(s===e)return!0;const t=Object.keys(s),a=Object.keys(e);for(const o of t){if(!a.includes(o))return!1;const l=s[o],d=e[o];if(Ib(l)&&Ib(d)){if(!fo(l,d))return!1}else if(l!==d)return!1}for(const o of a)if(!t.includes(o))return!1;return!0}function Ib(s){return s!==null&&typeof s=="object"}function Ku(s){const e=[];for(const[t,a]of Object.entries(s))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function fu(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,l]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function mu(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function WR(s,e){const t=new XR(s,e);return t.subscribe.bind(t)}class XR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let o;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");ZR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:a},o.next===void 0&&(o.next=Tg),o.error===void 0&&(o.error=Tg),o.complete===void 0&&(o.complete=Tg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZR(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Tg(){}function kt(s){return s&&s._delegate?s._delegate:s}class lr{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const io="[DEFAULT]";class JR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new OR;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tN(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});a.resolve(l)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);a===m&&d.resolve(o)}return o}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const l=this.instances.get(a);return l&&e(l,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const o of a)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:eN(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eN(s){return s===io?void 0:s}function tN(s){return s.instantiationMode==="EAGER"}class nN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new JR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Je;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Je||(Je={}));const sN={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},iN=Je.INFO,aN={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},rN=(s,e,...t)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=aN[e];if(o)console[o](`[${a}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class D_{constructor(e){this.name=e,this._logLevel=iN,this._logHandler=rN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const oN=(s,e)=>e.some(t=>s instanceof t);let Rb,Nb;function lN(){return Rb||(Rb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cN(){return Nb||(Nb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GT=new WeakMap,$g=new WeakMap,QT=new WeakMap,Sg=new WeakMap,O_=new WeakMap;function uN(s){const e=new Promise((t,a)=>{const o=()=>{s.removeEventListener("success",l),s.removeEventListener("error",d)},l=()=>{t(ir(s.result)),o()},d=()=>{a(s.error),o()};s.addEventListener("success",l),s.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&GT.set(t,s)}).catch(()=>{}),O_.set(e,s),e}function dN(s){if($g.has(s))return;const e=new Promise((t,a)=>{const o=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",d),s.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",l),s.addEventListener("error",d),s.addEventListener("abort",d)});$g.set(s,e)}let Fg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return $g.get(s);if(e==="objectStoreNames")return s.objectStoreNames||QT.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ir(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function hN(s){Fg=s(Fg)}function fN(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=s.call(Ag(this),e,...t);return QT.set(a,e.sort?e.sort():[e]),ir(a)}:cN().includes(s)?function(...e){return s.apply(Ag(this),e),ir(GT.get(this))}:function(...e){return ir(s.apply(Ag(this),e))}}function mN(s){return typeof s=="function"?fN(s):(s instanceof IDBTransaction&&dN(s),oN(s,lN())?new Proxy(s,Fg):s)}function ir(s){if(s instanceof IDBRequest)return uN(s);if(Sg.has(s))return Sg.get(s);const e=mN(s);return e!==s&&(Sg.set(s,e),O_.set(e,s)),e}const Ag=s=>O_.get(s);function pN(s,e,{blocked:t,upgrade:a,blocking:o,terminated:l}={}){const d=indexedDB.open(s,e),m=ir(d);return a&&d.addEventListener("upgradeneeded",g=>{a(ir(d.result),g.oldVersion,g.newVersion,ir(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const gN=["get","getKey","getAll","getAllKeys","count"],_N=["put","add","delete","clear"],xg=new Map;function Cb(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(xg.get(e))return xg.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,o=_N.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(o||gN.includes(t)))return;const l=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let _=g.store;return a&&(_=_.index(m.shift())),(await Promise.all([_[t](...m),o&&g.done]))[0]};return xg.set(e,l),l}hN(s=>({...s,get:(e,t,a)=>Cb(e,t)||s.get(e,t,a),has:(e,t)=>!!Cb(e,t)||s.has(e,t)}));class yN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vN(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function vN(s){return s.getComponent()?.type==="VERSION"}const Gg="@firebase/app",kb="0.14.8";const ca=new D_("@firebase/app"),bN="@firebase/app-compat",EN="@firebase/analytics-compat",TN="@firebase/analytics",SN="@firebase/app-check-compat",AN="@firebase/app-check",xN="@firebase/auth",wN="@firebase/auth-compat",IN="@firebase/database",RN="@firebase/data-connect",NN="@firebase/database-compat",CN="@firebase/functions",kN="@firebase/functions-compat",jN="@firebase/installations",DN="@firebase/installations-compat",ON="@firebase/messaging",MN="@firebase/messaging-compat",zN="@firebase/performance",LN="@firebase/performance-compat",PN="@firebase/remote-config",VN="@firebase/remote-config-compat",UN="@firebase/storage",BN="@firebase/storage-compat",qN="@firebase/firestore",HN="@firebase/ai",$N="@firebase/firestore-compat",FN="firebase",GN="12.9.0";const Qg="[DEFAULT]",QN={[Gg]:"fire-core",[bN]:"fire-core-compat",[TN]:"fire-analytics",[EN]:"fire-analytics-compat",[AN]:"fire-app-check",[SN]:"fire-app-check-compat",[xN]:"fire-auth",[wN]:"fire-auth-compat",[IN]:"fire-rtdb",[RN]:"fire-data-connect",[NN]:"fire-rtdb-compat",[CN]:"fire-fn",[kN]:"fire-fn-compat",[jN]:"fire-iid",[DN]:"fire-iid-compat",[ON]:"fire-fcm",[MN]:"fire-fcm-compat",[zN]:"fire-perf",[LN]:"fire-perf-compat",[PN]:"fire-rc",[VN]:"fire-rc-compat",[UN]:"fire-gcs",[BN]:"fire-gcs-compat",[qN]:"fire-fst",[$N]:"fire-fst-compat",[HN]:"fire-vertex","fire-js":"fire-js",[FN]:"fire-js-all"};const gf=new Map,KN=new Map,Kg=new Map;function jb(s,e){try{s.container.addComponent(e)}catch(t){ca.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function mo(s){const e=s.name;if(Kg.has(e))return ca.debug(`There were multiple attempts to register component ${e}.`),!1;Kg.set(e,s);for(const t of gf.values())jb(t,s);for(const t of KN.values())jb(t,s);return!0}function Uf(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function ds(s){return s==null?!1:s.settings!==void 0}const YN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ar=new Qu("app","Firebase",YN);class WN{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}}const wo=GN;function KT(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const a={name:Qg,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw ar.create("bad-app-name",{appName:String(o)});if(t||(t=HT()),!t)throw ar.create("no-options");const l=gf.get(o);if(l){if(fo(t,l.options)&&fo(a,l.config))return l;throw ar.create("duplicate-app",{appName:o})}const d=new nN(o);for(const g of Kg.values())d.addComponent(g);const m=new WN(t,a,d);return gf.set(o,m),m}function M_(s=Qg){const e=gf.get(s);if(!e&&s===Qg&&HT())return KT();if(!e)throw ar.create("no-app",{appName:s});return e}function Ri(s,e,t){let a=QN[s]??s;t&&(a+=`-${t}`);const o=a.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const d=[`Unable to register library "${a}" with version "${e}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ca.warn(d.join(" "));return}mo(new lr(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const XN="firebase-heartbeat-database",ZN=1,Ru="firebase-heartbeat-store";let wg=null;function YT(){return wg||(wg=pN(XN,ZN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Ru)}catch(t){console.warn(t)}}}}).catch(s=>{throw ar.create("idb-open",{originalErrorMessage:s.message})})),wg}async function JN(s){try{const t=(await YT()).transaction(Ru),a=await t.objectStore(Ru).get(WT(s));return await t.done,a}catch(e){if(e instanceof zi)ca.warn(e.message);else{const t=ar.create("idb-get",{originalErrorMessage:e?.message});ca.warn(t.message)}}}async function Db(s,e){try{const a=(await YT()).transaction(Ru,"readwrite");await a.objectStore(Ru).put(e,WT(s)),await a.done}catch(t){if(t instanceof zi)ca.warn(t.message);else{const a=ar.create("idb-set",{originalErrorMessage:t?.message});ca.warn(a.message)}}}function WT(s){return`${s.name}!${s.options.appId}`}const eC=1024,tC=30;class nC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new iC(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Ob();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:t}),this._heartbeatsCache.heartbeats.length>tC){const o=aC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ca.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ob(),{heartbeatsToSend:t,unsentEntries:a}=sC(this._heartbeatsCache.heartbeats),o=pf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ca.warn(e),""}}}function Ob(){return new Date().toISOString().substring(0,10)}function sC(s,e=eC){const t=[];let a=s.slice();for(const o of s){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),Mb(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Mb(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class iC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $R()?FR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await JN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Db(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Db(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Mb(s){return pf(JSON.stringify({version:2,heartbeats:s})).length}function aC(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let a=1;a<s.length;a++)s[a].date<t&&(t=s[a].date,e=a);return e}function rC(s){mo(new lr("platform-logger",e=>new yN(e),"PRIVATE")),mo(new lr("heartbeat",e=>new nC(e),"PRIVATE")),Ri(Gg,kb,s),Ri(Gg,kb,"esm2020"),Ri("fire-js","")}rC("");function XT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oC=XT,ZT=new Qu("auth","Firebase",XT());const _f=new D_("@firebase/auth");function lC(s,...e){_f.logLevel<=Je.WARN&&_f.warn(`Auth (${wo}): ${s}`,...e)}function ef(s,...e){_f.logLevel<=Je.ERROR&&_f.error(`Auth (${wo}): ${s}`,...e)}function Zs(s,...e){throw z_(s,...e)}function Ni(s,...e){return z_(s,...e)}function JT(s,e,t){const a={...oC(),[e]:t};return new Qu("auth","Firebase",a).create(e,{appName:s.name})}function ra(s){return JT(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function z_(s,...e){if(typeof s!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(t,...a)}return ZT.create(s,...e)}function Pe(s,e,...t){if(!s)throw z_(e,...t)}function sa(s){const e="INTERNAL ASSERTION FAILED: "+s;throw ef(e),new Error(e)}function ua(s,e){s||sa(e)}function Yg(){return typeof self<"u"&&self.location?.href||""}function cC(){return zb()==="http:"||zb()==="https:"}function zb(){return typeof self<"u"&&self.location?.protocol||null}function uC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cC()||UR()||"connection"in navigator)?navigator.onLine:!0}function dC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Yu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ua(t>e,"Short delay should be less than long delay!"),this.isMobile=LR()||BR()}get(){return uC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function L_(s,e){ua(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class eS{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;sa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;sa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;sa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const fC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mC=new Yu(3e4,6e4);function vr(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function br(s,e,t,a,o={}){return tS(s,o,async()=>{let l={},d={};a&&(e==="GET"?d=a:l={body:JSON.stringify(a)});const m=Ku({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const _={method:e,headers:g,...l};return VR()||(_.referrerPolicy="no-referrer"),s.emulatorConfig&&yr(s.emulatorConfig.host)&&(_.credentials="include"),eS.fetch()(await nS(s,s.config.apiHost,t,m),_)})}async function tS(s,e,t){s._canInitEmulator=!1;const a={...hC,...e};try{const o=new gC(s),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw Hh(s,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const m=l.ok?d.errorMessage:d.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hh(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Hh(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw Hh(s,"user-disabled",d);const v=a[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw JT(s,v,_);Zs(s,v)}}catch(o){if(o instanceof zi)throw o;Zs(s,"network-request-failed",{message:String(o)})}}async function Wu(s,e,t,a,o={}){const l=await br(s,e,t,a,o);return"mfaPendingCredential"in l&&Zs(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function nS(s,e,t,a){const o=`${e}${t}?${a}`,l=s,d=l.config.emulator?L_(s.config,o):`${s.config.apiScheme}://${o}`;return fC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function pC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(Ni(this.auth,"network-request-failed")),mC.get())})}}function Hh(s,e,t){const a={appName:s.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const o=Ni(s,e,a);return o.customData._tokenResponse=t,o}function Lb(s){return s!==void 0&&s.enterprise!==void 0}class _C{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return pC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yC(s,e){return br(s,"GET","/v2/recaptchaConfig",vr(s,e))}async function vC(s,e){return br(s,"POST","/v1/accounts:delete",e)}async function yf(s,e){return br(s,"POST","/v1/accounts:lookup",e)}function bu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bC(s,e=!1){const t=kt(s),a=await t.getIdToken(e),o=P_(a);Pe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l?.sign_in_provider;return{claims:o,token:a,authTime:bu(Ig(o.auth_time)),issuedAtTime:bu(Ig(o.iat)),expirationTime:bu(Ig(o.exp)),signInProvider:d||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Ig(s){return Number(s)*1e3}function P_(s){const[e,t,a]=s.split(".");if(e===void 0||t===void 0||a===void 0)return ef("JWT malformed, contained fewer than 3 sections"),null;try{const o=UT(t);return o?JSON.parse(o):(ef("Failed to decode base64 JWT payload"),null)}catch(o){return ef("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Pb(s){const e=P_(s);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Nu(s,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof zi&&EC(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function EC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class TC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Wg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bu(this.lastLoginAt),this.creationTime=bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function vf(s){const e=s.auth,t=await s.getIdToken(),a=await Nu(s,yf(e,{idToken:t}));Pe(a?.users.length,e,"internal-error");const o=a.users[0];s._notifyReloadListener(o);const l=o.providerUserInfo?.length?sS(o.providerUserInfo):[],d=AC(s.providerData,l),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!d?.length,_=m?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Wg(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(s,v)}async function SC(s){const e=kt(s);await vf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AC(s,e){return[...s.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function sS(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function xC(s,e){const t=await tS(s,{},async()=>{const a=Ku({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=s.config,d=await nS(s,o,"/v1/token",`key=${l}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:a};return s.emulatorConfig&&yr(s.emulatorConfig.host)&&(g.credentials="include"),eS.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function wC(s,e){return br(s,"POST","/v2/accounts:revokeToken",vr(s,e))}class kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=Pb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:o,expiresIn:l}=await xC(e,t);this.updateTokensAndExpiration(a,o,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:o,expirationTime:l}=t,d=new kl;return a&&(Pe(typeof a=="string","internal-error",{appName:e}),d.refreshToken=a),o&&(Pe(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(Pe(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kl,this.toJSON())}_performRefresh(){return sa("not implemented")}}function Qa(s,e){Pe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Qs{constructor({uid:e,auth:t,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new TC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Wg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Nu(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bC(this,e)}reload(){return SC(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Qs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await vf(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ds(this.auth.app))return Promise.reject(ra(this.auth));const e=await this.getIdToken();return await Nu(this,vC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,d=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,_=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:b,emailVerified:S,isAnonymous:N,providerData:M,stsTokenManager:P}=t;Pe(b&&P,e,"internal-error");const j=kl.fromJSON(this.name,P);Pe(typeof b=="string",e,"internal-error"),Qa(a,e.name),Qa(o,e.name),Pe(typeof S=="boolean",e,"internal-error"),Pe(typeof N=="boolean",e,"internal-error"),Qa(l,e.name),Qa(d,e.name),Qa(m,e.name),Qa(g,e.name),Qa(_,e.name),Qa(v,e.name);const B=new Qs({uid:b,auth:e,email:o,emailVerified:S,displayName:a,isAnonymous:N,photoURL:d,phoneNumber:l,tenantId:m,stsTokenManager:j,createdAt:_,lastLoginAt:v});return M&&Array.isArray(M)&&(B.providerData=M.map(H=>({...H}))),g&&(B._redirectEventId=g),B}static async _fromIdTokenResponse(e,t,a=!1){const o=new kl;o.updateFromServerResponse(t);const l=new Qs({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await vf(l),l}static async _fromGetAccountInfoResponse(e,t,a){const o=t.users[0];Pe(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?sS(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!l?.length,m=new kl;m.updateFromIdToken(a);const g=new Qs({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Wg(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,_),g}}const Vb=new Map;function ia(s){ua(s instanceof Function,"Expected a class definition");let e=Vb.get(s);return e?(ua(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Vb.set(s,e),e)}class iS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}iS.type="NONE";const Ub=iS;function tf(s,e,t){return`firebase:${s}:${e}:${t}`}class jl{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:o,name:l}=this.auth;this.fullUserKey=tf(this.userKey,o.apiKey,l),this.fullPersistenceKey=tf("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await yf(this.auth,{idToken:e}).catch(()=>{});return t?Qs._fromGetAccountInfoResponse(this.auth,t,e):null}return Qs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new jl(ia(Ub),e,a);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let l=o[0]||ia(Ub);const d=tf(a,e.config.apiKey,e.name);let m=null;for(const _ of t)try{const v=await _._get(d);if(v){let b;if(typeof v=="string"){const S=await yf(e,{idToken:v}).catch(()=>{});if(!S)break;b=await Qs._fromGetAccountInfoResponse(e,S,v)}else b=Qs._fromJSON(e,v);_!==l&&(m=b),l=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new jl(l,e,a):(l=g[0],m&&await l._set(d,m.toJSON()),await Promise.all(t.map(async _=>{if(_!==l)try{await _._remove(d)}catch{}})),new jl(l,e,a))}}function Bb(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uS(e))return"Blackberry";if(dS(e))return"Webos";if(rS(e))return"Safari";if((e.includes("chrome/")||oS(e))&&!e.includes("edge/"))return"Chrome";if(cS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(t);if(a?.length===2)return a[1]}return"Other"}function aS(s=Mn()){return/firefox\//i.test(s)}function rS(s=Mn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oS(s=Mn()){return/crios\//i.test(s)}function lS(s=Mn()){return/iemobile/i.test(s)}function cS(s=Mn()){return/android/i.test(s)}function uS(s=Mn()){return/blackberry/i.test(s)}function dS(s=Mn()){return/webos/i.test(s)}function V_(s=Mn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function IC(s=Mn()){return V_(s)&&!!window.navigator?.standalone}function RC(){return qR()&&document.documentMode===10}function hS(s=Mn()){return V_(s)||cS(s)||dS(s)||uS(s)||/windows phone/i.test(s)||lS(s)}function fS(s,e=[]){let t;switch(s){case"Browser":t=Bb(Mn());break;case"Worker":t=`${Bb(Mn())}-${s}`;break;default:t=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${wo}/${a}`}class NC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((d,m)=>{try{const g=e(l);d(g)}catch(g){m(g)}});a.onAbort=t,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function CC(s,e={}){return br(s,"GET","/v2/passwordPolicy",vr(s,e))}const kC=6;class jC{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??kC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class DC{constructor(e,t,a,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qb(this),this.idTokenSubscription=new qb(this),this.beforeStateQueue=new NC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ia(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await jl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yf(this,{idToken:e}),a=await Qs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ds(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,d=a?._redirectEventId,m=await this.tryRedirectSignIn(e);(!l||l===d)&&m?.user&&(a=m.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(l){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ds(this.app))return Promise.reject(ra(this));const t=e?kt(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ds(this.app)?Promise.reject(ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ds(this.app)?Promise.reject(ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ia(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CC(this),t=new jC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qu("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await wC(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ia(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await jl.create(this,[ia(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(m,this,"internal-error"),m.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,a,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(ds(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&lC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Io(s){return kt(s)}class qb{constructor(e){this.auth=e,this.observer=null,this.addObserver=WR(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Bf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OC(s){Bf=s}function mS(s){return Bf.loadJS(s)}function MC(){return Bf.recaptchaEnterpriseScript}function zC(){return Bf.gapiScript}function LC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class PC{constructor(){this.enterprise=new VC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class VC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const UC="recaptcha-enterprise",pS="NO_RECAPTCHA";class BC{constructor(e){this.type=UC,this.auth=Io(e)}async verify(e="verify",t=!1){async function a(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,m)=>{yC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new _C(g);return l.tenantId==null?l._agentRecaptchaConfig=_:l._tenantRecaptchaConfigs[l.tenantId]=_,d(_.siteKey)}}).catch(g=>{m(g)})})}function o(l,d,m){const g=window.grecaptcha;Lb(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(_=>{d(_)}).catch(()=>{d(pS)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PC().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{a(this.auth).then(m=>{if(!t&&Lb(window.grecaptcha))o(m,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=MC();g.length!==0&&(g+=m),mS(g).then(()=>{o(m,l,d)}).catch(_=>{d(_)})}}).catch(m=>{d(m)})})}}async function Hb(s,e,t,a=!1,o=!1){const l=new BC(s);let d;if(o)d=pS;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:_,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return a?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Xg(s,e,t,a,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Hb(s,e,t,t==="getOobCode");return a(s,l)}else return a(s,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Hb(s,e,t,t==="getOobCode");return a(s,d)}else return Promise.reject(l)})}function qC(s,e){const t=Uf(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(fo(l,e??{}))return o;Zs(o,"already-initialized")}return t.initialize({options:e})}function HC(s,e){const t=e?.persistence||[],a=(Array.isArray(t)?t:[t]).map(ia);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e?.popupRedirectResolver)}function $C(s,e,t){const a=Io(s);Pe(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,l=gS(e),{host:d,port:m}=FC(e),g=m===null?"":`:${m}`,_={url:`${l}//${d}${g}/`},v=Object.freeze({host:d,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){Pe(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Pe(fo(_,a.config.emulator)&&fo(v,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=_,a.emulatorConfig=v,a.settings.appVerificationDisabledForTesting=!0,yr(d)?(k_(`${l}//${d}${g}`),j_("Auth",!0)):GC()}function gS(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function FC(s){const e=gS(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const l=o[1];return{host:l,port:$b(a.substr(l.length+1))}}else{const[l,d]=a.split(":");return{host:l,port:$b(d)}}}function $b(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function GC(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class U_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return sa("not implemented")}_getIdTokenResponse(e){return sa("not implemented")}_linkToIdToken(e,t){return sa("not implemented")}_getReauthenticationResolver(e){return sa("not implemented")}}async function QC(s,e){return br(s,"POST","/v1/accounts:signUp",e)}async function KC(s,e){return Wu(s,"POST","/v1/accounts:signInWithPassword",vr(s,e))}async function YC(s,e){return Wu(s,"POST","/v1/accounts:signInWithEmailLink",vr(s,e))}async function WC(s,e){return Wu(s,"POST","/v1/accounts:signInWithEmailLink",vr(s,e))}class Cu extends U_{constructor(e,t,a,o=null){super("password",a),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Cu(e,t,"password")}static _fromEmailAndCode(e,t,a=null){return new Cu(e,t,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xg(e,t,"signInWithPassword",KC);case"emailLink":return YC(e,{email:this._email,oobCode:this._password});default:Zs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const a={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xg(e,a,"signUpPassword",QC);case"emailLink":return WC(e,{idToken:t,email:this._email,oobCode:this._password});default:Zs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Dl(s,e){return Wu(s,"POST","/v1/accounts:signInWithIdp",vr(s,e))}const XC="http://localhost";class po extends U_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new po(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...l}=t;if(!a||!o)return null;const d=new po(a,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Dl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Dl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Dl(e,t)}buildRequest(){const e={requestUri:XC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ku(t)}return e}}function ZC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JC(s){const e=fu(mu(s)).link,t=e?fu(mu(e)).deep_link_id:null,a=fu(mu(s)).deep_link_id;return(a?fu(mu(a)).link:null)||a||t||e||s}class B_{constructor(e){const t=fu(mu(e)),a=t.apiKey??null,o=t.oobCode??null,l=ZC(t.mode??null);Pe(a&&o&&l,"argument-error"),this.apiKey=a,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=JC(e);try{return new B_(t)}catch{return null}}}class Fl{constructor(){this.providerId=Fl.PROVIDER_ID}static credential(e,t){return Cu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const a=B_.parseLink(t);return Pe(a,"argument-error"),Cu._fromEmailAndCode(e,a.code,a.tenantId)}}Fl.PROVIDER_ID="password";Fl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class _S{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Xu extends _S{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Wa extends Xu{constructor(){super("facebook.com")}static credential(e){return po._fromParams({providerId:Wa.PROVIDER_ID,signInMethod:Wa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wa.credentialFromTaggedObject(e)}static credentialFromError(e){return Wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wa.credential(e.oauthAccessToken)}catch{return null}}}Wa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wa.PROVIDER_ID="facebook.com";class Xa extends Xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return po._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return Xa.credential(t,a)}catch{return null}}}Xa.GOOGLE_SIGN_IN_METHOD="google.com";Xa.PROVIDER_ID="google.com";class Za extends Xu{constructor(){super("github.com")}static credential(e){return po._fromParams({providerId:Za.PROVIDER_ID,signInMethod:Za.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Za.credentialFromTaggedObject(e)}static credentialFromError(e){return Za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Za.credential(e.oauthAccessToken)}catch{return null}}}Za.GITHUB_SIGN_IN_METHOD="github.com";Za.PROVIDER_ID="github.com";class Ja extends Xu{constructor(){super("twitter.com")}static credential(e,t){return po._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ja.credentialFromTaggedObject(e)}static credentialFromError(e){return Ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return Ja.credential(t,a)}catch{return null}}}Ja.TWITTER_SIGN_IN_METHOD="twitter.com";Ja.PROVIDER_ID="twitter.com";async function ek(s,e){return Wu(s,"POST","/v1/accounts:signUp",vr(s,e))}class go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,o=!1){const l=await Qs._fromIdTokenResponse(e,a,o),d=Fb(a);return new go({user:l,providerId:d,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const o=Fb(a);return new go({user:e,providerId:o,_tokenResponse:a,operationType:t})}}function Fb(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class bf extends zi{constructor(e,t,a,o){super(t.code,t.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,bf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,o){return new bf(e,t,a,o)}}function yS(s,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?bf._fromErrorAndOperation(s,l,e,a):l})}async function tk(s,e,t=!1){const a=await Nu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return go._forOperation(s,"link",a)}async function nk(s,e,t=!1){const{auth:a}=s;if(ds(a.app))return Promise.reject(ra(a));const o="reauthenticate";try{const l=await Nu(s,yS(a,o,e,s),t);Pe(l.idToken,a,"internal-error");const d=P_(l.idToken);Pe(d,a,"internal-error");const{sub:m}=d;return Pe(s.uid===m,a,"user-mismatch"),go._forOperation(s,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Zs(a,"user-mismatch"),l}}async function vS(s,e,t=!1){if(ds(s.app))return Promise.reject(ra(s));const a="signIn",o=await yS(s,a,e),l=await go._fromIdTokenResponse(s,a,o);return t||await s._updateCurrentUser(l.user),l}async function sk(s,e){return vS(Io(s),e)}async function bS(s){const e=Io(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ik(s,e,t){if(ds(s.app))return Promise.reject(ra(s));const a=Io(s),d=await Xg(a,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ek).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&bS(s),g}),m=await go._fromIdTokenResponse(a,"signIn",d);return await a._updateCurrentUser(m.user),m}function ak(s,e,t){return ds(s.app)?Promise.reject(ra(s)):sk(kt(s),Fl.credential(e,t)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&bS(s),a})}function rk(s,e,t,a){return kt(s).onIdTokenChanged(e,t,a)}function ok(s,e,t){return kt(s).beforeAuthStateChanged(e,t)}function lk(s,e,t,a){return kt(s).onAuthStateChanged(e,t,a)}function ck(s){return kt(s).signOut()}const Ef="__sak";class ES{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ef,"1"),this.storage.removeItem(Ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const uk=1e3,dk=10;class TS extends ES{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),o=this.localCache[t];a!==o&&e(t,o,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const a=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(a);!t&&this.localCache[a]===d||this.notifyListeners(a,d)},l=this.storage.getItem(a);RC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,dk):o()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},uk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}TS.type="LOCAL";const hk=TS;class SS extends ES{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}SS.type="SESSION";const AS=SS;function fk(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class qf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const a=new qf(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const m=Array.from(d).map(async _=>_(t.origin,l)),g=await fk(m);t.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qf.receivers=[];function q_(s="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return s+t}class mk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((m,g)=>{const _=q_("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},a);d={messageChannel:o,onMessage(b){const S=b;if(S.data.eventId===_)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(S.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Ci(){return window}function pk(s){Ci().location.href=s}function xS(){return typeof Ci().WorkerGlobalScope<"u"&&typeof Ci().importScripts=="function"}async function gk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _k(){return navigator?.serviceWorker?.controller||null}function yk(){return xS()?self:null}const wS="firebaseLocalStorageDb",vk=1,Tf="firebaseLocalStorage",IS="fbase_key";class Zu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hf(s,e){return s.transaction([Tf],e?"readwrite":"readonly").objectStore(Tf)}function bk(){const s=indexedDB.deleteDatabase(wS);return new Zu(s).toPromise()}function Zg(){const s=indexedDB.open(wS,vk);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(Tf,{keyPath:IS})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(Tf)?e(a):(a.close(),await bk(),e(await Zg()))})})}async function Gb(s,e,t){const a=Hf(s,!0).put({[IS]:e,value:t});return new Zu(a).toPromise()}async function Ek(s,e){const t=Hf(s,!1).get(e),a=await new Zu(t).toPromise();return a===void 0?null:a.value}function Qb(s,e){const t=Hf(s,!0).delete(e);return new Zu(t).toPromise()}const Tk=800,Sk=3;class RS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>Sk)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qf._getInstance(yk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await gk(),!this.activeServiceWorker)return;this.sender=new mk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_k()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zg();return await Gb(e,Ef,"1"),await Qb(e,Ef),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>Gb(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>Ek(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Qb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Hf(o,!1).getAll();return new Zu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Tk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RS.type="LOCAL";const Ak=RS;new Yu(3e4,6e4);function xk(s,e){return e?ia(e):(Pe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class H_ extends U_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Dl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Dl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wk(s){return vS(s.auth,new H_(s),s.bypassAuthState)}function Ik(s){const{auth:e,user:t}=s;return Pe(t,e,"internal-error"),nk(t,new H_(s),s.bypassAuthState)}async function Rk(s){const{auth:e,user:t}=s;return Pe(t,e,"internal-error"),tk(t,new H_(s),s.bypassAuthState)}class NS{constructor(e,t,a,o,l=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:o,tenantId:l,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wk;case"linkViaPopup":case"linkViaRedirect":return Rk;case"reauthViaPopup":case"reauthViaRedirect":return Ik;default:Zs(this.auth,"internal-error")}}resolve(e){ua(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ua(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Nk=new Yu(2e3,1e4);class Nl extends NS{constructor(e,t,a,o,l){super(e,t,o,l),this.provider=a,this.authWindow=null,this.pollId=null,Nl.currentPopupAction&&Nl.currentPopupAction.cancel(),Nl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){ua(this.filter.length===1,"Popup operations only handle one event");const e=q_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Nk.get())};e()}}Nl.currentPopupAction=null;const Ck="pendingRedirect",nf=new Map;class kk extends NS{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=nf.get(this.auth._key());if(!e){try{const a=await jk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}nf.set(this.auth._key(),e)}return this.bypassAuthState||nf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jk(s,e){const t=Mk(e),a=Ok(s);if(!await a._isAvailable())return!1;const o=await a._get(t)==="true";return await a._remove(t),o}function Dk(s,e){nf.set(s._key(),e)}function Ok(s){return ia(s._redirectPersistence)}function Mk(s){return tf(Ck,s.config.apiKey,s.name)}async function zk(s,e,t=!1){if(ds(s.app))return Promise.reject(ra(s));const a=Io(s),o=xk(a,e),d=await new kk(a,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,e)),d}const Lk=600*1e3;class Pk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Vk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!CS(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ni(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Lk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kb(e))}saveEventToCache(e){this.cachedEventUids.add(Kb(e)),this.lastProcessedEventTime=Date.now()}}function Kb(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function CS({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function Vk(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CS(s);default:return!1}}async function Uk(s,e={}){return br(s,"GET","/v1/projects",e)}const Bk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qk=/^https?/;async function Hk(s){if(s.config.emulator)return;const{authorizedDomains:e}=await Uk(s);for(const t of e)try{if($k(t))return}catch{}Zs(s,"unauthorized-domain")}function $k(s){const e=Yg(),{protocol:t,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&a===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===a}if(!qk.test(t))return!1;if(Bk.test(s))return a===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}const Fk=new Yu(3e4,6e4);function Yb(){const s=Ci().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function Gk(s){return new Promise((e,t)=>{function a(){Yb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yb(),t(Ni(s,"network-request-failed"))},timeout:Fk.get()})}if(Ci().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ci().gapi?.load)a();else{const o=LC("iframefcb");return Ci()[o]=()=>{gapi.load?a():t(Ni(s,"network-request-failed"))},mS(`${zC()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw sf=null,e})}let sf=null;function Qk(s){return sf=sf||Gk(s),sf}const Kk=new Yu(5e3,15e3),Yk="__/auth/iframe",Wk="emulator/auth/iframe",Xk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jk(s){const e=s.config;Pe(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?L_(e,Wk):`https://${s.config.authDomain}/${Yk}`,a={apiKey:e.apiKey,appName:s.name,v:wo},o=Zk.get(s.config.apiHost);o&&(a.eid=o);const l=s._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${Ku(a).slice(1)}`}async function ej(s){const e=await Qk(s),t=Ci().gapi;return Pe(t,s,"internal-error"),e.open({where:document.body,url:Jk(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xk,dontclear:!0},a=>new Promise(async(o,l)=>{await a.restyle({setHideOnLeave:!1});const d=Ni(s,"network-request-failed"),m=Ci().setTimeout(()=>{l(d)},Kk.get());function g(){Ci().clearTimeout(m),o(a)}a.ping(g).then(g,()=>{l(d)})}))}const tj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nj=500,sj=600,ij="_blank",aj="http://localhost";class Wb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rj(s,e,t,a=nj,o=sj){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let m="";const g={...tj,width:a.toString(),height:o.toString(),top:l,left:d},_=Mn().toLowerCase();t&&(m=oS(_)?ij:t),aS(_)&&(e=e||aj,g.scrollbars="yes");const v=Object.entries(g).reduce((S,[N,M])=>`${S}${N}=${M},`,"");if(IC(_)&&m!=="_self")return oj(e||"",m),new Wb(null);const b=window.open(e||"",m,v);Pe(b,s,"popup-blocked");try{b.focus()}catch{}return new Wb(b)}function oj(s,e){const t=document.createElement("a");t.href=s,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}const lj="__/auth/handler",cj="emulator/auth/handler",uj=encodeURIComponent("fac");async function Xb(s,e,t,a,o,l){Pe(s.config.authDomain,s,"auth-domain-config-required"),Pe(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:a,v:wo,eventId:o};if(e instanceof _S){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",YR(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))d[v]=b}if(e instanceof Xu){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(d.scopes=v.join(","))}s.tenantId&&(d.tid=s.tenantId);const m=d;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const g=await s._getAppCheckToken(),_=g?`#${uj}=${encodeURIComponent(g)}`:"";return`${dj(s)}?${Ku(m).slice(1)}${_}`}function dj({config:s}){return s.emulator?L_(s,cj):`https://${s.authDomain}/${lj}`}const Rg="webStorageSupport";class hj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AS,this._completeRedirectFn=zk,this._overrideRedirectResult=Dk}async _openPopup(e,t,a,o){ua(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await Xb(e,t,a,Yg(),o);return rj(e,l,q_())}async _openRedirect(e,t,a,o){await this._originValidation(e);const l=await Xb(e,t,a,Yg(),o);return pk(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ua(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await ej(e),a=new Pk(e);return t.register("authEvent",o=>(Pe(o?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Rg,{type:Rg},o=>{const l=o?.[0]?.[Rg];l!==void 0&&t(!!l),Zs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Hk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return hS()||rS()||V_()}}const fj=hj;var Zb="@firebase/auth",Jb="1.12.0";class mj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pj(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gj(s){mo(new lr("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=a.options;Pe(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const g={apiKey:d,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fS(s)},_=new DC(a,o,l,g);return HC(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),mo(new lr("auth-internal",e=>{const t=Io(e.getProvider("auth").getImmediate());return(a=>new mj(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ri(Zb,Jb,pj(s)),Ri(Zb,Jb,"esm2020")}const _j=300,yj=$T("authIdTokenMaxAge")||_j;let eE=null;const vj=s=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>yj)return;const o=t?.token;eE!==o&&(eE=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function bj(s=M_()){const e=Uf(s,"auth");if(e.isInitialized())return e.getImmediate();const t=qC(s,{popupRedirectResolver:fj,persistence:[Ak,hk,AS]}),a=$T("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const d=vj(l.toString());ok(t,d,()=>d(t.currentUser)),rk(t,m=>d(m))}}const o=BT("auth");return o&&$C(t,`http://${o}`),t}function Ej(){return document.getElementsByTagName("head")?.[0]??document}OC({loadJS(s){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=o=>{const l=Ni("internal-error");l.customData=o,t(l)},a.type="text/javascript",a.charset="UTF-8",Ej().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gj("Browser");var tE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var rr,kS;(function(){var s;function e(k,I){function C(){}C.prototype=I.prototype,k.F=I.prototype,k.prototype=new C,k.prototype.constructor=k,k.D=function(L,D,U){for(var A=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)A[pe-2]=arguments[pe];return I.prototype[D].apply(L,A)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,I,C){C||(C=0);const L=Array(16);if(typeof I=="string")for(var D=0;D<16;++D)L[D]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(D=0;D<16;++D)L[D]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=k.g[0],C=k.g[1],D=k.g[2];let U=k.g[3],A;A=I+(U^C&(D^U))+L[0]+3614090360&4294967295,I=C+(A<<7&4294967295|A>>>25),A=U+(D^I&(C^D))+L[1]+3905402710&4294967295,U=I+(A<<12&4294967295|A>>>20),A=D+(C^U&(I^C))+L[2]+606105819&4294967295,D=U+(A<<17&4294967295|A>>>15),A=C+(I^D&(U^I))+L[3]+3250441966&4294967295,C=D+(A<<22&4294967295|A>>>10),A=I+(U^C&(D^U))+L[4]+4118548399&4294967295,I=C+(A<<7&4294967295|A>>>25),A=U+(D^I&(C^D))+L[5]+1200080426&4294967295,U=I+(A<<12&4294967295|A>>>20),A=D+(C^U&(I^C))+L[6]+2821735955&4294967295,D=U+(A<<17&4294967295|A>>>15),A=C+(I^D&(U^I))+L[7]+4249261313&4294967295,C=D+(A<<22&4294967295|A>>>10),A=I+(U^C&(D^U))+L[8]+1770035416&4294967295,I=C+(A<<7&4294967295|A>>>25),A=U+(D^I&(C^D))+L[9]+2336552879&4294967295,U=I+(A<<12&4294967295|A>>>20),A=D+(C^U&(I^C))+L[10]+4294925233&4294967295,D=U+(A<<17&4294967295|A>>>15),A=C+(I^D&(U^I))+L[11]+2304563134&4294967295,C=D+(A<<22&4294967295|A>>>10),A=I+(U^C&(D^U))+L[12]+1804603682&4294967295,I=C+(A<<7&4294967295|A>>>25),A=U+(D^I&(C^D))+L[13]+4254626195&4294967295,U=I+(A<<12&4294967295|A>>>20),A=D+(C^U&(I^C))+L[14]+2792965006&4294967295,D=U+(A<<17&4294967295|A>>>15),A=C+(I^D&(U^I))+L[15]+1236535329&4294967295,C=D+(A<<22&4294967295|A>>>10),A=I+(D^U&(C^D))+L[1]+4129170786&4294967295,I=C+(A<<5&4294967295|A>>>27),A=U+(C^D&(I^C))+L[6]+3225465664&4294967295,U=I+(A<<9&4294967295|A>>>23),A=D+(I^C&(U^I))+L[11]+643717713&4294967295,D=U+(A<<14&4294967295|A>>>18),A=C+(U^I&(D^U))+L[0]+3921069994&4294967295,C=D+(A<<20&4294967295|A>>>12),A=I+(D^U&(C^D))+L[5]+3593408605&4294967295,I=C+(A<<5&4294967295|A>>>27),A=U+(C^D&(I^C))+L[10]+38016083&4294967295,U=I+(A<<9&4294967295|A>>>23),A=D+(I^C&(U^I))+L[15]+3634488961&4294967295,D=U+(A<<14&4294967295|A>>>18),A=C+(U^I&(D^U))+L[4]+3889429448&4294967295,C=D+(A<<20&4294967295|A>>>12),A=I+(D^U&(C^D))+L[9]+568446438&4294967295,I=C+(A<<5&4294967295|A>>>27),A=U+(C^D&(I^C))+L[14]+3275163606&4294967295,U=I+(A<<9&4294967295|A>>>23),A=D+(I^C&(U^I))+L[3]+4107603335&4294967295,D=U+(A<<14&4294967295|A>>>18),A=C+(U^I&(D^U))+L[8]+1163531501&4294967295,C=D+(A<<20&4294967295|A>>>12),A=I+(D^U&(C^D))+L[13]+2850285829&4294967295,I=C+(A<<5&4294967295|A>>>27),A=U+(C^D&(I^C))+L[2]+4243563512&4294967295,U=I+(A<<9&4294967295|A>>>23),A=D+(I^C&(U^I))+L[7]+1735328473&4294967295,D=U+(A<<14&4294967295|A>>>18),A=C+(U^I&(D^U))+L[12]+2368359562&4294967295,C=D+(A<<20&4294967295|A>>>12),A=I+(C^D^U)+L[5]+4294588738&4294967295,I=C+(A<<4&4294967295|A>>>28),A=U+(I^C^D)+L[8]+2272392833&4294967295,U=I+(A<<11&4294967295|A>>>21),A=D+(U^I^C)+L[11]+1839030562&4294967295,D=U+(A<<16&4294967295|A>>>16),A=C+(D^U^I)+L[14]+4259657740&4294967295,C=D+(A<<23&4294967295|A>>>9),A=I+(C^D^U)+L[1]+2763975236&4294967295,I=C+(A<<4&4294967295|A>>>28),A=U+(I^C^D)+L[4]+1272893353&4294967295,U=I+(A<<11&4294967295|A>>>21),A=D+(U^I^C)+L[7]+4139469664&4294967295,D=U+(A<<16&4294967295|A>>>16),A=C+(D^U^I)+L[10]+3200236656&4294967295,C=D+(A<<23&4294967295|A>>>9),A=I+(C^D^U)+L[13]+681279174&4294967295,I=C+(A<<4&4294967295|A>>>28),A=U+(I^C^D)+L[0]+3936430074&4294967295,U=I+(A<<11&4294967295|A>>>21),A=D+(U^I^C)+L[3]+3572445317&4294967295,D=U+(A<<16&4294967295|A>>>16),A=C+(D^U^I)+L[6]+76029189&4294967295,C=D+(A<<23&4294967295|A>>>9),A=I+(C^D^U)+L[9]+3654602809&4294967295,I=C+(A<<4&4294967295|A>>>28),A=U+(I^C^D)+L[12]+3873151461&4294967295,U=I+(A<<11&4294967295|A>>>21),A=D+(U^I^C)+L[15]+530742520&4294967295,D=U+(A<<16&4294967295|A>>>16),A=C+(D^U^I)+L[2]+3299628645&4294967295,C=D+(A<<23&4294967295|A>>>9),A=I+(D^(C|~U))+L[0]+4096336452&4294967295,I=C+(A<<6&4294967295|A>>>26),A=U+(C^(I|~D))+L[7]+1126891415&4294967295,U=I+(A<<10&4294967295|A>>>22),A=D+(I^(U|~C))+L[14]+2878612391&4294967295,D=U+(A<<15&4294967295|A>>>17),A=C+(U^(D|~I))+L[5]+4237533241&4294967295,C=D+(A<<21&4294967295|A>>>11),A=I+(D^(C|~U))+L[12]+1700485571&4294967295,I=C+(A<<6&4294967295|A>>>26),A=U+(C^(I|~D))+L[3]+2399980690&4294967295,U=I+(A<<10&4294967295|A>>>22),A=D+(I^(U|~C))+L[10]+4293915773&4294967295,D=U+(A<<15&4294967295|A>>>17),A=C+(U^(D|~I))+L[1]+2240044497&4294967295,C=D+(A<<21&4294967295|A>>>11),A=I+(D^(C|~U))+L[8]+1873313359&4294967295,I=C+(A<<6&4294967295|A>>>26),A=U+(C^(I|~D))+L[15]+4264355552&4294967295,U=I+(A<<10&4294967295|A>>>22),A=D+(I^(U|~C))+L[6]+2734768916&4294967295,D=U+(A<<15&4294967295|A>>>17),A=C+(U^(D|~I))+L[13]+1309151649&4294967295,C=D+(A<<21&4294967295|A>>>11),A=I+(D^(C|~U))+L[4]+4149444226&4294967295,I=C+(A<<6&4294967295|A>>>26),A=U+(C^(I|~D))+L[11]+3174756917&4294967295,U=I+(A<<10&4294967295|A>>>22),A=D+(I^(U|~C))+L[2]+718787259&4294967295,D=U+(A<<15&4294967295|A>>>17),A=C+(U^(D|~I))+L[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(D+(A<<21&4294967295|A>>>11))&4294967295,k.g[2]=k.g[2]+D&4294967295,k.g[3]=k.g[3]+U&4294967295}a.prototype.v=function(k,I){I===void 0&&(I=k.length);const C=I-this.blockSize,L=this.C;let D=this.h,U=0;for(;U<I;){if(D==0)for(;U<=C;)o(this,k,U),U+=this.blockSize;if(typeof k=="string"){for(;U<I;)if(L[D++]=k.charCodeAt(U++),D==this.blockSize){o(this,L),D=0;break}}else for(;U<I;)if(L[D++]=k[U++],D==this.blockSize){o(this,L),D=0;break}}this.h=D,this.o+=I},a.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;I=this.o*8;for(var C=k.length-8;C<k.length;++C)k[C]=I&255,I/=256;for(this.v(k),k=Array(16),I=0,C=0;C<4;++C)for(let L=0;L<32;L+=8)k[I++]=this.g[C]>>>L&255;return k};function l(k,I){var C=m;return Object.prototype.hasOwnProperty.call(C,k)?C[k]:C[k]=I(k)}function d(k,I){this.h=I;const C=[];let L=!0;for(let D=k.length-1;D>=0;D--){const U=k[D]|0;L&&U==I||(C[D]=U,L=!1)}this.g=C}var m={};function g(k){return-128<=k&&k<128?l(k,function(I){return new d([I|0],I<0?-1:0)}):new d([k|0],k<0?-1:0)}function _(k){if(isNaN(k)||!isFinite(k))return b;if(k<0)return j(_(-k));const I=[];let C=1;for(let L=0;k>=C;L++)I[L]=k/C|0,C*=4294967296;return new d(I,0)}function v(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return j(v(k.substring(1),I));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=_(Math.pow(I,8));let L=b;for(let U=0;U<k.length;U+=8){var D=Math.min(8,k.length-U);const A=parseInt(k.substring(U,U+D),I);D<8?(D=_(Math.pow(I,D)),L=L.j(D).add(_(A))):(L=L.j(C),L=L.add(_(A)))}return L}var b=g(0),S=g(1),N=g(16777216);s=d.prototype,s.m=function(){if(P(this))return-j(this).m();let k=0,I=1;for(let C=0;C<this.g.length;C++){const L=this.i(C);k+=(L>=0?L:4294967296+L)*I,I*=4294967296}return k},s.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(M(this))return"0";if(P(this))return"-"+j(this).toString(k);const I=_(Math.pow(k,6));var C=this;let L="";for(;;){const D=G(C,I).g;C=B(C,D.j(I));let U=((C.g.length>0?C.g[0]:C.h)>>>0).toString(k);if(C=D,M(C))return U+L;for(;U.length<6;)U="0"+U;L=U+L}},s.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function M(k){if(k.h!=0)return!1;for(let I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function P(k){return k.h==-1}s.l=function(k){return k=B(this,k),P(k)?-1:M(k)?0:1};function j(k){const I=k.g.length,C=[];for(let L=0;L<I;L++)C[L]=~k.g[L];return new d(C,~k.h).add(S)}s.abs=function(){return P(this)?j(this):this},s.add=function(k){const I=Math.max(this.g.length,k.g.length),C=[];let L=0;for(let D=0;D<=I;D++){let U=L+(this.i(D)&65535)+(k.i(D)&65535),A=(U>>>16)+(this.i(D)>>>16)+(k.i(D)>>>16);L=A>>>16,U&=65535,A&=65535,C[D]=A<<16|U}return new d(C,C[C.length-1]&-2147483648?-1:0)};function B(k,I){return k.add(j(I))}s.j=function(k){if(M(this)||M(k))return b;if(P(this))return P(k)?j(this).j(j(k)):j(j(this).j(k));if(P(k))return j(this.j(j(k)));if(this.l(N)<0&&k.l(N)<0)return _(this.m()*k.m());const I=this.g.length+k.g.length,C=[];for(var L=0;L<2*I;L++)C[L]=0;for(L=0;L<this.g.length;L++)for(let D=0;D<k.g.length;D++){const U=this.i(L)>>>16,A=this.i(L)&65535,pe=k.i(D)>>>16,Re=k.i(D)&65535;C[2*L+2*D]+=A*Re,H(C,2*L+2*D),C[2*L+2*D+1]+=U*Re,H(C,2*L+2*D+1),C[2*L+2*D+1]+=A*pe,H(C,2*L+2*D+1),C[2*L+2*D+2]+=U*pe,H(C,2*L+2*D+2)}for(k=0;k<I;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=I;k<2*I;k++)C[k]=0;return new d(C,0)};function H(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function z(k,I){this.g=k,this.h=I}function G(k,I){if(M(I))throw Error("division by zero");if(M(k))return new z(b,b);if(P(k))return I=G(j(k),I),new z(j(I.g),j(I.h));if(P(I))return I=G(k,j(I)),new z(j(I.g),I.h);if(k.g.length>30){if(P(k)||P(I))throw Error("slowDivide_ only works with positive integers.");for(var C=S,L=I;L.l(k)<=0;)C=de(C),L=de(L);var D=X(C,1),U=X(L,1);for(L=X(L,2),C=X(C,2);!M(L);){var A=U.add(L);A.l(k)<=0&&(D=D.add(C),U=A),L=X(L,1),C=X(C,1)}return I=B(k,D.j(I)),new z(D,I)}for(D=b;k.l(I)>=0;){for(C=Math.max(1,Math.floor(k.m()/I.m())),L=Math.ceil(Math.log(C)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),U=_(C),A=U.j(I);P(A)||A.l(k)>0;)C-=L,U=_(C),A=U.j(I);M(U)&&(U=S),D=D.add(U),k=B(k,A)}return new z(D,k)}s.B=function(k){return G(this,k).h},s.and=function(k){const I=Math.max(this.g.length,k.g.length),C=[];for(let L=0;L<I;L++)C[L]=this.i(L)&k.i(L);return new d(C,this.h&k.h)},s.or=function(k){const I=Math.max(this.g.length,k.g.length),C=[];for(let L=0;L<I;L++)C[L]=this.i(L)|k.i(L);return new d(C,this.h|k.h)},s.xor=function(k){const I=Math.max(this.g.length,k.g.length),C=[];for(let L=0;L<I;L++)C[L]=this.i(L)^k.i(L);return new d(C,this.h^k.h)};function de(k){const I=k.g.length+1,C=[];for(let L=0;L<I;L++)C[L]=k.i(L)<<1|k.i(L-1)>>>31;return new d(C,k.h)}function X(k,I){const C=I>>5;I%=32;const L=k.g.length-C,D=[];for(let U=0;U<L;U++)D[U]=I>0?k.i(U+C)>>>I|k.i(U+C+1)<<32-I:k.i(U+C);return new d(D,k.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,kS=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=v,rr=d}).apply(typeof tE<"u"?tE:typeof self<"u"?self:typeof window<"u"?window:{});var $h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var jS,pu,DS,af,Jg,OS,MS,zS;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof $h=="object"&&$h];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var a=t(this);function o(h,y){if(y)e:{var T=a;h=h.split(".");for(var R=0;R<h.length-1;R++){var Q=h[R];if(!(Q in T))break e;T=T[Q]}h=h[h.length-1],R=T[h],y=y(R),y!=R&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var T=[],R;for(R in y)Object.prototype.hasOwnProperty.call(y,R)&&T.push([R,y[R]]);return T}});var l=l||{},d=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,T){return h.call.apply(h.bind,arguments)}function _(h,y,T){return _=g,_.apply(null,arguments)}function v(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var R=T.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function b(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(R,Q,ee){for(var _e=Array(arguments.length-2),He=2;He<arguments.length;He++)_e[He-2]=arguments[He];return y.prototype[Q].apply(R,_e)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function N(h){const y=h.length;if(y>0){const T=Array(y);for(let R=0;R<y;R++)T[R]=h[R];return T}return[]}function M(h,y){for(let R=1;R<arguments.length;R++){const Q=arguments[R];var T=typeof Q;if(T=T!="object"?T:Q?Array.isArray(Q)?"array":T:"null",T=="array"||T=="object"&&typeof Q.length=="number"){T=h.length||0;const ee=Q.length||0;h.length=T+ee;for(let _e=0;_e<ee;_e++)h[T+_e]=Q[_e]}else h.push(Q)}}class P{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function j(h){d.setTimeout(()=>{throw h},0)}function B(){var h=k;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class H{constructor(){this.h=this.g=null}add(y,T){const R=z.get();R.set(y,T),this.h?this.h.next=R:this.g=R,this.h=R}}var z=new P(()=>new G,h=>h.reset());class G{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let de,X=!1,k=new H,I=()=>{const h=Promise.resolve(void 0);de=()=>{h.then(C)}};function C(){for(var h;h=B();){try{h.h.call(h.g)}catch(T){j(T)}var y=z;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}X=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};d.addEventListener("test",T,y),d.removeEventListener("test",T,y)}catch{}return h})();function A(h){return/^[\s\xa0]*$/.test(h)}function pe(h,y){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}b(pe,D),pe.prototype.init=function(h,y){const T=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Re="closure_listenable_"+(Math.random()*1e6|0),Z=0;function ge(h,y,T,R,Q){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!R,this.ha=Q,this.key=++Z,this.da=this.fa=!1}function Ae(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Fe(h,y,T){for(const R in h)y.call(T,h[R],R,h)}function ue(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function O(h){const y={};for(const T in h)y[T]=h[T];return y}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(h,y){let T,R;for(let Q=1;Q<arguments.length;Q++){R=arguments[Q];for(T in R)h[T]=R[T];for(let ee=0;ee<Y.length;ee++)T=Y[ee],Object.prototype.hasOwnProperty.call(R,T)&&(h[T]=R[T])}}function oe(h){this.src=h,this.g={},this.h=0}oe.prototype.add=function(h,y,T,R,Q){const ee=h.toString();h=this.g[ee],h||(h=this.g[ee]=[],this.h++);const _e=he(h,y,R,Q);return _e>-1?(y=h[_e],T||(y.fa=!1)):(y=new ge(y,this.src,ee,!!R,Q),y.fa=T,h.push(y)),y};function me(h,y){const T=y.type;if(T in h.g){var R=h.g[T],Q=Array.prototype.indexOf.call(R,y,void 0),ee;(ee=Q>=0)&&Array.prototype.splice.call(R,Q,1),ee&&(Ae(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function he(h,y,T,R){for(let Q=0;Q<h.length;++Q){const ee=h[Q];if(!ee.da&&ee.listener==y&&ee.capture==!!T&&ee.ha==R)return Q}return-1}var Ne="closure_lm_"+(Math.random()*1e6|0),ce={};function fe(h,y,T,R,Q){if(Array.isArray(y)){for(let ee=0;ee<y.length;ee++)fe(h,y[ee],T,R,Q);return null}return T=ic(T),h&&h[Re]?h.J(y,T,m(R)?!!R.capture:!1,Q):we(h,y,T,!1,R,Q)}function we(h,y,T,R,Q,ee){if(!y)throw Error("Invalid event type");const _e=m(Q)?!!Q.capture:!!Q;let He=Ir(h);if(He||(h[Ne]=He=new oe(h)),T=He.add(y,T,R,_e,ee),T.proxy)return T;if(R=it(),T.proxy=R,R.src=h,R.listener=T,h.addEventListener)U||(Q=_e),Q===void 0&&(Q=!1),h.addEventListener(y.toString(),R,Q);else if(h.attachEvent)h.attachEvent(Rn(y.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return T}function it(){function h(T){return y.call(h.src,h.listener,T)}const y=wr;return h}function It(h,y,T,R,Q){if(Array.isArray(y))for(var ee=0;ee<y.length;ee++)It(h,y[ee],T,R,Q);else R=m(R)?!!R.capture:!!R,T=ic(T),h&&h[Re]?(h=h.i,ee=String(y).toString(),ee in h.g&&(y=h.g[ee],T=he(y,T,R,Q),T>-1&&(Ae(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[ee],h.h--)))):h&&(h=Ir(h))&&(y=h.g[y.toString()],h=-1,y&&(h=he(y,T,R,Q)),(T=h>-1?y[h]:null)&&Hn(T))}function Hn(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Re])me(y.i,h);else{var T=h.type,R=h.proxy;y.removeEventListener?y.removeEventListener(T,R,h.capture):y.detachEvent?y.detachEvent(Rn(T),R):y.addListener&&y.removeListener&&y.removeListener(R),(T=Ir(y))?(me(T,h),T.h==0&&(T.src=null,y[Ne]=null)):Ae(h)}}}function Rn(h){return h in ce?ce[h]:ce[h]="on"+h}function wr(h,y){if(h.da)h=!0;else{y=new pe(y,this);const T=h.listener,R=h.ha||h.src;h.fa&&Hn(h),h=T.call(R,y)}return h}function Ir(h){return h=h[Ne],h instanceof oe?h:null}var sc="__closure_events_fn_"+(Math.random()*1e9>>>0);function ic(h){return typeof h=="function"?h:(h[sc]||(h[sc]=function(y){return h.handleEvent(y)}),h[sc])}function Gt(){L.call(this),this.i=new oe(this),this.M=this,this.G=null}b(Gt,L),Gt.prototype[Re]=!0,Gt.prototype.removeEventListener=function(h,y,T,R){It(this,h,y,T,R)};function rn(h,y){var T,R=h.G;if(R)for(T=[];R;R=R.G)T.push(R);if(h=h.M,R=y.type||y,typeof y=="string")y=new D(y,h);else if(y instanceof D)y.target=y.target||h;else{var Q=y;y=new D(R,h),F(y,Q)}Q=!0;let ee,_e;if(T)for(_e=T.length-1;_e>=0;_e--)ee=y.g=T[_e],Q=ma(ee,R,!0,y)&&Q;if(ee=y.g=h,Q=ma(ee,R,!0,y)&&Q,Q=ma(ee,R,!1,y)&&Q,T)for(_e=0;_e<T.length;_e++)ee=y.g=T[_e],Q=ma(ee,R,!1,y)&&Q}Gt.prototype.N=function(){if(Gt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let R=0;R<T.length;R++)Ae(T[R]);delete h.g[y],h.h--}}this.G=null},Gt.prototype.J=function(h,y,T,R){return this.i.add(String(h),y,!1,T,R)},Gt.prototype.K=function(h,y,T,R){return this.i.add(String(h),y,!0,T,R)};function ma(h,y,T,R){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let Q=!0;for(let ee=0;ee<y.length;++ee){const _e=y[ee];if(_e&&!_e.da&&_e.capture==T){const He=_e.listener,Vt=_e.ha||_e.src;_e.fa&&me(h.i,_e),Q=He.call(Vt,R)!==!1&&Q}}return Q&&!R.defaultPrevented}function pm(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=_(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function fd(h){h.g=pm(()=>{h.g=null,h.i&&(h.i=!1,fd(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Ln extends L{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:fd(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rr(h){L.call(this),this.h=h,this.g={}}b(Rr,L);var ac=[];function rc(h){Fe(h.g,function(y,T){this.g.hasOwnProperty(T)&&Hn(y)},h),h.g={}}Rr.prototype.N=function(){Rr.Z.N.call(this),rc(this)},Rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pa=d.JSON.stringify,gm=d.JSON.parse,md=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function pd(){}function gd(){}var Ms={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function pn(){D.call(this,"d")}b(pn,D);function ys(){D.call(this,"c")}b(ys,D);var Pt={},_d=null;function zo(){return _d=_d||new Gt}Pt.Ia="serverreachability";function yd(h){D.call(this,Pt.Ia,h)}b(yd,D);function ni(h){const y=zo();rn(y,new yd(y))}Pt.STAT_EVENT="statevent";function Nr(h,y){D.call(this,Pt.STAT_EVENT,h),this.stat=y}b(Nr,D);function Qt(h){const y=zo();rn(y,new Nr(y,h))}Pt.Ja="timingevent";function si(h,y){D.call(this,Pt.Ja,h),this.size=y}b(si,D);function ii(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function zs(){this.g=!0}zs.prototype.ua=function(){this.g=!1};function _m(h,y,T,R,Q,ee){h.info(function(){if(h.g)if(ee){var _e="",He=ee.split("&");for(let ct=0;ct<He.length;ct++){var Vt=He[ct].split("=");if(Vt.length>1){const Rt=Vt[0];Vt=Vt[1];const Ts=Rt.split("_");_e=Ts.length>=2&&Ts[1]=="type"?_e+(Rt+"="+Vt+"&"):_e+(Rt+"=redacted&")}}}else _e=null;else _e=ee;return"XMLHTTP REQ ("+R+") [attempt "+Q+"]: "+y+`
`+T+`
`+_e})}function vd(h,y,T,R,Q,ee,_e){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+Q+"]: "+y+`
`+T+`
`+ee+" "+_e})}function ai(h,y,T,R){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+ym(h,T)+(R?" "+R:"")})}function Cr(h,y){h.info(function(){return"TIMEOUT: "+y})}zs.prototype.info=function(){};function ym(h,y){if(!h.g)return y;if(!y)return null;try{const ee=JSON.parse(y);if(ee){for(h=0;h<ee.length;h++)if(Array.isArray(ee[h])){var T=ee[h];if(!(T.length<2)){var R=T[1];if(Array.isArray(R)&&!(R.length<1)){var Q=R[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let _e=1;_e<R.length;_e++)R[_e]=""}}}}return pa(ee)}catch{return y}}var kr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},oc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},lc;function jr(){}b(jr,pd),jr.prototype.g=function(){return new XMLHttpRequest},lc=new jr;function Li(h){return encodeURIComponent(String(h))}function bd(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function Ls(h,y,T,R){this.j=h,this.i=y,this.l=T,this.S=R||1,this.V=new Rr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ps}function Ps(){this.i=null,this.g="",this.h=!1}var Kt={},un={};function ri(h,y,T){h.M=1,h.A=Dr(Wt(y)),h.u=T,h.R=!0,Lo(h,null)}function Lo(h,y){h.F=Date.now(),oi(h),h.B=Wt(h.A);var T=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),Bo(T.i,"t",R),h.C=0,T=h.j.L,h.h=new Ps,h.g=Md(h.j,T?y:null,!h.u),h.P>0&&(h.O=new Ln(_(h.Y,h,h.g),h.P)),y=h.V,T=h.g,R=h.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(ac[0]=Q.toString()),Q=ac);for(let ee=0;ee<Q.length;ee++){const _e=fe(T,Q[ee],R||y.handleEvent,!1,y.h||y);if(!_e)break;y.g[_e.key]=_e}y=h.J?O(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),ni(),_m(h.i,h.v,h.B,h.l,h.S,h.u)}Ls.prototype.ba=function(h){h=h.target;const y=this.O;y&&Bs(h)==3?y.j():this.Y(h)},Ls.prototype.Y=function(h){try{if(h==this.g)e:{const He=Bs(this.g),Vt=this.g.ya(),ct=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||gn(this.g)))){this.K||He!=4||Vt==7||(Vt==8||ct<=0?ni(3):ni(2)),li(this);var y=this.g.ca();this.X=y;var T=vm(this);if(this.o=y==200,vd(this.i,this.v,this.B,this.l,this.S,He,y),this.o){if(this.U&&!this.L){t:{if(this.g){var R,Q=this.g;if((R=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(R)){var ee=R;break t}}ee=null}if(h=ee)ai(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ci(this,h);else{this.o=!1,this.m=3,Qt(12),es(this),vs(this);break e}}if(this.R){h=!0;let Rt;for(;!this.K&&this.C<T.length;)if(Rt=Td(this,T),Rt==un){He==4&&(this.m=4,Qt(14),h=!1),ai(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==Kt){this.m=4,Qt(15),ai(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else ai(this.i,this.l,Rt,null),ci(this,Rt);if(Ed(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||T.length!=0||this.h.h||(this.m=1,Qt(16),h=!1),this.o=this.o&&h,!h)ai(this.i,this.l,T,"[Invalid Chunked Response]"),es(this),vs(this);else if(T.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Sc(_e),_e.P=!0,Qt(11))}}else ai(this.i,this.l,T,null),ci(this,T);He==4&&es(this),this.o&&!this.K&&(He==4?kd(this.j,this):(this.o=!1,oi(this)))}else Vi(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Qt(12)):(this.m=0,Qt(13)),es(this),vs(this)}}}catch{}};function vm(h){if(!Ed(h))return h.g.la();const y=gn(h.g);if(y==="")return"";let T="";const R=y.length,Q=Bs(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return es(h),vs(h),"";h.h.i=new d.TextDecoder}for(let ee=0;ee<R;ee++)h.h.h=!0,T+=h.h.i.decode(y[ee],{stream:!(Q&&ee==R-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function Ed(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Td(h,y){var T=h.C,R=y.indexOf(`
`,T);return R==-1?un:(T=Number(y.substring(T,R)),isNaN(T)?Kt:(R+=1,R+T>y.length?un:(y=y.slice(R,R+T),h.C=R+T,y)))}Ls.prototype.cancel=function(){this.K=!0,es(this)};function oi(h){h.T=Date.now()+h.H,Po(h,h.H)}function Po(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=ii(_(h.aa,h),y)}function li(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Ls.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Cr(this.i,this.B),this.M!=2&&(ni(),Qt(17)),es(this),this.m=2,vs(this)):Po(this,this.T-h)};function vs(h){h.j.I==0||h.K||kd(h.j,h)}function es(h){li(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,rc(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function ci(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||di(T.h,h))){if(!h.L&&di(T.h,h)&&T.I==3){try{var R=T.Ba.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var Q=R;if(Q[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Go(T),Sa(T);else break e;Ur(T),Qt(18)}}else T.xa=Q[1],0<T.xa-T.K&&Q[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=ii(_(T.Va,T),6e3));ui(T.h)<=1&&T.ta&&(T.ta=void 0)}else _i(T,11)}else if((h.L||T.g==h)&&Go(T),!A(y))for(Q=T.Ba.g.parse(y),y=0;y<Q.length;y++){let ct=Q[y];const Rt=ct[0];if(!(Rt<=T.K))if(T.K=Rt,ct=ct[1],T.I==2)if(ct[0]=="c"){T.M=ct[1],T.ba=ct[2];const Ts=ct[3];Ts!=null&&(T.ka=Ts,T.j.info("VER="+T.ka));const yi=ct[4];yi!=null&&(T.za=yi,T.j.info("SVER="+T.za));const qs=ct[5];qs!=null&&typeof qs=="number"&&qs>0&&(R=1.5*qs,T.O=R,T.j.info("backChannelRequestTimeoutMs_="+R)),R=T;const Hs=h.g;if(Hs){const Br=Hs.g?Hs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Br){var ee=R.h;ee.g||Br.indexOf("spdy")==-1&&Br.indexOf("quic")==-1&&Br.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(dc(ee,ee.h),ee.h=null))}if(R.G){const Qo=Hs.g?Hs.g.getResponseHeader("X-HTTP-Session-Id"):null;Qo&&(R.wa=Qo,ft(R.J,R.G,Qo))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),R=T;var _e=h;if(R.na=Od(R,R.L?R.ba:null,R.W),_e.L){hc(R.h,_e);var He=_e,Vt=R.O;Vt&&(He.H=Vt),He.D&&(li(He),oi(He)),R.g=_e}else Nd(R);T.i.length>0&&gi(T)}else ct[0]!="stop"&&ct[0]!="close"||_i(T,7);else T.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?_i(T,7):Ec(T):ct[0]!="noop"&&T.l&&T.l.qa(ct),T.A=0)}}ni(4)}catch{}}var Yt=class{constructor(h,y){this.g=h,this.map=y}};function cc(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function uc(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ui(h){return h.h?1:h.g?h.g.size:0}function di(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function dc(h,y){h.g?h.g.add(y):h.h=y}function hc(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}cc.prototype.cancel=function(){if(this.i=fc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function fc(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return N(h.i)}var Sd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vo(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const R=h[T].indexOf("=");let Q,ee=null;R>=0?(Q=h[T].substring(0,R),ee=h[T].substring(R+1)):Q=h[T],y(Q,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function ts(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof ts?(this.l=h.l,dn(this,h.j),this.o=h.o,this.g=h.g,ga(this,h.u),this.h=h.h,mc(this,Id(h.i)),this.m=h.m):h&&(y=String(h).match(Sd))?(this.l=!1,dn(this,y[1]||"",!0),this.o=hi(y[2]||""),this.g=hi(y[3]||"",!0),ga(this,y[4]),this.h=hi(y[5]||"",!0),mc(this,y[6]||"",!0),this.m=hi(y[7]||"")):(this.l=!1,this.i=new ya(null,this.l))}ts.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Or(y,Uo,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Or(y,Uo,!0),"@"),h.push(Li(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Or(T,T.charAt(0)=="/"?pc:Ad,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Or(T,xd)),h.join("")},ts.prototype.resolve=function(h){const y=Wt(this);let T=!!h.j;T?dn(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var R=h.h;if(T)ga(y,h.u);else if(T=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var Q=y.h.lastIndexOf("/");Q!=-1&&(R=y.h.slice(0,Q+1)+R)}if(Q=R,Q==".."||Q==".")R="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){R=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ee=[];for(let _e=0;_e<Q.length;){const He=Q[_e++];He=="."?R&&_e==Q.length&&ee.push(""):He==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),R&&_e==Q.length&&ee.push("")):(ee.push(He),R=!0)}R=ee.join("/")}else R=Q}return T?y.h=R:T=h.i.toString()!=="",T?mc(y,Id(h.i)):T=!!h.m,T&&(y.m=h.m),y};function Wt(h){return new ts(h)}function dn(h,y,T){h.j=T?hi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function ga(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function mc(h,y,T){y instanceof ya?(h.i=y,qo(h.i,h.l)):(T||(y=Or(y,_a)),h.i=new ya(y,h.l))}function ft(h,y,T){h.i.set(y,T)}function Dr(h){return ft(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function hi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Or(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,$n),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function $n(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Uo=/[#\/\?@]/g,Ad=/[#\?:]/g,pc=/[#\?]/g,_a=/[#\?@]/g,xd=/#/g;function ya(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Fn(h){h.g||(h.g=new Map,h.h=0,h.i&&Vo(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}s=ya.prototype,s.add=function(h,y){Fn(this),this.i=null,h=va(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function wd(h,y){Fn(h),y=va(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function gc(h,y){return Fn(h),y=va(h,y),h.g.has(y)}s.forEach=function(h,y){Fn(this),this.g.forEach(function(T,R){T.forEach(function(Q){h.call(y,Q,R,this)},this)},this)};function _c(h,y){Fn(h);let T=[];if(typeof y=="string")gc(h,y)&&(T=T.concat(h.g.get(va(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}s.set=function(h,y){return Fn(this),this.i=null,h=va(this,h),gc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=_c(this,h),h.length>0?String(h[0]):y):y};function Bo(h,y,T){wd(h,y),T.length>0&&(h.i=null,h.g.set(va(h,y),N(T)),h.h+=T.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let R=0;R<y.length;R++){var T=y[R];const Q=Li(T);T=_c(this,T);for(let ee=0;ee<T.length;ee++){let _e=Q;T[ee]!==""&&(_e+="="+Li(T[ee])),h.push(_e)}}return this.i=h.join("&")};function Id(h){const y=new ya;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function va(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function qo(h,y){y&&!h.j&&(Fn(h),h.i=null,h.g.forEach(function(T,R){const Q=R.toLowerCase();R!=Q&&(wd(this,R),Bo(this,Q,T))},h)),h.j=y}function Vs(h,y){const T=new zs;if(d.Image){const R=new Image;R.onload=v(bs,T,"TestLoadImage: loaded",!0,y,R),R.onerror=v(bs,T,"TestLoadImage: error",!1,y,R),R.onabort=v(bs,T,"TestLoadImage: abort",!1,y,R),R.ontimeout=v(bs,T,"TestLoadImage: timeout",!1,y,R),d.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else y(!1)}function yc(h,y){const T=new zs,R=new AbortController,Q=setTimeout(()=>{R.abort(),bs(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:R.signal}).then(ee=>{clearTimeout(Q),ee.ok?bs(T,"TestPingServer: ok",!0,y):bs(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(Q),bs(T,"TestPingServer: error",!1,y)})}function bs(h,y,T,R,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),R(T)}catch{}}function ba(){this.g=new md}function fi(h){this.i=h.Sb||null,this.h=h.ab||!1}b(fi,pd),fi.prototype.g=function(){return new Mr(this.i,this.h)};function Mr(h,y){Gt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(Mr,Gt),s=Mr.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Us(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Us(this)),this.g&&(this.readyState=3,Us(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ho(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ho(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ea(this):Us(this),this.readyState==3&&Ho(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Ea(this))},s.Na=function(h){this.g&&(this.response=h,Ea(this))},s.ga=function(){this.g&&Ea(this)};function Ea(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Us(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Us(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Mr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Es(h){let y="";return Fe(h,function(T,R){y+=R,y+=":",y+=T,y+=`\r
`}),y}function zr(h,y,T){e:{for(R in T){var R=!1;break e}R=!0}R||(T=Es(T),typeof h=="string"?T!=null&&Li(T):ft(h,y,T))}function gt(h){Gt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(gt,Gt);var mi=/^https?$/i,vc=["POST","PUT"];s=gt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,T,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():lc.g(),this.g.onreadystatechange=S(_(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ee){Lr(this,ee);return}if(h=T||"",T=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var Q in R)T.set(Q,R[Q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ee of R.keys())T.set(ee,R.get(ee));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(T.keys()).find(ee=>ee.toLowerCase()=="content-type"),Q=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(vc,y,void 0)>=0)||R||Q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,_e]of T)this.g.setRequestHeader(ee,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ee){Lr(this,ee)}};function Lr(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,bc(h),Pi(h)}function bc(h){h.A||(h.A=!0,rn(h,"complete"),rn(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,rn(this,"complete"),rn(this,"abort"),Pi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pi(this,!0)),gt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Pr(this):this.Xa())},s.Xa=function(){Pr(this)};function Pr(h){if(h.h&&typeof l<"u"){if(h.v&&Bs(h)==4)setTimeout(h.Ca.bind(h),0);else if(rn(h,"readystatechange"),Bs(h)==4){h.h=!1;try{const ee=h.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var R;if(R=ee===0){let _e=String(h.D).match(Sd)[1]||null;!_e&&d.self&&d.self.location&&(_e=d.self.location.protocol.slice(0,-1)),R=!mi.test(_e?_e.toLowerCase():"")}T=R}if(T)rn(h,"complete"),rn(h,"success");else{h.o=6;try{var Q=Bs(h)>2?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.ca()+"]",bc(h)}}finally{Pi(h)}}}}function Pi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||rn(h,"ready");try{T.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Bs(h){return h.g?h.g.readyState:0}s.ca=function(){try{return Bs(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),gm(y)}};function gn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Vi(h){const y={};h=(h.g&&Bs(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(A(h[R]))continue;var T=bd(h[R]);const Q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ee=y[Q]||[];y[Q]=ee,ee.push(T)}ue(y,function(R){return R.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function Ta(h){this.za=0,this.i=[],this.j=new zs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pi("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pi("baseRetryDelayMs",5e3,h),this.Za=pi("retryDelaySeedMs",1e4,h),this.Ta=pi("forwardChannelMaxRetries",2,h),this.va=pi("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new cc(h&&h.concurrentRequestLimit),this.Ba=new ba,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ta.prototype,s.ka=8,s.I=1,s.connect=function(h,y,T,R){Qt(0),this.W=h,this.H=y||{},T&&R!==void 0&&(this.H.OSID=T,this.H.OAID=R),this.F=this.X,this.J=Od(this,null,this.W),gi(this)};function Ec(h){if($o(h),h.I==3){var y=h.V++,T=Wt(h.J);if(ft(T,"SID",h.M),ft(T,"RID",y),ft(T,"TYPE","terminate"),Vr(h,T),y=new Ls(h,h.j,y),y.M=2,y.A=Dr(Wt(T)),T=!1,d.navigator&&d.navigator.sendBeacon)try{T=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&d.Image&&(new Image().src=y.A,T=!0),T||(y.g=Md(y.j,null),y.g.ea(y.A)),y.F=Date.now(),oi(y)}Dd(h)}function Sa(h){h.g&&(Sc(h),h.g.cancel(),h.g=null)}function $o(h){Sa(h),h.v&&(d.clearTimeout(h.v),h.v=null),Go(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function gi(h){if(!uc(h.h)&&!h.m){h.m=!0;var y=h.Ea;de||I(),X||(de(),X=!0),k.add(y,h),h.D=0}}function Fo(h,y){return ui(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=ii(_(h.Ea,h,y),jd(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Q=new Ls(this,this.j,h);let ee=this.o;if(this.U&&(ee?(ee=O(ee),F(ee,this.U)):ee=this.U),this.u!==null||this.R||(Q.J=ee,ee=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var R=this.i[T];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=Rd(this,Q,y),T=Wt(this.J),ft(T,"RID",h),ft(T,"CVER",22),this.G&&ft(T,"X-HTTP-Session-Id",this.G),Vr(this,T),ee&&(this.R?y="headers="+Li(Es(ee))+"&"+y:this.u&&zr(T,this.u,ee)),dc(this.h,Q),this.Ra&&ft(T,"TYPE","init"),this.S?(ft(T,"$req",y),ft(T,"SID","null"),Q.U=!0,ri(Q,T,null)):ri(Q,T,y),this.I=2}}else this.I==3&&(h?Tc(this,h):this.i.length==0||uc(this.h)||Tc(this))};function Tc(h,y){var T;y?T=y.l:T=h.V++;const R=Wt(h.J);ft(R,"SID",h.M),ft(R,"RID",T),ft(R,"AID",h.K),Vr(h,R),h.u&&h.o&&zr(R,h.u,h.o),T=new Ls(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Rd(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),dc(h.h,T),ri(T,R,y)}function Vr(h,y){h.H&&Fe(h.H,function(T,R){ft(y,R,T)}),h.l&&Fe({},function(T,R){ft(y,R,T)})}function Rd(h,y,T){T=Math.min(h.i.length,T);const R=h.l?_(h.l.Ka,h.l,h):null;e:{var Q=h.i;let He=-1;for(;;){const Vt=["count="+T];He==-1?T>0?(He=Q[0].g,Vt.push("ofs="+He)):He=0:Vt.push("ofs="+He);let ct=!0;for(let Rt=0;Rt<T;Rt++){var ee=Q[Rt].g;const Ts=Q[Rt].map;if(ee-=He,ee<0)He=Math.max(0,Q[Rt].g-100),ct=!1;else try{ee="req"+ee+"_"||"";try{var _e=Ts instanceof Map?Ts:Object.entries(Ts);for(const[yi,qs]of _e){let Hs=qs;m(qs)&&(Hs=pa(qs)),Vt.push(ee+yi+"="+encodeURIComponent(Hs))}}catch(yi){throw Vt.push(ee+"type="+encodeURIComponent("_badmap")),yi}}catch{R&&R(Ts)}}if(ct){_e=Vt.join("&");break e}}_e=void 0}return h=h.i.splice(0,T),y.G=h,_e}function Nd(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;de||I(),X||(de(),X=!0),k.add(y,h),h.A=0}}function Ur(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=ii(_(h.Da,h),jd(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Cd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=ii(_(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Qt(10),Sa(this),Cd(this))};function Sc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Cd(h){h.g=new Ls(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Wt(h.na);ft(y,"RID","rpc"),ft(y,"SID",h.M),ft(y,"AID",h.K),ft(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&ft(y,"TO",h.ia),ft(y,"TYPE","xmlhttp"),Vr(h,y),h.u&&h.o&&zr(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=Dr(Wt(y)),T.u=null,T.R=!0,Lo(T,h)}s.Va=function(){this.C!=null&&(this.C=null,Sa(this),Ur(this),Qt(19))};function Go(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function kd(h,y){var T=null;if(h.g==y){Go(h),Sc(h),h.g=null;var R=2}else if(di(h.h,y))T=y.G,hc(h.h,y),R=1;else return;if(h.I!=0){if(y.o)if(R==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var Q=h.D;R=zo(),rn(R,new si(R,T)),gi(h)}else Nd(h);else if(Q=y.m,Q==3||Q==0&&y.X>0||!(R==1&&Fo(h,y)||R==2&&Ur(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),Q){case 1:_i(h,5);break;case 4:_i(h,10);break;case 3:_i(h,6);break;default:_i(h,2)}}}function jd(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function _i(h,y){if(h.j.info("Error code "+y),y==2){var T=_(h.bb,h),R=h.Ua;const Q=!R;R=new ts(R||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||dn(R,"https"),Dr(R),Q?Vs(R.toString(),T):yc(R.toString(),T)}else Qt(2);h.I=0,h.l&&h.l.pa(y),Dd(h),$o(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function Dd(h){if(h.I=0,h.ja=[],h.l){const y=fc(h.h);(y.length!=0||h.i.length!=0)&&(M(h.ja,y),M(h.ja,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.oa()}}function Od(h,y,T){var R=T instanceof ts?Wt(T):new ts(T);if(R.g!="")y&&(R.g=y+"."+R.g),ga(R,R.u);else{var Q=d.location;R=Q.protocol,y=y?y+"."+Q.hostname:Q.hostname,Q=+Q.port;const ee=new ts(null);R&&dn(ee,R),y&&(ee.g=y),Q&&ga(ee,Q),T&&(ee.h=T),R=ee}return T=h.G,y=h.wa,T&&y&&ft(R,T,y),ft(R,"VER",h.ka),Vr(h,R),R}function Md(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new gt(new fi({ab:T})):new gt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function zd(){}s=zd.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Aa(){}Aa.prototype.g=function(h,y){return new Pn(h,y)};function Pn(h,y){Gt.call(this),this.g=new Ta(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!A(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!A(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ui(this)}b(Pn,Gt),Pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){Ec(this.g)},Pn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=pa(h),h=T);y.i.push(new Yt(y.Ya++,h)),y.I==3&&gi(y)},Pn.prototype.N=function(){this.g.l=null,delete this.j,Ec(this.g),delete this.g,Pn.Z.N.call(this)};function Ld(h){pn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}b(Ld,pn);function Pd(){ys.call(this),this.status=1}b(Pd,ys);function Ui(h){this.g=h}b(Ui,zd),Ui.prototype.ra=function(){rn(this.g,"a")},Ui.prototype.qa=function(h){rn(this.g,new Ld(h))},Ui.prototype.pa=function(h){rn(this.g,new Pd)},Ui.prototype.oa=function(){rn(this.g,"b")},Aa.prototype.createWebChannel=Aa.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,zS=function(){return new Aa},MS=function(){return zo()},OS=Pt,Jg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},kr.NO_ERROR=0,kr.TIMEOUT=8,kr.HTTP_ERROR=6,af=kr,oc.COMPLETE="complete",DS=oc,gd.EventType=Ms,Ms.OPEN="a",Ms.CLOSE="b",Ms.ERROR="c",Ms.MESSAGE="d",Gt.prototype.listen=Gt.prototype.J,pu=gd,gt.prototype.listenOnce=gt.prototype.K,gt.prototype.getLastError=gt.prototype.Ha,gt.prototype.getLastErrorCode=gt.prototype.ya,gt.prototype.getStatus=gt.prototype.ca,gt.prototype.getResponseJson=gt.prototype.La,gt.prototype.getResponseText=gt.prototype.la,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Fa,jS=gt}).apply(typeof $h<"u"?$h:typeof self<"u"?self:typeof window<"u"?window:{});let Dn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");let Gl="12.9.0";function Tj(s){Gl=s}const _o=new D_("@firebase/firestore");function xl(){return _o.logLevel}function xe(s,...e){if(_o.logLevel<=Je.DEBUG){const t=e.map($_);_o.debug(`Firestore (${Gl}): ${s}`,...t)}}function da(s,...e){if(_o.logLevel<=Je.ERROR){const t=e.map($_);_o.error(`Firestore (${Gl}): ${s}`,...t)}}function yo(s,...e){if(_o.logLevel<=Je.WARN){const t=e.map($_);_o.warn(`Firestore (${Gl}): ${s}`,...t)}}function $_(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function Ve(s,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,LS(s,a,t)}function LS(s,e,t){let a=`FIRESTORE (${Gl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw da(a),new Error(a)}function ht(s,e,t,a){let o="Unexpected state";typeof t=="string"?o=t:a=t,s||LS(e,o,a)}function qe(s,e){return s}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends zi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class oa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class PS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Dn.UNAUTHENTICATED)))}shutdown(){}}class Aj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class xj{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ht(this.o===void 0,42304);let a=this.i;const o=g=>this.i!==a?(a=this.i,t(g)):Promise.resolve();let l=new oa;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new oa,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new oa)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ht(typeof a.accessToken=="string",31837,{l:a}),new PS(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new Dn(e)}}class wj{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Ij{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new wj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ds(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ht(this.o===void 0,3512);const a=l=>{l.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,xe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>a(l)))};const o=l=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new nE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ht(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new nE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Nj(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<s;a++)t[a]=Math.floor(256*Math.random());return t}class F_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=Nj(40);for(let l=0;l<o.length;++l)a.length<20&&o[l]<t&&(a+=e.charAt(o[l]%62))}return a}}function et(s,e){return s<e?-1:s>e?1:0}function e_(s,e){const t=Math.min(s.length,e.length);for(let a=0;a<t;a++){const o=s.charAt(a),l=e.charAt(a);if(o!==l)return Ng(o)===Ng(l)?et(o,l):Ng(o)?1:-1}return et(s.length,e.length)}const Cj=55296,kj=57343;function Ng(s){const e=s.charCodeAt(0);return e>=Cj&&e<=kj}function Pl(s,e,t){return s.length===e.length&&s.every(((a,o)=>t(a,e[o])))}const sE="__name__";class wi{constructor(e,t,a){t===void 0?t=0:t>e.length&&Ve(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Ve(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return wi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wi?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let o=0;o<a;o++){const l=wi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return et(e.length,t.length)}static compareSegments(e,t){const a=wi.isNumericId(e),o=wi.isNumericId(t);return a&&!o?-1:!a&&o?1:a&&o?wi.extractNumericId(e).compare(wi.extractNumericId(t)):e_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rr.fromString(e.substring(4,e.length-2))}}class Tt extends wi{construct(e,t,a){return new Tt(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Ee(ae.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((o=>o.length>0)))}return new Tt(t)}static emptyPath(){return new Tt([])}}const jj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class An extends wi{construct(e,t,a){return new An(e,t,a)}static isValidIdentifier(e){return jj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),An.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sE}static keyField(){return new An([sE])}static fromServerFormat(e){const t=[];let a="",o=0;const l=()=>{if(a.length===0)throw new Ee(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new Ee(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ee(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(a+=m,o++):(l(),o++)}if(l(),d)throw new Ee(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new An(t)}static emptyPath(){return new An([])}}class De{constructor(e){this.path=e}static fromPath(e){return new De(Tt.fromString(e))}static fromName(e){return new De(Tt.fromString(e).popFirst(5))}static empty(){return new De(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new Tt(e.slice()))}}function VS(s,e,t){if(!t)throw new Ee(ae.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Dj(s,e,t,a){if(e===!0&&a===!0)throw new Ee(ae.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function iE(s){if(!De.isDocumentKey(s))throw new Ee(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function aE(s){if(De.isDocumentKey(s))throw new Ee(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function US(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function $f(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ve(12329,{type:typeof s})}function Js(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ee(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$f(s);throw new Ee(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function Oj(s,e){if(e<=0)throw new Ee(ae.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function an(s,e){const t={typeString:s};return e&&(t.value=e),t}function Ju(s,e){if(!US(s))throw new Ee(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const o=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){t=`JSON missing required field: '${a}'`;break}const d=s[a];if(o&&typeof d!==o){t=`JSON field '${a}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${a}' field to equal '${l.value}'`;break}}if(t)throw new Ee(ae.INVALID_ARGUMENT,t);return!0}const rE=-62135596800,oE=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*oE);return new dt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rE)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oE}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ju(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:an("string",dt._jsonSchemaVersion),seconds:an("number"),nanoseconds:an("number")};class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new dt(0,0))}static max(){return new Ue(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ku=-1;function Mj(s,e){const t=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=Ue.fromTimestamp(a===1e9?new dt(t+1,0):new dt(t,a));return new cr(o,De.empty(),e)}function zj(s){return new cr(s.readTime,s.key,ku)}class cr{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new cr(Ue.min(),De.empty(),ku)}static max(){return new cr(Ue.max(),De.empty(),ku)}}function Lj(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=De.comparator(s.documentKey,e.documentKey),t!==0?t:et(s.largestBatchId,e.largestBatchId))}const Pj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ql(s){if(s.code!==ae.FAILED_PRECONDITION||s.message!==Pj)throw s;xe("LocalStore","Unexpectedly lost primary lease")}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le(((a,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):le.reject(t)}static resolve(e){return new le(((t,a)=>{t(e)}))}static reject(e){return new le(((t,a)=>{a(e)}))}static waitFor(e){return new le(((t,a)=>{let o=0,l=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++l,d&&l===o&&t()}),(g=>a(g)))})),d=!0,l===o&&t()}))}static or(e){let t=le.resolve(!1);for(const a of e)t=t.next((o=>o?le.resolve(o):a()));return t}static forEach(e,t){const a=[];return e.forEach(((o,l)=>{a.push(t.call(this,o,l))})),this.waitFor(a)}static mapArray(e,t){return new le(((a,o)=>{const l=e.length,d=new Array(l);let m=0;for(let g=0;g<l;g++){const _=g;t(e[_]).next((v=>{d[_]=v,++m,m===l&&a(d)}),(v=>o(v)))}}))}static doWhile(e,t){return new le(((a,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):a()};l()}))}}function Uj(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Kl(s){return s.name==="IndexedDbTransactionError"}class Ff{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ff.ce=-1;const G_=-1;function Gf(s){return s==null}function Sf(s){return s===0&&1/s==-1/0}function Bj(s){return typeof s=="number"&&Number.isInteger(s)&&!Sf(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const BS="";function qj(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=lE(e)),e=Hj(s.get(t),e);return lE(e)}function Hj(s,e){let t=e;const a=s.length;for(let o=0;o<a;o++){const l=s.charAt(o);switch(l){case"\0":t+="";break;case BS:t+="";break;default:t+=l}}return t}function lE(s){return s+BS+""}function cE(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Er(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function qS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class jt{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new jt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return t+a.left.size;o<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fh(this.root,e,this.comparator,!0)}}class Fh{constructor(e,t,a,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,t,a,o,l){this.key=e,this.value=t,this.color=a??Sn.RED,this.left=o??Sn.EMPTY,this.right=l??Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,o,l){return new Sn(e??this.key,t??this.value,a??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let o=this;const l=a(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,a),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Sn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,t,a,o,l){return this}insert(e,t,a){return new Sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cn{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uE(this.data.getIterator())}getIteratorFrom(e){return new uE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=a.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new cn(this.comparator);return t.data=e,t}}class uE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class hs{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new hs([])}unionWith(e){let t=new cn(An.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new hs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pl(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}class HS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new HS("Invalid base64 string: "+l):l}})(e);return new wn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new wn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const $j=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ur(s){if(ht(!!s,39018),typeof s=="string"){let e=0;const t=$j.exec(s);if(ht(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Ht(s.seconds),nanos:Ht(s.nanos)}}function Ht(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function dr(s){return typeof s=="string"?wn.fromBase64String(s):wn.fromUint8Array(s)}const $S="server_timestamp",FS="__type__",GS="__previous_value__",QS="__local_write_time__";function Q_(s){return(s?.mapValue?.fields||{})[FS]?.stringValue===$S}function Qf(s){const e=s.mapValue.fields[GS];return Q_(e)?Qf(e):e}function ju(s){const e=ur(s.mapValue.fields[QS].timestampValue);return new dt(e.seconds,e.nanos)}class Fj{constructor(e,t,a,o,l,d,m,g,_,v,b){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_,this.isUsingEmulator=v,this.apiKey=b}}const Af="(default)";class Du{constructor(e,t){this.projectId=e,this.database=t||Af}static empty(){return new Du("","")}get isDefaultDatabase(){return this.database===Af}isEqual(e){return e instanceof Du&&e.projectId===this.projectId&&e.database===this.database}}function Gj(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ee(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Du(s.options.projectId,e)}const KS="__type__",Qj="__max__",Gh={mapValue:{}},YS="__vector__",xf="value";function hr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Q_(s)?4:Yj(s)?9007199254740991:Kj(s)?10:11:Ve(28295,{value:s})}function Mi(s,e){if(s===e)return!0;const t=hr(s);if(t!==hr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ju(s).isEqual(ju(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=ur(o.timestampValue),m=ur(l.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,l){return dr(o.bytesValue).isEqual(dr(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,l){return Ht(o.geoPointValue.latitude)===Ht(l.geoPointValue.latitude)&&Ht(o.geoPointValue.longitude)===Ht(l.geoPointValue.longitude)})(s,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Ht(o.integerValue)===Ht(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=Ht(o.doubleValue),m=Ht(l.doubleValue);return d===m?Sf(d)===Sf(m):isNaN(d)&&isNaN(m)}return!1})(s,e);case 9:return Pl(s.arrayValue.values||[],e.arrayValue.values||[],Mi);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},m=l.mapValue.fields||{};if(cE(d)!==cE(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!Mi(d[g],m[g])))return!1;return!0})(s,e);default:return Ve(52216,{left:s})}}function Ou(s,e){return(s.values||[]).find((t=>Mi(t,e)))!==void 0}function Vl(s,e){if(s===e)return 0;const t=hr(s),a=hr(e);if(t!==a)return et(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return et(s.booleanValue,e.booleanValue);case 2:return(function(l,d){const m=Ht(l.integerValue||l.doubleValue),g=Ht(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return dE(s.timestampValue,e.timestampValue);case 4:return dE(ju(s),ju(e));case 5:return e_(s.stringValue,e.stringValue);case 6:return(function(l,d){const m=dr(l),g=dr(d);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(l,d){const m=l.split("/"),g=d.split("/");for(let _=0;_<m.length&&_<g.length;_++){const v=et(m[_],g[_]);if(v!==0)return v}return et(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,d){const m=et(Ht(l.latitude),Ht(d.latitude));return m!==0?m:et(Ht(l.longitude),Ht(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return hE(s.arrayValue,e.arrayValue);case 10:return(function(l,d){const m=l.fields||{},g=d.fields||{},_=m[xf]?.arrayValue,v=g[xf]?.arrayValue,b=et(_?.values?.length||0,v?.values?.length||0);return b!==0?b:hE(_,v)})(s.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Gh.mapValue&&d===Gh.mapValue)return 0;if(l===Gh.mapValue)return 1;if(d===Gh.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),_=d.fields||{},v=Object.keys(_);g.sort(),v.sort();for(let b=0;b<g.length&&b<v.length;++b){const S=e_(g[b],v[b]);if(S!==0)return S;const N=Vl(m[g[b]],_[v[b]]);if(N!==0)return N}return et(g.length,v.length)})(s.mapValue,e.mapValue);default:throw Ve(23264,{he:t})}}function dE(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return et(s,e);const t=ur(s),a=ur(e),o=et(t.seconds,a.seconds);return o!==0?o:et(t.nanos,a.nanos)}function hE(s,e){const t=s.values||[],a=e.values||[];for(let o=0;o<t.length&&o<a.length;++o){const l=Vl(t[o],a[o]);if(l)return l}return et(t.length,a.length)}function Ul(s){return t_(s)}function t_(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const a=ur(t);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return dr(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return De.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let a="[",o=!0;for(const l of t.values||[])o?o=!1:a+=",",a+=t_(l);return a+"]"})(s.arrayValue):"mapValue"in s?(function(t){const a=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of a)l?l=!1:o+=",",o+=`${d}:${t_(t.fields[d])}`;return o+"}"})(s.mapValue):Ve(61005,{value:s})}function rf(s){switch(hr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qf(s);return e?16+rf(e):16;case 5:return 2*s.stringValue.length;case 6:return dr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,l)=>o+rf(l)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return Er(a.fields,((l,d)=>{o+=l.length+rf(d)})),o})(s.mapValue);default:throw Ve(13486,{value:s})}}function fE(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function n_(s){return!!s&&"integerValue"in s}function K_(s){return!!s&&"arrayValue"in s}function mE(s){return!!s&&"nullValue"in s}function pE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function of(s){return!!s&&"mapValue"in s}function Kj(s){return(s?.mapValue?.fields||{})[KS]?.stringValue===YS}function Eu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Er(s.mapValue.fields,((t,a)=>e.mapValue.fields[t]=Eu(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Eu(s.arrayValue.values[t]);return e}return{...s}}function Yj(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Qj}class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!of(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eu(t)}setAll(e){let t=An.emptyPath(),a={},o=[];e.forEach(((d,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,a,o),a={},o=[],t=m.popLast()}d?a[m.lastSegment()]=Eu(d):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,a,o)}delete(e){const t=this.field(e.popLast());of(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=t.mapValue.fields[e.get(a)];of(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,a){Er(t,((o,l)=>e[o]=l));for(const o of a)delete e[o]}clone(){return new Jn(Eu(this.value))}}function WS(s){const e=[];return Er(s.fields,((t,a)=>{const o=new An([t]);if(of(a)){const l=WS(a.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new hs(e)}class On{constructor(e,t,a,o,l,d,m){this.key=e,this.documentType=t,this.version=a,this.readTime=o,this.createTime=l,this.data=d,this.documentState=m}static newInvalidDocument(e){return new On(e,0,Ue.min(),Ue.min(),Ue.min(),Jn.empty(),0)}static newFoundDocument(e,t,a,o){return new On(e,1,t,Ue.min(),a,o,0)}static newNoDocument(e,t){return new On(e,2,t,Ue.min(),Ue.min(),Jn.empty(),0)}static newUnknownDocument(e,t){return new On(e,3,t,Ue.min(),Ue.min(),Jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof On&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new On(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wf{constructor(e,t){this.position=e,this.inclusive=t}}function gE(s,e,t){let a=0;for(let o=0;o<s.position.length;o++){const l=e[o],d=s.position[o];if(l.field.isKeyField()?a=De.comparator(De.fromName(d.referenceValue),t.key):a=Vl(d,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function _E(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Mi(s.position[t],e.position[t]))return!1;return!0}class Mu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Wj(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class XS{}class sn extends XS{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new Zj(e,t,a):t==="array-contains"?new tD(e,a):t==="in"?new nD(e,a):t==="not-in"?new sD(e,a):t==="array-contains-any"?new iD(e,a):new sn(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new Jj(e,a):new eD(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vl(t,this.value)):t!==null&&hr(this.value)===hr(t)&&this.matchesComparison(Vl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ei extends XS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ei(e,t)}matches(e){return ZS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ZS(s){return s.op==="and"}function JS(s){return Xj(s)&&ZS(s)}function Xj(s){for(const e of s.filters)if(e instanceof ei)return!1;return!0}function s_(s){if(s instanceof sn)return s.field.canonicalString()+s.op.toString()+Ul(s.value);if(JS(s))return s.filters.map((e=>s_(e))).join(",");{const e=s.filters.map((t=>s_(t))).join(",");return`${s.op}(${e})`}}function eA(s,e){return s instanceof sn?(function(a,o){return o instanceof sn&&a.op===o.op&&a.field.isEqual(o.field)&&Mi(a.value,o.value)})(s,e):s instanceof ei?(function(a,o){return o instanceof ei&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((l,d,m)=>l&&eA(d,o.filters[m])),!0):!1})(s,e):void Ve(19439)}function tA(s){return s instanceof sn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ul(t.value)}`})(s):s instanceof ei?(function(t){return t.op.toString()+" {"+t.getFilters().map(tA).join(" ,")+"}"})(s):"Filter"}class Zj extends sn{constructor(e,t,a){super(e,t,a),this.key=De.fromName(a.referenceValue)}matches(e){const t=De.comparator(e.key,this.key);return this.matchesComparison(t)}}class Jj extends sn{constructor(e,t){super(e,"in",t),this.keys=nA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class eD extends sn{constructor(e,t){super(e,"not-in",t),this.keys=nA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function nA(s,e){return(e.arrayValue?.values||[]).map((t=>De.fromName(t.referenceValue)))}class tD extends sn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return K_(t)&&Ou(t.arrayValue,this.value)}}class nD extends sn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ou(this.value.arrayValue,t)}}class sD extends sn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ou(this.value.arrayValue,t)}}class iD extends sn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!K_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>Ou(this.value.arrayValue,a)))}}class aD{constructor(e,t=null,a=[],o=[],l=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=o,this.limit=l,this.startAt=d,this.endAt=m,this.Te=null}}function yE(s,e=null,t=[],a=[],o=null,l=null,d=null){return new aD(s,e,t,a,o,l,d)}function Y_(s){const e=qe(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>s_(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(l){return l.field.canonicalString()+l.dir})(a))).join(","),Gf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>Ul(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>Ul(a))).join(",")),e.Te=t}return e.Te}function W_(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!Wj(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!eA(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!_E(s.startAt,e.startAt)&&_E(s.endAt,e.endAt)}function i_(s){return De.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Yl{constructor(e,t=null,a=[],o=[],l=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=o,this.limit=l,this.limitType=d,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function rD(s,e,t,a,o,l,d,m){return new Yl(s,e,t,a,o,l,d,m)}function X_(s){return new Yl(s)}function vE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function oD(s){return De.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function sA(s){return s.collectionGroup!==null}function Tu(s){const e=qe(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new cn(An.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Mu(l,a))})),t.has(An.keyField().canonicalString())||e.Ie.push(new Mu(An.keyField(),a))}return e.Ie}function ki(s){const e=qe(s);return e.Ee||(e.Ee=lD(e,Tu(s))),e.Ee}function lD(s,e){if(s.limitType==="F")return yE(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Mu(o.field,l)}));const t=s.endAt?new wf(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new wf(s.startAt.position,s.startAt.inclusive):null;return yE(s.path,s.collectionGroup,e,s.filters,s.limit,t,a)}}function a_(s,e){const t=s.filters.concat([e]);return new Yl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function cD(s,e){const t=s.explicitOrderBy.concat([e]);return new Yl(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function If(s,e,t){return new Yl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Kf(s,e){return W_(ki(s),ki(e))&&s.limitType===e.limitType}function iA(s){return`${Y_(ki(s))}|lt:${s.limitType}`}function wl(s){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((o=>tA(o))).join(", ")}]`),Gf(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((o=>Ul(o))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((o=>Ul(o))).join(",")),`Target(${a})`})(ki(s))}; limitType=${s.limitType})`}function Yf(s,e){return e.isFoundDocument()&&(function(a,o){const l=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):De.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)})(s,e)&&(function(a,o){for(const l of Tu(a))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const l of a.filters)if(!l.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(d,m,g){const _=gE(d,m,g);return d.inclusive?_<=0:_<0})(a.startAt,Tu(a),o)||a.endAt&&!(function(d,m,g){const _=gE(d,m,g);return d.inclusive?_>=0:_>0})(a.endAt,Tu(a),o))})(s,e)}function uD(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function aA(s){return(e,t)=>{let a=!1;for(const o of Tu(s)){const l=dD(o,e,t);if(l!==0)return l;a=a||o.field.isKeyField()}return 0}}function dD(s,e,t){const a=s.field.isKeyField()?De.comparator(e.key,t.key):(function(l,d,m){const g=d.data.field(l),_=m.data.field(l);return g!==null&&_!==null?Vl(g,_):Ve(42886)})(s.field,e,t);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Ve(19790,{direction:s.dir})}}class Ro{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[o,l]of a)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[t]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Er(this.inner,((t,a)=>{for(const[o,l]of a)e(o,l)}))}isEmpty(){return qS(this.inner)}size(){return this.innerSize}}const hD=new jt(De.comparator);function ha(){return hD}const rA=new jt(De.comparator);function gu(...s){let e=rA;for(const t of s)e=e.insert(t.key,t);return e}function oA(s){let e=rA;return s.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function ro(){return Su()}function lA(){return Su()}function Su(){return new Ro((s=>s.toString()),((s,e)=>s.isEqual(e)))}const fD=new jt(De.comparator),mD=new cn(De.comparator);function tt(...s){let e=mD;for(const t of s)e=e.add(t);return e}const pD=new cn(et);function gD(){return pD}function Z_(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sf(e)?"-0":e}}function cA(s){return{integerValue:""+s}}function _D(s,e){return Bj(e)?cA(e):Z_(s,e)}class Wf{constructor(){this._=void 0}}function yD(s,e,t){return s instanceof zu?(function(o,l){const d={fields:{[FS]:{stringValue:$S},[QS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Q_(l)&&(l=Qf(l)),l&&(d.fields[GS]=l),{mapValue:d}})(t,e):s instanceof Lu?dA(s,e):s instanceof Pu?hA(s,e):(function(o,l){const d=uA(o,l),m=bE(d)+bE(o.Ae);return n_(d)&&n_(o.Ae)?cA(m):Z_(o.serializer,m)})(s,e)}function vD(s,e,t){return s instanceof Lu?dA(s,e):s instanceof Pu?hA(s,e):t}function uA(s,e){return s instanceof Rf?(function(a){return n_(a)||(function(l){return!!l&&"doubleValue"in l})(a)})(e)?e:{integerValue:0}:null}class zu extends Wf{}class Lu extends Wf{constructor(e){super(),this.elements=e}}function dA(s,e){const t=fA(e);for(const a of s.elements)t.some((o=>Mi(o,a)))||t.push(a);return{arrayValue:{values:t}}}class Pu extends Wf{constructor(e){super(),this.elements=e}}function hA(s,e){let t=fA(e);for(const a of s.elements)t=t.filter((o=>!Mi(o,a)));return{arrayValue:{values:t}}}class Rf extends Wf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bE(s){return Ht(s.integerValue||s.doubleValue)}function fA(s){return K_(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class bD{constructor(e,t){this.field=e,this.transform=t}}function ED(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof Lu&&o instanceof Lu||a instanceof Pu&&o instanceof Pu?Pl(a.elements,o.elements,Mi):a instanceof Rf&&o instanceof Rf?Mi(a.Ae,o.Ae):a instanceof zu&&o instanceof zu})(s.transform,e.transform)}class TD{constructor(e,t){this.version=e,this.transformResults=t}}class Ds{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ds}static exists(e){return new Ds(void 0,e)}static updateTime(e){return new Ds(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lf(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Xf{}function mA(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new J_(s.key,Ds.none()):new ed(s.key,s.data,Ds.none());{const t=s.data,a=Jn.empty();let o=new cn(An.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?a.delete(l):a.set(l,d),o=o.add(l)}return new Tr(s.key,a,new hs(o.toArray()),Ds.none())}}function SD(s,e,t){s instanceof ed?(function(o,l,d){const m=o.value.clone(),g=TE(o.fieldTransforms,l,d.transformResults);m.setAll(g),l.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(s,e,t):s instanceof Tr?(function(o,l,d){if(!lf(o.precondition,l))return void l.convertToUnknownDocument(d.version);const m=TE(o.fieldTransforms,l,d.transformResults),g=l.data;g.setAll(pA(o)),g.setAll(m),l.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,t):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Au(s,e,t,a){return s instanceof ed?(function(l,d,m,g){if(!lf(l.precondition,d))return m;const _=l.value.clone(),v=SE(l.fieldTransforms,g,d);return _.setAll(v),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null})(s,e,t,a):s instanceof Tr?(function(l,d,m,g){if(!lf(l.precondition,d))return m;const _=SE(l.fieldTransforms,g,d),v=d.data;return v.setAll(pA(l)),v.setAll(_),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(s,e,t,a):(function(l,d,m){return lf(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(s,e,t)}function AD(s,e){let t=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),l=uA(a.transform,o||null);l!=null&&(t===null&&(t=Jn.empty()),t.set(a.field,l))}return t||null}function EE(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Pl(a,o,((l,d)=>ED(l,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class ed extends Xf{constructor(e,t,a,o=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Tr extends Xf{constructor(e,t,a,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function pA(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=s.data.field(t);e.set(t,a)}})),e}function TE(s,e,t){const a=new Map;ht(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let o=0;o<t.length;o++){const l=s[o],d=l.transform,m=e.data.field(l.field);a.set(l.field,vD(d,m,t[o]))}return a}function SE(s,e,t){const a=new Map;for(const o of s){const l=o.transform,d=t.data.field(o.field);a.set(o.field,yD(l,d,e))}return a}class J_ extends Xf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xD extends Xf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wD{constructor(e,t,a,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&SD(l,e,a[o])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Au(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Au(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=lA();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let m=this.applyToLocalView(d,l.mutatedFields);m=t.has(o.key)?null:m;const g=mA(d,m);g!==null&&a.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Ue.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),tt())}isEqual(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,((t,a)=>EE(t,a)))&&Pl(this.baseMutations,e.baseMutations,((t,a)=>EE(t,a)))}}class ey{constructor(e,t,a,o){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=o}static from(e,t,a){ht(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return fD})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,a[d].version);return new ey(e,t,a,o)}}class ID{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class RD{constructor(e,t){this.count=e,this.unchangedNames=t}}var nn,st;function ND(s){switch(s){case ae.OK:return Ve(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Ve(15467,{code:s})}}function gA(s){if(s===void 0)return da("GRPC error has no .code"),ae.UNKNOWN;switch(s){case nn.OK:return ae.OK;case nn.CANCELLED:return ae.CANCELLED;case nn.UNKNOWN:return ae.UNKNOWN;case nn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case nn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case nn.INTERNAL:return ae.INTERNAL;case nn.UNAVAILABLE:return ae.UNAVAILABLE;case nn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case nn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case nn.NOT_FOUND:return ae.NOT_FOUND;case nn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case nn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case nn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case nn.ABORTED:return ae.ABORTED;case nn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case nn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case nn.DATA_LOSS:return ae.DATA_LOSS;default:return Ve(39323,{code:s})}}(st=nn||(nn={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";function CD(){return new TextEncoder}const kD=new rr([4294967295,4294967295],0);function AE(s){const e=CD().encode(s),t=new kS;return t.update(e),new Uint8Array(t.digest())}function xE(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new rr([t,a],0),new rr([o,l],0)]}class ty{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new _u(`Invalid padding: ${t}`);if(a<0)throw new _u(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new _u(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new _u(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=rr.fromNumber(this.ge)}ye(e,t,a){let o=e.add(t.multiply(rr.fromNumber(a)));return o.compare(kD)===1&&(o=new rr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=AE(e),[a,o]=xE(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(a,o,l);if(!this.we(d))return!1}return!0}static create(e,t,a){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new ty(l,o,t);return a.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const t=AE(e),[a,o]=xE(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(a,o,l);this.be(d)}}be(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class _u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zf{constructor(e,t,a,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const o=new Map;return o.set(e,td.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Zf(Ue.min(),o,new jt(et),ha(),tt())}}class td{constructor(e,t,a,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new td(a,t,tt(),tt(),tt())}}class cf{constructor(e,t,a,o){this.Se=e,this.removedTargetIds=t,this.key=a,this.De=o}}class _A{constructor(e,t){this.targetId=e,this.Ce=t}}class yA{constructor(e,t,a=wn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=o}}class wE{constructor(){this.ve=0,this.Fe=IE(),this.Me=wn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tt(),t=tt(),a=tt();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:a=a.add(o);break;default:Ve(38017,{changeType:l})}})),new td(this.Me,this.xe,e,t,a)}Ke(){this.Oe=!1,this.Fe=IE()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class jD{constructor(e){this.Ge=e,this.ze=new Map,this.je=ha(),this.He=Qh(),this.Je=Qh(),this.Ze=new jt(et)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,a=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(i_(l))if(a===0){const d=new De(l.path);this.et(t,d,On.newNoDocument(d,Ue.min()))}else ht(a===1,20013,{expectedCount:a});else{const d=this._t(t);if(d!==a){const m=this.ut(e),g=m?this.ct(m,e,d):1;if(g!==0){this.it(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,_)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:l=0}=t;let d,m;try{d=dr(a).toUint8Array()}catch(g){if(g instanceof HS)return yo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new ty(d,o,l)}catch(g){return yo(g instanceof _u?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let o=0;return a.forEach((l=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,d)=>{const m=this.ot(d);if(m){if(l.current&&i_(m.target)){const g=new De(m.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,On.newNoDocument(g,e))}l.Be&&(t.set(d,l.ke()),l.Ke())}}));let a=tt();this.Je.forEach(((l,d)=>{let m=!0;d.forEachWhile((g=>{const _=this.ot(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(a=a.add(l))})),this.je.forEach(((l,d)=>d.setReadTime(e)));const o=new Zf(e,t,this.Ze,this.je,a);return this.je=ha(),this.He=Qh(),this.Je=Qh(),this.Ze=new jt(et),o}Ye(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,a),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new wE,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new cn(et),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new cn(et),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||xe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Qh(){return new jt(De.comparator)}function IE(){return new jt(De.comparator)}const DD={asc:"ASCENDING",desc:"DESCENDING"},OD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MD={and:"AND",or:"OR"};class zD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function r_(s,e){return s.useProto3Json||Gf(e)?e:{value:e}}function Nf(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vA(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function LD(s,e){return Nf(s,e.toTimestamp())}function ji(s){return ht(!!s,49232),Ue.fromTimestamp((function(t){const a=ur(t);return new dt(a.seconds,a.nanos)})(s))}function ny(s,e){return o_(s,e).canonicalString()}function o_(s,e){const t=(function(o){return new Tt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function bA(s){const e=Tt.fromString(s);return ht(xA(e),10190,{key:e.toString()}),e}function l_(s,e){return ny(s.databaseId,e.path)}function Cg(s,e){const t=bA(e);if(t.get(1)!==s.databaseId.projectId)throw new Ee(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Ee(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new De(TA(t))}function EA(s,e){return ny(s.databaseId,e)}function PD(s){const e=bA(s);return e.length===4?Tt.emptyPath():TA(e)}function c_(s){return new Tt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function TA(s){return ht(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function RE(s,e,t){return{name:l_(s,e),fields:t.value.mapValue.fields}}function VD(s,e){let t;if("targetChange"in e){e.targetChange;const a=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ve(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(_,v){return _.useProto3Json?(ht(v===void 0||typeof v=="string",58123),wn.fromBase64String(v||"")):(ht(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),wn.fromUint8Array(v||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(_){const v=_.code===void 0?ae.UNKNOWN:gA(_.code);return new Ee(v,_.message||"")})(d);t=new yA(a,o,l,m||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=Cg(s,a.document.name),l=ji(a.document.updateTime),d=a.document.createTime?ji(a.document.createTime):Ue.min(),m=new Jn({mapValue:{fields:a.document.fields}}),g=On.newFoundDocument(o,l,d,m),_=a.targetIds||[],v=a.removedTargetIds||[];t=new cf(_,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=Cg(s,a.document),l=a.readTime?ji(a.readTime):Ue.min(),d=On.newNoDocument(o,l),m=a.removedTargetIds||[];t=new cf([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=Cg(s,a.document),l=a.removedTargetIds||[];t=new cf([],l,o,null)}else{if(!("filter"in e))return Ve(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:l}=a,d=new RD(o,l),m=a.targetId;t=new _A(m,d)}}return t}function UD(s,e){let t;if(e instanceof ed)t={update:RE(s,e.key,e.value)};else if(e instanceof J_)t={delete:l_(s,e.key)};else if(e instanceof Tr)t={update:RE(s,e.key,e.data),updateMask:YD(e.fieldMask)};else{if(!(e instanceof xD))return Ve(16599,{dt:e.type});t={verify:l_(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(l,d){const m=d.transform;if(m instanceof zu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Lu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Pu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Rf)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw Ve(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:LD(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ve(27497)})(s,e.precondition)),t}function BD(s,e){return s&&s.length>0?(ht(e!==void 0,14353),s.map((t=>(function(o,l){let d=o.updateTime?ji(o.updateTime):ji(l);return d.isEqual(Ue.min())&&(d=ji(l)),new TD(d,o.transformResults||[])})(t,e)))):[]}function qD(s,e){return{documents:[EA(s,e.path)]}}function HD(s,e){const t={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=EA(s,o);const l=(function(_){if(_.length!==0)return AA(ei.create(_,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(_){if(_.length!==0)return _.map((v=>(function(S){return{field:Il(S.field),direction:GD(S.dir)}})(v)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=r_(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:t,parent:o}}function $D(s){let e=PD(s.parent);const t=s.structuredQuery,a=t.from?t.from.length:0;let o=null;if(a>0){ht(a===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(b){const S=SA(b);return S instanceof ei&&JS(S)?S.getFilters():[S]})(t.where));let d=[];t.orderBy&&(d=(function(b){return b.map((S=>(function(M){return new Mu(Rl(M.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(S)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let S;return S=typeof b=="object"?b.value:b,Gf(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(b){const S=!!b.before,N=b.values||[];return new wf(N,S)})(t.startAt));let _=null;return t.endAt&&(_=(function(b){const S=!b.before,N=b.values||[];return new wf(N,S)})(t.endAt)),rD(e,o,d,l,m,"F",g,_)}function FD(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function SA(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=Rl(t.unaryFilter.field);return sn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=Rl(t.unaryFilter.field);return sn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Rl(t.unaryFilter.field);return sn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Rl(t.unaryFilter.field);return sn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(s):s.fieldFilter!==void 0?(function(t){return sn.create(Rl(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ei.create(t.compositeFilter.filters.map((a=>SA(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(t.compositeFilter.op))})(s):Ve(30097,{filter:s})}function GD(s){return DD[s]}function QD(s){return OD[s]}function KD(s){return MD[s]}function Il(s){return{fieldPath:s.canonicalString()}}function Rl(s){return An.fromServerFormat(s.fieldPath)}function AA(s){return s instanceof sn?(function(t){if(t.op==="=="){if(pE(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NAN"}};if(mE(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(pE(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NOT_NAN"}};if(mE(t.value))return{unaryFilter:{field:Il(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Il(t.field),op:QD(t.op),value:t.value}}})(s):s instanceof ei?(function(t){const a=t.getFilters().map((o=>AA(o)));return a.length===1?a[0]:{compositeFilter:{op:KD(t.op),filters:a}}})(s):Ve(54877,{filter:s})}function YD(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function xA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function wA(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class nr{constructor(e,t,a,o,l=Ue.min(),d=Ue.min(),m=wn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class WD{constructor(e){this.yt=e}}function XD(s){const e=$D({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?If(e,e.limit,"L"):e}class ZD{constructor(){this.Sn=new JD}addToCollectionParentIndex(e,t){return this.Sn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(cr.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(cr.min())}updateCollectionGroup(e,t,a){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class JD{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),o=this.index[t]||new cn(Tt.comparator),l=!o.has(a);return this.index[t]=o.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),o=this.index[t];return o&&o.has(a)}getEntries(e){return(this.index[e]||new cn(Tt.comparator)).toArray()}}const NE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},IA=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(IA,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);class Bl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Bl(0)}static ar(){return new Bl(-1)}}const CE="LruGarbageCollector",e4=1048576;function kE([s,e],[t,a]){const o=et(s,t);return o===0?et(e,a):o}class t4{constructor(e){this.Pr=e,this.buffer=new cn(kE),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();kE(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class n4{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){xe(CE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Kl(t)?xe(CE,"Ignoring IndexedDB error during garbage collection: ",t):await Ql(t)}await this.Ar(3e5)}))}}class s4{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return le.resolve(Ff.ce);const a=new t4(t);return this.Vr.forEachTarget(e,(o=>a.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>a.Er(o))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.Vr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(NE)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NE):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let a,o,l,d,m,g,_;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,d=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(a=b,m=Date.now(),this.removeTargets(e,a,t)))).next((b=>(l=b,g=Date.now(),this.removeOrphanedDocuments(e,a)))).next((b=>(_=Date.now(),xl()<=Je.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-v}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(_-g)+`ms
Total Duration: ${_-v}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:b}))))}}function i4(s,e){return new s4(s,e)}class a4{constructor(){this.changes=new Ro((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,On.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?le.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class r4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class o4{constructor(e,t,a,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(a!==null&&Au(a.mutation,o,hs.empty(),dt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,tt()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=tt()){const o=ro();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,a).next((l=>{let d=gu();return l.forEach(((m,g)=>{d=d.insert(m,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const a=ro();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,tt())))}populateOverlays(e,t,a){const o=[];return a.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,m)=>{t.set(d,m)}))}))}computeViews(e,t,a,o){let l=ha();const d=Su(),m=(function(){return Su()})();return t.forEach(((g,_)=>{const v=a.get(_.key);o.has(_.key)&&(v===void 0||v.mutation instanceof Tr)?l=l.insert(_.key,_):v!==void 0?(d.set(_.key,v.mutation.getFieldMask()),Au(v.mutation,_,v.mutation.getFieldMask(),dt.now())):d.set(_.key,hs.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((_,v)=>d.set(_,v))),t.forEach(((_,v)=>m.set(_,new r4(v,d.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,t){const a=Su();let o=new jt(((d,m)=>d-m)),l=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const m of d)m.keys().forEach((g=>{const _=t.get(g);if(_===null)return;let v=a.get(g)||hs.empty();v=m.applyToLocalView(_,v),a.set(g,v);const b=(o.get(m.batchId)||tt()).add(g);o=o.insert(m.batchId,b)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,v=g.value,b=lA();v.forEach((S=>{if(!l.has(S)){const N=mA(t.get(S),a.get(S));N!==null&&b.set(S,N),l=l.add(S)}})),d.push(this.documentOverlayCache.saveOverlays(e,_,b))}return le.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,o){return oD(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,o):this.getDocumentsMatchingCollectionQuery(e,t,a,o)}getNextDocuments(e,t,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,o-l.size):le.resolve(ro());let m=ku,g=l;return d.next((_=>le.forEach(_,((v,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),l.get(v)?le.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{g=g.insert(v,S)}))))).next((()=>this.populateOverlays(e,_,l))).next((()=>this.computeViews(e,g,_,tt()))).next((v=>({batchId:m,changes:oA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new De(t)).next((a=>{let o=gu();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,o){const l=t.collectionGroup;let d=gu();return this.indexManager.getCollectionParents(e,l).next((m=>le.forEach(m,(g=>{const _=(function(b,S){return new Yl(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,_,a,o).next((v=>{v.forEach(((b,S)=>{d=d.insert(b,S)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,a,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,o)))).next((d=>{l.forEach(((g,_)=>{const v=_.getKey();d.get(v)===null&&(d=d.insert(v,On.newInvalidDocument(v)))}));let m=gu();return d.forEach(((g,_)=>{const v=l.get(g);v!==void 0&&Au(v.mutation,_,hs.empty(),dt.now()),Yf(t,_)&&(m=m.insert(g,_))})),m}))}}class l4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return le.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ji(o.createTime)}})(t)),le.resolve()}getNamedQuery(e,t){return le.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:XD(o.bundledQuery),readTime:ji(o.readTime)}})(t)),le.resolve()}}class c4{constructor(){this.overlays=new jt(De.comparator),this.Lr=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const a=ro();return le.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&a.set(o,l)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((o,l)=>{this.bt(e,t,l)})),le.resolve()}removeOverlaysForBatchId(e,t,a){const o=this.Lr.get(a);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(a)),le.resolve()}getOverlaysForCollection(e,t,a){const o=ro(),l=t.length+1,d=new De(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===l&&g.largestBatchId>a&&o.set(g.getKey(),g)}return le.resolve(o)}getOverlaysForCollectionGroup(e,t,a,o){let l=new jt(((_,v)=>_-v));const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>a){let v=l.get(_.largestBatchId);v===null&&(v=ro(),l=l.insert(_.largestBatchId,v)),v.set(_.getKey(),_)}}const m=ro(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((_,v)=>m.set(_,v))),!(m.size()>=o)););return le.resolve(m)}bt(e,t,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.Lr.get(o.largestBatchId).delete(a.key);this.Lr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new ID(t,a));let l=this.Lr.get(t);l===void 0&&(l=tt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(a.key))}}class u4{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,le.resolve()}}class sy{constructor(){this.kr=new cn(fn.Kr),this.qr=new cn(fn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const a=new fn(e,t);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Wr(new fn(e,t))}Qr(e,t){e.forEach((a=>this.removeReference(a,t)))}Gr(e){const t=new De(new Tt([])),a=new fn(t,e),o=new fn(t,e+1),l=[];return this.qr.forEachInRange([a,o],(d=>{this.Wr(d),l.push(d.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new De(new Tt([])),a=new fn(t,e),o=new fn(t,e+1);let l=tt();return this.qr.forEachInRange([a,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new fn(e,0),a=this.kr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class fn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return De.comparator(e.key,t.key)||et(e.Hr,t.Hr)}static Ur(e,t){return et(e.Hr,t.Hr)||De.comparator(e.key,t.key)}}class d4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new cn(fn.Kr)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new wD(l,t,a,o);this.mutationQueue.push(d);for(const m of o)this.Jr=this.Jr.add(new fn(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return le.resolve(d)}lookupMutationBatch(e,t){return le.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,o=this.Xr(a),l=o<0?0:o;return le.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?G_:this.Yn-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new fn(t,0),o=new fn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([a,o],(d=>{const m=this.Zr(d.Hr);l.push(m)})),le.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new cn(et);return t.forEach((o=>{const l=new fn(o,0),d=new fn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,d],(m=>{a=a.add(m.Hr)}))})),le.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,o=a.length+1;let l=a;De.isDocumentKey(l)||(l=l.child(""));const d=new fn(new De(l),0);let m=new cn(et);return this.Jr.forEachWhile((g=>{const _=g.key.path;return!!a.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.Hr)),!0)}),d),le.resolve(this.Yr(m))}Yr(e){const t=[];return e.forEach((a=>{const o=this.Zr(a);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ht(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return le.forEach(t.mutations,(o=>{const l=new fn(o.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,t){const a=new fn(t,0),o=this.Jr.firstAfterOrEqual(a);return le.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class h4{constructor(e){this.ti=e,this.docs=(function(){return new jt(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,o=this.docs.get(a),l=o?o.size:0,d=this.ti(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return le.resolve(a?a.document.mutableCopy():On.newInvalidDocument(t))}getEntries(e,t){let a=ha();return t.forEach((o=>{const l=this.docs.get(o);a=a.insert(o,l?l.document.mutableCopy():On.newInvalidDocument(o))})),le.resolve(a)}getDocumentsMatchingQuery(e,t,a,o){let l=ha();const d=t.path,m=new De(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:v}}=g.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||Lj(zj(v),a)<=0||(o.has(v.key)||Yf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return le.resolve(l)}getAllFromCollectionGroup(e,t,a,o){Ve(9500)}ni(e,t){return le.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new f4(this)}getSize(e){return le.resolve(this.size)}}class f4 extends a4{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(a)})),le.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class m4{constructor(e){this.persistence=e,this.ri=new Ro((t=>Y_(t)),W_),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.ii=0,this.si=new sy,this.targetCount=0,this.oi=Bl._r()}forEachTarget(e,t){return this.ri.forEach(((a,o)=>t(o))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ii&&(this.ii=t),le.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Bl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.lr(t),le.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,a){let o=0;const l=[];return this.ri.forEach(((d,m)=>{m.sequenceNumber<=t&&a.get(m.targetId)===null&&(this.ri.delete(d),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),le.waitFor(l).next((()=>o))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const a=this.ri.get(t)||null;return le.resolve(a)}addMatchingKeys(e,t,a){return this.si.$r(t,a),le.resolve()}removeMatchingKeys(e,t,a){this.si.Qr(t,a);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),le.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),le.resolve()}getMatchingKeysForTargetId(e,t){const a=this.si.jr(t);return le.resolve(a)}containsKey(e,t){return le.resolve(this.si.containsKey(t))}}class RA{constructor(e,t){this._i={},this.overlays={},this.ai=new Ff(0),this.ui=!1,this.ui=!0,this.ci=new u4,this.referenceDelegate=e(this),this.li=new m4(this),this.indexManager=new ZD,this.remoteDocumentCache=(function(o){return new h4(o)})((a=>this.referenceDelegate.hi(a))),this.serializer=new WD(t),this.Pi=new l4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new c4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this._i[e.toKey()];return a||(a=new d4(t,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,a){xe("MemoryPersistence","Starting transaction:",e);const o=new p4(this.ai.next());return this.referenceDelegate.Ti(),a(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return le.or(Object.values(this._i).map((a=>()=>a.containsKey(e,t))))}}class p4 extends Vj{constructor(e){super(),this.currentSequenceNumber=e}}class iy{constructor(e){this.persistence=e,this.Ri=new sy,this.Ai=null}static Vi(e){return new iy(e)}get di(){if(this.Ai)return this.Ai;throw Ve(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.di.delete(a.toString()),le.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.di.add(a.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),le.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>a.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.di,(a=>{const o=De.fromPath(a);return this.mi(e,o).next((l=>{l||t.removeEntry(o,Ue.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return le.or([()=>le.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Cf{constructor(e,t){this.persistence=e,this.fi=new Ro((a=>qj(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=i4(this,t)}static Vi(e,t){return new Cf(e,t)}Ti(){}Ii(e){return le.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((o=>a+o))))}pr(e){let t=0;return this.mr(e,(a=>{t++})).next((()=>t))}mr(e,t){return le.forEach(this.fi,((a,o)=>this.wr(e,a,o).next((l=>l?le.resolve():t(o)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(d=>this.wr(e,d,t).next((m=>{m||(a++,l.removeEntry(d,Ue.min()))})))).next((()=>l.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),le.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),le.resolve()}removeReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),le.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rf(e.data.value)),t}wr(e,t,a){return le.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return le.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ay{constructor(e,t,a,o){this.targetId=e,this.fromCache=t,this.Ts=a,this.Is=o}static Es(e,t){let a=tt(),o=tt();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new ay(e,t.fromCache,a,o)}}class g4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return HR()?8:Uj(Mn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,o){const l={result:null};return this.gs(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ps(e,t,o,a).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new g4;return this.ys(e,t,d).next((m=>{if(l.result=m,this.As)return this.ws(e,t,d,m.size)}))})).next((()=>l.result))}ws(e,t,a,o){return a.documentReadCount<this.Vs?(xl()<=Je.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",wl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),le.resolve()):(xl()<=Je.DEBUG&&xe("QueryEngine","Query:",wl(t),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.ds*o?(xl()<=Je.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",wl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ki(t))):le.resolve())}gs(e,t){if(vE(t))return le.resolve(null);let a=ki(t);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=If(t,null,"F"),a=ki(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((l=>{const d=tt(...l);return this.fs.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,a).next((g=>{const _=this.bs(t,m);return this.Ss(t,_,d,g.readTime)?this.gs(e,If(t,null,"F")):this.Ds(e,_,t,g)}))))})))))}ps(e,t,a,o){return vE(t)||o.isEqual(Ue.min())?le.resolve(null):this.fs.getDocuments(e,a).next((l=>{const d=this.bs(t,l);return this.Ss(t,d,a,o)?le.resolve(null):(xl()<=Je.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),wl(t)),this.Ds(e,d,t,Mj(o,ku)).next((m=>m)))}))}bs(e,t){let a=new cn(aA(e));return t.forEach(((o,l)=>{Yf(e,l)&&(a=a.add(l))})),a}Ss(e,t,a,o){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,t,a){return xl()<=Je.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",wl(t)),this.fs.getDocumentsMatchingQuery(e,t,cr.min(),a)}Ds(e,t,a,o){return this.fs.getDocumentsMatchingQuery(e,a,o).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}const ry="LocalStore",y4=3e8;class v4{constructor(e,t,a,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new jt(et),this.Fs=new Ro((l=>Y_(l)),W_),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function b4(s,e,t,a){return new v4(s,e,t,a)}async function NA(s,e){const t=qe(s);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return t.mutationQueue.getAllMutationBatches(a).next((l=>(o=l,t.Os(e),t.mutationQueue.getAllMutationBatches(a)))).next((l=>{const d=[],m=[];let g=tt();for(const _ of o){d.push(_.batchId);for(const v of _.mutations)g=g.add(v.key)}for(const _ of l){m.push(_.batchId);for(const v of _.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(a,g).next((_=>({Ns:_,removedBatchIds:d,addedBatchIds:m})))}))}))}function E4(s,e){const t=qe(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(m,g,_,v){const b=_.batch,S=b.keys();let N=le.resolve();return S.forEach((M=>{N=N.next((()=>v.getEntry(g,M))).next((P=>{const j=_.docVersions.get(M);ht(j!==null,48541),P.version.compareTo(j)<0&&(b.applyToRemoteDocument(P,_),P.isValidDocument()&&(P.setReadTime(_.commitVersion),v.addEntry(P)))}))})),N.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(t,a,e,l).next((()=>l.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(m){let g=tt();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(a,o)))}))}function CA(s){const e=qe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function T4(s,e){const t=qe(s),a=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const m=[];e.targetChanges.forEach(((v,b)=>{const S=o.get(b);if(!S)return;m.push(t.li.removeMatchingKeys(l,v.removedDocuments,b).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,b))));let N=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?N=N.withResumeToken(wn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,a)),o=o.insert(b,N),(function(P,j,B){return P.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=y4?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(S,N,v)&&m.push(t.li.updateTargetData(l,N))}));let g=ha(),_=tt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),m.push(S4(l,d,e.documentUpdates).next((v=>{g=v.Bs,_=v.Ls}))),!a.isEqual(Ue.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((b=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,a)));m.push(v)}return le.waitFor(m).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,_))).next((()=>g))})).then((l=>(t.vs=o,l)))}function S4(s,e,t){let a=tt(),o=tt();return t.forEach((l=>a=a.add(l))),e.getEntries(s,a).next((l=>{let d=ha();return t.forEach(((m,g)=>{const _=l.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ue.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):xe(ry,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)})),{Bs:d,Ls:o}}))}function A4(s,e){const t=qe(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=G_),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function x4(s,e){const t=qe(s);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return t.li.getTargetData(a,e).next((l=>l?(o=l,le.resolve(o)):t.li.allocateTargetId(a).next((d=>(o=new nr(e,d,"TargetPurposeListen",a.currentSequenceNumber),t.li.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=t.vs.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(a.targetId,a),t.Fs.set(e,a.targetId)),a}))}async function u_(s,e,t){const a=qe(s),o=a.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,(d=>a.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Kl(d))throw d;xe(ry,`Failed to update sequence numbers for target ${e}: ${d}`)}a.vs=a.vs.remove(e),a.Fs.delete(o.target)}function jE(s,e,t){const a=qe(s);let o=Ue.min(),l=tt();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,_,v){const b=qe(g),S=b.Fs.get(v);return S!==void 0?le.resolve(b.vs.get(S)):b.li.getTargetData(_,v)})(a,d,ki(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(d,m.targetId).next((g=>{l=g}))})).next((()=>a.Cs.getDocumentsMatchingQuery(d,e,t?o:Ue.min(),t?l:tt()))).next((m=>(w4(a,uD(e),m),{documents:m,ks:l})))))}function w4(s,e,t){let a=s.Ms.get(e)||Ue.min();t.forEach(((o,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)})),s.Ms.set(e,a)}class DE{constructor(){this.activeTargetIds=gD()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class I4{constructor(){this.vo=new DE,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,a){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new DE,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class R4{Mo(e){}shutdown(){}}const OE="ConnectivityMonitor";class ME{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){xe(OE,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){xe(OE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Kh=null;function d_(){return Kh===null?Kh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Kh++,"0x"+Kh.toString(16)}const kg="RestConnection",N4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class C4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${a}/databases/${o}`,this.$o=this.databaseId.database===Af?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Wo(e,t,a,o,l){const d=d_(),m=this.Qo(e,t.toUriEncodedString());xe(kg,`Sending RPC '${e}' ${d}:`,m,a);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,l);const{host:_}=new URL(m),v=yr(_);return this.zo(e,m,g,a,v).then((b=>(xe(kg,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw yo(kg,`RPC '${e}' ${d} failed with error: `,b,"url: ",m,"request:",a),b}))}jo(e,t,a,o,l,d){return this.Wo(e,t,a,o,l)}Go(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Gl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),a&&a.headers.forEach(((o,l)=>e[l]=o))}Qo(e,t){const a=N4[e];let o=`${this.qo}/v1/${t}:${a}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class k4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Cn="WebChannelConnection",cu=(s,e,t)=>{s.listen(e,(a=>{try{t(a)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Ol extends C4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ol.c_){const e=MS();cu(e,OS.STAT_EVENT,(t=>{t.stat===Jg.PROXY?xe(Cn,"STAT_EVENT: detected buffering proxy"):t.stat===Jg.NOPROXY&&xe(Cn,"STAT_EVENT: detected no buffering proxy")})),Ol.c_=!0}}zo(e,t,a,o,l){const d=d_();return new Promise(((m,g)=>{const _=new jS;_.setWithCredentials(!0),_.listenOnce(DS.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case af.NO_ERROR:const b=_.getResponseJson();xe(Cn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),m(b);break;case af.TIMEOUT:xe(Cn,`RPC '${e}' ${d} timed out`),g(new Ee(ae.DEADLINE_EXCEEDED,"Request time out"));break;case af.HTTP_ERROR:const S=_.getStatus();if(xe(Cn,`RPC '${e}' ${d} failed with status:`,S,"response text:",_.getResponseText()),S>0){let N=_.getResponseJson();Array.isArray(N)&&(N=N[0]);const M=N?.error;if(M&&M.status&&M.message){const P=(function(B){const H=B.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(H)>=0?H:ae.UNKNOWN})(M.status);g(new Ee(P,M.message))}else g(new Ee(ae.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new Ee(ae.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:e,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{xe(Cn,`RPC '${e}' ${d} completed.`)}}));const v=JSON.stringify(o);xe(Cn,`RPC '${e}' ${d} sending request:`,o),_.send(t,"POST",v,a,15)}))}T_(e,t,a){const o=d_(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,t,a),m.encodeInitMessageHeaders=!0;const _=l.join("");xe(Cn,`Creating RPC '${e}' stream ${o}: ${_}`,m);const v=d.createWebChannel(_,m);this.I_(v);let b=!1,S=!1;const N=new k4({Ho:M=>{S?xe(Cn,`Not sending because RPC '${e}' stream ${o} is closed:`,M):(b||(xe(Cn,`Opening RPC '${e}' stream ${o} transport.`),v.open(),b=!0),xe(Cn,`RPC '${e}' stream ${o} sending:`,M),v.send(M))},Jo:()=>v.close()});return cu(v,pu.EventType.OPEN,(()=>{S||(xe(Cn,`RPC '${e}' stream ${o} transport opened.`),N.i_())})),cu(v,pu.EventType.CLOSE,(()=>{S||(S=!0,xe(Cn,`RPC '${e}' stream ${o} transport closed`),N.o_(),this.E_(v))})),cu(v,pu.EventType.ERROR,(M=>{S||(S=!0,yo(Cn,`RPC '${e}' stream ${o} transport errored. Name:`,M.name,"Message:",M.message),N.o_(new Ee(ae.UNAVAILABLE,"The operation could not be completed")))})),cu(v,pu.EventType.MESSAGE,(M=>{if(!S){const P=M.data[0];ht(!!P,16349);const j=P,B=j?.error||j[0]?.error;if(B){xe(Cn,`RPC '${e}' stream ${o} received error:`,B);const H=B.status;let z=(function(X){const k=nn[X];if(k!==void 0)return gA(k)})(H),G=B.message;H==="NOT_FOUND"&&G.includes("database")&&G.includes("does not exist")&&G.includes(this.databaseId.database)&&yo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),z===void 0&&(z=ae.INTERNAL,G="Unknown error status: "+H+" with message "+B.message),S=!0,N.o_(new Ee(z,G)),v.close()}else xe(Cn,`RPC '${e}' stream ${o} received:`,P),N.__(P)}})),Ol.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,a){super.Go(e,t,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return zS()}}function j4(s){return new Ol(s)}function jg(){return typeof document<"u"?document:null}function Jf(s){return new zD(s,!0)}Ol.c_=!1;class kA{constructor(e,t,a=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=a,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-a);o>0&&xe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const zE="PersistentStream";class jA{constructor(e,t,a,o,l,d,m,g){this.Ci=e,this.b_=a,this.S_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(da(t.toString()),da("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===t&&this.G_(a,o)}),(a=>{e((()=>{const o=new Ee(ae.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,t){const a=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return xe(zE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(xe(zE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class D4 extends jA{constructor(e,t,a,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,o,d),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=VD(this.serializer,e),a=(function(l){if(!("targetChange"in l))return Ue.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Ue.min():d.readTime?ji(d.readTime):Ue.min()})(e);return this.listener.J_(t,a)}Z_(e){const t={};t.database=c_(this.serializer),t.addTarget=(function(l,d){let m;const g=d.target;if(m=i_(g)?{documents:qD(l,g)}:{query:HD(l,g).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=vA(l,d.resumeToken);const _=r_(l,d.expectedCount);_!==null&&(m.expectedCount=_)}else if(d.snapshotVersion.compareTo(Ue.min())>0){m.readTime=Nf(l,d.snapshotVersion.toTimestamp());const _=r_(l,d.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const a=FD(this.serializer,e);a&&(t.labels=a),this.K_(t)}X_(e){const t={};t.database=c_(this.serializer),t.removeTarget=e,this.K_(t)}}class O4 extends jA{constructor(e,t,a,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,o,d),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=BD(e.writeResults,e.commitTime),a=ji(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=c_(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>UD(this.serializer,a)))};this.K_(t)}}class M4{}class z4 extends M4{constructor(e,t,a,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ee(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Wo(e,o_(t,a),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ee(ae.UNKNOWN,l.toString())}))}jo(e,t,a,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.jo(e,o_(t,a),o,d,m,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ee(ae.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function L4(s,e,t,a){return new z4(s,e,t,a)}class P4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(da(t),this.aa=!1):xe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const vo="RemoteStore";class V4{constructor(e,t,a,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((d=>{a.enqueueAndForget((async()=>{No(this)&&(xe(vo,"Restarting streams for network reachability change."),await(async function(g){const _=qe(g);_.Ea.add(4),await nd(_),_.Va.set("Unknown"),_.Ea.delete(4),await em(_)})(this))}))})),this.Va=new P4(a,o)}}async function em(s){if(No(s))for(const e of s.Ra)await e(!0)}async function nd(s){for(const e of s.Ra)await e(!1)}function DA(s,e){const t=qe(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),uy(t)?cy(t):Wl(t).O_()&&ly(t,e))}function oy(s,e){const t=qe(s),a=Wl(t);t.Ia.delete(e),a.O_()&&OA(t,e),t.Ia.size===0&&(a.O_()?a.L_():No(t)&&t.Va.set("Unknown"))}function ly(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wl(s).Z_(e)}function OA(s,e){s.da.$e(e),Wl(s).X_(e)}function cy(s){s.da=new jD({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Wl(s).start(),s.Va.ua()}function uy(s){return No(s)&&!Wl(s).x_()&&s.Ia.size>0}function No(s){return qe(s).Ea.size===0}function MA(s){s.da=void 0}async function U4(s){s.Va.set("Online")}async function B4(s){s.Ia.forEach(((e,t)=>{ly(s,e)}))}async function q4(s,e){MA(s),uy(s)?(s.Va.ha(e),cy(s)):s.Va.set("Unknown")}async function H4(s,e,t){if(s.Va.set("Online"),e instanceof yA&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const m of l.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.da.removeTarget(m))})(s,e)}catch(a){xe(vo,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await kf(s,a)}else if(e instanceof cf?s.da.Xe(e):e instanceof _A?s.da.st(e):s.da.tt(e),!t.isEqual(Ue.min()))try{const a=await CA(s.localStore);t.compareTo(a)>=0&&await(function(l,d){const m=l.da.Tt(d);return m.targetChanges.forEach(((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(_);v&&l.Ia.set(_,v.withResumeToken(g.resumeToken,d))}})),m.targetMismatches.forEach(((g,_)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(wn.EMPTY_BYTE_STRING,v.snapshotVersion)),OA(l,g);const b=new nr(v.target,g,_,v.sequenceNumber);ly(l,b)})),l.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(a){xe(vo,"Failed to raise snapshot:",a),await kf(s,a)}}async function kf(s,e,t){if(!Kl(e))throw e;s.Ea.add(1),await nd(s),s.Va.set("Offline"),t||(t=()=>CA(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{xe(vo,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await em(s)}))}function zA(s,e){return e().catch((t=>kf(s,t,e)))}async function tm(s){const e=qe(s),t=fr(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:G_;for(;$4(e);)try{const o=await A4(e.localStore,a);if(o===null){e.Ta.length===0&&t.L_();break}a=o.batchId,F4(e,o)}catch(o){await kf(e,o)}LA(e)&&PA(e)}function $4(s){return No(s)&&s.Ta.length<10}function F4(s,e){s.Ta.push(e);const t=fr(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function LA(s){return No(s)&&!fr(s).x_()&&s.Ta.length>0}function PA(s){fr(s).start()}async function G4(s){fr(s).ra()}async function Q4(s){const e=fr(s);for(const t of s.Ta)e.ea(t.mutations)}async function K4(s,e,t){const a=s.Ta.shift(),o=ey.from(a,e,t);await zA(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await tm(s)}async function Y4(s,e){e&&fr(s).Y_&&await(async function(a,o){if((function(d){return ND(d)&&d!==ae.ABORTED})(o.code)){const l=a.Ta.shift();fr(a).B_(),await zA(a,(()=>a.remoteSyncer.rejectFailedWrite(l.batchId,o))),await tm(a)}})(s,e),LA(s)&&PA(s)}async function LE(s,e){const t=qe(s);t.asyncQueue.verifyOperationInProgress(),xe(vo,"RemoteStore received new credentials");const a=No(t);t.Ea.add(3),await nd(t),a&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await em(t)}async function W4(s,e){const t=qe(s);e?(t.Ea.delete(2),await em(t)):e||(t.Ea.add(2),await nd(t),t.Va.set("Unknown"))}function Wl(s){return s.ma||(s.ma=(function(t,a,o){const l=qe(t);return l.sa(),new D4(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(s.datastore,s.asyncQueue,{Zo:U4.bind(null,s),Yo:B4.bind(null,s),t_:q4.bind(null,s),J_:H4.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),uy(s)?cy(s):s.Va.set("Unknown")):(await s.ma.stop(),MA(s))}))),s.ma}function fr(s){return s.fa||(s.fa=(function(t,a,o){const l=qe(t);return l.sa(),new O4(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:G4.bind(null,s),t_:Y4.bind(null,s),ta:Q4.bind(null,s),na:K4.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await tm(s)):(await s.fa.stop(),s.Ta.length>0&&(xe(vo,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class dy{constructor(e,t,a,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=o,this.removalCallback=l,this.deferred=new oa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,o,l){const d=Date.now()+a,m=new dy(e,t,d,o,l);return m.start(a),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hy(s,e){if(da("AsyncQueue",`${e}: ${s}`),Kl(s))return new Ee(ae.UNAVAILABLE,`${e}: ${s}`);throw s}class Ml{static emptySet(e){return new Ml(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||De.comparator(t.key,a.key):(t,a)=>De.comparator(t.key,a.key),this.keyedMap=gu(),this.sortedSet=new jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=a.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new Ml;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}class PE{constructor(){this.ga=new jt(De.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ve(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class ql{constructor(e,t,a,o,l,d,m,g,_){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,a,o,l){const d=[];return t.forEach((m=>{d.push({type:0,doc:m})})),new ql(e,t,Ml.emptySet(t),d,a,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==a[o].type||!t[o].doc.isEqual(a[o].doc))return!1;return!0}}class X4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Z4{constructor(){this.queries=VE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const o=qe(t),l=o.queries;o.queries=VE(),l.forEach(((d,m)=>{for(const g of m.ba)g.onError(a)}))})(this,new Ee(ae.ABORTED,"Firestore shutting down"))}}function VE(){return new Ro((s=>iA(s)),Kf)}async function VA(s,e){const t=qe(s);let a=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.Da()&&(a=2):(l=new X4,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=hy(d,`Initialization of query '${wl(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&fy(t)}async function UA(s,e){const t=qe(s),a=e.query;let o=3;const l=t.queries.get(a);if(l){const d=l.ba.indexOf(e);d>=0&&(l.ba.splice(d,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function J4(s,e){const t=qe(s);let a=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const m of d.ba)m.Fa(o)&&(a=!0);d.wa=o}}a&&fy(t)}function e3(s,e,t){const a=qe(s),o=a.queries.get(e);if(o)for(const l of o.ba)l.onError(t);a.queries.delete(e)}function fy(s){s.Ca.forEach((e=>{e.next()}))}var h_,UE;(UE=h_||(h_={})).Ma="default",UE.Cache="cache";class BA{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new ql(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ql.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==h_.Cache}}class qA{constructor(e){this.key=e}}class HA{constructor(e){this.key=e}}class t3{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=tt(),this.mutatedKeys=tt(),this.eu=aA(e),this.tu=new Ml(this.eu)}get nu(){return this.Za}ru(e,t){const a=t?t.iu:new PE,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,b)=>{const S=o.get(v),N=Yf(this.query,b)?b:null,M=!!S&&this.mutatedKeys.has(S.key),P=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let j=!1;S&&N?S.data.isEqual(N.data)?M!==P&&(a.track({type:3,doc:N}),j=!0):this.su(S,N)||(a.track({type:2,doc:N}),j=!0,(g&&this.eu(N,g)>0||_&&this.eu(N,_)<0)&&(m=!0)):!S&&N?(a.track({type:0,doc:N}),j=!0):S&&!N&&(a.track({type:1,doc:S}),j=!0,(g||_)&&(m=!0)),j&&(N?(d=d.add(N),l=P?l.add(v):l.delete(v)):(d=d.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const v=this.query.limitType==="F"?d.last():d.first();d=d.delete(v.key),l=l.delete(v.key),a.track({type:1,doc:v})}return{tu:d,iu:a,Ss:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((v,b)=>(function(N,M){const P=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Vt:j})}};return P(N)-P(M)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(a),o=o??!1;const m=t&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,_=g!==this.Xa;return this.Xa=g,d.length!==0||_?{snapshot:new ql(this.query,e.tu,l,d,e.mutatedKeys,g===0,_,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new PE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=tt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const t=[];return e.forEach((a=>{this.Ya.has(a)||t.push(new HA(a))})),this.Ya.forEach((a=>{e.has(a)||t.push(new qA(a))})),t}cu(e){this.Za=e.ks,this.Ya=tt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ql.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const my="SyncEngine";class n3{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class s3{constructor(e){this.key=e,this.hu=!1}}class i3{constructor(e,t,a,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ro((m=>iA(m)),Kf),this.Iu=new Map,this.Eu=new Set,this.Ru=new jt(De.comparator),this.Au=new Map,this.Vu=new sy,this.du={},this.mu=new Map,this.fu=Bl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function a3(s,e,t=!0){const a=YA(s);let o;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await $A(a,e,t,!0),o}async function r3(s,e){const t=YA(s);await $A(t,e,!0,!1)}async function $A(s,e,t,a){const o=await x4(s.localStore,ki(e)),l=o.targetId,d=s.sharedClientState.addLocalQueryTarget(l,t);let m;return a&&(m=await o3(s,e,l,d==="current",o.resumeToken)),s.isPrimaryClient&&t&&DA(s.remoteStore,o),m}async function o3(s,e,t,a,o){s.pu=(b,S,N)=>(async function(P,j,B,H){let z=j.view.ru(B);z.Ss&&(z=await jE(P.localStore,j.query,!1).then((({documents:k})=>j.view.ru(k,z))));const G=H&&H.targetChanges.get(j.targetId),de=H&&H.targetMismatches.get(j.targetId)!=null,X=j.view.applyChanges(z,P.isPrimaryClient,G,de);return qE(P,j.targetId,X.au),X.snapshot})(s,b,S,N);const l=await jE(s.localStore,e,!0),d=new t3(e,l.ks),m=d.ru(l.documents),g=td.createSynthesizedTargetChangeForCurrentChange(t,a&&s.onlineState!=="Offline",o),_=d.applyChanges(m,s.isPrimaryClient,g);qE(s,t,_.au);const v=new n3(e,t,d);return s.Tu.set(e,v),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),_.snapshot}async function l3(s,e,t){const a=qe(s),o=a.Tu.get(e),l=a.Iu.get(o.targetId);if(l.length>1)return a.Iu.set(o.targetId,l.filter((d=>!Kf(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await u_(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),t&&oy(a.remoteStore,o.targetId),f_(a,o.targetId)})).catch(Ql)):(f_(a,o.targetId),await u_(a.localStore,o.targetId,!0))}async function c3(s,e){const t=qe(s),a=t.Tu.get(e),o=t.Iu.get(a.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),oy(t.remoteStore,a.targetId))}async function u3(s,e,t){const a=_3(s);try{const o=await(function(d,m){const g=qe(d),_=dt.now(),v=m.reduce(((N,M)=>N.add(M.key)),tt());let b,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let M=ha(),P=tt();return g.xs.getEntries(N,v).next((j=>{M=j,M.forEach(((B,H)=>{H.isValidDocument()||(P=P.add(B))}))})).next((()=>g.localDocuments.getOverlayedDocuments(N,M))).next((j=>{b=j;const B=[];for(const H of m){const z=AD(H,b.get(H.key).overlayedDocument);z!=null&&B.push(new Tr(H.key,z,WS(z.value.mapValue),Ds.exists(!0)))}return g.mutationQueue.addMutationBatch(N,_,B,m)})).next((j=>{S=j;const B=j.applyToLocalDocumentSet(b,P);return g.documentOverlayCache.saveOverlays(N,j.batchId,B)}))})).then((()=>({batchId:S.batchId,changes:oA(b)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(d,m,g){let _=d.du[d.currentUser.toKey()];_||(_=new jt(et)),_=_.insert(m,g),d.du[d.currentUser.toKey()]=_})(a,o.batchId,t),await sd(a,o.changes),await tm(a.remoteStore)}catch(o){const l=hy(o,"Failed to persist write");t.reject(l)}}async function FA(s,e){const t=qe(s);try{const a=await T4(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=t.Au.get(l);d&&(ht(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?ht(d.hu,14607):o.removedDocuments.size>0&&(ht(d.hu,42227),d.hu=!1))})),await sd(t,a,e)}catch(a){await Ql(a)}}function BE(s,e,t){const a=qe(s);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const o=[];a.Tu.forEach(((l,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const g=qe(d);g.onlineState=m;let _=!1;g.queries.forEach(((v,b)=>{for(const S of b.ba)S.va(m)&&(_=!0)})),_&&fy(g)})(a.eventManager,e),o.length&&a.Pu.J_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function d3(s,e,t){const a=qe(s);a.sharedClientState.updateQueryState(e,"rejected",t);const o=a.Au.get(e),l=o&&o.key;if(l){let d=new jt(De.comparator);d=d.insert(l,On.newNoDocument(l,Ue.min()));const m=tt().add(l),g=new Zf(Ue.min(),new Map,new jt(et),d,m);await FA(a,g),a.Ru=a.Ru.remove(l),a.Au.delete(e),py(a)}else await u_(a.localStore,e,!1).then((()=>f_(a,e,t))).catch(Ql)}async function h3(s,e){const t=qe(s),a=e.batch.batchId;try{const o=await E4(t.localStore,e);QA(t,a,null),GA(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await sd(t,o)}catch(o){await Ql(o)}}async function f3(s,e,t){const a=qe(s);try{const o=await(function(d,m){const g=qe(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let v;return g.mutationQueue.lookupMutationBatch(_,m).next((b=>(ht(b!==null,37113),v=b.keys(),g.mutationQueue.removeMutationBatch(_,b)))).next((()=>g.mutationQueue.performConsistencyCheck(_))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(_,v,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,v))).next((()=>g.localDocuments.getDocuments(_,v)))}))})(a.localStore,e);QA(a,e,t),GA(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await sd(a,o)}catch(o){await Ql(o)}}function GA(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function QA(s,e,t){const a=qe(s);let o=a.du[a.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),a.du[a.currentUser.toKey()]=o}}function f_(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),t&&s.Pu.yu(a,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((a=>{s.Vu.containsKey(a)||KA(s,a)}))}function KA(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(oy(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),py(s))}function qE(s,e,t){for(const a of t)a instanceof qA?(s.Vu.addReference(a.key,e),m3(s,a)):a instanceof HA?(xe(my,"Document no longer in limbo: "+a.key),s.Vu.removeReference(a.key,e),s.Vu.containsKey(a.key)||KA(s,a.key)):Ve(19791,{wu:a})}function m3(s,e){const t=e.key,a=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(a)||(xe(my,"New document in limbo: "+t),s.Eu.add(a),py(s))}function py(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new De(Tt.fromString(e)),a=s.fu.next();s.Au.set(a,new s3(t)),s.Ru=s.Ru.insert(t,a),DA(s.remoteStore,new nr(ki(X_(t.path)),a,"TargetPurposeLimboResolution",Ff.ce))}}async function sd(s,e,t){const a=qe(s),o=[],l=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((m,g)=>{d.push(a.pu(g,e,t).then((_=>{if((_||t)&&a.isPrimaryClient){const v=_?!_.fromCache:t?.targetChanges.get(g.targetId)?.current;a.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(_){o.push(_);const v=ay.Es(g.targetId,_);l.push(v)}})))})),await Promise.all(d),a.Pu.J_(o),await(async function(g,_){const v=qe(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>le.forEach(_,(S=>le.forEach(S.Ts,(N=>v.persistence.referenceDelegate.addReference(b,S.targetId,N))).next((()=>le.forEach(S.Is,(N=>v.persistence.referenceDelegate.removeReference(b,S.targetId,N)))))))))}catch(b){if(!Kl(b))throw b;xe(ry,"Failed to update sequence numbers: "+b)}for(const b of _){const S=b.targetId;if(!b.fromCache){const N=v.vs.get(S),M=N.snapshotVersion,P=N.withLastLimboFreeSnapshotVersion(M);v.vs=v.vs.insert(S,P)}}})(a.localStore,l))}async function p3(s,e){const t=qe(s);if(!t.currentUser.isEqual(e)){xe(my,"User change. New user:",e.toKey());const a=await NA(t.localStore,e);t.currentUser=e,(function(l,d){l.mu.forEach((m=>{m.forEach((g=>{g.reject(new Ee(ae.CANCELLED,d))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await sd(t,a.Ns)}}function g3(s,e){const t=qe(s),a=t.Au.get(e);if(a&&a.hu)return tt().add(a.key);{let o=tt();const l=t.Iu.get(e);if(!l)return o;for(const d of l){const m=t.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function YA(s){const e=qe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=FA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=d3.bind(null,e),e.Pu.J_=J4.bind(null,e.eventManager),e.Pu.yu=e3.bind(null,e.eventManager),e}function _3(s){const e=qe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f3.bind(null,e),e}class jf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return b4(this.persistence,new _4,e.initialUser,this.serializer)}Cu(e){return new RA(iy.Vi,this.serializer)}Du(e){return new I4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jf.provider={build:()=>new jf};class y3 extends jf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ht(this.persistence.referenceDelegate instanceof Cf,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new n4(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new RA((a=>Cf.Vi(a,t)),this.serializer)}}class m_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>BE(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=p3.bind(null,this.syncEngine),await W4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Z4})()}createDatastore(e){const t=Jf(e.databaseInfo.databaseId),a=j4(e.databaseInfo);return L4(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,o,l,d,m){return new V4(a,o,l,d,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>BE(this.syncEngine,t,0)),(function(){return ME.v()?new ME:new R4})())}createSyncEngine(e,t){return(function(o,l,d,m,g,_,v){const b=new i3(o,l,d,m,g,_);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const a=qe(t);xe(vo,"RemoteStore shutting down."),a.Ea.add(5),await nd(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}m_.provider={build:()=>new m_};class WA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):da("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const mr="FirestoreClient";class v3{constructor(e,t,a,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this._databaseInfo=o,this.user=Dn.UNAUTHENTICATED,this.clientId=F_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,(async d=>{xe(mr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(xe(mr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=hy(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Dg(s,e){s.asyncQueue.verifyOperationInProgress(),xe(mr,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let a=t.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await NA(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function HE(s,e){s.asyncQueue.verifyOperationInProgress();const t=await b3(s);xe(mr,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((a=>LE(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>LE(e.remoteStore,o))),s._onlineComponents=e}async function b3(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){xe(mr,"Using user provided OfflineComponentProvider");try{await Dg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;yo("Error using user provided cache. Falling back to memory cache: "+t),await Dg(s,new jf)}}else xe(mr,"Using default OfflineComponentProvider"),await Dg(s,new y3(void 0));return s._offlineComponents}async function XA(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(xe(mr,"Using user provided OnlineComponentProvider"),await HE(s,s._uninitializedComponentsProvider._online)):(xe(mr,"Using default OnlineComponentProvider"),await HE(s,new m_))),s._onlineComponents}function E3(s){return XA(s).then((e=>e.syncEngine))}async function ZA(s){const e=await XA(s),t=e.eventManager;return t.onListen=a3.bind(null,e.syncEngine),t.onUnlisten=l3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=r3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=c3.bind(null,e.syncEngine),t}function T3(s,e,t={}){const a=new oa;return s.asyncQueue.enqueueAndForget((async()=>(function(l,d,m,g,_){const v=new WA({next:S=>{v.Nu(),d.enqueueAndForget((()=>UA(l,b)));const N=S.docs.has(m);!N&&S.fromCache?_.reject(new Ee(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&g&&g.source==="server"?_.reject(new Ee(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),b=new BA(X_(m.path),v,{includeMetadataChanges:!0,Ka:!0});return VA(l,b)})(await ZA(s),s.asyncQueue,e,t,a))),a.promise}function S3(s,e,t={}){const a=new oa;return s.asyncQueue.enqueueAndForget((async()=>(function(l,d,m,g,_){const v=new WA({next:S=>{v.Nu(),d.enqueueAndForget((()=>UA(l,b))),S.fromCache&&g.source==="server"?_.reject(new Ee(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),b=new BA(m,v,{includeMetadataChanges:!0,Ka:!0});return VA(l,b)})(await ZA(s),s.asyncQueue,e,t,a))),a.promise}function A3(s,e){const t=new oa;return s.asyncQueue.enqueueAndForget((async()=>u3(await E3(s),e,t))),t.promise}function JA(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const x3="ComponentProvider",$E=new Map;function w3(s,e,t,a,o){return new Fj(s,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,JA(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,a)}const ex="firestore.googleapis.com",FE=!0;class GE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ex,this.ssl=FE}else this.host=e.host,this.ssl=e.ssl??FE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=IA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<e4)throw new Ee(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Dj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JA(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ee(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ee(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ee(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nm{constructor(e,t,a,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new Sj;switch(a.type){case"firstParty":return new Ij(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Ee(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=$E.get(t);a&&(xe(x3,"Removing Datastore"),$E.delete(t),a.terminate())})(this),Promise.resolve()}}function I3(s,e,t,a={}){s=Js(s,nm);const o=yr(e),l=s._getSettings(),d={...l,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;o&&(k_(`https://${m}`),j_("Firestore",!0)),l.host!==ex&&l.host!==m&&yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:m,ssl:o,emulatorOptions:a};if(!fo(g,d)&&(s._setSettings(g),a.mockUserToken)){let _,v;if(typeof a.mockUserToken=="string")_=a.mockUserToken,v=Dn.MOCK_USER;else{_=FT(a.mockUserToken,s._app?.options.projectId);const b=a.mockUserToken.sub||a.mockUserToken.user_id;if(!b)throw new Ee(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Dn(b)}s._authCredentials=new Aj(new PS(_,v))}}class Sr{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Sr(this.firestore,e,this._query)}}class $t{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Ju(t,$t._jsonSchema))return new $t(e,a||null,new De(Tt.fromString(t.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:an("string",$t._jsonSchemaVersion),referencePath:an("string")};class or extends Sr{constructor(e,t,a){super(e,t,X_(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new De(e))}withConverter(e){return new or(this.firestore,e,this._path)}}function ti(s,e,...t){if(s=kt(s),VS("collection","path",e),s instanceof nm){const a=Tt.fromString(e,...t);return aE(a),new or(s,null,a)}{if(!(s instanceof $t||s instanceof or))throw new Ee(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Tt.fromString(e,...t));return aE(a),new or(s.firestore,null,a)}}function zn(s,e,...t){if(s=kt(s),arguments.length===1&&(e=F_.newId()),VS("doc","path",e),s instanceof nm){const a=Tt.fromString(e,...t);return iE(a),new $t(s,null,new De(a))}{if(!(s instanceof $t||s instanceof or))throw new Ee(ae.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Tt.fromString(e,...t));return iE(a),new $t(s.firestore,s instanceof or?s.converter:null,new De(a))}}const QE="AsyncQueue";class KE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kA(this,"async_queue_retry"),this._c=()=>{const a=jg();a&&xe(QE,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=jg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=jg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new oa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Kl(e))throw e;xe(QE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,da("INTERNAL UNHANDLED ERROR: ",YE(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=dy.createAndSchedule(this,e,t,a,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ve(47125,{Pc:YE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function YE(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Co extends nm{constructor(e,t,a,o){super(e,t,a,o),this.type="firestore",this._queue=new KE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new KE(e),this._firestoreClient=void 0,await e}}}function R3(s,e){const t=typeof s=="object"?s:M_(),a=typeof s=="string"?s:Af,o=Uf(t,"firestore").getImmediate({identifier:a});if(!o._initialized){const l=qT("firestore");l&&I3(o,...l)}return o}function gy(s){if(s._terminated)throw new Ee(ae.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||N3(s),s._firestoreClient}function N3(s){const e=s._freezeSettings(),t=w3(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new v3(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(s._componentsProvider))}class js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new js(wn.fromBase64String(e))}catch(t){throw new Ee(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new js(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:js._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ju(e,js._jsonSchema))return js.fromBase64String(e.bytes)}}js._jsonSchemaVersion="firestore/bytes/1.0",js._jsonSchema={type:an("string",js._jsonSchemaVersion),bytes:an("string")};class _y{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sm{constructor(e){this._methodName=e}}class Di{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Di._jsonSchemaVersion}}static fromJSON(e){if(Ju(e,Di._jsonSchema))return new Di(e.latitude,e.longitude)}}Di._jsonSchemaVersion="firestore/geoPoint/1.0",Di._jsonSchema={type:an("string",Di._jsonSchemaVersion),latitude:an("number"),longitude:an("number")};class Ys{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ys._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ju(e,Ys._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ys(e.vectorValues);throw new Ee(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ys._jsonSchemaVersion="firestore/vectorValue/1.0",Ys._jsonSchema={type:an("string",Ys._jsonSchemaVersion),vectorValues:an("object")};const C3=/^__.*__$/;class k3{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,t,this.fieldTransforms):new ed(e,this.data,t,this.fieldTransforms)}}class tx{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Tr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nx(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{dataSource:s})}}class yy{constructor(e,t,a,o,l,d){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new yy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){const t=this.path?.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Df(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(nx(this.dataSource)&&C3.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class j3{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Jf(e)}createContext(e,t,a,o=!1){return new yy({dataSource:e,methodName:t,targetDoc:a,path:An.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function im(s){const e=s._freezeSettings(),t=Jf(s._databaseId);return new j3(s._databaseId,!!e.ignoreUndefinedProperties,t)}function sx(s,e,t,a,o,l={}){const d=s.createContext(l.merge||l.mergeFields?2:0,e,t,o);by("Data must be an object, but it was:",d,a);const m=ix(a,d);let g,_;if(l.merge)g=new hs(d.fieldMask),_=d.fieldTransforms;else if(l.mergeFields){const v=[];for(const b of l.mergeFields){const S=bo(e,b,t);if(!d.contains(S))throw new Ee(ae.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);ox(v,S)||v.push(S)}g=new hs(v),_=d.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,_=d.fieldTransforms;return new k3(new Jn(m),g,_)}class am extends sm{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof am}}class vy extends sm{_toFieldTransform(e){return new bD(e.path,new zu)}isEqual(e){return e instanceof vy}}function D3(s,e,t,a){const o=s.createContext(1,e,t);by("Data must be an object, but it was:",o,a);const l=[],d=Jn.empty();Er(a,((g,_)=>{const v=rx(e,g,t);_=kt(_);const b=o.childContextForFieldPath(v);if(_ instanceof am)l.push(v);else{const S=id(_,b);S!=null&&(l.push(v),d.set(v,S))}}));const m=new hs(l);return new tx(d,m,o.fieldTransforms)}function O3(s,e,t,a,o,l){const d=s.createContext(1,e,t),m=[bo(e,a,t)],g=[o];if(l.length%2!=0)throw new Ee(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)m.push(bo(e,l[S])),g.push(l[S+1]);const _=[],v=Jn.empty();for(let S=m.length-1;S>=0;--S)if(!ox(_,m[S])){const N=m[S];let M=g[S];M=kt(M);const P=d.childContextForFieldPath(N);if(M instanceof am)_.push(N);else{const j=id(M,P);j!=null&&(_.push(N),v.set(N,j))}}const b=new hs(_);return new tx(v,b,d.fieldTransforms)}function M3(s,e,t,a=!1){return id(t,s.createContext(a?4:3,e))}function id(s,e){if(ax(s=kt(s)))return by("Unsupported field value:",e,s),ix(s,e);if(s instanceof sm)return(function(a,o){if(!nx(o.dataSource))throw o.createError(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,o){const l=[];let d=0;for(const m of a){let g=id(m,o.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),d++}return{arrayValue:{values:l}}})(s,e)}return(function(a,o){if((a=kt(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return _D(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=dt.fromDate(a);return{timestampValue:Nf(o.serializer,l)}}if(a instanceof dt){const l=new dt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Nf(o.serializer,l)}}if(a instanceof Di)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof js)return{bytesValue:vA(o.serializer,a._byteString)};if(a instanceof $t){const l=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(l))throw o.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ny(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Ys)return(function(d,m){const g=d instanceof Ys?d.toArray():d;return{mapValue:{fields:{[KS]:{stringValue:YS},[xf]:{arrayValue:{values:g.map((v=>{if(typeof v!="number")throw m.createError("VectorValues must only contain numeric values.");return Z_(m.serializer,v)}))}}}}}})(a,o);if(wA(a))return a._toProto(o.serializer);throw o.createError(`Unsupported field value: ${$f(a)}`)})(s,e)}function ix(s,e){const t={};return qS(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Er(s,((a,o)=>{const l=id(o,e.childContextForField(a));l!=null&&(t[a]=l)})),{mapValue:{fields:t}}}function ax(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof dt||s instanceof Di||s instanceof js||s instanceof $t||s instanceof sm||s instanceof Ys||wA(s))}function by(s,e,t){if(!ax(t)||!US(t)){const a=$f(t);throw a==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+a)}}function bo(s,e,t){if((e=kt(e))instanceof _y)return e._internalPath;if(typeof e=="string")return rx(s,e);throw Df("Field path arguments must be of type string or ",s,!1,void 0,t)}const z3=new RegExp("[~\\*/\\[\\]]");function rx(s,e,t){if(e.search(z3)>=0)throw Df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new _y(...e.split("."))._internalPath}catch{throw Df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Df(s,e,t,a,o){const l=a&&!a.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||d)&&(g+=" (found",l&&(g+=` in field ${a}`),d&&(g+=` in document ${o}`),g+=")"),new Ee(ae.INVALID_ARGUMENT,m+s+g)}function ox(s,e){return s.some((t=>t.isEqual(e)))}class L3{convertValue(e,t="none"){switch(hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return Er(e,((o,l)=>{a[o]=this.convertValue(l,t)})),a}convertVectorValue(e){const t=e.fields?.[xf].arrayValue?.values?.map((a=>Ht(a.doubleValue)));return new Ys(t)}convertGeoPoint(e){return new Di(Ht(e.latitude),Ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Qf(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(ju(e));default:return null}}convertTimestamp(e){const t=ur(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Tt.fromString(e);ht(xA(a),9688,{name:e});const o=new Du(a.get(1),a.get(3)),l=new De(a.popFirst(5));return o.isEqual(t)||da(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class lx extends L3{constructor(e){super(),this.firestore=e}convertBytes(e){return new js(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}}function ps(){return new vy("serverTimestamp")}const WE="@firebase/firestore",XE="4.11.0";class cx{constructor(e,t,a,o,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new P3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(bo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class P3 extends cx{data(){return super.data()}}function V3(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ee(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ey{}class Ty extends Ey{}function ko(s,e,...t){let a=[];e instanceof Ey&&a.push(e),a=a.concat(t),(function(l){const d=l.filter((g=>g instanceof Sy)).length,m=l.filter((g=>g instanceof rm)).length;if(d>1||d>0&&m>0)throw new Ee(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class rm extends Ty{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new rm(e,t,a)}_apply(e){const t=this._parse(e);return dx(e._query,t),new Sr(e.firestore,e.converter,a_(e._query,t))}_parse(e){const t=im(e.firestore);return(function(l,d,m,g,_,v,b){let S;if(_.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ee(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){JE(b,v);const M=[];for(const P of b)M.push(ZE(g,l,P));S={arrayValue:{values:M}}}else S=ZE(g,l,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||JE(b,v),S=M3(m,d,b,v==="in"||v==="not-in");return sn.create(_,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function pr(s,e,t){const a=e,o=bo("where",s);return rm._create(o,a,t)}class Sy extends Ey{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sy(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:ei.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let d=o;const m=l.getFlattenedFilters();for(const g of m)dx(d,g),d=a_(d,g)})(e._query,t),new Sr(e.firestore,e.converter,a_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ay extends Ty{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ay(e,t)}_apply(e){const t=(function(o,l,d){if(o.startAt!==null)throw new Ee(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Ee(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mu(l,d)})(e._query,this._field,this._direction);return new Sr(e.firestore,e.converter,cD(e._query,t))}}function ux(s,e="asc"){const t=e,a=bo("orderBy",s);return Ay._create(a,t)}class xy extends Ty{constructor(e,t,a){super(),this.type=e,this._limit=t,this._limitType=a}static _create(e,t,a){return new xy(e,t,a)}_apply(e){return new Sr(e.firestore,e.converter,If(e._query,this._limit,this._limitType))}}function U3(s){return Oj("limit",s),xy._create("limit",s,"F")}function ZE(s,e,t){if(typeof(t=kt(t))=="string"){if(t==="")throw new Ee(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sA(e)&&t.indexOf("/")!==-1)throw new Ee(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Tt.fromString(t));if(!De.isDocumentKey(a))throw new Ee(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return fE(s,new De(a))}if(t instanceof $t)return fE(s,t._key);throw new Ee(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$f(t)}.`)}function JE(s,e){if(!Array.isArray(s)||s.length===0)throw new Ee(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dx(s,e){const t=(function(o,l){for(const d of o)for(const m of d.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ee(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function hx(s,e,t){let a;return a=s?s.toFirestore(e):e,a}class yu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class co extends cx{constructor(e,t,a,o,l,d){super(e,t,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(bo("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=co._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}co._jsonSchemaVersion="firestore/documentSnapshot/1.0",co._jsonSchema={type:an("string",co._jsonSchemaVersion),bundleSource:an("string","DocumentSnapshot"),bundleName:an("string"),bundle:an("string")};class uf extends co{data(e={}){return super.data(e)}}class zl{constructor(e,t,a,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new yu(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new uf(this._firestore,this._userDataWriter,a.key,a,new yu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const g=new uf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new yu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const g=new uf(o._firestore,o._userDataWriter,m.doc.key,m.doc,new yu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,v=-1;return m.type!==0&&(_=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),v=d.indexOf(m.doc.key)),{type:B3(m.type),doc:g,oldIndex:_,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=F_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function B3(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:s})}}zl._jsonSchemaVersion="firestore/querySnapshot/1.0",zl._jsonSchema={type:an("string",zl._jsonSchemaVersion),bundleSource:an("string","QuerySnapshot"),bundleName:an("string"),bundle:an("string")};function jo(s){s=Js(s,$t);const e=Js(s.firestore,Co),t=gy(e);return T3(t,s._key).then((a=>q3(e,s,a)))}function Do(s){s=Js(s,Sr);const e=Js(s.firestore,Co),t=gy(e),a=new lx(e);return V3(s._query),S3(t,s._query).then((o=>new zl(e,a,s,o)))}function fx(s,e,t){s=Js(s,$t);const a=Js(s.firestore,Co),o=hx(s.converter,e),l=im(a);return lm(a,[sx(l,"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,Ds.none())])}function ad(s,e,t,...a){s=Js(s,$t);const o=Js(s.firestore,Co),l=im(o);let d;return d=typeof(e=kt(e))=="string"||e instanceof _y?O3(l,"updateDoc",s._key,e,t,a):D3(l,"updateDoc",s._key,e),lm(o,[d.toMutation(s._key,Ds.exists(!0))])}function mx(s){return lm(Js(s.firestore,Co),[new J_(s._key,Ds.none())])}function om(s,e){const t=Js(s.firestore,Co),a=zn(s),o=hx(s.converter,e),l=im(s.firestore);return lm(t,[sx(l,"addDoc",a._key,o,s.converter!==null,{}).toMutation(a._key,Ds.exists(!1))]).then((()=>a))}function lm(s,e){const t=gy(s);return A3(t,e)}function q3(s,e,t){const a=t.docs.get(e._key),o=new lx(s);return new co(s,o,e._key,a,new yu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){Tj(wo),mo(new lr("firestore",((a,{instanceIdentifier:o,options:l})=>{const d=a.getProvider("app").getImmediate(),m=new Co(new xj(a.getProvider("auth-internal")),new Rj(d,a.getProvider("app-check-internal")),Gj(d,o),d);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),Ri(WE,XE,e),Ri(WE,XE,"esm2020")})();var H3="firebase",$3="12.9.0";Ri(H3,$3,"app");const px="firebasestorage.googleapis.com",gx="storageBucket",F3=120*1e3,G3=600*1e3,Q3=1e3;class Dt extends zi{constructor(e,t,a=0){super(Og(e),`Firebase Storage: ${t} (${Og(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Og(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var wt;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(wt||(wt={}));function Og(s){return"storage/"+s}function wy(){const s="An unknown error occurred, please check the error payload for server response.";return new Dt(wt.UNKNOWN,s)}function K3(s){return new Dt(wt.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function Y3(s){return new Dt(wt.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function W3(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Dt(wt.UNAUTHENTICATED,s)}function X3(){return new Dt(wt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Z3(s){return new Dt(wt.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function _x(){return new Dt(wt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yx(){return new Dt(wt.CANCELED,"User canceled the upload/download.")}function J3(s){return new Dt(wt.INVALID_URL,"Invalid URL '"+s+"'.")}function eO(s){return new Dt(wt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function tO(){return new Dt(wt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+gx+"' property when initializing the app?")}function vx(){return new Dt(wt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function nO(){return new Dt(wt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function sO(){return new Dt(wt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function iO(s){return new Dt(wt.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function p_(s){return new Dt(wt.INVALID_ARGUMENT,s)}function bx(){return new Dt(wt.APP_DELETED,"The Firebase app was deleted.")}function aO(s){return new Dt(wt.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xu(s,e){return new Dt(wt.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function uu(s){throw new Dt(wt.INTERNAL_ERROR,"Internal error: "+s)}class Bn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let a;try{a=Bn.makeFromUrl(e,t)}catch{return new Bn(e,"")}if(a.path==="")return a;throw eO(e)}static makeFromUrl(e,t){let a=null;const o="([A-Za-z0-9.\\-_]+)";function l(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function _(G){G.path_=decodeURIComponent(G.path)}const v="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",N=new RegExp(`^https?://${b}/${v}/b/${o}/o${S}`,"i"),M={bucket:1,path:3},P=t===px?"(?:storage.googleapis.com|storage.cloud.google.com)":t,j="([^?#]*)",B=new RegExp(`^https?://${P}/${o}/${j}`,"i"),z=[{regex:m,indices:g,postModify:l},{regex:N,indices:M,postModify:_},{regex:B,indices:{bucket:1,path:2},postModify:_}];for(let G=0;G<z.length;G++){const de=z[G],X=de.regex.exec(e);if(X){const k=X[de.indices.bucket];let I=X[de.indices.path];I||(I=""),a=new Bn(k,I),de.postModify(a);break}}if(a==null)throw J3(e);return a}}class rO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function oO(s,e,t){let a=1,o=null,l=null,d=!1,m=0;function g(){return m===2}let _=!1;function v(...j){_||(_=!0,e.apply(null,j))}function b(j){o=setTimeout(()=>{o=null,s(N,g())},j)}function S(){l&&clearTimeout(l)}function N(j,...B){if(_){S();return}if(j){S(),v.call(null,j,...B);return}if(g()||d){S(),v.call(null,j,...B);return}a<64&&(a*=2);let z;m===1?(m=2,z=0):z=(a+Math.random())*1e3,b(z)}let M=!1;function P(j){M||(M=!0,S(),!_&&(o!==null?(j||(m=2),clearTimeout(o),b(0)):j||(m=1)))}return b(0),l=setTimeout(()=>{d=!0,P(!0)},t),P}function lO(s){s(!1)}function cO(s){return s!==void 0}function uO(s){return typeof s=="function"}function dO(s){return typeof s=="object"&&!Array.isArray(s)}function cm(s){return typeof s=="string"||s instanceof String}function eT(s){return Iy()&&s instanceof Blob}function Iy(){return typeof Blob<"u"}function g_(s,e,t,a){if(a<e)throw p_(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>t)throw p_(`Invalid value for '${s}'. Expected ${t} or less.`)}function Oo(s,e,t){let a=e;return t==null&&(a=`https://${e}`),`${t}://${a}/v0${s}`}function Ex(s){const e=encodeURIComponent;let t="?";for(const a in s)if(s.hasOwnProperty(a)){const o=e(a)+"="+e(s[a]);t=t+o+"&"}return t=t.slice(0,-1),t}var uo;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(uo||(uo={}));function Tx(s,e){const t=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,l=e.indexOf(s)!==-1;return t||o||l}class hO{constructor(e,t,a,o,l,d,m,g,_,v,b,S=!0,N=!1){this.url_=e,this.method_=t,this.headers_=a,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=g,this.timeout_=_,this.progressCallback_=v,this.connectionFactory_=b,this.retry=S,this.isUsingEmulator=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,P)=>{this.resolve_=M,this.reject_=P,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new Yh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const d=m=>{const g=m.loaded,_=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,_)};this.progressCallback_!==null&&l.addUploadProgressListener(d),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(d),this.pendingConnection_=null;const m=l.getErrorCode()===uo.NO_ERROR,g=l.getStatus();if(!m||Tx(g,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===uo.ABORT;a(!1,new Yh(!1,null,v));return}const _=this.successCodes_.indexOf(g)!==-1;a(!0,new Yh(_,l))})},t=(a,o)=>{const l=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());cO(g)?l(g):l()}catch(g){d(g)}else if(m!==null){const g=wy();g.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,g)):d(g)}else if(o.canceled){const g=this.appDelete_?bx():yx();d(g)}else{const g=_x();d(g)}};this.canceled_?t(!1,new Yh(!1,null,!0)):this.backoffId_=oO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yh{constructor(e,t,a){this.wasSuccessCode=e,this.connection=t,this.canceled=!!a}}function fO(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function mO(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function pO(s,e){e&&(s["X-Firebase-GMPID"]=e)}function gO(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function _O(s,e,t,a,o,l,d=!0,m=!1){const g=Ex(s.urlParams),_=s.url+g,v=Object.assign({},s.headers);return pO(v,e),fO(v,t),mO(v,l),gO(v,a),new hO(_,s.method,v,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,d,m)}function yO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function vO(...s){const e=yO();if(e!==void 0){const t=new e;for(let a=0;a<s.length;a++)t.append(s[a]);return t.getBlob()}else{if(Iy())return new Blob(s);throw new Dt(wt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function bO(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}function EO(s){if(typeof atob>"u")throw iO("base-64");return atob(s)}const Ii={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Mg{constructor(e,t){this.data=e,this.contentType=t||null}}function TO(s,e){switch(s){case Ii.RAW:return new Mg(Sx(e));case Ii.BASE64:case Ii.BASE64URL:return new Mg(Ax(s,e));case Ii.DATA_URL:return new Mg(AO(e),xO(e))}throw wy()}function Sx(s){const e=[];for(let t=0;t<s.length;t++){let a=s.charCodeAt(t);if(a<=127)e.push(a);else if(a<=2047)e.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=a,d=s.charCodeAt(++t);a=65536|(l&1023)<<10|d&1023,e.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?e.push(239,191,189):e.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(e)}function SO(s){let e;try{e=decodeURIComponent(s)}catch{throw xu(Ii.DATA_URL,"Malformed data URL.")}return Sx(e)}function Ax(s,e){switch(s){case Ii.BASE64:{const o=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(o||l)throw xu(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ii.BASE64URL:{const o=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(o||l)throw xu(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=EO(e)}catch(o){throw o.message.includes("polyfill")?o:xu(s,"Invalid character found")}const a=new Uint8Array(t.length);for(let o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return a}class xx{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw xu(Ii.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=t[1]||null;a!=null&&(this.base64=wO(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=e.substring(e.indexOf(",")+1)}}function AO(s){const e=new xx(s);return e.base64?Ax(Ii.BASE64,e.rest):SO(e.rest)}function xO(s){return new xx(s).contentType}function wO(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class er{constructor(e,t){let a=0,o="";eT(e)?(this.data_=e,a=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),a=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),a=e.length),this.size_=a,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(eT(this.data_)){const a=this.data_,o=bO(a,e,t);return o===null?null:new er(o)}else{const a=new Uint8Array(this.data_.buffer,e,t-e);return new er(a,!0)}}static getBlob(...e){if(Iy()){const t=e.map(a=>a instanceof er?a.data_:a);return new er(vO.apply(null,t))}else{const t=e.map(d=>cm(d)?TO(Ii.RAW,d).data:d.data_);let a=0;t.forEach(d=>{a+=d.byteLength});const o=new Uint8Array(a);let l=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)o[l++]=d[m]}),new er(o,!0)}}uploadData(){return this.data_}}function Ry(s){let e;try{e=JSON.parse(s)}catch{return null}return dO(e)?e:null}function IO(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function RO(s,e){const t=e.split("/").filter(a=>a.length>0).join("/");return s.length===0?t:s+"/"+t}function wx(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function NO(s,e){return e}class Un{constructor(e,t,a,o){this.server=e,this.local=t||e,this.writable=!!a,this.xform=o||NO}}let Wh=null;function CO(s){return!cm(s)||s.length<2?s:wx(s)}function Ix(){if(Wh)return Wh;const s=[];s.push(new Un("bucket")),s.push(new Un("generation")),s.push(new Un("metageneration")),s.push(new Un("name","fullPath",!0));function e(l,d){return CO(d)}const t=new Un("name");t.xform=e,s.push(t);function a(l,d){return d!==void 0?Number(d):d}const o=new Un("size");return o.xform=a,s.push(o),s.push(new Un("timeCreated")),s.push(new Un("updated")),s.push(new Un("md5Hash",null,!0)),s.push(new Un("cacheControl",null,!0)),s.push(new Un("contentDisposition",null,!0)),s.push(new Un("contentEncoding",null,!0)),s.push(new Un("contentLanguage",null,!0)),s.push(new Un("contentType",null,!0)),s.push(new Un("metadata","customMetadata",!0)),Wh=s,Wh}function kO(s,e){function t(){const a=s.bucket,o=s.fullPath,l=new Bn(a,o);return e._makeStorageReference(l)}Object.defineProperty(s,"ref",{get:t})}function jO(s,e,t){const a={};a.type="file";const o=t.length;for(let l=0;l<o;l++){const d=t[l];a[d.local]=d.xform(a,e[d.server])}return kO(a,s),a}function Rx(s,e,t){const a=Ry(e);return a===null?null:jO(s,a,t)}function DO(s,e,t,a){const o=Ry(e);if(o===null||!cm(o.downloadTokens))return null;const l=o.downloadTokens;if(l.length===0)return null;const d=encodeURIComponent;return l.split(",").map(_=>{const v=s.bucket,b=s.fullPath,S="/b/"+d(v)+"/o/"+d(b),N=Oo(S,t,a),M=Ex({alt:"media",token:_});return N+M})[0]}function Nx(s,e){const t={},a=e.length;for(let o=0;o<a;o++){const l=e[o];l.writable&&(t[l.server]=s[l.local])}return JSON.stringify(t)}const tT="prefixes",nT="items";function OO(s,e,t){const a={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[tT])for(const o of t[tT]){const l=o.replace(/\/$/,""),d=s._makeStorageReference(new Bn(e,l));a.prefixes.push(d)}if(t[nT])for(const o of t[nT]){const l=s._makeStorageReference(new Bn(e,o.name));a.items.push(l)}return a}function MO(s,e,t){const a=Ry(t);return a===null?null:OO(s,e,a)}class Ar{constructor(e,t,a,o){this.url=e,this.method=t,this.handler=a,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Oi(s){if(!s)throw wy()}function Ny(s,e){function t(a,o){const l=Rx(s,o,e);return Oi(l!==null),l}return t}function zO(s,e){function t(a,o){const l=MO(s,e,o);return Oi(l!==null),l}return t}function LO(s,e){function t(a,o){const l=Rx(s,o,e);return Oi(l!==null),DO(l,o,s.host,s._protocol)}return t}function Xl(s){function e(t,a){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=X3():o=W3():t.getStatus()===402?o=Y3(s.bucket):t.getStatus()===403?o=Z3(s.path):o=a,o.status=t.getStatus(),o.serverResponse=a.serverResponse,o}return e}function Cy(s){const e=Xl(s);function t(a,o){let l=e(a,o);return a.getStatus()===404&&(l=K3(s.path)),l.serverResponse=o.serverResponse,l}return t}function PO(s,e,t){const a=e.fullServerUrl(),o=Oo(a,s.host,s._protocol),l="GET",d=s.maxOperationRetryTime,m=new Ar(o,l,Ny(s,t),d);return m.errorHandler=Cy(e),m}function VO(s,e,t,a,o){const l={};e.isRoot?l.prefix="":l.prefix=e.path+"/",t.length>0&&(l.delimiter=t),a&&(l.pageToken=a),o&&(l.maxResults=o);const d=e.bucketOnlyServerUrl(),m=Oo(d,s.host,s._protocol),g="GET",_=s.maxOperationRetryTime,v=new Ar(m,g,zO(s,e.bucket),_);return v.urlParams=l,v.errorHandler=Xl(e),v}function UO(s,e,t){const a=e.fullServerUrl(),o=Oo(a,s.host,s._protocol),l="GET",d=s.maxOperationRetryTime,m=new Ar(o,l,LO(s,t),d);return m.errorHandler=Cy(e),m}function BO(s,e){const t=e.fullServerUrl(),a=Oo(t,s.host,s._protocol),o="DELETE",l=s.maxOperationRetryTime;function d(g,_){}const m=new Ar(a,o,d,l);return m.successCodes=[200,204],m.errorHandler=Cy(e),m}function qO(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function Cx(s,e,t){const a=Object.assign({},t);return a.fullPath=s.path,a.size=e.size(),a.contentType||(a.contentType=qO(null,e)),a}function HO(s,e,t,a,o){const l=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function m(){let z="";for(let G=0;G<2;G++)z=z+Math.random().toString().slice(2);return z}const g=m();d["Content-Type"]="multipart/related; boundary="+g;const _=Cx(e,a,o),v=Nx(_,t),b="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+g+`\r
Content-Type: `+_.contentType+`\r
\r
`,S=`\r
--`+g+"--",N=er.getBlob(b,a,S);if(N===null)throw vx();const M={name:_.fullPath},P=Oo(l,s.host,s._protocol),j="POST",B=s.maxUploadRetryTime,H=new Ar(P,j,Ny(s,t),B);return H.urlParams=M,H.headers=d,H.body=N.uploadData(),H.errorHandler=Xl(e),H}class Of{constructor(e,t,a,o){this.current=e,this.total=t,this.finalized=!!a,this.metadata=o||null}}function ky(s,e){let t=null;try{t=s.getResponseHeader("X-Goog-Upload-Status")}catch{Oi(!1)}return Oi(!!t&&(e||["active"]).indexOf(t)!==-1),t}function $O(s,e,t,a,o){const l=e.bucketOnlyServerUrl(),d=Cx(e,a,o),m={name:d.fullPath},g=Oo(l,s.host,s._protocol),_="POST",v={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${a.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},b=Nx(d,t),S=s.maxUploadRetryTime;function N(P){ky(P);let j;try{j=P.getResponseHeader("X-Goog-Upload-URL")}catch{Oi(!1)}return Oi(cm(j)),j}const M=new Ar(g,_,N,S);return M.urlParams=m,M.headers=v,M.body=b,M.errorHandler=Xl(e),M}function FO(s,e,t,a){const o={"X-Goog-Upload-Command":"query"};function l(_){const v=ky(_,["active","final"]);let b=null;try{b=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Oi(!1)}b||Oi(!1);const S=Number(b);return Oi(!isNaN(S)),new Of(S,a.size(),v==="final")}const d="POST",m=s.maxUploadRetryTime,g=new Ar(t,d,l,m);return g.headers=o,g.errorHandler=Xl(e),g}const sT=256*1024;function GO(s,e,t,a,o,l,d,m){const g=new Of(0,0);if(d?(g.current=d.current,g.total=d.total):(g.current=0,g.total=a.size()),a.size()!==g.total)throw nO();const _=g.total-g.current;let v=_;o>0&&(v=Math.min(v,o));const b=g.current,S=b+v;let N="";v===0?N="finalize":_===v?N="upload, finalize":N="upload";const M={"X-Goog-Upload-Command":N,"X-Goog-Upload-Offset":`${g.current}`},P=a.slice(b,S);if(P===null)throw vx();function j(G,de){const X=ky(G,["active","final"]),k=g.current+v,I=a.size();let C;return X==="final"?C=Ny(e,l)(G,de):C=null,new Of(k,I,X==="final",C)}const B="POST",H=e.maxUploadRetryTime,z=new Ar(t,B,j,H);return z.headers=M,z.body=P.uploadData(),z.progressCallback=m||null,z.errorHandler=Xl(s),z}const Zn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function zg(s){switch(s){case"running":case"pausing":case"canceling":return Zn.RUNNING;case"paused":return Zn.PAUSED;case"success":return Zn.SUCCESS;case"canceled":return Zn.CANCELED;case"error":return Zn.ERROR;default:return Zn.ERROR}}class QO{constructor(e,t,a){if(uO(e)||t!=null||a!=null)this.next=e,this.error=t??void 0,this.complete=a??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function Sl(s){return(...e)=>{Promise.resolve().then(()=>s(...e))}}class KO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=uo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=uo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=uo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,a,o,l){if(this.sent_)throw uu("cannot .send() more than once");if(yr(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const d in l)l.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,l[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class YO extends KO{initXhr(){this.xhr_.responseType="text"}}function tr(){return new YO}class WO{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,a=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=a,this._mappings=Ix(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{if(this._request=void 0,this._chunkMultiplier=1,o._codeEquals(wt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(Tx(o.status,[]))if(l)o=_x();else{this.sleepTime=Math.max(this.sleepTime*2,Q3),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=o,this._transition("error")}},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals(wt.CANCELED)?this.completeTransitions_():(this._error=o,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((o,l)=>{this._resolve=o,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,a])=>{switch(this._state){case"running":e(t,a);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const a=$O(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(a,tr,e,t);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,a)=>{const o=FO(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(o,tr,t,a);this._request=l,l.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=sT*this._chunkMultiplier,t=new Of(this._transferred,this._blob.size()),a=this._uploadUrl;this._resolveToken((o,l)=>{let d;try{d=GO(this._ref._location,this._ref.storage,a,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){this._error=g,this._transition("error");return}const m=this._ref.storage._makeRequest(d,tr,o,l,!1);this._request=m,m.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){sT*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const a=PO(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(a,tr,e,t);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const a=HO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(a,tr,e,t);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=yx(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=zg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,a,o){const l=new QO(t||void 0,a||void 0,o||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(zg(this._state)){case Zn.SUCCESS:Sl(this._resolve.bind(null,this.snapshot))();break;case Zn.CANCELED:case Zn.ERROR:const t=this._reject;Sl(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(zg(this._state)){case Zn.RUNNING:case Zn.PAUSED:e.next&&Sl(e.next.bind(e,this.snapshot))();break;case Zn.SUCCESS:e.complete&&Sl(e.complete.bind(e))();break;case Zn.CANCELED:case Zn.ERROR:e.error&&Sl(e.error.bind(e,this._error))();break;default:e.error&&Sl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}class Eo{constructor(e,t){this._service=e,t instanceof Bn?this._location=t:this._location=Bn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Eo(e,t)}get root(){const e=new Bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wx(this._location.path)}get storage(){return this._service}get parent(){const e=IO(this._location.path);if(e===null)return null;const t=new Bn(this._location.bucket,e);return new Eo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw aO(e)}}function XO(s,e,t){return s._throwIfRoot("uploadBytesResumable"),new WO(s,new er(e),t)}function ZO(s){const e={prefixes:[],items:[]};return kx(s,e).then(()=>e)}async function kx(s,e,t){const o=await JO(s,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),o.nextPageToken!=null&&await kx(s,e,o.nextPageToken)}function JO(s,e){e!=null&&typeof e.maxResults=="number"&&g_("options.maxResults",1,1e3,e.maxResults);const t=e||{},a=VO(s.storage,s._location,"/",t.pageToken,t.maxResults);return s.storage.makeRequestWithTokens(a,tr)}function e6(s){s._throwIfRoot("getDownloadURL");const e=UO(s.storage,s._location,Ix());return s.storage.makeRequestWithTokens(e,tr).then(t=>{if(t===null)throw sO();return t})}function t6(s){s._throwIfRoot("deleteObject");const e=BO(s.storage,s._location);return s.storage.makeRequestWithTokens(e,tr)}function n6(s,e){const t=RO(s._location.path,e),a=new Bn(s._location.bucket,t);return new Eo(s.storage,a)}function s6(s){return/^[A-Za-z]+:\/\//.test(s)}function i6(s,e){return new Eo(s,e)}function jx(s,e){if(s instanceof jy){const t=s;if(t._bucket==null)throw tO();const a=new Eo(t,t._bucket);return e!=null?jx(a,e):a}else return e!==void 0?n6(s,e):s}function a6(s,e){if(e&&s6(e)){if(s instanceof jy)return i6(s,e);throw p_("To use ref(service, url), the first argument must be a Storage instance.")}else return jx(s,e)}function iT(s,e){const t=e?.[gx];return t==null?null:Bn.makeFromBucketSpec(t,s)}function r6(s,e,t,a={}){s.host=`${e}:${t}`;const o=yr(e);o&&(k_(`https://${s.host}/b`),j_("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:l}=a;l&&(s._overrideAuthToken=typeof l=="string"?l:FT(l,s.app.options.projectId))}class jy{constructor(e,t,a,o,l,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=a,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=d,this._bucket=null,this._host=px,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=F3,this._maxUploadRetryTime=G3,this._requests=new Set,o!=null?this._bucket=Bn.makeFromBucketSpec(o,this._host):this._bucket=iT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bn.makeFromBucketSpec(this._url,e):this._bucket=iT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){g_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){g_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ds(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Eo(this,e)}_makeRequest(e,t,a,o,l=!0){if(this._deleted)return new rO(bx());{const d=_O(e,this._appId,a,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,a,o).getPromise()}}const aT="@firebase/storage",rT="0.14.0";const Dx="storage";function o6(s,e,t){return s=kt(s),XO(s,e,t)}function l6(s){return s=kt(s),ZO(s)}function c6(s){return s=kt(s),e6(s)}function oT(s){return s=kt(s),t6(s)}function __(s,e){return s=kt(s),a6(s,e)}function u6(s=M_(),e){s=kt(s);const a=Uf(s,Dx).getImmediate({identifier:e}),o=qT("storage");return o&&d6(a,...o),a}function d6(s,e,t,a={}){r6(s,e,t,a)}function h6(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new jy(t,a,o,e,wo)}function f6(){mo(new lr(Dx,h6,"PUBLIC").setMultipleInstances(!0)),Ri(aT,rT,""),Ri(aT,rT,"esm2020")}f6();const m6={apiKey:"AIzaSyD6eHwk9nKZ_ovOWhBxffbBLt7NfAKYVAA",authDomain:"enderun-lala.firebaseapp.com",projectId:"enderun-lala",storageBucket:"enderun-lala.firebasestorage.app",messagingSenderId:"330289169664",appId:"1:330289169664:web:061c5f48ef12ae67671fe5"},Dy=KT(m6),um=bj(Dy),St=R3(Dy),y_=u6(Dy),lT=s=>{let e;const t=new Set,a=(_,v)=>{const b=typeof _=="function"?_(e):_;if(!Object.is(b,e)){const S=e;e=v??(typeof b!="object"||b===null)?b:Object.assign({},e,b),t.forEach(N=>N(e,S))}},o=()=>e,m={setState:a,getState:o,getInitialState:()=>g,subscribe:_=>(t.add(_),()=>t.delete(_))},g=e=s(a,o,m);return m},p6=(s=>s?lT(s):lT),g6=s=>s;function _6(s,e=g6){const t=ao.useSyncExternalStore(s.subscribe,ao.useCallback(()=>e(s.getState()),[s,e]),ao.useCallback(()=>e(s.getInitialState()),[s,e]));return ao.useDebugValue(t),t}const y6=s=>{const e=p6(s),t=a=>_6(e,a);return Object.assign(t,e),t},Ox=(s=>y6);function v6(s,e){let t;try{t=s()}catch{return}return{getItem:o=>{var l;const d=g=>g===null?null:JSON.parse(g,void 0),m=(l=t.getItem(o))!=null?l:null;return m instanceof Promise?m.then(d):d(m)},setItem:(o,l)=>t.setItem(o,JSON.stringify(l,void 0)),removeItem:o=>t.removeItem(o)}}const v_=s=>e=>{try{const t=s(e);return t instanceof Promise?t:{then(a){return v_(a)(t)},catch(a){return this}}}catch(t){return{then(a){return this},catch(a){return v_(a)(t)}}}},b6=(s,e)=>(t,a,o)=>{let l={storage:v6(()=>window.localStorage),partialize:j=>j,version:0,merge:(j,B)=>({...B,...j}),...e},d=!1,m=0;const g=new Set,_=new Set;let v=l.storage;if(!v)return s((...j)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),t(...j)},a,o);const b=()=>{const j=l.partialize({...a()});return v.setItem(l.name,{state:j,version:l.version})},S=o.setState;o.setState=(j,B)=>(S(j,B),b());const N=s((...j)=>(t(...j),b()),a,o);o.getInitialState=()=>N;let M;const P=()=>{var j,B;if(!v)return;const H=++m;d=!1,g.forEach(G=>{var de;return G((de=a())!=null?de:N)});const z=((B=l.onRehydrateStorage)==null?void 0:B.call(l,(j=a())!=null?j:N))||void 0;return v_(v.getItem.bind(v))(l.name).then(G=>{if(G)if(typeof G.version=="number"&&G.version!==l.version){if(l.migrate){const de=l.migrate(G.state,G.version);return de instanceof Promise?de.then(X=>[!0,X]):[!0,de]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,G.state];return[!1,void 0]}).then(G=>{var de;if(H!==m)return;const[X,k]=G;if(M=l.merge(k,(de=a())!=null?de:N),t(M,!0),X)return b()}).then(()=>{H===m&&(z?.(M,void 0),M=a(),d=!0,_.forEach(G=>G(M)))}).catch(G=>{H===m&&z?.(void 0,G)})};return o.persist={setOptions:j=>{l={...l,...j},j.storage&&(v=j.storage)},clearStorage:()=>{v?.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>P(),hasHydrated:()=>d,onHydrate:j=>(g.add(j),()=>{g.delete(j)}),onFinishHydration:j=>(_.add(j),()=>{_.delete(j)})},l.skipHydration||P(),M||N},E6=b6,Ft=Ox()(E6(s=>({firebaseUser:null,user:null,isLoading:!0,isInitialized:!1,setFirebaseUser:e=>s({firebaseUser:e}),setUser:e=>s({user:e}),setLoading:e=>s({isLoading:e}),setInitialized:e=>s({isInitialized:e}),logout:()=>s({firebaseUser:null,user:null,isLoading:!1})}),{name:"enderunlala-auth",partialize:s=>({user:s.user})})),ye={HOME:"/",LOGIN:"/login",REGISTER:"/register",FORGOT_PASSWORD:"/forgot-password",TEACHER:{DASHBOARD:"/teacher",SESSIONS:"/teacher/sessions",SESSION_DETAIL:"/teacher/sessions/:id",NEW_SESSION:"/teacher/sessions/new",QUIZZES:"/teacher/quizzes",QUIZ_EDIT:"/teacher/quizzes/:id",QUIZ_RESULTS:"/teacher/quizzes/:id/results",NEW_QUIZ:"/teacher/quizzes/new",REPORTS:"/teacher/reports",PROFILE:"/teacher/profile"},STUDENT:{DASHBOARD:"/student",ASSIGNMENTS:"/student/assignments",ASSIGNMENT_SOLVE:"/student/assignments/:id",RESULTS:"/student/results",PROFILE:"/student/profile",QUIZZES:"/student/quizzes",QUIZ_PLAYER:"/student/quiz/:id",QUIZ_RESULT:"/student/quiz/result/:id"},ADMIN:{DASHBOARD:"/admin",USERS:"/admin/users",TEACHERS:"/admin/teachers",STUDENTS:"/admin/students",SESSIONS:"/admin/sessions",REPORTS:"/admin/reports",SETTINGS:"/admin/settings"}},T6=(s,e)=>{let t=s;return Object.entries(e).forEach(([a,o])=>{t=t.replace(`:${a}`,o)}),t},S6="_button_b7fps_3",A6="_sm_b7fps_33",x6="_md_b7fps_39",w6="_lg_b7fps_45",I6="_primary_b7fps_52",R6="_secondary_b7fps_62",N6="_danger_b7fps_72",C6="_ghost_b7fps_82",k6="_outline_b7fps_92",j6="_fullWidth_b7fps_103",D6="_loading_b7fps_108",O6="_spinner_b7fps_112",M6="_spin_b7fps_112",z6="_iconOnly_b7fps_128",Si={button:S6,sm:A6,md:x6,lg:w6,primary:I6,secondary:R6,danger:N6,ghost:C6,outline:k6,fullWidth:j6,loading:D6,spinner:O6,spin:M6,iconOnly:z6},ke=({children:s,variant:e="primary",size:t="md",isLoading:a=!1,leftIcon:o,rightIcon:l,fullWidth:d=!1,className:m="",disabled:g,..._})=>{const v=[Si.button,Si[e],Si[t],d&&Si.fullWidth,a&&Si.loading,m].filter(Boolean).join(" ");return u.jsxs("button",{className:v,disabled:g||a,..._,children:[a&&u.jsx("span",{className:Si.spinner,children:u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",className:Si.spinnerIcon,children:u.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeDasharray:"32",strokeDashoffset:"12"})})}),!a&&o&&u.jsx("span",{className:Si.icon,children:o}),u.jsx("span",{className:Si.content,children:s}),!a&&l&&u.jsx("span",{className:Si.icon,children:l})]})},L6="_wrapper_m4lp3_3",P6="_label_m4lp3_10",V6="_required_m4lp3_16",U6="_inputContainer_m4lp3_21",B6="_input_m4lp3_21",q6="_hasLeftIcon_m4lp3_53",H6="_hasRightIcon_m4lp3_57",$6="_leftIcon_m4lp3_61",F6="_rightIcon_m4lp3_62",G6="_hasError_m4lp3_88",Q6="_error_m4lp3_97",K6="_hint_m4lp3_103",Y6="_disabled_m4lp3_109",cs={wrapper:L6,label:P6,required:V6,inputContainer:U6,input:B6,hasLeftIcon:q6,hasRightIcon:H6,leftIcon:$6,rightIcon:F6,hasError:G6,error:Q6,hint:K6,disabled:Y6},Vu=w.forwardRef(({label:s,error:e,hint:t,leftIcon:a,rightIcon:o,className:l="",id:d,...m},g)=>{const _=d||`input-${Math.random().toString(36).substr(2,9)}`,v=[cs.wrapper,e&&cs.hasError,m.disabled&&cs.disabled,l].filter(Boolean).join(" ");return u.jsxs("div",{className:v,children:[s&&u.jsxs("label",{htmlFor:_,className:cs.label,children:[s,m.required&&u.jsx("span",{className:cs.required,children:"*"})]}),u.jsxs("div",{className:cs.inputContainer,children:[a&&u.jsx("span",{className:cs.leftIcon,children:a}),u.jsx("input",{ref:g,id:_,className:`${cs.input} ${a?cs.hasLeftIcon:""} ${o?cs.hasRightIcon:""}`,...m}),o&&u.jsx("span",{className:cs.rightIcon,children:o})]}),e&&u.jsx("span",{className:cs.error,children:e}),!e&&t&&u.jsx("span",{className:cs.hint,children:t})]})});Vu.displayName="Input";const W6="_card_x3a0c_3",X6="_bordered_x3a0c_15",Z6="_elevated_x3a0c_19",J6="_paddingNone_x3a0c_24",eM="_paddingSm_x3a0c_28",tM="_paddingMd_x3a0c_32",nM="_paddingLg_x3a0c_36",sM="_hoverable_x3a0c_54",du={card:W6,default:"_default_x3a0c_10",bordered:X6,elevated:Z6,paddingNone:J6,paddingSm:eM,paddingMd:tM,paddingLg:nM,hoverable:sM},df=({children:s,className:e="",padding:t="md",variant:a="default",hover:o=!1,onClick:l,draggable:d,onDragStart:m,onDragOver:g,onDragEnd:_,onDrop:v})=>{const b=[du.card,du[`padding-${t}`],du[a],o&&du.hoverable,l&&du.clickable,e].filter(Boolean).join(" ");return u.jsx("div",{className:b,onClick:l,role:l?"button":void 0,draggable:d,onDragStart:m,onDragOver:g,onDragEnd:_,onDrop:v,children:s})};const Mx=(...s)=>s.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim();const iM=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const aM=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());const cT=s=>{const e=aM(s);return e.charAt(0).toUpperCase()+e.slice(1)};var rM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const oM=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const lM=w.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:d,...m},g)=>w.createElement("svg",{ref:g,...rM,width:e,height:e,stroke:s,strokeWidth:a?Number(t)*24/Number(e):t,className:Mx("lucide",o),...!l&&!oM(m)&&{"aria-hidden":"true"},...m},[...d.map(([_,v])=>w.createElement(_,v)),...Array.isArray(l)?l:[l]]));const Te=(s,e)=>{const t=w.forwardRef(({className:a,...o},l)=>w.createElement(lM,{ref:l,iconNode:e,className:Mx(`lucide-${iM(cT(s))}`,`lucide-${s}`,a),...o}));return t.displayName=cT(s),t};const cM=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],uM=Te("arrow-down",cM);const dM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ws=Te("arrow-left",dM);const hM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],hf=Te("arrow-right",hM);const fM=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],mM=Te("arrow-up",fM);const pM=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],b_=Te("award",pM);const gM=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],_M=Te("bell",gM);const yM=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Uu=Te("book-open",yM);const vM=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],uT=Te("brain",vM);const bM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],rd=Te("calendar",bM);const EM=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Oy=Te("chart-column",EM);const TM=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],zx=Te("chart-no-axes-column",TM);const SM=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Lx=Te("chart-pie",SM);const AM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],To=Te("check",AM);const xM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Px=Te("chevron-down",xM);const wM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],IM=Te("chevron-left",wM);const RM=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ks=Te("chevron-right",RM);const NM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],So=Te("circle-alert",NM);const CM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],fa=Te("circle-check-big",CM);const kM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Vx=Te("circle-check",kM);const jM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],DM=Te("circle-question-mark",jM);const OM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],MM=Te("circle-x",OM);const zM=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],dm=Te("clipboard-check",zM);const LM=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],E_=Te("clipboard-list",LM);const PM=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],VM=Te("clock-3",PM);const UM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Zl=Te("clock",UM);const BM=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Ux=Te("ellipsis-vertical",BM);const qM=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],HM=Te("eye-off",qM);const $M=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],My=Te("eye",$M);const FM=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],od=Te("file-text",FM);const GM=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],QM=Te("funnel",GM);const KM=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Bx=Te("graduation-cap",KM);const YM=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],WM=Te("grip-vertical",YM);const XM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],qx=Te("info",XM);const ZM=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],zy=Te("layout-dashboard",ZM);const JM=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],dT=Te("lightbulb",JM);const ez=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],tz=Te("list",ez);const nz=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],sz=Te("lock",nz);const iz=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],az=Te("log-out",iz);const rz=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],oz=Te("mail",rz);const lz=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],cz=Te("menu",lz);const uz=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],oo=Te("mic",uz);const dz=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],hz=Te("moon",dz);const fz=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Hx=Te("pause",fz);const mz=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],pz=Te("pen-line",mz);const gz=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],hT=Te("pencil",gz);const _z=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],$x=Te("play",_z);const yz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],hm=Te("plus",yz);const vz=[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],bz=Te("radio",vz);const Ez=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Fx=Te("refresh-cw",Ez);const Tz=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Gx=Te("rotate-ccw",Tz);const Sz=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Qx=Te("save",Sz);const Az=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],Jl=Te("school",Az);const xz=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],wz=Te("search",xz);const Iz=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Kx=Te("send",Iz);const Rz=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Nz=Te("settings",Rz);const Cz=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ll=Te("sparkles",Cz);const kz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],jz=Te("square",kz);const Dz=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],fT=Te("star",Dz);const Oz=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Mz=Te("sun",Oz);const zz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Bu=Te("target",zz);const Lz=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ld=Te("trash-2",Lz);const Pz=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Yx=Te("triangle-alert",Pz);const Vz=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],ho=Te("trophy",Vz);const Uz=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Bz=Te("type",Uz);const qz=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Hz=Te("upload",qz);const $z=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],Fz=Te("user-round",$z);const Gz=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Wx=Te("user",Gz);const Qz=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],qu=Te("users",Qz);const Kz=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],cd=Te("wand-sparkles",Kz);const Yz=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Wz=Te("wifi-off",Yz);const Xz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ao=Te("x",Xz);const Zz=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],fm=Te("zap",Zz),Jz="_overlay_7h7t5_3",e5="_overlayIn_7h7t5_1",t5="_modal_7h7t5_31",n5="_sheetUp_7h7t5_1",s5="_modalIn_7h7t5_1",i5="_header_7h7t5_92",a5="_title_7h7t5_105",r5="_closeBtn_7h7t5_117",o5="_body_7h7t5_132",l5="_footer_7h7t5_145",c5="_sm_7h7t5_171",u5="_lg_7h7t5_175",d5="_xl_7h7t5_179",Ka={overlay:Jz,overlayIn:e5,modal:t5,sheetUp:n5,modalIn:s5,header:i5,title:a5,closeBtn:r5,body:o5,footer:l5,sm:c5,lg:u5,xl:d5},Mf=({isOpen:s,onClose:e,title:t,children:a,size:o="md",showCloseButton:l=!0,closeOnOverlayClick:d=!0,closeOnEscape:m=!0,footer:g})=>{const _=w.useCallback(b=>{b.key==="Escape"&&m&&e()},[e,m]);if(w.useEffect(()=>(s&&(document.addEventListener("keydown",_),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",_),document.body.style.overflow=""}),[s,_]),!s)return null;const v=b=>{b.target===b.currentTarget&&d&&e()};return LT.createPortal(u.jsx("div",{className:Ka.overlay,onClick:v,children:u.jsxs("div",{className:`${Ka.modal} ${Ka[o]}`,role:"dialog","aria-modal":"true",children:[(t||l)&&u.jsxs("div",{className:Ka.header,children:[t&&u.jsx("h2",{className:Ka.title,children:t}),l&&u.jsx("button",{className:Ka.closeBtn,onClick:e,"aria-label":"Close modal",children:u.jsx(Ao,{size:20})})]}),u.jsx("div",{className:Ka.body,children:a}),g&&u.jsx("div",{className:Ka.footer,children:g})]})}),document.body)},h5="_container_1pqc3_1",f5="_iconWrapper_1pqc3_17",m5="_iconDanger_1pqc3_55",p5="_iconWarning_1pqc3_79",g5="_iconInfo_1pqc3_87",_5="_title_1pqc3_95",y5="_message_1pqc3_109",v5="_actions_1pqc3_123",b5="_confirmBtn_1pqc3_135",E5="_cancelBtn_1pqc3_137",Ai={container:h5,iconWrapper:f5,iconDanger:m5,iconWarning:p5,iconInfo:g5,title:_5,message:y5,actions:v5,confirmBtn:b5,cancelBtn:E5},Ly=({isOpen:s,onClose:e,onConfirm:t,title:a,message:o,confirmText:l="Evet, Eminim",cancelText:d="ptal Et",variant:m="danger",isLoading:g=!1})=>{const _=()=>{switch(m){case"danger":return u.jsx(ld,{size:32,className:Ai.iconDanger});case"warning":return u.jsx(So,{size:32,className:Ai.iconWarning});default:return u.jsx(DM,{size:32,className:Ai.iconInfo})}};return u.jsx(Mf,{isOpen:s,onClose:e,size:"sm",showCloseButton:!1,children:u.jsxs("div",{className:Ai.container,children:[u.jsx("div",{className:Ai.iconWrapper,children:_()}),u.jsx("h3",{className:Ai.title,children:a}),u.jsx("p",{className:Ai.message,children:o}),u.jsxs("div",{className:Ai.actions,children:[u.jsx(ke,{variant:"ghost",onClick:e,disabled:g,className:Ai.cancelBtn,children:d}),u.jsx(ke,{variant:m==="danger"?"danger":"primary",onClick:t,isLoading:g,className:Ai.confirmBtn,children:l})]})]})})},T5="_loader_oabps_3",S5="_spinner_oabps_9",A5="_spin_oabps_9",x5="_sm_oabps_18",w5="_md_oabps_24",I5="_lg_oabps_30",R5="_primary_oabps_37",N5="_white_oabps_41",C5="_gray_oabps_45",k5="_pageLoader_oabps_60",j5="_message_oabps_70",Cl={loader:T5,spinner:S5,spin:A5,sm:x5,md:w5,lg:I5,primary:R5,white:N5,gray:C5,pageLoader:k5,message:j5},_s=({size:s="md",color:e="primary",className:t=""})=>u.jsx("div",{className:`${Cl.loader} ${Cl[s]} ${Cl[e]} ${t}`,children:u.jsx("div",{className:Cl.spinner})}),D5=({message:s})=>u.jsxs("div",{className:Cl.pageLoader,children:[u.jsx(_s,{size:"lg"}),s&&u.jsx("p",{className:Cl.message,children:s})]});let O5=0;const xn=Ox()(s=>({theme:"light",sidebarOpen:window.innerWidth>=1024,sidebarCollapsed:!1,activeModal:null,modalData:null,toasts:[],setTheme:e=>{document.documentElement.setAttribute("data-theme",e),s({theme:e})},toggleTheme:()=>s(e=>{const t=e.theme==="light"?"dark":"light";return document.documentElement.setAttribute("data-theme",t),{theme:t}}),setSidebarOpen:e=>s(t=>t.sidebarOpen===e?t:{sidebarOpen:e}),toggleSidebar:()=>s(e=>({sidebarOpen:!e.sidebarOpen})),setSidebarCollapsed:e=>s({sidebarCollapsed:e}),openModal:(e,t)=>s({activeModal:e,modalData:t??null}),closeModal:()=>s({activeModal:null,modalData:null}),addToast:e=>s(t=>({toasts:[...t.toasts,{...e,id:`toast-${++O5}`}]})),removeToast:e=>s(t=>({toasts:t.toasts.filter(a=>a.id!==e)}))})),M5="_container_1ihfa_3",z5="_toast_1ihfa_24",L5="_toastIn_1ihfa_1",P5="_icon_1ihfa_50",V5="_success_1ihfa_60",U5="_error_1ihfa_65",B5="_warning_1ihfa_70",q5="_info_1ihfa_75",H5="_content_1ihfa_80",$5="_title_1ihfa_85",F5="_message_1ihfa_92",G5="_closeBtn_1ihfa_99",Ya={container:M5,toast:z5,toastIn:L5,icon:P5,success:V5,error:U5,warning:B5,info:q5,content:H5,title:$5,message:F5,closeBtn:G5},Q5={success:fa,error:So,warning:Yx,info:qx},K5=({id:s,type:e,title:t,message:a,duration:o=5e3})=>{const l=xn(m=>m.removeToast),d=Q5[e];return w.useEffect(()=>{if(o>0){const m=setTimeout(()=>{l(s)},o);return()=>clearTimeout(m)}},[s,o,l]),u.jsxs("div",{className:`${Ya.toast} ${Ya[e]}`,children:[u.jsx(d,{className:Ya.icon,size:20}),u.jsxs("div",{className:Ya.content,children:[u.jsx("p",{className:Ya.title,children:t}),a&&u.jsx("p",{className:Ya.message,children:a})]}),u.jsx("button",{className:Ya.closeBtn,onClick:()=>l(s),children:u.jsx(Ao,{size:16})})]})},Y5=()=>{const s=xn(e=>e.toasts);return s.length===0?null:LT.createPortal(u.jsx("div",{className:Ya.container,children:s.map(e=>u.jsx(K5,{...e},e.id))}),document.body)},W5="_selectContainer_2oi6w_1",X5="_selectBox_2oi6w_11",Z5="_active_2oi6w_51",J5="_icon_2oi6w_61",eL="_currentValue_2oi6w_75",tL="_arrow_2oi6w_95",nL="_rotated_2oi6w_107",sL="_dropdownMenu_2oi6w_117",iL="_option_2oi6w_173",aL="_selected_2oi6w_203",xi={selectContainer:W5,selectBox:X5,active:Z5,icon:J5,currentValue:eL,arrow:tL,rotated:nL,dropdownMenu:sL,option:iL,selected:aL},Xs=({options:s,value:e,onChange:t,icon:a,placeholder:o="Seiniz...",className:l=""})=>{const[d,m]=w.useState(!1),g=w.useRef(null),_=s.find(b=>b.value===e);w.useEffect(()=>{const b=S=>{g.current&&!g.current.contains(S.target)&&m(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const v=b=>{t(b),m(!1)};return u.jsxs("div",{className:`${xi.selectContainer} ${l}`,ref:g,children:[u.jsxs("div",{className:`${xi.selectBox} ${d?xi.active:""}`,onClick:()=>m(!d),children:[a&&u.jsx("span",{className:xi.icon,children:a}),u.jsx("span",{className:xi.currentValue,children:_?_.label:o}),u.jsx(Px,{size:18,className:`${xi.arrow} ${d?xi.rotated:""}`})]}),d&&u.jsx("div",{className:xi.dropdownMenu,children:s.map(b=>u.jsx("div",{className:`${xi.option} ${b.value===e?xi.selected:""}`,onClick:()=>v(b.value),children:b.label},b.value))})]})},rL="_header_h2cva_3",oL="_left_h2cva_26",lL="_menuBtn_h2cva_33",cL="_logo_h2cva_59",uL="_logoIcon_h2cva_71",dL="_logoText_h2cva_76",hL="_desktopNav_h2cva_89",fL="_navLink_h2cva_106",mL="_activeNavLink_h2cva_107",pL="_right_h2cva_136",gL="_iconBtn_h2cva_148",_L="_badge_h2cva_164",yL="_userMenu_h2cva_181",vL="_userInfo_h2cva_188",bL="_userName_h2cva_200",EL="_userRole_h2cva_207",TL="_teacher_h2cva_213",SL="_student_h2cva_217",AL="_admin_h2cva_221",xL="_avatar_h2cva_225",kn={header:rL,left:oL,menuBtn:lL,logo:cL,logoIcon:uL,logoText:dL,desktopNav:hL,navLink:fL,activeNavLink:mL,right:pL,iconBtn:gL,badge:_L,userMenu:yL,userInfo:vL,userName:bL,userRole:EL,teacher:TL,student:SL,admin:AL,avatar:xL},wL=()=>{const s=Ft(d=>d.user),{theme:e,toggleTheme:t,toggleSidebar:a}=xn(),o=()=>{switch(s?.role){case"teacher":return"retmen";case"student":return"renci";case"admin":return"Ynetici";default:return""}},l=()=>{switch(s?.role){case"teacher":return"teacher";case"student":return"student";case"admin":return"admin";default:return""}};return u.jsxs("header",{className:kn.header,children:[u.jsxs("div",{className:kn.left,children:[u.jsx("button",{className:kn.menuBtn,onClick:a,"aria-label":"Toggle menu",children:u.jsx(cz,{size:22})}),u.jsxs(Iu,{to:s?.role==="teacher"?ye.TEACHER.DASHBOARD:ye.HOME,className:kn.logo,children:[u.jsx("span",{className:kn.logoIcon,children:""}),u.jsx("span",{className:kn.logoText,children:"Lala"})]})]}),u.jsxs("div",{className:kn.right,children:[u.jsx("button",{className:kn.iconBtn,onClick:t,"aria-label":"Toggle theme",children:e==="light"?u.jsx(hz,{size:20}):u.jsx(Mz,{size:20})}),u.jsxs("button",{className:kn.iconBtn,"aria-label":"Notifications",children:[u.jsx(_M,{size:20}),u.jsx("span",{className:kn.badge,children:"3"})]}),u.jsxs("div",{className:kn.userMenu,children:[u.jsxs("div",{className:kn.userInfo,children:[u.jsx("span",{className:kn.userName,children:s?.displayName||"Kullanc"}),u.jsx("span",{className:`${kn.userRole} ${kn[l()]}`,children:o()})]}),u.jsx("div",{className:kn.avatar,children:s?.photoURL?u.jsx("img",{src:s.photoURL,alt:s.displayName}):u.jsx(Wx,{size:18})})]})]})]})},IL="_backdrop_bh2jq_4",RL="_sidebar_bh2jq_29",NL="_open_bh2jq_52",CL="_closed_bh2jq_56",kL="_label_bh2jq_72",jL="_navItem_bh2jq_77",DL="_active_bh2jq_91",OL="_logoutBtn_bh2jq_96",ML="_nav_bh2jq_77",zL="_navList_bh2jq_117",LL="_icon_bh2jq_159",PL="_footer_bh2jq_183",ks={backdrop:IL,sidebar:RL,open:NL,closed:CL,label:kL,navItem:jL,active:DL,logoutBtn:OL,nav:ML,navList:zL,icon:LL,footer:PL},VL=[{label:"Dashboard",icon:u.jsx(zy,{size:20}),path:ye.TEACHER.DASHBOARD},{label:"retim Atlyesi",icon:u.jsx(cd,{size:20}),path:ye.TEACHER.SESSIONS},{label:"Snavlar",icon:u.jsx(dm,{size:20}),path:ye.TEACHER.QUIZZES},{label:"Raporlar",icon:u.jsx(Lx,{size:20}),path:ye.TEACHER.REPORTS}],UL=[{label:"Dashboard",icon:u.jsx(zy,{size:20}),path:ye.STUDENT.DASHBOARD},{label:"Snavlarm",icon:u.jsx(Uu,{size:20}),path:ye.STUDENT.QUIZZES},{label:"Sonularm",icon:u.jsx(dm,{size:20}),path:ye.STUDENT.RESULTS}],BL=[{label:"Dashboard",icon:u.jsx(zy,{size:20}),path:ye.ADMIN.DASHBOARD},{label:"retmenler",icon:u.jsx(qu,{size:20}),path:ye.ADMIN.TEACHERS},{label:"renciler",icon:u.jsx(Bx,{size:20}),path:ye.ADMIN.STUDENTS},{label:"Tm retimler",icon:u.jsx(cd,{size:20}),path:ye.ADMIN.SESSIONS},{label:"Raporlar",icon:u.jsx(Lx,{size:20}),path:ye.ADMIN.REPORTS},{label:"Ayarlar",icon:u.jsx(Nz,{size:20}),path:ye.ADMIN.SETTINGS}],qL=()=>{const s=In(),e=qn(),t=Ft(v=>v.user),a=Ft(v=>v.logout),o=xn(v=>v.sidebarOpen),l=xn(v=>v.setSidebarOpen);w.useEffect(()=>{window.innerWidth<1024&&l(!1)},[e.pathname,l]),w.useEffect(()=>{const v=()=>{const b=window.innerWidth>=1024;xn.getState().setSidebarOpen(b)};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const d=()=>{switch(t?.role){case"teacher":return VL;case"student":return UL;case"admin":return BL;default:return[]}},m=async()=>{try{await ck(um),a(),s(ye.LOGIN)}catch(v){console.error("Logout error:",v)}},g=()=>{window.innerWidth<1024&&l(!1)},_=d();return u.jsxs(u.Fragment,{children:[o&&u.jsx("div",{className:ks.backdrop,onClick:g}),u.jsxs("aside",{className:`${ks.sidebar} ${o?ks.open:ks.closed}`,children:[u.jsx("nav",{className:ks.nav,children:u.jsx("ul",{className:ks.navList,children:_.map(v=>u.jsx("li",{children:u.jsxs(MT,{to:v.path,end:!0,className:({isActive:b})=>`${ks.navItem} ${b?ks.active:""}`,children:[u.jsx("span",{className:ks.icon,children:v.icon}),u.jsx("span",{className:ks.label,children:v.label})]})},v.path))})}),u.jsx("div",{className:ks.footer,children:u.jsxs("button",{className:ks.logoutBtn,onClick:m,children:[u.jsx(az,{size:20}),u.jsx("span",{children:"k Yap"})]})})]})]})},HL="_layout_ajq5n_3",$L="_main_ajq5n_8",FL="_content_ajq5n_15",GL="_sidebarOpen_ajq5n_33",QL="_sidebarClosed_ajq5n_37",hu={layout:HL,main:$L,content:FL,sidebarOpen:GL,sidebarClosed:QL},KL=()=>{const s=xn(e=>e.sidebarOpen);return u.jsxs("div",{className:hu.layout,children:[u.jsx(wL,{}),u.jsx(qL,{}),u.jsx("main",{className:`${hu.main} ${s?hu.sidebarOpen:hu.sidebarClosed}`,children:u.jsx("div",{className:hu.content,children:u.jsx(HI,{})})})]})},jn=({children:s,allowedRoles:e})=>{const t=qn(),{user:a,firebaseUser:o,isLoading:l,isInitialized:d}=Ft();if(!d||l)return u.jsx(D5,{message:"Ykleniyor..."});if(!o)return u.jsx(mf,{to:ye.LOGIN,state:{from:t},replace:!0});if(e&&a&&!e.includes(a.role)){const m=a.role==="teacher"?ye.TEACHER.DASHBOARD:a.role==="student"?ye.STUDENT.DASHBOARD:ye.ADMIN.DASHBOARD;return u.jsx(mf,{to:m,replace:!0})}return u.jsx(u.Fragment,{children:s})},YL=[{email:"ogretmen@test.com",password:"test1234",displayName:"Ahmet retmen",role:"teacher",subjects:["Matematik","Fizik"],assignedClasses:["9-A","10-B"]},{email:"ogrenci@test.com",password:"test1234",displayName:"Zeynep renci",role:"student",classId:"9-A",studentNumber:"2024001"},{email:"yonetici@test.com",password:"test1234",displayName:"Mdr Bey",role:"admin"}];async function WL(){for(const s of YL)try{const{email:e,password:t,...a}=s,l=(await ik(um,e,t)).user.uid;await fx(zn(St,"users",l),{...a,email:e,institutionId:"test-institution",photoURL:null,phoneNumber:null,isActive:!0,createdAt:dt.now(),updatedAt:dt.now()}),console.log(` Created: ${e} (${a.role})`)}catch(e){e.code==="auth/email-already-in-use"?console.log(` Already exists: ${s.email}`):console.error(` Error creating ${s.email}:`,e.message)}console.log(" Seed complete!")}const XL="_container_6gyxg_3",ZL="_decoration_6gyxg_42",JL="_circle1_6gyxg_52",e9="_circle2_6gyxg_53",t9="_circle3_6gyxg_54",n9="_card_6gyxg_100",s9="_header_6gyxg_134",i9="_logo_6gyxg_139",a9="_title_6gyxg_146",r9="_subtitle_6gyxg_159",o9="_form_6gyxg_165",l9="_errorBanner_6gyxg_171",c9="_forgotLink_6gyxg_208",u9="_eyeBtn_6gyxg_222",d9="_footer_6gyxg_238",h9="_link_6gyxg_245",f9="_devSection_6gyxg_255",En={container:XL,decoration:ZL,circle1:JL,circle2:e9,circle3:t9,card:n9,header:s9,logo:i9,title:a9,subtitle:r9,form:o9,errorBanner:l9,forgotLink:c9,eyeBtn:u9,footer:d9,link:h9,devSection:f9},m9=()=>{const s=In(),e=Ft(B=>B.setUser),t=xn(B=>B.addToast),[a,o]=w.useState(""),[l,d]=w.useState(""),[m,g]=w.useState(!1),[_,v]=w.useState(!1),[b,S]=w.useState(!1),[N,M]=w.useState(""),P=async()=>{S(!0);try{await WL(),t({type:"success",title:"Test kullanclar oluturuldu!"})}catch{t({type:"error",title:"Hata",message:"Kullanclar oluturulamad"})}finally{S(!1)}},j=async B=>{B.preventDefault(),M(""),v(!0);try{const H=await ak(um,a,l),z=await jo(zn(St,"users",H.user.uid));if(z.exists()){const G={id:z.id,...z.data()};e(G),t({type:"success",title:"Ho geldiniz!",message:`${G.displayName} olarak giri yaptnz.`});const de=G.role==="teacher"?ye.TEACHER.DASHBOARD:G.role==="student"?ye.STUDENT.DASHBOARD:ye.ADMIN.DASHBOARD;s(de,{replace:!0})}else M("Kullanc bilgileri bulunamad.")}catch(H){if(console.error("Login error:",H),a==="ogretmen@test.com"&&l==="test1234"){e({id:"dummy-teacher",email:"ogretmen@test.com",displayName:"Ahmet retmen",role:"teacher",institutionId:"test-inst",isActive:!0,createdAt:new Date,updatedAt:new Date}),s(ye.TEACHER.DASHBOARD,{replace:!0});return}if(a==="ogrenci@test.com"&&l==="test1234"){e({id:"dummy-student",email:"ogrenci@test.com",displayName:"Zeynep renci",role:"student",institutionId:"test-inst",isActive:!0,createdAt:new Date,updatedAt:new Date}),s(ye.STUDENT.DASHBOARD,{replace:!0});return}H.code==="auth/user-not-found"||H.code==="auth/wrong-password"?M("E-posta veya ifre hatal."):H.code==="auth/too-many-requests"?M("ok fazla baarsz deneme. Ltfen daha sonra tekrar deneyin."):M("Giri yaplrken bir hata olutu. (Test bilgileriyle girmeyi deneyin)")}finally{v(!1)}};return u.jsxs("div",{className:En.container,children:[u.jsxs("div",{className:En.card,children:[u.jsxs("div",{className:En.header,children:[u.jsx("div",{className:En.logo,children:""}),u.jsx("h1",{className:En.title,children:"EnderunLala"}),u.jsx("p",{className:En.subtitle,children:"Eitim platformuna ho geldiniz"})]}),u.jsxs("form",{onSubmit:j,className:En.form,children:[N&&u.jsx("div",{className:En.errorBanner,children:N}),u.jsx(Vu,{type:"email",label:"E-posta",placeholder:"ornek@okul.edu.tr",value:a,onChange:B=>o(B.target.value),leftIcon:u.jsx(oz,{size:18}),required:!0,autoComplete:"email"}),u.jsx(Vu,{type:m?"text":"password",label:"ifre",placeholder:"",value:l,onChange:B=>d(B.target.value),leftIcon:u.jsx(sz,{size:18}),rightIcon:u.jsx("button",{type:"button",onClick:()=>g(!m),className:En.eyeBtn,children:m?u.jsx(HM,{size:18}):u.jsx(My,{size:18})}),required:!0,autoComplete:"current-password"}),u.jsx(Iu,{to:ye.FORGOT_PASSWORD,className:En.forgotLink,children:"ifremi unuttum"}),u.jsx(ke,{type:"submit",fullWidth:!0,isLoading:_,size:"lg",children:"Giri Yap"})]}),u.jsx("div",{className:En.footer,children:u.jsxs("p",{children:["Hesabnz yok mu?"," ",u.jsx(Iu,{to:ye.REGISTER,className:En.link,children:"Kayt olun"})]})}),u.jsx("div",{className:En.devSection,children:u.jsx(ke,{variant:"ghost",size:"sm",onClick:P,isLoading:b,leftIcon:u.jsx(qu,{size:16}),children:"Test Kullanclar Olutur"})})]}),u.jsxs("div",{className:En.decoration,children:[u.jsx("div",{className:En.circle1}),u.jsx("div",{className:En.circle2}),u.jsx("div",{className:En.circle3})]})]})},ec="sessions",p9=async(s,e)=>(await om(ti(St,ec),{...e,teacherId:s,status:"draft",createdAt:ps(),updatedAt:ps()})).id,g9=async(s,e,t)=>{if(e.size>524288e3)throw new Error(`Dosya ok byk (${b9(e.size)}). Maksimum dosya boyutu 500MB.`);const o=v9(e.type),l=`sessions/${s}/audio_${Date.now()}.${o}`,d=__(y_,l),m={contentType:e.type||"audio/webm",customMetadata:{sessionId:s,uploadedAt:new Date().toISOString(),originalSize:e.size.toString()}},g=o6(d,e,m),_={pause:()=>g.pause(),resume:()=>g.resume(),cancel:()=>g.cancel()};return new Promise((v,b)=>{g.on("state_changed",S=>{const N=Math.round(S.bytesTransferred/S.totalBytes*100);t?.({percent:N,bytesTransferred:S.bytesTransferred,totalBytes:S.totalBytes,state:S.state})},S=>{console.error("[SessionService] Upload error:",S);let N;switch(S.code){case"storage/canceled":N="Ykleme iptal edildi.";break;case"storage/retry-limit-exceeded":N="nternet balants ok zayf. Ltfen balantnz kontrol edip tekrar deneyin.";break;case"storage/quota-exceeded":N="Depolama alan doldu. Ltfen yneticinize bavurun.";break;case"storage/unauthenticated":case"storage/unauthorized":N="Yetkilendirme hatas. Ltfen tekrar giri yapn (Storage izin hatas).";break;default:N=`Ykleme baarsz (Hata Kodu: ${S.code}): ${S.message}`}t?.({percent:0,bytesTransferred:0,totalBytes:e.size,state:"error"}),b(new Error(N))},async()=>{try{const S=await c6(g.snapshot.ref);await ad(zn(St,ec,s),{audioUrl:S,storagePath:l,recordingSize:e.size,status:"recorded",updatedAt:ps()}),t?.({percent:100,bytesTransferred:e.size,totalBytes:e.size,state:"success"}),v({downloadUrl:S,controller:_})}catch(S){b(S)}})})},zf=async s=>{const e=await jo(zn(St,ec,s));return e.exists()?{id:e.id,...e.data()}:null},Xx=async(s,e=20)=>{const t=ko(ti(St,ec),pr("teacherId","==",s),ux("createdAt","desc"),U3(e));return(await Do(t)).docs.map(o=>({id:o.id,...o.data()}))},_9=async(s,e)=>{await ad(zn(St,ec,s),{...e,updatedAt:ps()})},Zx=async s=>{const e=await zf(s);e&&await y9(s,e),await mx(zn(St,ec,s))},y9=async(s,e)=>{try{if(e.storagePath)try{await oT(__(y_,e.storagePath));return}catch(t){t.code!=="storage/object-not-found"&&console.error("[SessionService] Delete by path error:",t)}try{const t=__(y_,`sessions/${s}`),a=await l6(t);a.items.length>0&&await Promise.all(a.items.map(o=>oT(o).catch(l=>{console.warn("[SessionService] Could not delete:",o.fullPath,l)})))}catch(t){t.code!=="storage/object-not-found"&&console.error("[SessionService] Folder cleanup error:",t)}}catch(t){console.error("[SessionService] Audio deletion error:",t)}},v9=s=>!s||s.includes("webm")?"webm":s.includes("mp3")||s.includes("mpeg")?"mp3":s.includes("wav")?"wav":s.includes("ogg")?"ogg":s.includes("mp4")||s.includes("m4a")?"m4a":"webm",b9=s=>{if(s===0)return"0 B";const e=1024,t=["B","KB","MB","GB"],a=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,a)).toFixed(1))+" "+t[a]},fs={MULTIPLE_CHOICE:"multiple_choice",TRUE_FALSE:"true_false"},Lg={multiple_choice:"oktan Semeli",true_false:"Doru/Yanl"},tc=()=>`q_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,E9=(s,e)=>{const t={id:tc(),question:"",points:10,difficulty:"medium",order:e};switch(s){case fs.MULTIPLE_CHOICE:return{...t,type:fs.MULTIPLE_CHOICE,options:[{id:"opt_1",text:"",isCorrect:!0},{id:"opt_2",text:"",isCorrect:!1},{id:"opt_3",text:"",isCorrect:!1},{id:"opt_4",text:"",isCorrect:!1}],shuffleOptions:!0};case fs.TRUE_FALSE:return{...t,type:fs.TRUE_FALSE,correctAnswer:!0};default:throw new Error(`Unknown question type: ${s}`)}},Py={timeLimit:void 0,showTimeRemaining:!0,shuffleQuestions:!1,shuffleOptions:!0,showPoints:!0,showDifficulty:!1,showCorrectAnswers:"after_submission",showExplanations:"after_submission",showScore:"immediately",allowRetake:!1,maxAttempts:1,passingScore:60,allowSkip:!0,allowGoBack:!0,requireAllQuestions:!0},sr=s=>s.reduce((e,t)=>e+t.points,0),lo=s=>{const e={multiple_choice:1,true_false:.5};return Math.ceil(s.reduce((t,a)=>t+(e[a.type]||1),0))},Mo="quizzes",nc="quiz_submissions",mn=s=>s?s instanceof dt?s.toDate():s instanceof Date?s:typeof s=="string"||typeof s=="number"?new Date(s):s&&typeof s.toDate=="function"?s.toDate():new Date:new Date,Jx=async(s,e)=>{const t=(e.questions||[]).map((d,m)=>({...d,id:tc(),order:m,createdAt:new Date,updatedAt:new Date})),a=Hu({...Py,...e.settings}),o={title:e.title,description:e.description||"",sessionId:e.sessionId||null,classId:e.classId||null,classIds:e.classIds||[],teacherId:s,questions:Hu(t),settings:a,status:"draft",totalPoints:sr(t),estimatedDuration:lo(t),createdAt:ps(),updatedAt:ps()};return{id:(await om(ti(St,Mo),o)).id,...o,createdAt:new Date,updatedAt:new Date}},xr=async s=>{const e=zn(St,Mo,s),t=await jo(e);if(!t.exists())return null;const a=t.data();return{id:t.id,...a,createdAt:mn(a.createdAt),updatedAt:mn(a.updatedAt),publishedAt:a.publishedAt?mn(a.publishedAt):void 0,dueDate:a.dueDate?mn(a.dueDate):void 0}},Hu=s=>{if(s===null||typeof s!="object"||s instanceof Date||s.constructor&&(s.constructor.name==="Timestamp"||s.constructor.name==="FieldValue"||s._methodName))return s;if(Array.isArray(s))return s.map(t=>Hu(t));const e={};return Object.keys(s).forEach(t=>{const a=s[t];a!==void 0&&(e[t]=Hu(a))}),e},Vy=async()=>{const s=ko(ti(St,Mo),pr("status","==","published"));return(await Do(s)).docs.map(a=>({id:a.id,...a.data(),createdAt:mn(a.data().createdAt),updatedAt:mn(a.data().updatedAt)})).sort((a,o)=>o.createdAt.getTime()-a.createdAt.getTime())},Pg=async(s,e)=>{const a={...Hu(e),updatedAt:ps()};e.questions&&(a.totalPoints=sr(e.questions),a.estimatedDuration=lo(e.questions));const o=zn(St,Mo,s);await ad(o,a)},ew=async s=>{const e=zn(St,Mo,s);await mx(e)},mm=async s=>{const e=ko(ti(St,Mo),pr("teacherId","==",s),ux("createdAt","desc"));return(await Do(e)).docs.map(a=>{const o=a.data();return{id:a.id,...o,createdAt:mn(o.createdAt),updatedAt:mn(o.updatedAt)}})},T9=async(s,e)=>{const t={status:"published",publishedAt:ps(),updatedAt:ps()};await ad(zn(St,Mo,s),t)},S9=async(s,e)=>{const a=(await Uy(s,e)).length+1,o=await xr(s);if(!o)throw new Error("Quiz not found");if(o.settings.maxAttempts&&a>o.settings.maxAttempts)throw new Error("Maximum attempts reached");const l={quizId:s,studentId:e,answers:[],totalPoints:o.totalPoints,status:"in_progress",attemptNumber:a,startedAt:ps()};return{id:(await om(ti(St,nc),l)).id,...l,startedAt:new Date}},A9=async s=>{const e=zn(St,nc,s),t=await jo(e);if(!t.exists())return null;const a=t.data();return{id:t.id,...a,startedAt:mn(a.startedAt),submittedAt:a.submittedAt?mn(a.submittedAt):void 0,gradedAt:a.gradedAt?mn(a.gradedAt):void 0}},Uy=async(s,e)=>{const t=ko(ti(St,nc),pr("quizId","==",s),pr("studentId","==",e));return(await Do(t)).docs.map(l=>({id:l.id,...l.data(),startedAt:mn(l.data().startedAt),submittedAt:l.data().submittedAt?mn(l.data().submittedAt):void 0})).sort((l,d)=>d.startedAt.getTime()-l.startedAt.getTime())},tw=async s=>{const e=ko(ti(St,nc),pr("studentId","==",s));return(await Do(e)).docs.map(o=>({id:o.id,...o.data(),startedAt:mn(o.data().startedAt),submittedAt:o.data().submittedAt?mn(o.data().submittedAt):void 0})).sort((o,l)=>{const d=o.submittedAt||o.startedAt;return(l.submittedAt||l.startedAt).getTime()-d.getTime()})},x9=async(s,e)=>{const t=zn(St,nc,s),a=await jo(t);if(!a.exists())throw new Error("Submission not found");const o=a.data(),l=await xr(o.quizId);if(!l)throw new Error("Quiz not found");const d=e.map(N=>{const M=l.questions.find(B=>B.id===N.questionId);if(!M)return N;let P=!1,j=0;switch(M.type){case"multiple_choice":{const H=(M.options||[]).filter(G=>G.isCorrect).map(G=>G.id),z=N.selectedOptionIds||[];P=H.length===z.length&&H.every(G=>z.includes(G));break}case"true_false":{P=M.correctAnswer===N.booleanAnswer;break}}return P&&(j=M.points),{...N,isCorrect:P,pointsEarned:j,answeredAt:new Date}}),m=d.reduce((N,M)=>N+(M.pointsEarned||0),0),g=l.totalPoints||sr(l.questions),_=g>0?Math.round(m/g*100):0,v=l.settings?.passingScore?_>=l.settings.passingScore:!0,b=mn(o.startedAt),S=Math.floor((Date.now()-b.getTime())/1e3);await ad(t,{answers:d,score:m,percentage:_,passed:v,status:"submitted",submittedAt:ps(),duration:S})},By=async s=>{const e=ko(ti(St,nc),pr("quizId","==",s));return(await Do(e)).docs.map(o=>({id:o.id,...o.data(),startedAt:mn(o.data().startedAt),submittedAt:o.data().submittedAt?mn(o.data().submittedAt):void 0})).sort((o,l)=>{const d=o.submittedAt?.getTime()||0;return(l.submittedAt?.getTime()||0)-d})},w9="_container_1vko2_1",I9="_institutionInfo_1vko2_13",R9="_instIcon_1vko2_33",N9="_instLabel_1vko2_41",C9="_instName_1vko2_55",k9="_formCard_1vko2_67",j9="_formTitle_1vko2_83",D9="_inputGrid_1vko2_97",O9="_formActions_1vko2_111",M9="_listSection_1vko2_121",z9="_listTitle_1vko2_133",L9="_classList_1vko2_149",P9="_classItem_1vko2_161",V9="_className_1vko2_191",U9="_classBadge_1vko2_207",B9="_itemActions_1vko2_235",q9="_actionBtn_1vko2_245",H9="_emptyState_1vko2_297",tn={container:w9,institutionInfo:I9,instIcon:R9,instLabel:N9,instName:C9,formCard:k9,formTitle:j9,inputGrid:D9,formActions:O9,listSection:M9,listTitle:z9,classList:L9,classItem:P9,className:V9,classBadge:U9,itemActions:B9,actionBtn:q9,delete:"_delete_1vko2_287",emptyState:H9},nw=({isOpen:s,onClose:e,institutionName:t,existingClasses:a,onAddClass:o,onDeleteClass:l,onUpdateClass:d})=>{const[m,g]=w.useState(""),[_,v]=w.useState(""),[b,S]=w.useState(null),N=()=>{if(!m||!_)return;const j=`${m}-${_.toUpperCase()}`;b?(d(b,j),S(null)):o(j),g(""),v("")},M=j=>{const[B,H]=j.split("-");g(B||""),v(H||""),S(j)},P=()=>{S(null),g(""),v("")};return u.jsx(Mf,{isOpen:s,onClose:e,title:"Snf Ynetimi",size:"md",children:u.jsxs("div",{className:tn.container,children:[u.jsxs("div",{className:tn.institutionInfo,children:[u.jsx(Jl,{size:20,className:tn.instIcon}),u.jsx("span",{className:tn.instLabel,children:"KURUM:"}),u.jsx("span",{className:tn.instName,children:t})]}),u.jsxs("div",{className:tn.formCard,children:[u.jsx("h3",{className:tn.formTitle,children:b?"Snf Dzenle":"Yeni Snf Ekle"}),u.jsxs("div",{className:tn.inputGrid,children:[u.jsx(Vu,{label:"Snf",placeholder:"rn: 9, 10, 11",value:m,onChange:j=>g(j.target.value)}),u.jsx(Vu,{label:"ube",placeholder:"rn: A, B, C",value:_,onChange:j=>v(j.target.value)})]}),u.jsxs("div",{className:tn.formActions,children:[b&&u.jsx(ke,{variant:"outline",onClick:P,children:"ptal"}),u.jsx(ke,{variant:"primary",fullWidth:!0,leftIcon:b?u.jsx(hT,{size:18}):u.jsx(hm,{size:18}),onClick:N,disabled:!m||!_,children:b?"Gncelle":"Snf Kaydet"})]})]}),u.jsxs("div",{className:tn.listSection,children:[u.jsx("h3",{className:tn.listTitle,children:"Mevcut Snflar"}),u.jsx("div",{className:tn.classList,children:a.length>0?a.map(j=>u.jsxs("div",{className:tn.classItem,children:[u.jsxs("div",{className:tn.className,children:[u.jsx("div",{className:tn.classBadge,children:j.split("-")[0]}),u.jsxs("span",{children:[j," Snf"]})]}),u.jsxs("div",{className:tn.itemActions,children:[u.jsx("button",{className:tn.actionBtn,onClick:()=>M(j),title:"Dzenle",children:u.jsx(hT,{size:16})}),u.jsx("button",{className:`${tn.actionBtn} ${tn.delete}`,onClick:()=>l(j),title:"Sil",children:u.jsx(ld,{size:16})})]})]},j)):u.jsx("div",{className:tn.emptyState,children:"Henz tanml bir snf bulunamad."})})]})]})})},mT=[{id:"student_9a_1_gen",email:"ali.yilmaz@dummy.com",displayName:"Ali Ylmaz",role:"student",studentNumber:"901",classId:"9-A",isActive:!0,photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=Ali"},{id:"student_9a_2_gen",email:"ayse.demir@dummy.com",displayName:"Aye Demir",role:"student",studentNumber:"902",classId:"9-A",isActive:!0,photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=Ayse"},{id:"student_9a_3_gen",email:"mehmet.oz@dummy.com",displayName:"Mehmet z",role:"student",studentNumber:"903",classId:"9-A",isActive:!0,photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=Mehmet"},{id:"student_9a_4_gen",email:"zeynep.kaya@dummy.com",displayName:"Zeynep Kaya",role:"student",studentNumber:"904",classId:"9-A",isActive:!0,photoURL:"https://api.dicebear.com/7.x/avataaars/svg?seed=Zeynep"}],sw=({onDataGenerated:s})=>{const{user:e}=Ft(),[t,a]=w.useState(!1),[o,l]=w.useState(null),d=async()=>{if(!e||!e.institutionId){l("Hata: Kurum ID bulunamad. Ltfen giri yapn.");return}a(!0),l("renciler oluturuluyor...");try{for(const v of mT){const b={...v,institutionId:e.institutionId,createdAt:ps(),updatedAt:ps()};await fx(zn(St,"users",v.id),b)}l("Snavlar getiriliyor...");const g=await Vy();if(g.length===0){l("Uyar: Yaynlanm snav bulunamad. Ltfen nce snav yaynlayn."),a(!1);return}l(`${g.length} snav iin cevaplar retiliyor...`);let _=0;for(const v of g)for(const b of mT)if(Math.random()>.1){const S=m(v,b.id);await om(ti(St,"quiz_submissions"),S),_++}l(`Baarl! 4 renci ve ${_} snav sonucu oluturuldu.`),s&&s()}catch(g){console.error("Data generation error:",g),l(`Hata: ${g.message}`)}finally{a(!1)}},m=(g,_)=>{const v=.3+Math.random()*.65,b=g.questions.map(z=>{const G=Math.random()<v;let de=0,X=[],k=null;if(z.type==="multiple_choice"){const I=z.options.filter(L=>L.isCorrect),C=z.options.filter(L=>!L.isCorrect);G&&I.length>0?X=[I[0].id]:C.length>0&&(X=[C[Math.floor(Math.random()*C.length)].id])}else if(z.type==="true_false"){const I=z.correctAnswer;k=G?I:!I}return G&&(de=z.points),{questionId:z.id,questionType:z.type,selectedOptionIds:X,booleanAnswer:k,isCorrect:G,pointsEarned:de,answeredAt:new Date,timeSpent:Math.floor(Math.random()*60)+10}}),S=b.reduce((z,G)=>z+G.pointsEarned,0),N=g.totalPoints,M=N>0?Math.round(S/N*100):0,P=g.settings?.passingScore?M>=g.settings.passingScore:!0,j=Math.floor(Math.random()*7*24*60*60*1e3),B=new Date(Date.now()-j),H=new Date(B.getTime()-g.estimatedDuration*60*1e3);return{quizId:g.id,studentId:_,answers:b,score:S,totalPoints:N,percentage:M,passed:P,status:"graded",attemptNumber:1,startedAt:dt.fromDate(H),submittedAt:dt.fromDate(B),gradedAt:dt.fromDate(B),duration:Math.floor((B.getTime()-H.getTime())/1e3)}};return u.jsxs("div",{style:{padding:"20px",background:"#f8fafc",border:"1px dashed #cbd5e1",borderRadius:"12px",margin:"20px 0"},children:[u.jsx("h3",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"10px"},children:" Test Verisi Oluturucu"}),u.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"15px"},children:"9A snf iin 4 renci oluturur ve yaynlanm snavlar iin rastgele sonular retir."}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[u.jsx(ke,{variant:"primary",onClick:d,disabled:t,className:"vibrantAddBtn",children:t?"leniyor...":"Test Verisi ret"}),o&&u.jsx("span",{style:{fontSize:"14px",color:o.includes("Hata")?"#ef4444":"#10b981",fontWeight:500},children:o})]})]})},$9="_page_1q3i5_3",F9="_header_1q3i5_17",G9="_greeting_1q3i5_33",Q9="_teacherName_1q3i5_40",K9="_headerTitle_1q3i5_51",Y9="_subtitle_1q3i5_56",W9="_contextBar_1q3i5_69",X9="_contextItem_1q3i5_84",Z9="_contextLabel_1q3i5_92",J9="_vibrantAddBtn_1q3i5_102",eP="_liveRecordBtn_1q3i5_131",tP="_liveIcon_1q3i5_161",nP="_pulse_1q3i5_1",sP="_statsGrid_1q3i5_184",iP="_statCard_1q3i5_205",aP="_recorded_1q3i5_233",rP="_draft_1q3i5_239",oP="_approved_1q3i5_245",lP="_published_1q3i5_251",cP="_statIconWrapper_1q3i5_257",uP="_statInfo_1q3i5_276",dP="_statValue_1q3i5_284",hP="_statLabel_1q3i5_298",fP="_statBgIcon_1q3i5_312",mP="_loadingState_1q3i5_344",pP="_recentSection_1q3i5_351",gP="_recentHeader_1q3i5_366",_P="_recentTitle_1q3i5_380",yP="_viewAll_1q3i5_393",vP="_recentList_1q3i5_417",bP="_recentItem_1q3i5_423",EP="_recentItemIcon_1q3i5_442",TP="_recentItemContent_1q3i5_455",SP="_recentItemTitle_1q3i5_460",AP="_recentItemMeta_1q3i5_470",xP="_detailBadge_1q3i5_480",wP="_recentEmpty_1q3i5_490",IP="_emptyIllustration_1q3i5_501",RP="_floating_1q3i5_1",NP="_illustrationMain_1q3i5_533",CP="_illustrationFace_1q3i5_558",kP="_faceEye_1q3i5_563",jP="_illustrationLines_1q3i5_578",DP="_illuLine_1q3i5_593",OP="_illustrationSearch_1q3i5_607",MP="_emptyTitle_1q3i5_644",zP="_emptySubtitle_1q3i5_658",Et={page:$9,header:F9,greeting:G9,teacherName:Q9,headerTitle:K9,subtitle:Y9,contextBar:W9,contextItem:X9,contextLabel:Z9,vibrantAddBtn:J9,liveRecordBtn:eP,liveIcon:tP,pulse:nP,statsGrid:sP,statCard:iP,recorded:aP,draft:rP,approved:oP,published:lP,statIconWrapper:cP,statInfo:uP,statValue:dP,statLabel:hP,statBgIcon:fP,loadingState:mP,recentSection:pP,recentHeader:gP,recentTitle:_P,viewAll:yP,recentList:vP,recentItem:bP,recentItemIcon:EP,recentItemContent:TP,recentItemTitle:SP,recentItemMeta:AP,detailBadge:xP,recentEmpty:wP,emptyIllustration:IP,floating:RP,illustrationMain:NP,illustrationFace:CP,faceEye:kP,illustrationLines:jP,illuLine:DP,illustrationSearch:OP,emptyTitle:MP,emptySubtitle:zP},LP=()=>{const s=Ft(z=>z.user),e=Ft(z=>z.setUser),t=In(),[a,o]=w.useState([]),[l,d]=w.useState([]),[m,g]=w.useState(!0),[_,v]=w.useState("all"),[b,S]=w.useState(!1);w.useEffect(()=>{s?.assignedClasses?.length>0&&v("all")},[s]);const N=z=>{if(s){const G=[...s.assignedClasses||[],z];e({...s,assignedClasses:G}),_||v(z)}},M=z=>{if(s){const G=s.assignedClasses.filter(de=>de!==z);e({...s,assignedClasses:G}),_===z&&v(G[0]||"")}},P=(z,G)=>{if(s){const de=s.assignedClasses.map(X=>X===z?G:X);e({...s,assignedClasses:de}),_===z&&v(G)}};w.useEffect(()=>{(async()=>{if(s)try{g(!0);const[G,de]=await Promise.all([Xx(s.id),mm(s.id)]);o(G),d(de)}catch(G){console.error("Error fetching dashboard data:",G)}finally{g(!1)}})()},[s]);const j=w.useMemo(()=>!_||_==="all"?a:a.filter(z=>z.classId===_),[a,_]),B=w.useMemo(()=>!_||_==="all"?l:l.filter(z=>z.classId===_),[l,_]),H=[{icon:u.jsx(oo,{size:24}),label:"Kaytl Derslerim",value:j.filter(z=>z.status==="recorded").length.toString(),color:"recorded",path:`${ye.TEACHER.SESSIONS}?status=recorded`},{icon:u.jsx(dm,{size:24}),label:"Onay Bekleyenler",value:(B.filter(z=>z.status==="draft").length+j.filter(z=>z.status!=="transcribed"?!1:!l.some(de=>de.sessionId===z.id)).length).toString(),color:"draft",path:`${ye.TEACHER.SESSIONS}?status=draft`},{icon:u.jsx(fa,{size:24}),label:"Yayna Hazr",value:B.filter(z=>z.status==="approved").length.toString(),color:"approved",path:`${ye.TEACHER.SESSIONS}?status=approved`},{icon:u.jsx(fm,{size:24}),label:"Aktif Snav",value:B.filter(z=>z.status==="published").length.toString(),color:"published",path:`${ye.TEACHER.QUIZZES}?status=published`}];return m?u.jsx("div",{className:Et.page,children:u.jsxs("div",{className:Et.loadingState,children:[u.jsx(_s,{size:"lg"}),u.jsx("p",{children:"Dashboard ykleniyor..."})]})}):u.jsxs("div",{className:Et.page,children:[u.jsxs("div",{className:Et.header,children:[u.jsxs("div",{className:Et.headerTitle,children:[u.jsxs("h1",{className:Et.greeting,children:["Merhaba, ",u.jsx("span",{className:Et.teacherName,children:s?.displayName||"retmenim"})]}),u.jsx("p",{className:Et.subtitle,children:"te bugnk durumunuz ve son aktiviteleriniz."})]}),u.jsxs("div",{className:Et.contextBar,children:[u.jsxs("div",{className:Et.contextItem,children:[u.jsx("label",{className:Et.contextLabel,children:"KURUM SEN"}),u.jsx(Xs,{options:[{value:"enderun",label:"Enderun Koleji Merkez"}],value:"enderun",onChange:()=>{},icon:u.jsx(Jl,{size:18})})]}),u.jsxs("div",{className:Et.contextItem,children:[u.jsx("label",{className:Et.contextLabel,children:"AKTF SINIF"}),u.jsx(Xs,{options:[{value:"all",label:"Tm Snflar"},...s?.assignedClasses?.map(z=>({value:z,label:z}))||[]],value:_,onChange:z=>v(z),placeholder:"Snf Sein"})]}),u.jsx(ke,{variant:"primary",size:"md",leftIcon:u.jsx(hm,{size:20}),className:Et.vibrantAddBtn,onClick:()=>S(!0),children:"Snf Ekle"}),u.jsx(ke,{variant:"danger",size:"md",leftIcon:u.jsx(bz,{size:20,className:Et.liveIcon}),className:Et.liveRecordBtn,onClick:()=>t(ye.TEACHER.NEW_SESSION),children:"Canl Kayt Balat"})]})]}),u.jsx("div",{className:Et.statsGrid,children:H.map((z,G)=>u.jsxs("div",{className:`${Et.statCard} ${Et[z.color]}`,onClick:()=>t(z.path),children:[u.jsx("div",{className:Et.statIconWrapper,children:u.jsx("div",{className:Et.statIcon,children:z.icon})}),u.jsxs("div",{className:Et.statContent,children:[u.jsx("div",{className:Et.statValue,children:z.value}),u.jsx("div",{className:Et.statLabel,children:z.label})]}),u.jsx("div",{className:Et.statBgIcon,children:z.icon}),u.jsx("div",{className:Et.cardOverlay})]},G))}),u.jsx(nw,{isOpen:b,onClose:()=>S(!1),institutionName:"Enderun Koleji Merkez",existingClasses:s?.assignedClasses||[],onAddClass:N,onDeleteClass:M,onUpdateClass:P}),u.jsx(sw,{})]})},PP="_page_1f16f_3",VP="_header_1f16f_16",UP="_title_1f16f_23",BP="_teacherName_1f16f_30",qP="_headerTitle_1f16f_40",HP="_subtitle_1f16f_45",$P="_contextBar_1f16f_58",FP="_contextItem_1f16f_73",GP="_contextLabel_1f16f_81",QP="_sessionsList_1f16f_149",KP="_sessionItem_1f16f_155",YP="_quizItem_1f16f_168",WP="_sessionIcon_1f16f_199",XP="_quizIcon_1f16f_200",ZP="_sessionInfo_1f16f_212",JP="_sessionTitle_1f16f_219",eV="_sessionMeta_1f16f_226",tV="_badge_1f16f_235",nV="_badgeRecorded_1f16f_246",sV="_badgeTranscribed_1f16f_251",iV="_badgeDraft_1f16f_256",aV="_badgeApproved_1f16f_261",rV="_badgePublished_1f16f_266",oV="_menuBtn_1f16f_271",lV="_menuDropdown_1f16f_282",cV="_menuItem_1f16f_295",uV="_menuItemDanger_1f16f_314",dV="_statusWrapper_1f16f_318",hV="_sessionRight_1f16f_325",fV="_emptyState_1f16f_347",Me={page:PP,header:VP,title:UP,teacherName:BP,headerTitle:qP,subtitle:HP,contextBar:$P,contextItem:FP,contextLabel:GP,sessionsList:QP,sessionItem:KP,quizItem:YP,sessionIcon:WP,quizIcon:XP,sessionInfo:ZP,sessionTitle:JP,sessionMeta:eV,badge:tV,badgeRecorded:nV,badgeTranscribed:sV,badgeDraft:iV,badgeApproved:aV,badgePublished:rV,menuBtn:oV,menuDropdown:lV,menuItem:cV,menuItemDanger:uV,statusWrapper:dV,sessionRight:hV,emptyState:fV},mV={recorded:"Kaytl",transcribing:"Yazya Dklyor...",transcribed:"Analiz Edildi",processing:"leniyor...",draft:"Onay Bekliyor",approved:"Yayna Hazr",published:"Yaynland",assignment_generated:"dev Oluturuldu",completed:"Tamamland"},pT=s=>{if(!s)return"-";const e=s.toDate?s.toDate():new Date(s);return new Intl.DateTimeFormat("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)},pV=s=>{switch(s){case"recorded":return Me.badgeRecorded;case"transcribed":return Me.badgeTranscribed;case"draft":return Me.badgeDraft;case"approved":return Me.badgeApproved;case"published":return Me.badgePublished;case"processing":case"transcribing":return Me.badgeProcessing;default:return Me.badgeDefault}},gV=s=>{switch(s){case"recorded":return Me.itemRecorded;case"transcribed":return Me.itemTranscribed;case"draft":return Me.itemDraft;case"approved":return Me.itemApproved;case"published":return Me.itemPublished;default:return""}},_V=()=>{const s=In(),e=Ft(A=>A.user),t=Ft(A=>A.setUser),a=xn(A=>A.addToast),[o,l]=w.useState([]),[d,m]=w.useState([]),[g,_]=w.useState(!0),[v]=w.useState(""),[b,S]=w.useState(null),N=qn(),[M,P]=w.useState("all"),[j,B]=w.useState(!1),[H,z]=w.useState("all"),[G,de]=w.useState(null);w.useEffect(()=>{const pe=new URLSearchParams(N.search).get("status");pe&&["recorded","transcribed","draft","approved"].includes(pe)?z(pe):z("all")},[N.search]),w.useEffect(()=>{e?.assignedClasses?.length>0&&P("all")},[e]);const X=A=>{if(e){const pe=[...e.assignedClasses||[],A];t({...e,assignedClasses:pe}),M||P(A)}},k=A=>{if(e){const pe=e.assignedClasses.filter(Re=>Re!==A);t({...e,assignedClasses:pe}),M===A&&P(pe[0]||"")}},I=(A,pe)=>{if(e){const Re=e.assignedClasses.map(Z=>Z===A?pe:Z);t({...e,assignedClasses:Re}),M===A&&P(pe)}};w.useEffect(()=>{(async()=>{if(e)try{_(!0);const[pe,Re]=await Promise.all([Xx(e.id),mm(e.id)]);l(pe),m(Re)}catch(pe){console.error("Error loading data:",pe),a({type:"error",title:"Hata",message:"Veriler yklenemedi."})}finally{_(!1)}})()},[e,a]);const C=[...o.map(A=>({...A,type:"session"})),...d.map(A=>({...A,type:"quiz"}))].sort((A,pe)=>{const Re=A.createdAt?.toDate?A.createdAt.toDate():new Date(A.createdAt||0);return(pe.createdAt?.toDate?pe.createdAt.toDate():new Date(pe.createdAt||0)).getTime()-Re.getTime()}),L=C.filter(A=>{if(A.type==="quiz"&&A.status==="published"||A.type==="session"&&A.status==="transcribed"&&d.some(ge=>ge.sessionId===A.id))return!1;const pe=!M||M==="all"||A.classId===M;return!(A.title.toLowerCase().includes(v.toLowerCase())||A.type==="session"&&A.subject?.toLowerCase().includes(v.toLowerCase())||A.type==="quiz"&&A.subject?.toLowerCase().includes(v.toLowerCase()))||!pe?!1:H==="all"?!0:H==="recorded"?A.status==="recorded":H==="draft"?A.status==="draft"||A.status==="transcribed":H==="approved"?A.status==="approved":H==="published"?A.status==="published":!0}),D=(A,pe)=>{A.stopPropagation();const Re=C.find(Z=>Z.id===pe);Re&&(de({id:Re.id,type:Re.type,title:Re.title}),S(null))},U=async()=>{if(!G)return;const{id:A,type:pe}=G;try{pe==="session"?(await Zx(A),l(Re=>Re.filter(Z=>Z.id!==A))):(await ew(A),m(Re=>Re.filter(Z=>Z.id!==A))),a({type:"success",title:"Baarl",message:"Silme ilemi tamamland."})}catch{a({type:"error",title:"Hata",message:"Silme ilemi baarsz oldu."})}finally{de(null)}};return w.useEffect(()=>{const A=()=>S(null);return document.addEventListener("click",A),()=>document.removeEventListener("click",A)},[]),u.jsxs("div",{className:Me.page,children:[u.jsxs("div",{className:Me.header,children:[u.jsxs("div",{className:Me.headerTitle,children:[u.jsxs("h1",{className:Me.title,children:["Merhaba, ",u.jsx("span",{className:Me.teacherName,children:e?.displayName||"retmenim"})]}),u.jsx("p",{className:Me.subtitle,children:"te bugnk durumunuz ve son aktiviteleriniz."})]}),u.jsxs("div",{className:Me.contextBar,children:[u.jsxs("div",{className:Me.contextItem,children:[u.jsx("label",{className:Me.contextLabel,children:"KURUM SEN"}),u.jsx(Xs,{options:[{value:"enderun",label:"Enderun Koleji Merkez"}],value:"enderun",onChange:()=>{},icon:u.jsx(Jl,{size:18})})]}),u.jsxs("div",{className:Me.contextItem,children:[u.jsx("label",{className:Me.contextLabel,children:"AKTF SINIF"}),u.jsx(Xs,{options:[{value:"all",label:"Tm Snflar"},...e?.assignedClasses?.map(A=>({value:A,label:A}))||[]],value:M,onChange:A=>P(A),placeholder:"Snf Sein"})]}),u.jsxs("div",{className:Me.contextItem,children:[u.jsx("label",{className:Me.contextLabel,children:"DURUM FLTRES"}),u.jsx(Xs,{options:[{value:"all",label:"Hepsi"},{value:"recorded",label:"Kaytl"},{value:"draft",label:"Onay Bekliyor"},{value:"approved",label:"Yayna Hazr"}],value:H,onChange:A=>z(A),placeholder:"Durum Sein"})]})]})]}),g?u.jsx("div",{className:Me.emptyState,children:u.jsx(_s,{size:"lg"})}):L.length===0?u.jsxs("div",{className:Me.emptyState,children:[u.jsx("div",{style:{color:"var(--color-text-tertiary)",marginBottom:"16px"},children:u.jsx(oo,{size:48,strokeWidth:1})}),u.jsx("h3",{children:"Henz bir aktivite yok"}),u.jsx("p",{children:"Yeni bir ders kayd balatarak veya snav oluturarak balayabilirsiniz."}),u.jsx("div",{style:{display:"flex",gap:"12px",justifyContent:"center",marginTop:"20px"},children:u.jsx(ke,{variant:"ghost",onClick:()=>s(ye.TEACHER.NEW_SESSION),leftIcon:u.jsx(oo,{size:20}),children:"Yeni Kayt"})})]}):u.jsx("div",{className:Me.sessionsList,children:L.map(A=>u.jsxs("div",{className:`${A.type==="quiz"?Me.quizItem:Me.sessionItem} ${gV(A.status)}`,onClick:()=>s(A.type==="quiz"?`${ye.TEACHER.QUIZZES}/${A.id}`:`${ye.TEACHER.SESSIONS}/${A.id}`),children:[u.jsxs("div",{className:A.type==="quiz"?Me.quizIcon:Me.sessionIcon,"data-icon-wrapper":!0,children:[A.status==="recorded"&&u.jsx(oo,{size:20,className:Me.icon}),A.status==="transcribed"&&u.jsx(cd,{size:20,className:Me.icon}),A.status==="draft"&&u.jsx(dm,{size:20,className:Me.icon}),A.status==="approved"&&u.jsx(fa,{size:20,className:Me.icon}),A.status==="published"&&u.jsx(fm,{size:20,className:Me.icon}),!["recorded","transcribed","draft","approved","published"].includes(A.status)&&(A.type==="quiz"?u.jsx(od,{size:20}):u.jsx(oo,{size:20,className:Me.icon}))]}),u.jsxs("div",{className:Me.sessionInfo,children:[u.jsx("div",{className:Me.sessionTitle,children:A.title.includes("-")?A.title.split("-").slice(1).join("-").trim():A.title}),u.jsx("div",{className:Me.sessionMeta,children:A.type==="session"?u.jsxs(u.Fragment,{children:[u.jsx("span",{children:A.subject||(A.title.includes("-")?A.title.split("-")[0].trim():"Genel")}),u.jsx("span",{children:"  "}),u.jsx("span",{children:pT(A.createdAt)})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:A.subject||(A.title.includes("-")?A.title.split("-")[0].trim():"Genel")}),u.jsx("span",{children:"  "}),u.jsx("span",{children:pT(A.createdAt)}),u.jsx("span",{children:"  "}),u.jsxs("span",{children:[A.questions?.length||0," Soru"]})]})}),u.jsx("div",{className:Me.statusWrapper,children:u.jsx("span",{className:`${Me.badge} ${pV(A.status)}`,children:mV[A.status]})})]}),u.jsxs("div",{className:Me.sessionRight,children:[A.status==="transcribed"&&u.jsx(ke,{variant:"ghost",size:"sm",className:Me.actionBtnTranscribed,onClick:pe=>{pe.stopPropagation(),s(`${ye.TEACHER.SESSIONS}/${A.id}`)},rightIcon:u.jsx(hf,{size:16}),children:"ncele"}),A.status==="draft"&&u.jsx(ke,{variant:"ghost",size:"sm",className:Me.actionBtnPrimary,onClick:pe=>{pe.stopPropagation(),s(`${ye.TEACHER.QUIZZES}/${A.id}`)},rightIcon:u.jsx(hf,{size:16}),children:"Onayla"}),A.status==="approved"&&u.jsx(ke,{variant:"ghost",size:"sm",className:Me.actionBtnSuccess,onClick:pe=>{pe.stopPropagation(),s(`${ye.TEACHER.QUIZZES}/${A.id}`)},rightIcon:u.jsx(hf,{size:16}),children:"Yaynla"}),A.status==="published"&&u.jsx(ke,{variant:"ghost",size:"sm",className:Me.actionBtnGhost,onClick:pe=>{pe.stopPropagation(),s(`${ye.TEACHER.QUIZZES}/${A.id}/results`)},children:"Sonular"}),u.jsxs("div",{style:{position:"relative"},onClick:pe=>pe.stopPropagation(),children:[u.jsx("button",{className:Me.menuBtn,onClick:()=>S(b===A.id?null:A.id),children:u.jsx(Ux,{size:20})}),b===A.id&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{position:"fixed",inset:0,zIndex:99},onClick:()=>S(null)}),u.jsxs("div",{className:Me.menuDropdown,children:[u.jsx("button",{className:Me.menuItem,onClick:()=>s(A.type==="quiz"?`${ye.TEACHER.QUIZZES}/${A.id}`:`${ye.TEACHER.SESSIONS}/${A.id}`),children:A.type==="quiz"?"Dzenle":"Grntle"}),u.jsx("button",{className:`${Me.menuItem} ${Me.menuItemDanger}`,onClick:pe=>D(pe,A.id),children:"Sil"})]})]})]})]})]},A.id))}),u.jsx(nw,{isOpen:j,onClose:()=>B(!1),institutionName:"Enderun Koleji Merkez",existingClasses:e?.assignedClasses||[],onAddClass:X,onDeleteClass:k,onUpdateClass:I}),u.jsx(Ly,{isOpen:!!G,onClose:()=>de(null),onConfirm:U,title:G?.type==="session"?"Analizi Sil":"Snav Sil",message:`${G?.title} ${G?.type==="session"?"analizini":"snavn"} ve tm verilerini silmek istediinize emin misiniz?`,confirmText:"Sil",isLoading:g})]})},yV="enderunlala_recordings",vV=1,gr="audio_chunks",_r="recording_meta",ud=()=>new Promise((s,e)=>{const t=indexedDB.open(yV,vV);t.onerror=()=>e(t.error),t.onsuccess=()=>s(t.result),t.onupgradeneeded=a=>{const o=a.target.result;o.objectStoreNames.contains(gr)||o.createObjectStore(gr,{keyPath:"id",autoIncrement:!0}),o.objectStoreNames.contains(_r)||o.createObjectStore(_r,{keyPath:"key"})}}),bV=async s=>{if(s.length===0)return;const e=await ud(),t=e.transaction(gr,"readwrite"),a=t.objectStore(gr);for(const o of s)a.add({data:o,timestamp:Date.now()});return new Promise((o,l)=>{t.oncomplete=()=>{e.close(),o()},t.onerror=()=>{e.close(),l(t.error)}})},EV=async s=>{const e=await ud(),t=e.transaction(_r,"readwrite");return t.objectStore(_r).put({key:"current",...s}),new Promise((a,o)=>{t.oncomplete=()=>{e.close(),a()},t.onerror=()=>{e.close(),o(t.error)}})},T_=async()=>{const s=await ud(),a=s.transaction(gr,"readonly").objectStore(gr).getAll();return new Promise((o,l)=>{a.onsuccess=()=>{s.close();const d=a.result||[];o(d.map(m=>m.data))},a.onerror=()=>{s.close(),l(a.error)}})},iw=async()=>{const s=await ud(),a=s.transaction(_r,"readonly").objectStore(_r).get("current");return new Promise((o,l)=>{a.onsuccess=()=>{s.close(),o(a.result?{duration:a.result.duration,startedAt:a.result.startedAt}:null)},a.onerror=()=>{s.close(),l(a.error)}})},Vg=async()=>{const s=await ud(),e=s.transaction([gr,_r],"readwrite");return e.objectStore(gr).clear(),e.objectStore(_r).clear(),new Promise((t,a)=>{e.oncomplete=()=>{s.close(),t()},e.onerror=()=>{s.close(),a(e.error)}})},TV=async()=>{try{return await iw()?(await T_()).length>0:!1}catch{return!1}},SV=1e3,AV=3e4,xV=5e3,wV=()=>{const[s,e]=w.useState({isRecording:!1,isPaused:!1,duration:0,audioBlob:null,audioUrl:null,error:null,hasRecovery:!1,chunksSaved:0,isRecovering:!1}),t=w.useRef(null),a=w.useRef([]),o=w.useRef([]),l=w.useRef(null),d=w.useRef(null),m=w.useRef(null),g=w.useRef(null),_=w.useRef(null),v=w.useRef(null),b=w.useRef(0),S=w.useRef(0);w.useEffect(()=>{(async()=>{try{await TV()&&e(A=>({...A,hasRecovery:!0}))}catch{}})()},[]),w.useEffect(()=>{const D=U=>{if(s.isRecording||s.audioBlob)return U.preventDefault(),""};return window.addEventListener("beforeunload",D),()=>window.removeEventListener("beforeunload",D)},[s.isRecording,s.audioBlob]),w.useEffect(()=>()=>{d.current&&clearInterval(d.current),m.current&&clearInterval(m.current),g.current&&clearInterval(g.current),l.current&&l.current.getTracks().forEach(D=>D.stop()),_.current&&_.current.close().catch(()=>{})},[]);const N=w.useCallback(async()=>{if(o.current.length===0)return;const D=[...o.current];o.current=[];try{await bV(D),b.current+=D.length,e(U=>({...U,chunksSaved:b.current}))}catch(U){console.error("[AudioRecorder] IndexedDB flush error:",U),o.current=[...D,...o.current]}},[]),M=w.useCallback(async()=>{try{await EV({duration:S.current,startedAt:Date.now()-S.current*1e3})}catch(D){console.error("[AudioRecorder] Meta save error:",D)}},[]),P=w.useCallback(()=>{d.current=setInterval(()=>{S.current+=1,e(D=>({...D,duration:D.duration+1}))},1e3)},[]),j=w.useCallback(()=>{d.current&&(clearInterval(d.current),d.current=null)},[]),B=w.useCallback(()=>{m.current=setInterval(()=>{N()},AV),g.current=setInterval(()=>{M()},xV)},[N,M]),H=w.useCallback(()=>{m.current&&(clearInterval(m.current),m.current=null),g.current&&(clearInterval(g.current),g.current=null)},[]),z=w.useCallback(async()=>{try{s.audioUrl&&URL.revokeObjectURL(s.audioUrl),a.current=[],o.current=[],b.current=0,S.current=0,await Vg().catch(()=>{});const D=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});l.current=D,_.current=new AudioContext,v.current=_.current.createAnalyser(),v.current.fftSize=256,_.current.createMediaStreamSource(D).connect(v.current);let A="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(A)||(A="audio/webm",MediaRecorder.isTypeSupported(A)||(A=""));const pe=new MediaRecorder(D,{...A?{mimeType:A}:{}});t.current=pe,pe.ondataavailable=Re=>{Re.data.size>0&&(a.current.push(Re.data),o.current.push(Re.data))},pe.onstop=async()=>{await N().catch(()=>{}),await M().catch(()=>{});let Re;try{const Ae=await T_();Re=Ae.length>0?Ae:a.current}catch{Re=a.current}const Z=new Blob(Re,{type:pe.mimeType||"audio/webm"}),ge=URL.createObjectURL(Z);e(Ae=>({...Ae,isRecording:!1,isPaused:!1,audioBlob:Z,audioUrl:ge})),l.current&&l.current.getTracks().forEach(Ae=>Ae.stop()),a.current=[],o.current=[]},pe.start(SV),P(),B(),e(Re=>({...Re,isRecording:!0,isPaused:!1,duration:0,audioBlob:null,audioUrl:null,error:null,hasRecovery:!1,chunksSaved:0}))}catch(D){console.error("[AudioRecorder] Recording start error:",D);let U="Ses kayd balatlamad.";D.name==="NotAllowedError"?U="Mikrofon eriimi reddedildi. Ltfen tarayc ayarlarndan izin verin.":D.name==="NotFoundError"?U="Mikrofon bulunamad. Ltfen bir mikrofon balayn.":D.name==="NotReadableError"?U="Mikrofon baka bir uygulama tarafndan kullanlyor.":D.name==="OverconstrainedError"&&(U="Mikrofon istenen zellikleri desteklemiyor. Farkl bir mikrofon deneyin."),e(A=>({...A,error:`${U} (${D.name||D.message})`}))}},[s.audioUrl,P,B,N,M]),G=w.useCallback(()=>{t.current&&t.current.state!=="inactive"&&(t.current.stop(),j(),H())},[j,H]),de=w.useCallback(()=>{t.current&&s.isRecording&&!s.isPaused&&(t.current.pause(),j(),N().catch(()=>{}),M().catch(()=>{}),e(D=>({...D,isPaused:!0})))},[s.isRecording,s.isPaused,j,N,M]),X=w.useCallback(()=>{t.current&&s.isRecording&&s.isPaused&&(t.current.resume(),P(),e(D=>({...D,isPaused:!1})))},[s.isRecording,s.isPaused,P]),k=w.useCallback(async()=>{s.audioUrl&&URL.revokeObjectURL(s.audioUrl),await Vg().catch(()=>{}),a.current=[],o.current=[],b.current=0,S.current=0,e({isRecording:!1,isPaused:!1,duration:0,audioBlob:null,audioUrl:null,error:null,hasRecovery:!1,chunksSaved:0,isRecovering:!1})},[s.audioUrl]),I=w.useCallback(async()=>{e(D=>({...D,isRecovering:!0,error:null}));try{const[D,U]=await Promise.all([T_(),iw()]);if(D.length===0){e(Z=>({...Z,isRecovering:!1,hasRecovery:!1,error:"Kurtarlacak kayt bulunamad."}));return}const A=new Blob(D,{type:"audio/webm"}),pe=URL.createObjectURL(A),Re=U?.duration||Math.floor(D.length);e(Z=>({...Z,isRecovering:!1,hasRecovery:!1,audioBlob:A,audioUrl:pe,duration:Re,isRecording:!1,isPaused:!1})),console.log(`[AudioRecorder] Recovered ${D.length} chunks, ~${Re}s`)}catch(D){console.error("[AudioRecorder] Recovery error:",D),e(U=>({...U,isRecovering:!1,error:"Kayt kurtarlrken hata olutu."}))}},[]),C=w.useCallback(async()=>{await Vg().catch(()=>{}),e(D=>({...D,hasRecovery:!1}))},[]),L=w.useCallback(()=>v.current,[]);return{...s,startRecording:z,stopRecording:G,pauseRecording:de,resumeRecording:X,resetRecording:k,recoverRecording:I,dismissRecovery:C,getAnalyserNode:L}},IV="_controls_dcy2o_3",RV="_recordBtn_dcy2o_9",NV="_recordingControls_dcy2o_20",CV="_postRecordingControls_dcy2o_46",Xh={controls:IV,recordBtn:RV,recordingControls:NV,postRecordingControls:CV},kV=({isRecording:s,isPaused:e,hasRecording:t,isUploading:a=!1,onStart:o,onStop:l,onPause:d,onResume:m,onReset:g,onSave:_})=>u.jsxs("div",{className:Xh.controls,children:[!s&&!t&&u.jsx(ke,{variant:"primary",size:"lg",onClick:o,leftIcon:u.jsx(oo,{size:20}),className:Xh.recordBtn,children:"Kayda Bala"}),s&&u.jsxs("div",{className:Xh.recordingControls,children:[e?u.jsx(ke,{variant:"primary",size:"lg",onClick:m,leftIcon:u.jsx($x,{size:20}),children:"Devam Et"}):u.jsx(ke,{variant:"secondary",size:"lg",onClick:d,leftIcon:u.jsx(Hx,{size:20}),children:"Duraklat"}),u.jsx(ke,{variant:"danger",size:"lg",onClick:l,leftIcon:u.jsx(jz,{size:20}),children:"Durdur"})]}),t&&!s&&u.jsxs("div",{className:Xh.postRecordingControls,children:[u.jsx(ke,{variant:"ghost",size:"lg",onClick:g,leftIcon:u.jsx(Gx,{size:20}),children:"Yeniden Kaydet"}),u.jsx(ke,{variant:"primary",size:"lg",onClick:_,leftIcon:u.jsx(Qx,{size:20}),isLoading:a,children:"Kaydet"})]})]}),jV="_timer_1j709_1",DV="_recording_1j709_12",OV="_paused_1j709_17",MV="_indicator_1j709_22",zV="_dot_1j709_37",LV="_time_1j709_1",PV="_status_1j709_65",so={timer:jV,recording:DV,paused:OV,indicator:MV,dot:zV,time:LV,status:PV},VV=({duration:s,isRecording:e,isPaused:t})=>{const a=o=>{const l=Math.floor(o/3600),d=Math.floor(o%3600/60),m=o%60;return l>0?`${l.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`:`${d.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`};return u.jsxs("div",{className:`${so.timer} ${e?so.recording:""} ${t?so.paused:""}`,children:[u.jsxs("div",{className:so.indicator,children:[e&&!t&&u.jsx("span",{className:so.dot}),u.jsx(Zl,{size:20})]}),u.jsx("span",{className:so.time,children:a(s)}),e&&u.jsx("span",{className:so.status,children:t?"Duraklatld":"Kayt yaplyor..."})]})},UV="_page_1todg_1",BV="_topNav_1todg_13",qV="_backBtn_1todg_21",HV="_headerClassSelect_1todg_44",$V="_pageTitle_1todg_57",FV="_mainContainer_1todg_81",GV="_recorderCard_1todg_101",QV="_visualizerContainer_1todg_126",KV="_micCircle_1todg_136",YV="_recording_1todg_150",WV="_pulseCircles_1todg_156",XV="_pulse1_1todg_165",ZV="_pulse2_1todg_166",JV="_timerWrapper_1todg_198",eU="_timerDisplay_1todg_206",tU="_timerHint_1todg_214",nU="_actionsWrapper_1todg_222",sU="_mainRecordBtn_1todg_232",iU="_recordDot_1todg_245",aU="_orDivider_1todg_269",rU="_uploadZone_1todg_287",oU="_uploadIconBox_1todg_305",lU="_uploadText_1todg_317",cU="_guideSection_1todg_330",uU="_guideHeader_1todg_334",dU="_guideTitle_1todg_339",hU="_iconCircle_1todg_349",fU="_steps_1todg_353",mU="_step_1todg_353",pU="_stepNumber_1todg_374",gU="_stepTitle_1todg_388",_U="_stepDesc_1todg_395",yU="_featureGrid_1todg_401",vU="_featureItem_1todg_408",bU="_featureIcon_1todg_420",EU="_pageFooter_1todg_426",TU="_recoveryBanner_1todg_437",SU="_offlineBanner_1todg_438",AU="_errorBox_1todg_439",Oe={page:UV,topNav:BV,backBtn:qV,headerClassSelect:HV,pageTitle:$V,mainContainer:FV,recorderCard:GV,visualizerContainer:QV,micCircle:KV,recording:YV,pulseCircles:WV,pulse1:XV,pulse2:ZV,timerWrapper:JV,timerDisplay:eU,timerHint:tU,actionsWrapper:nU,mainRecordBtn:sU,recordDot:iU,orDivider:aU,uploadZone:rU,uploadIconBox:oU,uploadText:lU,guideSection:cU,guideHeader:uU,guideTitle:dU,iconCircle:hU,steps:fU,step:mU,stepNumber:pU,stepTitle:gU,stepDesc:_U,featureGrid:yU,featureItem:vU,featureIcon:bU,pageFooter:EU,recoveryBanner:TU,offlineBanner:SU,errorBox:AU},xU=()=>{const s=In(),e=Ft(O=>O.user),t=xn(O=>O.addToast),[a,o]=w.useState(!1),[l,d]=w.useState(null),[m,g]=w.useState(null),[_,v]=w.useState(navigator.onLine),b=w.useRef(null),S=w.useRef(null),N=w.useRef(null),[M,P]=w.useState("all");w.useEffect(()=>{e?.assignedClasses?.length>0&&P(e.assignedClasses[0])},[e]);const{isRecording:j,isPaused:B,duration:H,audioBlob:z,audioUrl:G,error:de,hasRecovery:X,isRecovering:k,startRecording:I,stopRecording:C,pauseRecording:L,resumeRecording:D,resetRecording:U,recoverRecording:A,dismissRecovery:pe}=wV();w.useEffect(()=>{const O=()=>{v(!0),b.current&&l?.state==="paused"&&(b.current.resume(),t({type:"info",title:"Balant Geldi",message:"Ykleme devam ettiriliyor..."}))},Y=()=>{v(!1),b.current&&l?.state==="running"&&(b.current.pause(),t({type:"warning",title:"Balant Kesildi",message:"Ykleme duraklatld. Balant gelince devam edecek."}))};return window.addEventListener("online",O),window.addEventListener("offline",Y),()=>{window.removeEventListener("online",O),window.removeEventListener("offline",Y)}},[l?.state,t]);const Re=async(O,Y)=>{if(e){o(!0),g(null),d(null),S.current=O;try{let F=Y;F||(F=await p9(e.id,{title:`Ders Kayd - ${new Date().toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}`,duration:H||0,classId:M}),N.current=F);const{controller:oe}=await g9(F,O,me=>{d(me)});b.current=oe,t({type:"success",title:"Kayt Yklendi!",message:"AI imdi ses kaydnz analiz edecek."}),S.current=null,N.current=null,b.current=null,s(`${ye.TEACHER.SESSIONS}/${F}`)}catch(F){console.error("[NewSession] Upload error:",F),g(F.message||"Ykleme baarsz. Ltfen tekrar deneyin.")}finally{o(!1)}}},Z=async()=>{!z||!e||await Re(z)},ge=async O=>{const Y=O.target.files?.[0];if(!(!Y||!e)){if(!Y.type.startsWith("audio/")){t({type:"warning",title:"Uyar",message:"Ltfen geerli bir ses dosyas sein."});return}await Re(Y)}},Ae=async()=>{const O=S.current||z;if(!O){t({type:"error",title:"Hata",message:"Yeniden yklenecek kayt bulunamad."});return}await Re(O,N.current||void 0)},Fe=()=>{b.current&&(b.current.cancel(),b.current=null),o(!1),d(null),g(null)},ue=O=>{if(O===0)return"0 B";const Y=1024,F=["B","KB","MB","GB"],oe=Math.floor(Math.log(O)/Math.log(Y));return parseFloat((O/Math.pow(Y,oe)).toFixed(1))+" "+F[oe]};return u.jsxs("div",{className:Oe.page,children:[u.jsxs("div",{className:Oe.topNav,children:[u.jsxs("button",{onClick:()=>s(ye.TEACHER.SESSIONS),className:Oe.backBtn,children:[u.jsx(Ws,{size:18})," Geri Dn"]}),u.jsx("h1",{className:Oe.pageTitle,children:"Yeni Ders Kayd"}),u.jsxs("div",{className:Oe.headerClassSelect,children:[u.jsx("label",{children:"SINIF:"}),u.jsx(Xs,{options:[{value:"all",label:"Tm Snflar"},...e?.assignedClasses?.map(O=>({value:O,label:O}))||[]],value:M,onChange:O=>P(O)})]})]}),u.jsxs("main",{className:Oe.mainContainer,children:[u.jsxs("section",{className:Oe.recorderCard,children:[X&&!j&&!z&&u.jsxs("div",{className:Oe.recoveryBanner,children:[u.jsx(So,{size:20,color:"#2563eb"}),u.jsxs("div",{className:Oe.recoveryText,children:[u.jsx("strong",{children:"Kaydedilmemi kayt bulundu!"}),u.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[u.jsx(ke,{variant:"primary",size:"sm",onClick:A,isLoading:k,children:"Kurtar"}),u.jsx(ke,{variant:"ghost",size:"sm",onClick:pe,children:"Sil"})]})]})]}),!_&&u.jsxs("div",{className:Oe.offlineBanner,children:[u.jsx(Wz,{size:20,color:"#d97706"}),u.jsx("span",{children:"nternet balants yok. Kayt yerel olarak korunuyor."})]}),(de||m)&&u.jsxs("div",{className:Oe.errorBox,children:[u.jsx(So,{size:20,color:"#dc2626"}),u.jsx("span",{children:de||m}),!a&&m&&u.jsx(ke,{size:"sm",variant:"ghost",onClick:Ae,style:{marginLeft:"auto"},children:u.jsx(Fx,{size:14})})]}),u.jsxs("div",{className:`${Oe.visualizerContainer} ${j?Oe.recording:""}`,children:[u.jsxs("div",{className:Oe.pulseCircles,children:[u.jsx("div",{className:Oe.pulse1}),u.jsx("div",{className:Oe.pulse2})]}),u.jsx("div",{className:`${Oe.micCircle} ${j?Oe.recording:""}`,children:u.jsx(oo,{size:44})})]}),u.jsxs("div",{className:Oe.timerWrapper,children:[u.jsx("div",{className:Oe.timerDisplay,children:u.jsx(VV,{duration:H,isRecording:j,isPaused:B})}),u.jsx("p",{className:Oe.timerHint,children:j?"Kayt Devam Ediyor":B?"Kayt Durduruldu":"Balamak iin butona dokun"})]}),u.jsxs("div",{className:Oe.actionsWrapper,children:[G&&!j&&u.jsxs("div",{style:{width:"100%",marginBottom:"4px"},children:[u.jsx("audio",{controls:!0,src:G,style:{width:"100%",height:"44px",borderRadius:"12px"}}),z&&u.jsxs("div",{style:{fontSize:"12px",color:"#94A3B8",textAlign:"center",marginTop:"4px",fontWeight:600},children:["Boyut: ",ue(z.size)]})]}),!a&&u.jsx("div",{style:{width:"100%"},children:!j&&!z?u.jsxs(ke,{variant:"primary",size:"lg",className:Oe.mainRecordBtn,onClick:I,children:[u.jsx("span",{className:Oe.recordDot}),"Kayda Bala"]}):u.jsx(kV,{isRecording:j,isPaused:B,hasRecording:!!z,isUploading:a,onStart:I,onStop:C,onPause:L,onResume:D,onReset:U,onSave:Z})}),a&&l&&u.jsxs("div",{className:Oe.uploadBox,style:{width:"100%"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px",fontSize:"15px",fontWeight:800},children:[u.jsx("span",{style:{color:"var(--color-primary)"},children:l.percent<100?"Buluta Aktarlyor...":"Analiz Hazrlanyor..."}),u.jsxs("span",{children:["%",l.percent]})]}),u.jsx("div",{style:{height:"10px",background:"var(--color-bg-light)",borderRadius:"10px",overflow:"hidden",border:"1px solid var(--color-border)"},children:u.jsx("div",{style:{height:"100%",background:"linear-gradient(90deg, var(--color-primary) 0%, #ec4899 100%)",width:`${l.percent}%`,transition:"width 0.4s cubic-bezier(0.1, 0.7, 0.1, 1)"}})}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"12px",fontSize:"13px",color:"var(--color-text-tertiary)",fontWeight:700},children:[u.jsxs("span",{children:[ue(l.bytesTransferred)," / ",ue(l.totalBytes)]}),u.jsx("button",{onClick:Fe,style:{border:"none",background:"none",color:"#EF4444",fontWeight:800,cursor:"pointer",fontSize:"13px"},children:"ptali Durdur"})]})]}),!j&&!z&&!a&&!X&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:Oe.orDivider,children:"VEYA"}),u.jsxs("div",{className:Oe.uploadZone,onClick:()=>document.getElementById("audio-upload")?.click(),children:[u.jsx("input",{type:"file",id:"audio-upload",accept:"audio/*",hidden:!0,onChange:ge}),u.jsx("div",{className:Oe.uploadIconBox,children:u.jsx(Hz,{size:22})}),u.jsxs("div",{className:Oe.uploadText,children:[u.jsx("strong",{children:"Dosya Ykle"}),u.jsx("p",{children:"Cihaznzdaki bir kayd sein"})]})]})]})]})]}),u.jsxs("section",{className:Oe.guideSection,children:[u.jsx("div",{className:Oe.guideHeader,children:u.jsxs("h2",{className:Oe.guideTitle,children:[u.jsx(dT,{size:20,className:Oe.iconCircle})," retim Sreci Nasl alr?"]})}),u.jsxs("div",{className:Oe.steps,children:[u.jsxs("div",{className:Oe.step,children:[u.jsx("div",{className:Oe.stepNumber,children:"01"}),u.jsxs("div",{className:Oe.stepContent,children:[u.jsx("h3",{className:Oe.stepTitle,children:"Dersinizi Kaydedin"}),u.jsx("p",{className:Oe.stepDesc,children:"Mikrofonunuzu an ve dersi normal aknda anlatn. Biz arka planda her eyi yksek kalitede kaydedelim."})]})]}),u.jsxs("div",{className:Oe.step,children:[u.jsx("div",{className:Oe.stepNumber,children:"02"}),u.jsxs("div",{className:Oe.stepContent,children:[u.jsx("h3",{className:Oe.stepTitle,children:"Yapay Zeka Dntrsn"}),u.jsx("p",{className:Oe.stepDesc,children:"Kayt bittikten saniyeler sonra yapay zekamz u ilemleri gerekletirir:"}),u.jsxs("div",{className:Oe.featureGrid,children:[u.jsxs("div",{className:Oe.featureItem,children:[u.jsx(od,{size:14,className:Oe.featureIcon}),u.jsx("span",{children:"Yazya Dkme"})]}),u.jsxs("div",{className:Oe.featureItem,children:[u.jsx(cd,{size:14,className:Oe.featureIcon}),u.jsx("span",{children:"Ders zeti"})]}),u.jsxs("div",{className:Oe.featureItem,children:[u.jsx(dT,{size:14,className:Oe.featureIcon}),u.jsx("span",{children:"Ana Balklar"})]}),u.jsxs("div",{className:Oe.featureItem,children:[u.jsx(Ll,{size:14,className:Oe.featureIcon}),u.jsx("span",{children:"Snav Oluturma"})]})]})]})]})]})]})]}),u.jsx("footer",{className:Oe.pageFooter,children:"Enderunlala AI  Akll renme Platformu"})]})},dd="AIzaSyC4uLXTp0j-C25n1ZkoSV7K-QWhs2_BVDw",hd="https://generativelanguage.googleapis.com/v1beta/models",wU=async s=>new Promise((e,t)=>{const a=new FileReader;a.onloadend=()=>{const o=a.result.split(",")[1];e(o)},a.onerror=t,a.readAsDataURL(s)}),IU=async s=>{const t=await(await fetch(s)).blob(),a=await wU(t),o=t.type||"audio/webm",l=await fetch(`${hd}/gemini-flash-latest:generateContent?key=${dd}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{inline_data:{mime_type:o,data:a}},{text:`Bu bir snf ortamnda yaplm ders kayddr. Ltfen bu ses kaydn Trke olarak yazya dk.

Kurallar:
1. retmenin anlattklarn ana metin olarak yaz
2. renci sorular veya yorumlar varsa [renci: ...] eklinde belirt
3. Anlalmayan ksmlar [anlalmyor] olarak iaretle
4. Grlt veya alakasz sesler iin [grlt] yaz
5. Konumac deiikliklerini paragraflarla ayr

Sadece transkripti yaz, yorum ekleme.`}]}],generationConfig:{temperature:.1,topP:.8,maxOutputTokens:8192}})}),d=await l.json();if(!l.ok)throw new Error(d.error?.message||`Transkripsiyon baarsz (Kod: ${l.status})`);const m=d.candidates?.[0]?.content?.parts?.[0]?.text||"";return{text:m,segments:RU(m),language:"tr",confidence:.85}},RU=s=>s.split(`

`).filter(t=>t.trim()).map((t,a)=>{const o=t.includes("[renci:");return{startTime:a*30,endTime:(a+1)*30,text:t.trim(),speaker:o?"student":"teacher"}}),NU=async s=>{const e=await fetch(`${hd}/gemini-flash-latest:generateContent?key=${dd}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`Aadaki ders transkriptini analiz et ve JSON formatnda yant ver.

TRANSKRIPT:
${s}

u bilgileri kar:
1. title: Dersin ksa ve aklayc bal (max 60 karakter)
2. subject: Ders ad (Matematik, Fizik, Tarih, vb.)
3. summary: Derste anlatlanlarn 2-3 cmlelik zeti
4. keyTopics: Derste ilenen ana konular listesi (max 5 madde)
5. keyConcepts: rencilerin renmesi gereken kavramlar (her biri iin term, definition, importance)
6. gradeLevel: Tahmini snf seviyesi (rn: "9. snf", "Lise")

SADECE JSON dndr, baka aklama ekleme. Format:
{
  "title": "...",
  "subject": "...",
  "summary": "...",
  "keyTopics": ["...", "..."],
  "keyConcepts": [
    {"term": "...", "definition": "...", "importance": "high|medium|low"}
  ],
  "gradeLevel": "..."
}`}]}],generationConfig:{temperature:.3,topP:.9,maxOutputTokens:2048}})}),t=await e.json();if(!e.ok)throw new Error(t.error?.message||`Analiz baarsz (Kod: ${e.status})`);const o=(t.candidates?.[0]?.content?.parts?.[0]?.text||"{}").match(/\{[\s\S]*\}/),l=JSON.parse(o?o[0]:"{}");return{title:l.title||"simsiz Ders",subject:l.subject||"Genel",summary:l.summary||"",keyTopics:l.keyTopics||[],keyConcepts:l.keyConcepts||[],duration:0,gradeLevel:l.gradeLevel}},CU=async(s,e,t={})=>{const{questionCount:a=10,difficulty:o="medium",questionTypes:l=["multiple_choice","true_false"]}=t,d=await fetch(`${hd}/gemini-flash-latest:generateContent?key=${dd}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`Aadaki ders ieriine dayal, RENCNN KONUYU KAVRAMASINI SALAYACAK pedagojik bir snav olutur.

DERS BLGS:
Konu: ${e.subject}
Balk: ${e.title}
zet: ${e.summary}
Anahtar Kavramlar: ${e.keyConcepts.map(S=>S.term).join(", ")}

TRANSKRIPT:
${s.substring(0,4e3)}...

NEML KURALLAR:
1. Sen bir retmensin ve amacn rencinin konuyu renip renmediini lmek.
2. ASLA "Bu derste ne anlatld?", "retmenin amac nedir?", "Derste hangi rnek verildi?" gibi derse dardan bakan meta-sorular sorma.
3. Sorular dorudan konunun kendisine, kavramlara ve uygulama alanlarna odaklanmal (rn: "Mitoz blnmenin evreleri nelerdir?", "Verilen denklemde X katr?").
4. Sorular 'Sen' diliyle veya dorudan bilgi sorusu olarak sor.
5. Bloom taksonomisine gre "Bilgi", "Kavrama" ve "Uygulama" dzeyinde sorular ret.

SINAV GEREKSNMLER:
- Soru says: ${a}
- Zorluk: ${o} (easy=kolay, medium=orta, hard=zor)
- Soru tipleri: ${l.join(", ")}

Her soru iin format kurallar:
1. multiple_choice: 4 k, 1 doru cevap. klar eldirici ve mantkl olmal.
2. true_false: Kesin yarg bildiren cmleler kullan.

JSON formatnda dndr:
{
  "questions": [
    {
      "id": "q1",
      "type": "multiple_choice", (veya true_false)
      "question": "Soru metni...",
      "options": [{"id": "opt1", "text": "...", "isCorrect": true}], (Sadece oktan semeli iin)
      "correctAnswer": true, (Sadece doru/yanl iin)
      "explanation": "renci yanl yaparsa konuyu retecek aklayc geri bildirim.",
      "points": 10,
      "relatedConcept": "lgili anahtar kavram"
    }
  ],
  "difficulty": "${o}",
  "estimatedTime": 15
}

SADECE JSON dndr.`}]}],generationConfig:{temperature:.7,topP:.9,maxOutputTokens:4096}})}),m=await d.json();if(!d.ok)throw new Error(m.error?.message||`Quiz oluturulamad (Kod: ${d.status})`);const _=(m.candidates?.[0]?.content?.parts?.[0]?.text||"{}").match(/\{[\s\S]*\}/),v=JSON.parse(_?_[0]:'{"questions":[]}');return{questions:(v.questions||[]).map(S=>{const N=tc(),M={...S,id:N,createdAt:new Date,updatedAt:new Date,points:S.points||10,difficulty:S.difficulty||o};return S.type==="multiple_choice"&&(M.options=Array.isArray(S.options)?S.options.map((P,j)=>typeof P=="string"?{id:`opt_${j}`,text:P,isCorrect:j===Number(S.correctAnswer)}:{...P,id:P.id||`opt_${j}`}):[]),M}),difficulty:v.difficulty||o,estimatedTime:v.estimatedTime||15}},kU=async(s,e)=>{e?.("Ses kayd yazya dklyor...",10);const t=await IU(s);e?.("Transkript tamamland",40),e?.("Ders ierii analiz ediliyor...",50);const a=await NU(t.text);e?.("Analiz tamamland",70),e?.("Quiz sorular oluturuluyor...",80);const o=await CU(t.text,a);return e?.("lem tamamland!",100),{transcript:t,analysis:a,quiz:o}},jU=async s=>{const{topic:e,questionCount:t,difficulty:a,questionTypes:o,additionalInstructions:l}=s,d=`
    Aadaki konu ve kriterlere gre, RENCNN KONUYU KAVRAMASINI SALAYACAK pedagojik bir snav olutur.
    
    KONU:
    ${e}
    
    KRTERLER:
    - Soru Says: ${t}
    - Zorluk Seviyesi: ${a} (easy=kolay, medium=orta, hard=zor)
    - Soru Tipleri: ${o.join(", ")}
    ${l?`- Ek Talimatlar: ${l}`:""}

    NEML KURALLAR:
    1. Sen bir snav hazrlayan retmensin. Meta-sorular (rn: "Bu konuda ne anlatlr?") sorma.
    2. Dorudan konuyu, formlleri, tarihleri veya neden-sonu ilikilerini sor.
    3. Sorular net, anlalr ve eitim mfredatna uygun olmal.
    4. "multiple_choice" sorularnda yanl klar (eldiriciler) mantkl olmal, bariz hatal olmamal.
    5. Sadece multiple_choice ve true_false tiplerini kullan.
    
    IKTI FORMATI (JSON Array):
    Her soru aadaki TypeScript arayzne uygun olmaldr. "id" alann bo brakabilirsin, ben dolduracam.
    
    TPLER:
    1. multiple_choice:
       {
         type: "multiple_choice",
         question: "Soru metni",
         points: 10,
         difficulty: "${a}",
         explanation: "Aklama",
         options: [
           { id: "opt1", text: "Seenek 1", isCorrect: false },
           { id: "opt2", text: "Seenek 2", isCorrect: true },
           ...
         ]
       }
       
    2. true_false:
       {
         type: "true_false",
         question: "Soru metni",
         points: 10,
         difficulty: "${a}",
         explanation: "Aklama",
         correctAnswer: true // veya false
       }

    SADECE JSON ARRAY DNDR. Baka metin ekleme.
    `;try{const m=await fetch(`${hd}/gemini-flash-latest:generateContent?key=${dd}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:d}]}],generationConfig:{temperature:.7,topP:.9,maxOutputTokens:8192}})}),g=await m.json().catch(()=>({}));if(!m.ok)throw new Error(g.error?.message||`AI servisi hata dndrd (Kod: ${m.status})`);const v=(g.candidates?.[0]?.content?.parts?.[0]?.text||"[]").match(/\[[\s\S]*\]/);return JSON.parse(v?v[0]:"[]").map(S=>{const N={...S,id:tc(),createdAt:new Date,updatedAt:new Date,points:S.points||10};return S.type==="multiple_choice"&&S.options&&(N.options=S.options.map((M,P)=>({...M,id:M.id||`opt_${P}`}))),N})}catch(m){throw console.error("AI Generation Error:",m),m}},DU=async s=>{const{question:e,errorMessage:t,instructions:a}=s,o=`
    Aadaki soru verisini incele ve belirtilen ynergelere gre DZELT veya YLETR.

    GRD SORUSU (JSON):
    ${JSON.stringify(e,null,2)}

    ${t?`HATA MESAJI (Bunu dzelt): ${t}`:""}
    ${a?`YNERGE (Buna gre iyiletir): ${a}`:"Bu soruyu daha net, anlalr ve pedagojik olarak daha kaliteli hale getir. klar glendir, aklamay detaylandr."}

    GREVLER:
    1. Eer JSON yaps bozuksa veya hatalysa (rn: options string gelmise), dzelt.
    2. Eer "multiple_choice" ise ve "options" string dizisi ise, nesne dizisine ({id, text, isCorrect}) evir.
    3. Eer veriler eksikse (rn: puan, zorluk), mantkl varsaylanlarla doldur.
    4. Soru metnini ve klar dilbilgisi asndan dzelt.
    5. "explanation" (aklama) alann eitici ve detayl hale getir.

    IKTI FORMATI (JSON):
    SADECE dzeltilmi/iyiletirilmi soru objesini (JSON) dndr. Baka hibir metin ekleme.
    {
      "id": "...",
      "type": "...",
      "question": "...",
      ...
    }
    `;try{const l=await fetch(`${hd}/gemini-flash-latest:generateContent?key=${dd}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:o}]}],generationConfig:{temperature:.3,topP:.8,maxOutputTokens:2048}})}),d=await l.json().catch(()=>({}));if(!l.ok)throw new Error(d.error?.message||`AI iyiletirme baarsz (Kod: ${l.status})`);const g=(d.candidates?.[0]?.content?.parts?.[0]?.text||"{}").match(/\{[\s\S]*\}/),_=JSON.parse(g?g[0]:"{}");return{..._,id:e.id||_.id||tc(),points:Number(_.points)||10}}catch(l){throw console.error("AI Improvement Error:",l),l}},OU="_page_1ssdo_5",MU="_navRow_1ssdo_71",zU="_backLink_1ssdo_79",LU="_titleRow_1ssdo_117",PU="_title_1ssdo_117",VU="_deleteBtn_1ssdo_175",UU="_metaRow_1ssdo_217",BU="_subjectBadge_1ssdo_233",qU="_badgeRecorded_1ssdo_257",HU="_badgeTranscribed_1ssdo_269",$U="_badgeCompleted_1ssdo_293",FU="_badgeDefault_1ssdo_329",GU="_dateMeta_1ssdo_339",QU="_playerCard_1ssdo_359",KU="_playButton_1ssdo_403",YU="_playerContent_1ssdo_451",WU="_playerLabel_1ssdo_465",XU="_waveformContainer_1ssdo_483",ZU="_waveformBar_1ssdo_499",JU="_active_1ssdo_513",eB="_paused_1ssdo_521",tB="_playerRight_1ssdo_549",nB="_unifiedCard_1ssdo_589",sB="_unifiedHeader_1ssdo_607",iB="_headerIcon_1ssdo_625",aB="_headerText_1ssdo_645",rB="_unifiedBody_1ssdo_671",oB="_analysisSection_1ssdo_695",lB="_sectionTag_1ssdo_705",cB="_lessonTitle_1ssdo_725",uB="_tagsValues_1ssdo_741",dB="_tagItem_1ssdo_753",hB="_tagLabel_1ssdo_765",fB="_tagValue_1ssdo_779",mB="_summaryBlock_1ssdo_797",pB="_label_1ssdo_809",gB="_verticalDivider_1ssdo_843",_B="_quizSection_1ssdo_873",yB="_quizStatsGrid_1ssdo_889",vB="_quizStat_1ssdo_889",bB="_qValue_1ssdo_927",EB="_qLabel_1ssdo_941",TB="_actionArea_1ssdo_955",SB="_primaryActionBtn_1ssdo_963",AB="_startCard_1ssdo_1125",xB="_processingCard_1ssdo_1127",wB="_errorCard_1ssdo_1129",IB="_startIcon_1ssdo_1167",ve={page:OU,navRow:MU,backLink:zU,titleRow:LU,title:PU,deleteBtn:VU,metaRow:UU,subjectBadge:BU,badgeRecorded:qU,badgeTranscribed:HU,badgeCompleted:$U,badgeDefault:FU,dateMeta:GU,playerCard:QU,playButton:KU,playerContent:YU,playerLabel:WU,waveformContainer:XU,waveformBar:ZU,active:JU,paused:eB,playerRight:tB,unifiedCard:nB,unifiedHeader:sB,headerIcon:iB,headerText:aB,unifiedBody:rB,analysisSection:oB,sectionTag:lB,lessonTitle:cB,tagsValues:uB,tagItem:dB,tagLabel:hB,tagValue:fB,summaryBlock:mB,label:pB,verticalDivider:gB,quizSection:_B,quizStatsGrid:yB,quizStat:vB,qValue:bB,qLabel:EB,actionArea:TB,primaryActionBtn:SB,startCard:AB,processingCard:xB,errorCard:wB,startIcon:IB},RB=()=>{const{id:s}=Fu(),e=In(),t=xn(F=>F.addToast),a=Ft(F=>F.user),[o,l]=w.useState(!1),[d,m]=w.useState(null),[g,_]=w.useState(!0),[v,b]=w.useState("idle"),[S,N]=w.useState(0),[M,P]=w.useState(""),[j,B]=w.useState(!1),[H,z]=w.useState(null),[G,de]=w.useState(null),[X,k]=w.useState(!1),I=w.useRef(null),[C,L]=w.useState(0),[D,U]=w.useState(0),A=()=>{I.current&&L(I.current.currentTime)},pe=()=>{I.current&&U(I.current.duration)},Re=()=>{I.current&&(X?I.current.pause():I.current.play(),k(!X))},Z=F=>{if(isNaN(F))return"00:00";const oe=Math.floor(F/60),me=Math.floor(F%60);return`${oe.toString().padStart(2,"0")}:${me.toString().padStart(2,"0")}`};w.useEffect(()=>{(async()=>{if(s)try{const oe=await zf(s);m(oe),oe?.analysisResults?(z(oe.analysisResults.analysis),de(oe.analysisResults.quiz),b("completed")):(oe?.status==="transcribed"||oe?.status==="completed")&&b("completed")}catch(oe){console.error("Error loading session:",oe),t({type:"error",title:"Hata",message:"Analiz yklenemedi."})}finally{_(!1)}})()},[s,t]);const ge=w.useCallback(async()=>{if(!d?.audioUrl){t({type:"error",title:"Hata",message:"Ses kayd bulunamad."});return}b("transcribing");try{const F=await kU(d.audioUrl,(me,he)=>{P(me),N(he),he<40?b("transcribing"):he<70?b("analyzing"):he<100&&b("generating")});z(F.analysis),de(F.quiz),b("completed"),await _9(d.id,{title:F.analysis.title,subject:F.analysis.subject,status:"transcribed",analysisResults:{transcript:F.transcript,analysis:F.analysis,quiz:F.quiz}});const oe=await zf(d.id);m(oe),t({type:"success",title:"lem Tamamland!",message:"Ders kaydnz analiz edildi ve quiz tasla oluturuldu."})}catch(F){console.error("Processing error:",F),b("error"),t({type:"error",title:"lem Baarsz",message:F.message||"AI analizi srasnda bir hata olutu."})}},[d,t]),Ae=async()=>{if(!(!G||!a||!H))try{l(!0);const F=G.questions.map(he=>{const Ne={id:tc(),question:he.question,points:he.points,explanation:he.explanation,difficulty:"medium",createdAt:new Date,updatedAt:new Date};return he.type==="multiple_choice"?{...Ne,type:fs.MULTIPLE_CHOICE,options:he.options?.map((ce,fe)=>({id:ce.id||`opt_${fe}`,text:typeof ce=="string"?ce:ce.text||"",isCorrect:typeof ce=="object"?ce.isCorrect:fe===Number(he.correctAnswer)}))||[]}:he.type==="true_false"?{...Ne,type:fs.TRUE_FALSE,correctAnswer:he.correctAnswer}:Ne}),oe={title:`${H.subject} - ${H.title} Snav`,description:H.summary,questions:F,settings:Py,totalPoints:sr(F),estimatedDuration:lo(F),difficulty:G.difficulty,subject:H.subject,sessionId:d?.id,status:"draft",isPublic:!1},me=await Jx(a.id,oe);t({type:"success",title:"Baarl",message:"Quiz tasla dzenleme iin oluturuldu."}),e(T6(ye.TEACHER.QUIZ_EDIT,{id:me.id}))}catch(F){console.error("Error creating quiz:",F),t({type:"error",title:"Hata",message:"Quiz oluturulamad."})}finally{l(!1)}},Fe=()=>{const F=[{key:"transcribing",label:"Yazya Dkme",icon:od},{key:"analyzing",label:"Analiz",icon:uT},{key:"generating",label:"Quiz Oluturma",icon:Uu}],oe=F.findIndex(me=>me.key===v);return u.jsxs("div",{className:ve.processingStatus,children:[u.jsxs("div",{className:ve.processingHeader,children:[u.jsx("div",{className:ve.processingIconWrapper,children:u.jsx(Ll,{size:32,color:"#9333EA"})}),u.jsx("h3",{className:ve.processingTitle,children:"AI Analiz Ediliyor"})]}),u.jsxs("div",{className:ve.progressContainer,children:[u.jsxs("div",{className:ve.progressLabel,children:[u.jsx("span",{children:M}),u.jsxs("span",{children:["%",S]})]}),u.jsx("div",{className:ve.progressBar,children:u.jsx("div",{className:ve.progressFill,style:{width:`${S}%`}})})]}),u.jsx("div",{className:ve.stepTimeline,children:F.map((me,he)=>{const Ne=me.icon,ce=me.key===v,fe=he<oe||v==="completed";return u.jsxs("div",{className:`${ve.stepItem} ${ce?ve.active:""} ${fe?ve.completed:""}`,children:[u.jsx("div",{className:ve.stepIcon,children:fe?u.jsx(fa,{size:24}):u.jsx(Ne,{size:24})}),u.jsx("span",{className:ve.stepLabel,children:me.label})]},me.key)})})]})},ue=()=>!H||!G?null:u.jsx("div",{className:ve.results,children:u.jsxs("div",{className:ve.unifiedCard,children:[u.jsxs("div",{className:ve.unifiedHeader,children:[u.jsx("div",{className:ve.headerIcon,children:u.jsx(Ll,{size:24,color:"#7C3AED"})}),u.jsxs("div",{className:ve.headerText,children:[u.jsx("h2",{children:"Ders Analizi ve Snav Plan"}),u.jsx("p",{children:"Yapay zeka tarafndan oluturulan ders zeti ve snav tasla."})]})]}),u.jsxs("div",{className:ve.unifiedBody,children:[u.jsxs("div",{className:ve.analysisSection,children:[u.jsx("span",{className:ve.sectionTag,children:"DERS BLGLER"}),u.jsx("h3",{className:ve.lessonTitle,children:H.title}),u.jsxs("div",{className:ve.tagsValues,children:[u.jsxs("div",{className:ve.tagItem,children:[u.jsx("span",{className:ve.tagLabel,children:"DERS"}),u.jsx("span",{className:ve.tagValue,children:H.subject})]}),H.gradeLevel&&u.jsxs("div",{className:ve.tagItem,children:[u.jsx("span",{className:ve.tagLabel,children:"SEVYE"}),u.jsx("span",{className:ve.tagValue,children:H.gradeLevel})]})]}),u.jsxs("div",{className:ve.summaryBlock,children:[u.jsx("span",{className:ve.label,children:"ZET"}),u.jsx("p",{children:H.summary})]})]}),u.jsx("div",{className:ve.verticalDivider}),u.jsxs("div",{className:ve.quizSection,children:[u.jsx("span",{className:ve.sectionTag,children:"SINAV TASLAI"}),u.jsxs("div",{className:ve.quizStatsGrid,children:[u.jsxs("div",{className:ve.quizStat,children:[u.jsx("span",{className:ve.qValue,children:G.questions.length}),u.jsx("span",{className:ve.qLabel,children:"SORU"})]}),u.jsxs("div",{className:ve.quizStat,children:[u.jsx("span",{className:ve.qValue,children:G.estimatedTime}),u.jsx("span",{className:ve.qLabel,children:"DAKKA"})]}),u.jsxs("div",{className:ve.quizStat,children:[u.jsx("span",{className:ve.qValue,children:G.difficulty==="easy"?"Kolay":G.difficulty==="medium"?"Orta":"Zor"}),u.jsx("span",{className:ve.qLabel,children:"ZORLUK"})]})]}),u.jsx("div",{className:ve.actionArea,children:u.jsx(ke,{className:ve.primaryActionBtn,leftIcon:u.jsx(pz,{size:18}),onClick:Ae,disabled:o,isLoading:o,children:"Sorular Dzenle ve Snav Olutur"})})]})]})]})}),O=async()=>{d&&B(!0)},Y=async()=>{if(d)try{await Zx(d.id),t({type:"success",title:"Baarl",message:"Analiz silindi."}),e(ye.TEACHER.SESSIONS)}catch(F){console.error("Error deleting session:",F),t({type:"error",title:"Hata",message:"Analiz silinemedi."})}finally{B(!1)}};return g?u.jsx("div",{className:ve.loadingState,children:u.jsx(_s,{size:"lg"})}):d?u.jsxs("div",{className:ve.page,children:[u.jsx("div",{className:ve.navRow,children:u.jsxs("button",{onClick:()=>e(ye.TEACHER.SESSIONS),className:ve.backLink,children:[u.jsx(Ws,{size:20})," Geri Dn"]})}),u.jsxs("div",{className:ve.titleRow,children:[u.jsx("h1",{className:ve.title,children:H?.title||d.title||"Ders Kayd"}),u.jsx("button",{className:ve.deleteBtn,onClick:O,children:u.jsx(ld,{size:20})})]}),u.jsxs("div",{className:ve.metaRow,children:[u.jsx("span",{className:`${ve.subjectBadge} ${d.status==="recorded"?ve.badgeRecorded:d.status==="transcribed"?ve.badgeTranscribed:d.status==="completed"?ve.badgeCompleted:ve.badgeDefault}`,style:{marginRight:"8px"},children:d.status==="recorded"?"KAYITLI":d.status==="transcribed"?"ANALZ EDLD":d.status==="completed"?"TAMAMLANDI":d.status.toUpperCase()}),u.jsx("span",{className:ve.subjectBadge,children:H?.subject||d.subject||"GENEL"}),u.jsxs("span",{className:ve.dateMeta,children:[u.jsx(rd,{size:16}),d.createdAt&&new Date(d.createdAt.toDate?d.createdAt.toDate():d.createdAt).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),d.audioUrl&&u.jsxs("div",{className:ve.playerCard,children:[u.jsx("button",{className:ve.playButton,onClick:Re,children:X?u.jsx(Hx,{size:32,fill:"white"}):u.jsx($x,{size:32,fill:"white"})}),u.jsxs("div",{className:ve.playerContent,children:[u.jsx("span",{className:ve.playerLabel,children:"DERS KAYDI"}),u.jsx("div",{className:ve.waveformContainer,children:Array.from({length:40}).map((F,oe)=>u.jsx("div",{className:`${ve.waveformBar} ${X?ve.active:""} ${X?"":ve.paused}`,style:{height:`${Math.max(30,Math.random()*100)}%`,animationDelay:`${oe*.05}s`}},oe))})]}),u.jsx("div",{className:ve.playerRight,children:u.jsxs("span",{style:{minWidth:"100px",textAlign:"right"},children:[Z(C)," / ",Z(D)]})}),u.jsx("audio",{ref:I,src:d.audioUrl,onTimeUpdate:A,onLoadedMetadata:pe,onEnded:()=>k(!1),style:{display:"none"}})]}),v==="idle"&&d.status==="recorded"&&!H&&u.jsx("div",{className:`${ve.startCard} ios-card`,children:u.jsxs("div",{className:ve.startContent,children:[u.jsx("div",{className:ve.startIcon,children:u.jsx(Ll,{size:40})}),u.jsx("h2",{children:"AI Analiz"}),u.jsx("p",{children:"Ses kaydnz yklendi. imdi AI ile analiz ederek ders ieriini, anahtar kavramlar ve quiz sorularn otomatik oluturun."}),u.jsx(ke,{variant:"primary",size:"lg",onClick:ge,leftIcon:u.jsx(uT,{size:20}),style:{width:"100%"},children:"AI Analizi Balat"})]})}),v!=="idle"&&v!=="completed"&&v!=="error"&&u.jsx("div",{className:`${ve.processingCard} ios-card`,children:Fe()}),v==="error"&&u.jsxs("div",{className:`${ve.errorCard} ios-card`,children:[u.jsx(So,{size:48,className:ve.errorIcon}),u.jsx("h2",{children:"lem Baarsz"}),u.jsx("p",{children:"AI analizi srasnda bir hata olutu. Ltfen tekrar deneyin."}),u.jsx(ke,{variant:"primary",onClick:ge,leftIcon:u.jsx(Fx,{size:18}),children:"Tekrar Dene"})]}),(v==="completed"||H)&&ue(),u.jsx(Ly,{isOpen:j,onClose:()=>B(!1),onConfirm:Y,title:"Analizi Sil",message:"Bu analizi ve ilikili tm verileri silmek istediinize emin misiniz? Bu ilem geri alnamaz.",confirmText:"Sil",isLoading:g})]}):u.jsxs("div",{className:ve.errorState,children:[u.jsx(So,{size:48}),u.jsx("h2",{children:"Analiz Bulunamad"}),u.jsx(ke,{variant:"primary",onClick:()=>e(ye.TEACHER.SESSIONS),children:"AI Analizlere Dn"})]})},NB="_editorActions_1adg5_25",CB="_removeButton_1adg5_53",kB="_mcEditor_1adg5_108",jB="_optionsList_1adg5_114",DB="_optionItem_1adg5_120",OB="_optionLabel_1adg5_126",MB="_selected_1adg5_148",zB="_optionInput_1adg5_155",LB="_correct_1adg5_180",PB="_addOptionBtn_1adg5_185",VB="_tfEditor_1adg5_195",UB="_tfLabel_1adg5_201",BB="_tfOptions_1adg5_208",qB="_tfButton_1adg5_213",HB="_tfIcon_1adg5_244",ln={editorActions:NB,removeButton:CB,mcEditor:kB,optionsList:jB,optionItem:DB,optionLabel:OB,selected:MB,optionInput:zB,correct:LB,addOptionBtn:PB,tfEditor:VB,tfLabel:UB,tfOptions:BB,tfButton:qB,tfIcon:HB},$B=({question:s,onChange:e,readOnly:t=!1})=>{const a=w.useRef({}),o=v=>{v&&(v.style.height="auto",v.style.height=v.scrollHeight+"px")};w.useLayoutEffect(()=>{s.options.forEach(v=>{o(a.current[v.id])})},[s.options]);const l=(v,b)=>{if(t)return;const S=s.options.map(N=>N.id===v?{...N,...b}:N);e({options:S})},d=v=>{if(!t)if(s.allowMultiple){const b=s.options.map(S=>S.id===v?{...S,isCorrect:!S.isCorrect}:S);e({options:b})}else{const b=s.options.map(S=>({...S,isCorrect:S.id===v}));e({options:b})}},m=()=>{if(t)return;const v={id:`opt_${Date.now()}`,text:"",isCorrect:!1};e({options:[...s.options,v]})},g=v=>{if(t||s.options.length<=2)return;const b=s.options.filter(S=>S.id!==v);e({options:b})},_=["A","B","C","D","E","F","G","H"];return u.jsxs("div",{className:ln.mcEditor,children:[u.jsx("div",{className:ln.optionsList,children:s.options.map((v,b)=>u.jsxs("div",{className:`${ln.optionItem} ${v.isCorrect?ln.correct:""}`,children:[u.jsx("button",{type:"button",className:`${ln.optionLabel} ${v.isCorrect?ln.selected:""}`,onClick:()=>d(v.id),disabled:t,title:v.isCorrect?"Doru cevap":"Doru cevap olarak iaretle",children:v.isCorrect?u.jsx(To,{size:18}):_[b]}),u.jsx("textarea",{ref:S=>{a.current[v.id]=S},value:v.text,onChange:S=>l(v.id,{text:S.target.value}),placeholder:`${_[b]} kk...`,className:ln.optionInput,readOnly:t,rows:1}),!t&&u.jsx("button",{type:"button",onClick:()=>g(v.id),className:ln.removeButton,disabled:s.options.length<=2,title:"kk sil",children:u.jsx(ld,{size:18})})]},v.id))}),!t&&u.jsx("div",{className:ln.editorActions,children:u.jsx(ke,{variant:"ghost",size:"sm",leftIcon:u.jsx(hm,{size:18}),onClick:m,disabled:s.options.length>=8,className:ln.addOptionBtn,children:"k Ekle"})})]})},FB=({question:s,onChange:e,readOnly:t=!1})=>{const a=o=>{t||e({correctAnswer:o})};return u.jsxs("div",{className:ln.tfEditor,children:[!t&&u.jsx("p",{className:ln.tfLabel,children:"Doru cevab sein:"}),u.jsxs("div",{className:ln.tfOptions,children:[u.jsxs("button",{type:"button",className:`${ln.tfButton} ${s.correctAnswer===!0?ln.selected:""}`,onClick:()=>a(!0),disabled:t,children:[u.jsx("span",{className:ln.tfIcon,children:""}),"DORU"]}),u.jsxs("button",{type:"button",className:`${ln.tfButton} ${s.correctAnswer===!1?ln.selected:""}`,onClick:()=>a(!1),disabled:t,children:[u.jsx("span",{className:ln.tfIcon,children:""}),"YANLI"]})]})]})},GB="_editor_1je92_3",QB="_field_1je92_10",KB="_fieldHeader_1je92_16",YB="_label_1je92_22",WB="_questionInput_1je92_56",XB="_readOnly_1je92_78",ZB="_noteBox_1je92_85",JB="_purple_1je92_95",e7="_noteTextarea_1je92_100",us={editor:GB,field:QB,fieldHeader:KB,label:YB,questionInput:WB,readOnly:XB,noteBox:ZB,purple:JB,noteTextarea:e7},t7=({question:s,onChange:e,readOnly:t=!1})=>{const a=w.useRef(null),o=w.useRef(null),l=m=>{m&&(m.style.height="auto",m.style.height=m.scrollHeight+"px")};w.useLayoutEffect(()=>{l(a.current),l(o.current)},[s.question,s.explanation]);const d=()=>{switch(s.type){case fs.MULTIPLE_CHOICE:return u.jsx($B,{question:s,onChange:e,readOnly:t});case fs.TRUE_FALSE:return u.jsx(FB,{question:s,onChange:e,readOnly:t});default:return u.jsx("div",{children:"Bilinmeyen soru tipi"})}};return u.jsxs("div",{className:`${us.editor} ${t?us.readOnly:""}`,children:[u.jsxs("div",{className:us.field,children:[u.jsx("div",{className:us.fieldHeader,children:u.jsx("label",{className:us.label,children:"SORU METN *"})}),t?u.jsx("div",{className:us.questionInput,style:{whiteSpace:"pre-wrap",border:"none",padding:0},children:s.question||"Soru metni belirtilmemi."}):u.jsx("textarea",{ref:a,value:s.question,onChange:m=>e({question:m.target.value}),placeholder:"Sorunuzu buraya yazn...",className:us.questionInput,rows:1})]}),u.jsx("div",{className:us.typeEditor,children:d()}),u.jsxs("div",{className:`${us.noteBox} ${us.purple}`,children:[u.jsx("label",{className:us.label,children:"AIKLAMA (CEVAP SONRASI GSTERLR)"}),t?u.jsx("div",{className:us.noteTextarea,style:{whiteSpace:"pre-wrap",border:"none",padding:0},children:s.explanation||"Aklama belirtilmemi."}):u.jsx("textarea",{ref:o,value:s.explanation||"",onChange:m=>e({explanation:m.target.value}),placeholder:"Bu sorunun cevabn aklayn...",className:us.noteTextarea,rows:1})]})]})},n7="_editor_100vb_3",s7="_stickyHeader_100vb_15",i7="_headerTop_100vb_31",a7="_headerActions_100vb_46",r7="_titleArea_100vb_52",o7="_titleTextarea_100vb_56",l7="_metaInfo_100vb_81",c7="_statusBadge_100vb_90",u7="_draft_100vb_98",d7="_approved_100vb_103",h7="_published_100vb_108",f7="_dot_100vb_113",m7="_metaStat_100vb_117",p7="_previewBtn_100vb_129",g7="_saveActionBtn_100vb_147",_7="_workflowBtn_100vb_170",y7="_workflowBtnPrimary_100vb_171",v7="_descriptionRow_100vb_201",b7="_descTextarea_100vb_206",E7="_questionsList_100vb_219",T7="_questionCard_100vb_226",S7="_expanded_100vb_235",A7="_questionHeader_100vb_240",x7="_questionLeft_100vb_249",w7="_dragHandle_100vb_258",I7="_qIdentifier_100vb_270",R7="_qMainContent_100vb_276",N7="_qNumber_100vb_284",C7="_qType_100vb_297",k7="_multiple_choice_100vb_306",j7="_true_false_100vb_311",D7="_fill_blank_100vb_316",O7="_open_ended_100vb_321",M7="_matching_100vb_326",z7="_qTextPreview_100vb_331",L7="_questionRight_100vb_348",P7="_qActions_100vb_363",V7="_qActionBtn_100vb_374",U7="_expandCircle_100vb_398",B7="_active_100vb_410",q7="_questionContent_100vb_416",H7="_slideDown_100vb_1",$7="_addSection_100vb_436",F7="_addBtnContainer_100vb_443",G7="_mainAddBtn_100vb_449",Q7="_typeMenu_100vb_470",K7="_springMenu_100vb_1",Y7="_decisionMenu_100vb_497",W7="_decisionItem_100vb_503",X7="_decisionIcon_100vb_522",Z7="_aiIcon_100vb_535",J7="_decisionText_100vb_540",e8="_menuHeader_100vb_558",t8="_backBtn_100vb_573",n8="_manualMenu_100vb_591",s8="_typeMenuItem_100vb_596",i8="_typeDot_100vb_618",a8="_aiMenu_100vb_633",r8="_aiInputWrapper_100vb_637",o8="_aiTopicInput_100vb_644",l8="_aiGenerateBtn_100vb_663",c8="_aiTypeSelector_100vb_670",u8="_aiLabel_100vb_677",d8="_aiTypeList_100vb_686",h8="_typeMenuItemActive_100vb_691",be={editor:n7,stickyHeader:s7,headerTop:i7,headerActions:a7,titleArea:r7,titleTextarea:o7,metaInfo:l7,statusBadge:c7,draft:u7,approved:d7,published:h7,dot:f7,metaStat:m7,previewBtn:p7,saveActionBtn:g7,workflowBtn:_7,workflowBtnPrimary:y7,descriptionRow:v7,descTextarea:b7,questionsList:E7,questionCard:T7,expanded:S7,questionHeader:A7,questionLeft:x7,dragHandle:w7,qIdentifier:I7,qMainContent:R7,qNumber:N7,qType:C7,multiple_choice:k7,true_false:j7,fill_blank:D7,open_ended:O7,matching:M7,qTextPreview:z7,questionRight:L7,qActions:P7,qActionBtn:V7,delete:"_delete_100vb_393",expandCircle:U7,active:B7,questionContent:q7,slideDown:H7,addSection:$7,addBtnContainer:F7,mainAddBtn:G7,typeMenu:Q7,springMenu:K7,decisionMenu:Y7,decisionItem:W7,decisionIcon:X7,aiIcon:Z7,decisionText:J7,menuHeader:e8,backBtn:t8,manualMenu:n8,typeMenuItem:s8,typeDot:i8,aiMenu:a8,aiInputWrapper:r8,aiTopicInput:o8,aiGenerateBtn:l8,aiTypeSelector:c8,aiLabel:u8,aiTypeList:d8,typeMenuItemActive:h8},f8=({quiz:s,onSave:e,onPreview:t,onPublish:a,onApprove:o,isLoading:l=!1,hideHeader:d=!1})=>{const[m,g]=w.useState(()=>{const ce=Object.values(fs);return{...s,questions:s.questions.filter(fe=>ce.includes(fe.type))}}),[_,v]=w.useState(m.questions[0]?.id||null),[b,S]=w.useState(!1),[N,M]=w.useState("decision"),[P,j]=w.useState(""),[B,H]=w.useState(fs.MULTIPLE_CHOICE),[z,G]=w.useState(!1),[de,X]=w.useState(!1),[k,I]=w.useState(null),[C,L]=w.useState(null),[D,U]=w.useState(!1),A=xn(ce=>ce.addToast),pe=w.useRef(null);w.useEffect(()=>{const ce=fe=>{pe.current&&!pe.current.contains(fe.target)&&(S(!1),M("decision"))};return b&&document.addEventListener("mousedown",ce),()=>{document.removeEventListener("mousedown",ce)}},[b]),ao.useEffect(()=>{const ce=Object.values(fs);g({...s,questions:s.questions.filter(fe=>ce.includes(fe.type))}),X(!1)},[s]);const Re=w.useCallback(ce=>{g(fe=>({...fe,...ce,updatedAt:new Date})),X(!0)},[]),Z=w.useCallback(ce=>{const fe=E9(ce,m.questions.length);g(we=>({...we,questions:[...we.questions,fe],totalPoints:sr([...we.questions,fe]),estimatedDuration:lo([...we.questions,fe]),updatedAt:new Date})),v(fe.id),S(!1),X(!0)},[m.questions]),ge=w.useCallback((ce,fe)=>{g(we=>{const it=we.questions.map(It=>It.id===ce?{...It,...fe,updatedAt:new Date}:It);return{...we,questions:it,totalPoints:sr(it),estimatedDuration:lo(it),updatedAt:new Date}}),X(!0)},[]),Ae=w.useCallback(ce=>{g(fe=>{const we=fe.questions.filter(it=>it.id!==ce).map((it,It)=>({...it,order:It}));return{...fe,questions:we,totalPoints:sr(we),estimatedDuration:lo(we),updatedAt:new Date}}),X(!0)},[]),Fe=(ce,fe)=>{if(!D){ce.preventDefault();return}I(fe),ce.dataTransfer.effectAllowed="move",ce.dataTransfer.setData("text/plain",fe.toString());const we=ce.currentTarget;setTimeout(()=>{we.classList.add(be.dragging)},0)},ue=(ce,fe)=>{ce.preventDefault(),ce.dataTransfer.dropEffect="move",C!==fe&&L(fe)},O=ce=>{ce.currentTarget.classList.remove(be.dragging),I(null),L(null),U(!1)},Y=(ce,fe)=>{ce.preventDefault(),!(k===null||k===fe)&&(g(we=>{const it=[...we.questions],[It]=it.splice(k,1);return it.splice(fe,0,It),{...we,questions:it.map((Hn,Rn)=>({...Hn,order:Rn})),updatedAt:new Date}}),X(!0),I(null),L(null))},F=w.useCallback((ce,fe)=>{g(we=>{const it=we.questions.findIndex(Rn=>Rn.id===ce);if(it===-1)return we;const It=fe==="up"?it-1:it+1;if(It<0||It>=we.questions.length)return we;const Hn=[...we.questions];return[Hn[it],Hn[It]]=[Hn[It],Hn[it]],{...we,questions:Hn.map((Rn,wr)=>({...Rn,order:wr})),updatedAt:new Date}}),X(!0)},[]),oe=w.useCallback(()=>{e(m),X(!1)},[m,e]),me=w.useCallback(()=>{t&&t(m)},[m,t]),he=async()=>{if(!P.trim()){A({type:"warning",title:"Uyar",message:"Ltfen bir konu veya metin girin."});return}G(!0);try{const ce=await jU({topic:P,questionCount:1,difficulty:"medium",questionTypes:[B]});if(ce.length>0){const fe=ce[0];fe.order=m.questions.length,g(we=>({...we,questions:[...we.questions,fe],totalPoints:sr([...we.questions,fe]),estimatedDuration:lo([...we.questions,fe]),updatedAt:new Date})),v(fe.id),j(""),S(!1),M("decision"),X(!0),A({type:"success",title:"Baarl",message:"Soru AI tarafndan retildi."})}}catch(ce){console.error("AI error:",ce),A({type:"error",title:"Hata",message:ce.message||"Soru retilirken bir hata olutu."})}finally{G(!1)}},Ne=()=>{S(!b),M("decision")};return u.jsxs("div",{className:be.editor,children:[!d&&u.jsxs("div",{className:be.stickyHeader,children:[u.jsxs("div",{className:be.headerTop,children:[u.jsxs("div",{className:be.titleArea,children:[u.jsx("textarea",{value:m.title,onChange:ce=>Re({title:ce.target.value}),placeholder:"Quiz Bal",className:be.titleTextarea,readOnly:m.status==="published"||m.status==="closed",rows:2}),u.jsxs("div",{className:be.metaInfo,children:[u.jsx("span",{className:`${be.statusBadge} ${be[m.status]}`,children:m.status==="draft"?"ONAY BEKLYOR":m.status==="approved"?"YAYINA HAZIR":m.status==="published"?"YAYINLANDI":m.status==="closed"?"KAPALI":"ARV"}),u.jsx("span",{className:be.dot,children:""}),u.jsxs("span",{className:be.metaStat,children:[u.jsx(Bu,{size:14})," ",m.totalPoints," Puan"]}),u.jsx("span",{className:be.dot,children:""}),u.jsxs("span",{className:be.metaStat,children:[u.jsx(Zl,{size:14})," ~",m.estimatedDuration," dk"]})]})]}),u.jsxs("div",{className:be.headerActions,children:[u.jsx(ke,{variant:"outline",size:"md",leftIcon:u.jsx(My,{size:18}),onClick:me,className:be.previewBtn,children:"nizle"}),m.status!=="published"&&m.status!=="closed"&&u.jsx(ke,{variant:"primary",size:"md",leftIcon:u.jsx(Qx,{size:18}),onClick:oe,disabled:l||!de,className:be.saveActionBtn,children:"Kaydet"}),m.status==="draft"&&o&&u.jsx(ke,{variant:"primary",size:"md",leftIcon:u.jsx(Bu,{size:18}),onClick:o,disabled:l||de,className:be.workflowBtn,children:"Onayla"}),m.status==="approved"&&a&&u.jsx(ke,{variant:"primary",size:"md",leftIcon:u.jsx(Kx,{size:18}),onClick:a,disabled:l||de,className:be.workflowBtnPrimary,children:"Yaynla"})]})]}),u.jsx("div",{className:be.descriptionRow,children:u.jsx("textarea",{value:m.description||"",onChange:ce=>Re({description:ce.target.value}),placeholder:"rencileriniz iin ksa bir aklama veya ynerge girin...",className:be.descTextarea,rows:1})})]}),u.jsx("div",{className:be.questionsList,children:m.questions.map((ce,fe)=>u.jsxs("div",{draggable:!l,onDragStart:we=>Fe(we,fe),onDragOver:we=>ue(we,fe),onDragEnd:O,onDrop:we=>Y(we,fe),className:`
                            ${be.questionCard} 
                            ${_===ce.id?be.expanded:""}
                            ${C===fe&&k!==fe?be.dragOver:""}
                        `,children:[u.jsxs("div",{className:be.questionHeader,onClick:()=>v(_===ce.id?null:ce.id),children:[u.jsxs("div",{className:be.questionLeft,children:[m.status!=="published"&&m.status!=="closed"&&u.jsx("span",{className:be.dragHandle,onMouseDown:()=>U(!0),onMouseUp:()=>U(!1),children:u.jsx(WM,{size:16})}),u.jsxs("div",{className:be.qIdentifier,children:[u.jsx("span",{className:be.qNumber,children:fe+1}),u.jsx("span",{className:`${be.qType} ${be[ce.type]}`,children:Lg[ce.type]})]}),u.jsx("div",{className:be.qMainContent,children:u.jsx("span",{className:be.qTextPreview,children:ce.question||"Soru metni girilmedi..."})})]}),u.jsxs("div",{className:be.questionRight,children:[m.status!=="published"&&m.status!=="closed"&&u.jsxs("div",{className:be.qActions,children:[u.jsx("button",{onClick:we=>{we.stopPropagation(),F(ce.id,"up")},disabled:fe===0,className:be.qActionBtn,children:u.jsx(mM,{size:14})}),u.jsx("button",{onClick:we=>{we.stopPropagation(),F(ce.id,"down")},disabled:fe===m.questions.length-1,className:be.qActionBtn,children:u.jsx(uM,{size:14})}),u.jsx("button",{onClick:we=>{we.stopPropagation(),Ae(ce.id)},className:`${be.qActionBtn} ${be.delete}`,children:u.jsx(ld,{size:14})})]}),u.jsx("div",{className:`${be.expandCircle} ${_===ce.id?be.active:""}`,children:u.jsx(Px,{size:18})})]})]}),_===ce.id&&u.jsx("div",{className:be.questionContent,children:u.jsx(t7,{question:ce,onChange:we=>ge(ce.id,we),readOnly:m.status==="published"||m.status==="closed"})})]},ce.id))}),m.status!=="published"&&m.status!=="closed"&&u.jsx("div",{className:be.addSection,children:u.jsxs("div",{className:be.addBtnContainer,ref:pe,children:[u.jsx(ke,{variant:"outline",leftIcon:u.jsx(hm,{size:20}),onClick:Ne,className:be.mainAddBtn,children:"Yeni Soru Ekle"}),b&&u.jsxs("div",{className:be.typeMenu,children:[N==="decision"&&u.jsxs("div",{className:be.decisionMenu,children:[u.jsxs("button",{className:be.decisionItem,onClick:()=>M("manual"),children:[u.jsx("div",{className:be.decisionIcon,children:u.jsx(Bz,{size:20})}),u.jsxs("div",{className:be.decisionText,children:[u.jsx("strong",{children:"Manuel Soru"}),u.jsx("span",{children:"Kendiniz yazn ve zelletirin"})]})]}),u.jsxs("button",{className:be.decisionItem,onClick:()=>M("ai"),children:[u.jsx("div",{className:`${be.decisionIcon} ${be.aiIcon}`,children:u.jsx(Ll,{size:20})}),u.jsxs("div",{className:be.decisionText,children:[u.jsx("strong",{children:"AI ile ret"}),u.jsx("span",{children:"Konu verin, GPT soruyu hazrlasn"})]})]})]}),N==="manual"&&u.jsxs("div",{className:be.manualMenu,children:[u.jsxs("div",{className:be.menuHeader,children:[u.jsx("button",{onClick:()=>M("decision"),className:be.backBtn,children:" Geri"}),u.jsx("span",{children:"Soru Tipi Sein"})]}),Object.entries(Lg).map(([ce,fe])=>u.jsxs("button",{className:be.typeMenuItem,onClick:()=>Z(ce),children:[u.jsx("span",{className:`${be.typeDot} ${be[ce]}`}),fe]},ce))]}),N==="ai"&&u.jsxs("div",{className:be.aiMenu,children:[u.jsxs("div",{className:be.menuHeader,children:[u.jsx("button",{onClick:()=>M("decision"),className:be.backBtn,children:" Geri"}),u.jsx("span",{children:"AI Soru retici"})]}),u.jsxs("div",{className:be.aiInputWrapper,children:[u.jsxs("div",{className:be.aiTypeSelector,children:[u.jsx("label",{className:be.aiLabel,children:"Soru Tipi Sein:"}),u.jsx("div",{className:be.aiTypeList,children:Object.entries(Lg).map(([ce,fe])=>u.jsxs("button",{type:"button",className:`${be.typeMenuItem} ${B===ce?be.typeMenuItemActive:""}`,onClick:()=>H(ce),children:[u.jsx("span",{className:`${be.typeDot} ${be[ce]}`}),u.jsx("span",{style:{flex:1},children:fe}),B===ce&&u.jsx(To,{size:16,style:{color:"var(--color-primary)"}})]},ce))})]}),u.jsx("textarea",{value:P,onChange:ce=>j(ce.target.value),placeholder:"Soru ne hakknda olsun? (rn: 'Fotosentez evreleri blou')",className:be.aiTopicInput,rows:3}),u.jsx(ke,{variant:"primary",size:"sm",fullWidth:!0,leftIcon:u.jsx(Ll,{size:16}),onClick:he,isLoading:z,disabled:z,className:be.aiGenerateBtn,children:"Soruyu ret"})]})]})]})]})})]})},m8="_card_1fkds_3",p8="_questionText_1fkds_31",g8="_optionsList_1fkds_46",_8="_optionButton_1fkds_58",y8="_selected_1fkds_86",v8="_radioCircle_1fkds_97",b8="_correct_1fkds_120",E8="_incorrect_1fkds_125",T8="_textArea_1fkds_183",S8="_errorFallback_1fkds_407",A8="_errorHeader_1fkds_428",x8="_errorIcon_1fkds_436",w8="_errorBody_1fkds_440",qt={card:m8,questionText:p8,optionsList:g8,optionButton:_8,selected:y8,radioCircle:v8,correct:b8,incorrect:E8,textArea:T8,errorFallback:S8,errorHeader:A8,errorIcon:x8,errorBody:w8},I8=({children:s,onFix:e,isUpdating:t,questionId:a})=>{const[o,l]=w.useState(!1),[d,m]=w.useState(!1),[g,_]=w.useState("");return w.useEffect(()=>{l(!1),m(!1),_("")},[a]),o?u.jsxs("div",{className:qt.errorFallback,children:[u.jsxs("div",{className:qt.errorHeader,children:[u.jsx(Yx,{className:qt.errorIcon,size:32}),u.jsx("h3",{children:"Ooopps! Bu Soru Hatal retilmi"})]}),u.jsx("div",{className:qt.errorBody,children:u.jsx("p",{children:"Bu soru AI tarafndan hatal bir formatta retildii iin grntlenemiyor."})}),e&&u.jsxs("div",{style:{display:"flex",gap:"8px",flexDirection:"column"},children:[d&&u.jsx("textarea",{value:g,onChange:v=>_(v.target.value),placeholder:"AI'ya zel bir talimatnz var m?...",className:qt.textArea}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[d&&u.jsx(ke,{variant:"outline",onClick:()=>m(!1),children:"ptal"}),u.jsx(ke,{variant:"primary",leftIcon:u.jsx(cd,{size:18}),onClick:()=>d?e(g):m(!0),isLoading:t,children:"AI ile yiletir"})]})]})]}):u.jsx(u.Fragment,{children:s})},qy=s=>{const[e,t]=w.useState(!1),a=xn(l=>l.addToast),o=async l=>{if(s.onQuestionUpdate){t(!0);try{const d=await DU({question:s.question,instructions:l||"Soru format bozuk. Ltfen geerli ve kaliteli bir soru formatna dntr."});s.onQuestionUpdate(d),a({type:"success",title:"Baarl",message:"Soru onarld ve gncellendi."})}catch(d){console.error("Fix error:",d),a({type:"error",title:"Hata",message:"Soru onarlamad."})}finally{t(!1)}}};return u.jsx(I8,{questionId:s.question.id,onFix:s.onQuestionUpdate?o:void 0,isUpdating:e,children:u.jsx(R8,{...s})})},R8=({question:s,answer:e,onAnswerChange:t,readOnly:a=!1,showFeedback:o=!1})=>{const l=()=>{const m=s;return m.options?u.jsx("div",{className:qt.optionsList,children:m.options.map(g=>{const _=e===g.id,v=g.isCorrect;let b=`${qt.optionButton} ${_?qt.selected:""}`;return o&&(v?b+=` ${qt.correct}`:_&&!v&&(b+=` ${qt.incorrect}`)),u.jsxs("button",{className:b,onClick:()=>!a&&t(g.id),disabled:a,children:[u.jsxs("div",{className:qt.radioCircle,children:[o&&v&&u.jsx(To,{size:14,strokeWidth:3,color:"#22c55e"}),o&&_&&!v&&u.jsx(Ao,{size:14,strokeWidth:3,color:"#ef4444"})]}),u.jsx("span",{children:g.text})]},g.id)})}):null},d=()=>{const m=s,g=[{id:"true",text:"Doru",value:!0},{id:"false",text:"Yanl",value:!1}];return u.jsx("div",{className:qt.optionsList,children:g.map(_=>{const v=e===_.value,b=m.correctAnswer===_.value;let S=`${qt.optionButton} ${v?qt.selected:""}`;return o&&(b?S+=` ${qt.correct}`:v&&!b&&(S+=` ${qt.incorrect}`)),u.jsxs("button",{className:S,onClick:()=>!a&&t(_.value),disabled:a,children:[u.jsxs("div",{className:qt.radioCircle,children:[o&&b&&u.jsx(To,{size:14,strokeWidth:3,color:"#22c55e"}),o&&v&&!b&&u.jsx(Ao,{size:14,strokeWidth:3,color:"#ef4444"})]}),u.jsx("span",{children:_.text})]},_.id)})})};return u.jsxs("div",{className:qt.card,children:[u.jsx("div",{className:qt.questionText,children:s.question}),u.jsxs("div",{className:qt.answerArea,children:[s.type===fs.MULTIPLE_CHOICE&&l(),s.type===fs.TRUE_FALSE&&d()]}),o&&s.explanation&&u.jsxs("div",{className:qt.explanation,children:[u.jsx("strong",{children:"Aklama:"})," ",s.explanation]})]})},N8="_overlay_17gay_3",C8="_modal_17gay_23",k8="_header_17gay_41",j8="_headerTitle_17gay_55",D8="_closeButton_17gay_67",O8="_content_17gay_82",M8="_questionCounter_17gay_95",z8="_footer_17gay_109",L8="_navButtons_17gay_123",na={overlay:N8,modal:C8,header:k8,headerTitle:j8,closeButton:D8,content:O8,questionCounter:M8,footer:z8,navButtons:L8},P8=({quiz:s,onClose:e,onQuestionUpdate:t})=>{const[a,o]=w.useState(0),[l,d]=w.useState({}),[m,g]=w.useState(!1),_=s.questions[a];if(!_)return null;const v=N=>{d(M=>({...M,[_.id]:N}))},b=()=>{a<s.questions.length-1&&o(N=>N+1)},S=()=>{a>0&&o(N=>N-1)};return u.jsx("div",{className:na.overlay,onClick:e,children:u.jsxs("div",{className:na.modal,onClick:N=>N.stopPropagation(),children:[u.jsxs("div",{className:na.header,children:[u.jsxs("div",{className:na.headerTitle,children:[s.title," ",u.jsx("span",{style:{fontSize:"14px",fontWeight:"normal",color:"#718096"},children:"(nizleme)"})]}),u.jsx("button",{className:na.closeButton,onClick:e,children:u.jsx(Ao,{size:24})})]}),u.jsxs("div",{className:na.content,children:[u.jsxs("div",{className:na.questionCounter,children:["Soru ",a+1," / ",s.questions.length]}),u.jsx(qy,{question:_,answer:l[_.id],onAnswerChange:v,onQuestionUpdate:N=>t?.(_.id,N),showFeedback:m})]}),u.jsxs("div",{className:na.footer,children:[u.jsx(ke,{variant:"ghost",onClick:()=>g(!m),leftIcon:u.jsx(My,{size:16}),children:m?"Cevaplar Gizle":"Cevaplar Gster"}),u.jsxs("div",{className:na.navButtons,children:[u.jsx(ke,{variant:"outline",onClick:S,disabled:a===0,leftIcon:u.jsx(IM,{size:16}),children:"nceki"}),u.jsx(ke,{variant:"primary",onClick:b,disabled:a===s.questions.length-1,rightIcon:u.jsx(Ks,{size:16}),children:"Sonraki"})]})]})]})})},V8="_modalContent_1nen0_1",U8="_infoBox_1nen0_13",B8="_infoIcon_1nen0_33",q8="_infoText_1nen0_43",H8="_sectionHeader_1nen0_53",$8="_sectionTitle_1nen0_65",F8="_selectAllBtn_1nen0_83",G8="_classList_1nen0_115",Q8="_classItem_1nen0_133",K8="_selected_1nen0_169",Y8="_checkbox_1nen0_181",W8="_className_1nen0_217",X8="_modalFooter_1nen0_237",Z8="_submitBtn_1nen0_251",J8="_emptyState_1nen0_271",eq="_warningIcon_1nen0_291",tq="_closeBtn_1nen0_327",Tn={modalContent:V8,infoBox:U8,infoIcon:B8,infoText:q8,sectionHeader:H8,sectionTitle:$8,selectAllBtn:F8,classList:G8,classItem:Q8,selected:K8,checkbox:Y8,className:W8,modalFooter:X8,submitBtn:Z8,emptyState:J8,warningIcon:eq,closeBtn:tq},nq=({isOpen:s,onClose:e,onPublish:t,assignedClasses:a,quizTitle:o,isLoading:l=!1})=>{const[d,m]=w.useState([]),g=b=>{m(S=>S.includes(b)?S.filter(N=>N!==b):[...S,b])},_=()=>{d.length===a.length?m([]):m(a)},v=()=>{d.length>0&&t(d)};return!a||a.length===0?u.jsx(Mf,{isOpen:s,onClose:e,title:"Snav Yaynla",size:"md",children:u.jsxs("div",{className:Tn.emptyState,children:[u.jsx(So,{size:48,className:Tn.warningIcon}),u.jsx("h3",{children:"Snf Bulunamad"}),u.jsx("p",{children:"Snav yaynlamak iin nce dashboard zerinden snf eklemelisiniz."}),u.jsx(ke,{variant:"outline",onClick:e,className:Tn.closeBtn,children:"Kapat"})]})}):u.jsx(Mf,{isOpen:s,onClose:e,title:"Snav Yaynla",size:"md",footer:u.jsxs("div",{className:Tn.modalFooter,children:[u.jsx(ke,{variant:"outline",onClick:e,disabled:l,children:"Vazge"}),u.jsx(ke,{variant:"primary",onClick:v,disabled:d.length===0||l,leftIcon:u.jsx(Kx,{size:18}),className:Tn.submitBtn,children:l?"Gnderiliyor...":"rencilere Gnder"})]}),children:u.jsxs("div",{className:Tn.modalContent,children:[u.jsxs("div",{className:Tn.infoBox,children:[u.jsx(fa,{size:20,className:Tn.infoIcon}),u.jsxs("div",{className:Tn.infoText,children:[u.jsx("strong",{children:o})," adl snav artk yayna hazr. rencilerin eriebilmesi iin ltfen hedef snflar sein."]})]}),u.jsxs("div",{className:Tn.sectionHeader,children:[u.jsxs("div",{className:Tn.sectionTitle,children:[u.jsx(qu,{size:18}),u.jsx("span",{children:"Hedef Snflar Sein"})]}),u.jsx("button",{className:Tn.selectAllBtn,onClick:_,children:d.length===a.length?"Seimi Kaldr":"Tmn Se"})]}),u.jsx("div",{className:Tn.classList,children:a.map(b=>u.jsxs("div",{className:`${Tn.classItem} ${d.includes(b)?Tn.selected:""}`,onClick:()=>g(b),children:[u.jsx("div",{className:Tn.checkbox,children:d.includes(b)&&u.jsx(fa,{size:16})}),u.jsx("span",{className:Tn.className,children:b})]},b))})]})})},sq="_page_1m8jj_1",iq="_navRow_1m8jj_26",aq="_backLink_1m8jj_33",rq="_content_1m8jj_56",oq="_loading_1m8jj_62",lq="_error_1m8jj_63",Al={page:sq,navRow:iq,backLink:aq,content:rq,loading:oq,error:lq},gT=()=>{const{id:s}=Fu(),[e]=bR(),t=qn(),a=e.get("sessionId"),o=In(),l=Ft(I=>I.user),d=Ft(I=>I.isInitialized),{addToast:m}=xn(),[g,_]=w.useState(null),[v,b]=w.useState(!0),[S,N]=w.useState(!1),[M,P]=w.useState(null),[j,B]=w.useState(!1),[H,z]=w.useState(!1),G=t.pathname.endsWith("/new")||!s;w.useEffect(()=>{if(!d||!l)return;(async()=>{b(!0);try{if(G){let C="Yeni Quiz";if(a)try{const D=await zf(a);D?.title&&(C=`${D.title} - Quiz`)}catch{}const L={id:"",title:C,description:"",sessionId:a||void 0,teacherId:l.id,questions:[],settings:Py,status:"draft",totalPoints:0,estimatedDuration:0,createdAt:new Date,updatedAt:new Date};_(L),b(!1)}else if(s){const C=await xr(s);if(!C){m({type:"error",title:"Hata",message:"Quiz bulunamad."}),o(ye.TEACHER.SESSIONS);return}_(C),b(!1)}}catch(C){console.error("Error loading quiz:",C),m({type:"error",title:"Hata",message:"Quiz yklenirken bir hata olutu."}),b(!1)}})()},[s,a,l,G,d,m,o]);const de=w.useCallback(async I=>{if(l)try{if(G){const C=await Jx(l.id,{title:I.title,description:I.description,sessionId:a||void 0,questions:I.questions,settings:I.settings,classIds:I.classIds});_(C),m({type:"success",title:"Baarl",message:"Quiz oluturuldu."}),o(`/teacher/quizzes/${C.id}`,{replace:!0})}else s&&(await Pg(s,{title:I.title,description:I.description,questions:I.questions,settings:I.settings,classIds:I.classIds}),_(I),m({type:"success",title:"Baarl",message:"Quiz kaydedildi."}))}catch(C){console.error("Error saving quiz:",C),m({type:"error",title:"Hata",message:"Quiz kaydedilemedi."})}},[l,G,s,a,m,o]),X=w.useCallback(async I=>{if(!g||G||!s){m({type:"warning",title:"Uyar",message:"nce quiz'i kaydedin."});return}try{z(!0),await Pg(s,{classIds:I}),await T9(s),_(C=>C?{...C,status:"published",publishedAt:new Date,classIds:I}:null),m({type:"success",title:"Yaynland!",message:"Quiz seilen snflara gnderildi."}),B(!1)}catch(C){console.error("Error publishing quiz:",C),m({type:"error",title:"Hata",message:"Quiz yaynlanamad."})}finally{z(!1)}},[g,G,s,m]),k=w.useCallback(async()=>{if(!g||!s){m({type:"warning",title:"Uyar",message:"nce quiz'i kaydedin."});return}if(g.questions.length===0){m({type:"warning",title:"Uyar",message:"Quiz'e en az bir soru ekleyin."});return}try{await Pg(s,{status:"approved"}),_(I=>I?{...I,status:"approved"}:null),m({type:"success",title:"Onayland",message:"Quiz onayland, yaynlamaya hazr."})}catch(I){console.error("Error approving quiz:",I),m({type:"error",title:"Hata",message:"Quiz onaylanamad."})}},[g,s,m]);return!d||!l||v&&!g?u.jsx("div",{className:Al.loading,children:u.jsx(_s,{size:"lg"})}):g?u.jsxs("div",{className:Al.page,children:[u.jsx("div",{className:Al.navRow,children:u.jsxs("button",{className:Al.backLink,onClick:()=>o(-1),children:[u.jsx(Ws,{size:18})," Geri Dn"]})}),u.jsx("div",{className:Al.content,children:u.jsx(f8,{quiz:g,onSave:de,onPublish:()=>B(!0),onApprove:k,onGenerateWithAI:()=>{},isLoading:v,onPreview:I=>{P(I),N(!0)}})}),S&&M&&u.jsx(P8,{quiz:M,onClose:()=>{N(!1),P(null)},onQuestionUpdate:(I,C)=>{_(L=>{if(!L)return null;const D=L.questions.map(U=>U.id===I?C:U);return{...L,questions:D}}),P(L=>{if(!L)return null;const D=L.questions.map(U=>U.id===I?C:U);return{...L,questions:D}})}}),j&&g&&u.jsx(nq,{isOpen:j,onClose:()=>B(!1),onPublish:X,quizTitle:g.title,assignedClasses:l?.assignedClasses||[],isLoading:H})]}):u.jsxs("div",{className:Al.error,children:[u.jsx("p",{children:"Quiz yklenemedi."}),u.jsx(ke,{variant:"primary",onClick:()=>o(-1),children:"Geri Dn"})]})},cq="_page_1vt5r_3",uq="_header_1vt5r_16",dq="_title_1vt5r_23",hq="_teacherName_1vt5r_30",fq="_subtitle_1vt5r_40",mq="_contextBar_1vt5r_46",pq="_contextItem_1vt5r_61",gq="_contextLabel_1vt5r_69",_q="_quizList_1vt5r_76",yq="_quizItem_1vt5r_82",vq="_quizIcon_1vt5r_100",bq="_quizInfo_1vt5r_111",Eq="_quizTitle_1vt5r_115",Tq="_quizMeta_1vt5r_122",Sq="_badge_1vt5r_131",Aq="_badgePublished_1vt5r_141",xq="_badgeDraft_1vt5r_146",wq="_badgeApproved_1vt5r_151",Iq="_badgeDefault_1vt5r_156",Rq="_statusWrapper_1vt5r_161",Nq="_quizActions_1vt5r_168",Cq="_menuDropdown_1vt5r_174",kq="_menuItem_1vt5r_187",jq="_menuItemDanger_1vt5r_206",Dq="_menuBtn_1vt5r_224",Oq="_emptyState_1vt5r_234",Qe={page:cq,header:uq,title:dq,teacherName:hq,subtitle:fq,contextBar:mq,contextItem:pq,contextLabel:gq,quizList:_q,quizItem:yq,quizIcon:vq,quizInfo:bq,quizTitle:Eq,quizMeta:Tq,badge:Sq,badgePublished:Aq,badgeDraft:xq,badgeApproved:wq,badgeDefault:Iq,statusWrapper:Rq,quizActions:Nq,menuDropdown:Cq,menuItem:kq,menuItemDanger:jq,menuBtn:Dq,emptyState:Oq},Mq=()=>{const s=In(),e=Ft(X=>X.user),t=xn(X=>X.addToast),[a,o]=w.useState([]),[l,d]=w.useState(!0),m=qn(),[g,_]=w.useState("all"),[v,b]=w.useState(()=>{const k=new URLSearchParams(m.search).get("status");return k==="published"||k==="closed"?k:"all"}),[S,N]=w.useState(null),[M,P]=w.useState(null);w.useEffect(()=>{H()},[e]),w.useEffect(()=>{e?.assignedClasses?.length>0&&_("all")},[e]);const[j,B]=w.useState({}),H=async()=>{if(e)try{d(!0);const X=await mm(e.id);o(X);const k={};await Promise.all(X.map(async I=>{const C=await By(I.id);k[I.id]=C.length})),B(k)}catch(X){console.error("Error loading exams:",X),t({type:"error",title:"Hata",message:"Snavlar yklenemedi."})}finally{d(!1)}},z=X=>{const k=a.find(I=>I.id===X);k&&(P({id:X,title:k.title}),N(null))},G=async()=>{if(!M)return;const X=M.id;try{await ew(X),o(k=>k.filter(I=>I.id!==X)),t({type:"success",title:"Baarl",message:"Snav silindi."})}catch(k){console.error("Error deleting exam:",k),t({type:"error",title:"Hata",message:"Snav silinemedi."})}finally{P(null)}},de=a.filter(X=>{const k=!g||g==="all"||X.classId===g,I=v==="all"?X.status==="published"||X.status==="closed":v==="closed"?X.status==="closed"||j[X.id]>0:X.status===v;return k&&I});return w.useEffect(()=>{const X=()=>N(null);return document.addEventListener("click",X),()=>document.removeEventListener("click",X)},[]),u.jsxs("div",{className:Qe.page,children:[u.jsxs("div",{className:Qe.header,children:[u.jsxs("div",{className:Qe.headerTitle,children:[u.jsxs("h1",{className:Qe.title,children:["Merhaba, ",u.jsx("span",{className:Qe.teacherName,children:e?.displayName||"retmenim"})]}),u.jsx("p",{className:Qe.subtitle,children:"Yaynladnz snavlar ve sonularn buradan takip edebilirsiniz."})]}),u.jsxs("div",{className:Qe.contextBar,children:[u.jsxs("div",{className:Qe.contextItem,children:[u.jsx("label",{className:Qe.contextLabel,children:"KURUM SEN"}),u.jsx(Xs,{options:[{value:"enderun",label:"Enderun Koleji Merkez"}],value:"enderun",onChange:()=>{},icon:u.jsx(Jl,{size:18})})]}),u.jsxs("div",{className:Qe.contextItem,children:[u.jsx("label",{className:Qe.contextLabel,children:"AKTF SINIF"}),u.jsx(Xs,{options:[{value:"all",label:"Tm Snflar"},...e?.assignedClasses?.map(X=>({value:X,label:X}))||[]],value:g,onChange:X=>_(X),placeholder:"Snf Sein"})]}),u.jsxs("div",{className:Qe.contextItem,children:[u.jsx("label",{className:Qe.contextLabel,children:"DURUM FLTRES"}),u.jsx(Xs,{options:[{value:"all",label:"Hepsi"},{value:"published",label:"Aktif Snavlar"},{value:"closed",label:"Sonulanan Snavlar"}],value:v,onChange:X=>b(X)})]})]})]}),l?u.jsx("div",{className:Qe.emptyState,children:u.jsx(_s,{size:"lg"})}):de.length===0?u.jsxs("div",{className:Qe.emptyState,children:[u.jsx("div",{style:{color:"var(--color-text-tertiary)",marginBottom:"16px"},children:u.jsx(od,{size:48,strokeWidth:1})}),u.jsx("h3",{children:"Yaynda hi snav yok"}),u.jsx("p",{children:"Tamamlanan ve yaynlanan snavlarnz burada grnr."})]}):u.jsx("div",{className:Qe.quizList,children:de.map(X=>u.jsxs("div",{className:`${Qe.quizItem} ${Qe.itemPublished}`,onClick:()=>{X.status==="closed"||j[X.id]>0?s(ye.TEACHER.REPORTS,{state:{view:"quiz_detail",quizId:X.id,classId:X.classId}}):s(`${ye.TEACHER.QUIZZES}/${X.id}`)},children:[u.jsx("div",{className:Qe.quizIcon,children:X.status==="published"?u.jsx(fm,{size:20}):u.jsx(fa,{size:20})}),u.jsxs("div",{className:Qe.quizInfo,children:[u.jsx("div",{className:Qe.quizTitle,children:X.title.includes("-")?X.title.split("-").slice(1).join("-").trim():X.title}),u.jsxs("div",{className:Qe.quizMeta,children:[X.subject&&u.jsxs(u.Fragment,{children:[u.jsx("span",{children:X.subject}),u.jsx("span",{children:""})]}),u.jsx("span",{children:X.createdAt?new Date(X.createdAt).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}),u.jsx("span",{children:""}),u.jsxs("span",{children:[X.questions?.length||0," Soru"]}),j[X.id]>0&&u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),u.jsxs("span",{style:{color:"var(--color-primary)",fontWeight:600},children:[j[X.id]," Katlm"]})]})]}),u.jsxs("div",{className:Qe.statusWrapper,children:[X.status==="draft"&&u.jsx("span",{className:`${Qe.badge} ${Qe.badgeDraft}`,children:"Onay Bekliyor"}),X.status==="approved"&&u.jsx("span",{className:`${Qe.badge} ${Qe.badgeApproved}`,children:"Yayna Hazr"}),X.status==="closed"?u.jsx("span",{className:`${Qe.badge} ${Qe.badgeDefault}`,children:"Tamamland"}):X.status==="published"?j[X.id]>0?u.jsx("span",{className:`${Qe.badge} ${Qe.badgeSuccess}`,style:{backgroundColor:"#ecfdf5",color:"#10b981"},children:"Sonular Hazr"}):u.jsx("span",{className:`${Qe.badge} ${Qe.badgePublished}`,children:"Yaynland"}):null]})]}),u.jsx("div",{className:Qe.quizActions,onClick:k=>k.stopPropagation(),children:u.jsxs("div",{style:{position:"relative"},children:[u.jsx("button",{className:Qe.menuBtn,onClick:k=>{k.stopPropagation(),N(S===X.id?null:X.id)},children:u.jsx(Ux,{size:20})}),S===X.id&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{position:"fixed",inset:0,zIndex:99},onClick:()=>N(null)}),u.jsxs("div",{className:Qe.menuDropdown,children:[X.status==="closed"||j[X.id]>0?u.jsx("button",{className:Qe.menuItem,onClick:()=>s(ye.TEACHER.REPORTS,{state:{view:"quiz_detail",quizId:X.id,classId:X.classId}}),children:"Raporu Gr"}):null,u.jsx("button",{className:Qe.menuItem,onClick:()=>s(`${ye.TEACHER.QUIZZES}/${X.id}`),children:"Dzenle"}),u.jsx("button",{className:`${Qe.menuItem} ${Qe.menuItemDanger}`,onClick:()=>z(X.id),children:"Sil"})]})]})]})})]},X.id))}),u.jsx(Ly,{isOpen:!!M,onClose:()=>P(null),onConfirm:G,title:"Snav Sil",message:`"${M?.title}" isimli snav silmek istediinize emin misiniz? Bu ilem geri alnamaz.`,confirmText:"Snav Sil",isLoading:l})]})},aw="users",zq=async s=>{const e=zn(St,aw,s),t=await jo(e);return t.exists()?{id:t.id,...t.data()}:null},Lq=async()=>{const s=ko(ti(St,aw),pr("role","==","student"));return(await Do(s)).docs.map(t=>({id:t.id,...t.data()}))},Pq="_page_1r7ug_3",Vq="_title_1r7ug_35",Uq="_subtitle_1r7ug_43",Bq="_statValue_1r7ug_71",qq="_statLabel_1r7ug_78",Hq="_avatar_1r7ug_111",$q="_studentName_1r7ug_130",Fq="_arrow_1r7ug_166",Gq="_emptyState_1r7ug_171",at={page:Pq,title:Vq,subtitle:Uq,statValue:Bq,statLabel:qq,avatar:Hq,studentName:$q,arrow:Fq,emptyState:Gq},Qq=()=>{const{id:s}=Fu(),e=In(),[t,a]=w.useState(null),[o,l]=w.useState([]),[d,m]=w.useState({}),[g,_]=w.useState(!0);w.useEffect(()=>{(async()=>{if(s)try{const[S,N]=await Promise.all([xr(s),By(s)]);S&&a(S),l(N);const M=Array.from(new Set(N.map(j=>j.studentId))),P={};await Promise.all(M.map(async j=>{const B=await zq(j);B&&(P[j]=B)})),m(P)}catch(S){console.error("Failed to fetch submissions:",S)}finally{_(!1)}})()},[s]);const v=b=>b?new Intl.DateTimeFormat("tr-TR",{day:"2-digit",month:"long",hour:"2-digit",minute:"2-digit"}).format(b):"-";return g?u.jsx("div",{className:at.loadingState,children:u.jsx(_s,{size:"lg"})}):t?u.jsx("div",{className:at.page,children:u.jsxs("div",{className:at.container,children:[u.jsxs("div",{className:at.pageHeader,children:[u.jsx(ke,{variant:"ghost",size:"sm",leftIcon:u.jsx(Ws,{size:18}),onClick:()=>e(-1),children:"Geri"}),u.jsxs("div",{children:[u.jsxs("h1",{className:at.title,children:[t.title," - Sonular"]}),u.jsx("p",{className:at.subtitle,children:"renci katlmlar ve puanlamalar"})]})]}),u.jsxs("div",{className:at.quizStats,children:[u.jsxs("div",{className:at.statItem,children:[u.jsx("span",{className:at.statLabel,children:"Katlm"}),u.jsx("span",{className:at.statValue,children:o.length})]}),u.jsxs("div",{className:at.statItem,children:[u.jsx("span",{className:at.statLabel,children:"Ort. Puan"}),u.jsxs("span",{className:at.statValue,children:[o.length>0?Math.round(o.reduce((b,S)=>b+(S.percentage||0),0)/o.length):0,"%"]})]})]}),o.length===0?u.jsxs(df,{className:at.emptyState,children:[u.jsx(zx,{size:48,color:"#94a3b8"}),u.jsx("h3",{children:"Henz katlm yok"}),u.jsx("p",{children:"rencileriniz snav tamamladnda sonular burada grnecektir."})]}):u.jsx("div",{className:at.list,children:o.map(b=>{const S=d[b.studentId],N=b.status==="graded";return u.jsxs("div",{className:at.item,onClick:()=>e(`/teacher/quizzes/${t.id}/submissions/${b.id}`),children:[u.jsxs("div",{className:at.itemMain,children:[u.jsx("div",{className:at.avatar,children:u.jsx(Wx,{size:24})}),u.jsxs("div",{className:at.info,children:[u.jsx("h4",{className:at.studentName,children:S?.displayName||"Bilinmeyen renci"}),u.jsxs("div",{className:at.meta,children:[u.jsxs("span",{className:at.metaItem,children:[u.jsx(rd,{size:14}),v(b.submittedAt)]}),u.jsxs("span",{className:at.metaItem,children:[u.jsx(Zl,{size:14}),Math.floor((b.duration||0)/60)," dk ",(b.duration||0)%60," sn"]})]})]})]}),u.jsxs("div",{className:at.results,children:[u.jsx("div",{className:at.status,children:N?u.jsxs("span",{className:at.badgeGraded,children:[u.jsx(fa,{size:14})," Puanland"]}):u.jsxs("span",{className:at.badgePending,children:[u.jsx(VM,{size:14})," Bekliyor"]})}),u.jsxs("div",{className:at.score,children:[u.jsxs("span",{className:at.scoreValue,children:[b.score," / ",b.totalPoints]}),u.jsx("div",{className:at.percentageBar,children:u.jsx("div",{className:at.percentageFill,style:{width:`${b.percentage}%`,backgroundColor:b.percentage&&b.percentage>=60?"#22c55e":"#f59e0b"}})})]}),u.jsx(Ks,{size:20,className:at.arrow})]})]},b.id)})})]})}):u.jsxs("div",{className:at.errorState,children:[u.jsx("h2",{children:"Snav bulunamad."}),u.jsx(ke,{onClick:()=>e(-1),children:"Geri Dn"})]})},Kq="_page_l3000_5",Yq="_header_l3000_33",Wq="_greeting_l3000_63",Xq="_teacherName_l3000_77",Zq="_subtitle_l3000_85",Jq="_contextBar_l3000_99",eH="_contextItem_l3000_135",tH="_contextLabel_l3000_151",nH="_animateFadeIn_l3000_171",sH="_gridContainer_l3000_205",iH="_classCard_l3000_245",aH="_classCardTop_l3000_317",rH="_className_l3000_331",oH="_cardIconBox_l3000_349",lH="_cardStatsRow_l3000_387",cH="_statBlock_l3000_417",uH="_statHead_l3000_483",dH="_statValue_l3000_539",hH="_scoreBadge_l3000_557",fH="_viewDetailsBtn_l3000_579",mH="_breadcrumb_l3000_629",pH="_detailHeader_l3000_645",gH="_detailTitle_l3000_743",_H="_detailSubtitle_l3000_775",yH="_headerStats_l3000_813",vH="_headerStatItem_l3000_845",bH="_hLabel_l3000_859",EH="_hValue_l3000_875",TH="_quizList_l3000_907",SH="_quizCard_l3000_919",AH="_quizIcon_l3000_973",xH="_quizContent_l3000_997",wH="_quizMainInfo_l3000_1005",IH="_quizTitle_l3000_1017",RH="_quizDate_l3000_1029",NH="_quizMeta_l3000_1045",CH="_tag_l3000_1057",kH="_quizStats_l3000_1075",jH="_qStat_l3000_1101",DH="_qLabel_l3000_1113",OH="_qValue_l3000_1127",MH="_examScoreBig_l3000_1157",zH="_tagRow_l3000_1291",LH="_dateTag_l3000_1329",PH="_scoreCircle_l3000_1355",VH="_reportGrid_l3000_1499",UH="_sectionCard_l3000_1523",BH="_cardHeader_l3000_1533",qH="_collapsibleHeader_l3000_1575",HH="_headerLeft_l3000_1595",$H="_collapsibleContent_l3000_1607",FH="_open_l3000_1621",GH="_studentTable_l3000_1639",QH="_tableHead_l3000_1647",KH="_tableRow_l3000_1697",YH="_stName_l3000_1743",WH="_stDetail_l3000_1763",XH="_avatar_l3000_1787",ZH="_stScore_l3000_1819",JH="_questionGrid_l3000_1869",e$="_qStatItem_l3000_1883",t$="_qTop_l3000_1909",n$="_qPrc_l3000_1925",s$="_qProg_l3000_1935",i$="_qFill_l3000_1951",a$="_warningBox_l3000_1965",r$="_emptyState_l3000_2003",o$="_questionsContainer_l3000_2019",l$="_questionResultCard_l3000_2033",c$="_correctCard_l3000_2049",u$="_incorrectCard_l3000_2059",d$="_qResultHeader_l3000_2069",h$="_qNumber_l3000_2083",f$="_statusCorrect_l3000_2097",m$="_statusIncorrect_l3000_2115",p$="_qText_l3000_2133",g$="_optionsList_l3000_2149",_$="_optionItem_l3000_2161",y$="_optCorrectSelected_l3000_2185",v$="_optWrongSelected_l3000_2199",b$="_optCorrectMissed_l3000_2213",E$="_optMarker_l3000_2227",ne={page:Kq,header:Yq,greeting:Wq,teacherName:Xq,subtitle:Zq,contextBar:Jq,contextItem:eH,contextLabel:tH,animateFadeIn:nH,gridContainer:sH,classCard:iH,classCardTop:aH,className:rH,cardIconBox:oH,cardStatsRow:lH,statBlock:cH,statHead:uH,statValue:dH,scoreBadge:hH,viewDetailsBtn:fH,breadcrumb:mH,detailHeader:pH,detailTitle:gH,detailSubtitle:_H,headerStats:yH,headerStatItem:vH,hLabel:bH,hValue:EH,quizList:TH,quizCard:SH,quizIcon:AH,quizContent:xH,quizMainInfo:wH,quizTitle:IH,quizDate:RH,quizMeta:NH,tag:CH,quizStats:kH,qStat:jH,qLabel:DH,qValue:OH,examScoreBig:MH,tagRow:zH,dateTag:LH,scoreCircle:PH,reportGrid:VH,sectionCard:UH,cardHeader:BH,collapsibleHeader:qH,headerLeft:HH,collapsibleContent:$H,open:FH,studentTable:GH,tableHead:QH,tableRow:KH,stName:YH,stDetail:WH,avatar:XH,stScore:ZH,questionGrid:JH,qStatItem:e$,qTop:t$,qPrc:n$,qProg:s$,qFill:i$,warningBox:a$,emptyState:r$,questionsContainer:o$,questionResultCard:l$,correctCard:c$,incorrectCard:u$,qResultHeader:d$,qNumber:h$,statusCorrect:f$,statusIncorrect:m$,qText:p$,optionsList:g$,optionItem:_$,optCorrectSelected:y$,optWrongSelected:v$,optCorrectMissed:b$,optMarker:E$},T$=()=>{const s=Ft(ue=>ue.user),e=xn(ue=>ue.addToast),t=qn(),[a,o]=w.useState(()=>t.state?.view?t.state.view:"classes"),[l,d]=w.useState(t.state?.classId||null),[m,g]=w.useState(t.state?.quizId||null),[_,v]=w.useState(t.state?.submissionId||null),[b,S]=w.useState("all"),[N,M]=w.useState(!0),[P,j]=w.useState([]),[B,H]=w.useState([]),[z,G]=w.useState([]),[de,X]=w.useState(!0),[k,I]=w.useState(!0),C=async()=>{if(s){M(!0);try{const[ue,O]=await Promise.all([mm(s.id),Lq()]);j(ue),G(O);const F=ue.filter(he=>he.status==="published"||he.status==="closed").map(he=>he.id).map(he=>By(he)),me=(await Promise.all(F)).flat();H(me)}catch(ue){console.error("Error fetching reports data:",ue),e({type:"error",title:"Hata",message:"Rapor verileri yklenemedi."})}finally{M(!1)}}};w.useEffect(()=>{C()},[s,e]);const L=ue=>ue>=85?"#10B981":ue>=60?"#F59E0B":"#EF4444",D=ue=>{if(!ue)return"-";const O=ue instanceof Date?ue:ue.toDate();return new Intl.DateTimeFormat("tr-TR",{day:"numeric",month:"long",year:"numeric"}).format(O)},U=w.useMemo(()=>{const ue=s?.assignedClasses||[],O=Array.from(new Set(P.map(F=>F.classId||"Genel")));let Y=ue.length>0?ue:O;return b!=="all"&&(Y=Y.filter(F=>F===b)),Y.map(F=>{const oe=F.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),me=P.filter(fe=>{const we=fe.classId?.replace(/[^a-zA-Z0-9]/g,"").toUpperCase()||"";return(fe.classId===F||we&&we===oe)&&(fe.status==="published"||fe.status==="closed")}),he=B.filter(fe=>{const we=P.find(It=>It.id===fe.quizId),it=we?.classId?.replace(/[^a-zA-Z0-9]/g,"").toUpperCase()||"";return we?.classId===F||it&&it===oe}),Ne=he.length>0?Math.round(he.reduce((fe,we)=>fe+(we.percentage||0),0)/he.length):0,ce=z.filter(fe=>{const we=fe,it=we.classId||we.class||"";if(it===F)return!0;const It=it.replace(/[^a-zA-Z0-9]/g,"").toUpperCase();return It&&It===oe}).length;return{name:F,quizCount:me.length,submissionCount:he.length,avgScore:Ne,studentCount:ce}}).sort((F,oe)=>oe.avgScore-F.avgScore)},[s,P,B,z,b]),A=()=>u.jsxs("div",{className:ne.animateFadeIn,children:[u.jsxs("div",{className:ne.header,children:[u.jsxs("div",{className:ne.headerTitle,children:[u.jsxs("h1",{className:ne.greeting,children:["Merhaba, ",u.jsx("span",{className:ne.teacherName,children:s?.displayName||"retmenim"})]}),u.jsx("p",{className:ne.subtitle,children:"te bugnk durumunuz ve son aktiviteleriniz."})]}),u.jsxs("div",{className:ne.contextBar,children:[u.jsxs("div",{className:ne.contextItem,children:[u.jsx("label",{className:ne.contextLabel,children:"KURUM SEN"}),u.jsx(Xs,{options:[{value:"enderun",label:"Enderun Koleji Merkez"}],value:"enderun",onChange:()=>{},icon:u.jsx(Jl,{size:18})})]}),u.jsxs("div",{className:ne.contextItem,children:[u.jsx("label",{className:ne.contextLabel,children:"AKTF SINIF"}),u.jsx(Xs,{options:[{value:"all",label:"Tm Snflar"},...s?.assignedClasses?.map(ue=>({value:ue,label:ue}))||[]],value:b,onChange:ue=>S(ue),placeholder:"Snf Sein"})]})]})]}),u.jsx("div",{className:ne.gridContainer,children:U.map((ue,O)=>u.jsxs("div",{className:ne.classCard,onClick:()=>{d(ue.name),o("class_detail")},children:[u.jsxs("div",{className:ne.classCardTop,children:[u.jsx("h3",{className:ne.className,children:ue.name}),u.jsx("div",{className:ne.cardIconBox,children:u.jsx(qu,{size:20})})]}),u.jsxs("div",{className:ne.cardStatsRow,children:[u.jsxs("div",{className:ne.statBlock,children:[u.jsxs("div",{className:ne.statHead,children:[u.jsx(Oy,{size:14}),u.jsx("span",{children:"GENEL ORT."})]}),u.jsx("div",{className:ne.statValue,children:u.jsxs("span",{className:ne.scoreBadge,style:{backgroundColor:`${L(ue.avgScore)}15`,color:L(ue.avgScore)},children:["%",ue.avgScore]})})]}),u.jsxs("div",{className:ne.statBlock,children:[u.jsxs("div",{className:ne.statHead,children:[u.jsx(Fz,{size:14}),u.jsx("span",{children:"MEVCUT"})]}),u.jsxs("div",{className:ne.statValue,children:[ue.studentCount," r."]})]}),u.jsxs("div",{className:ne.statBlock,children:[u.jsxs("div",{className:ne.statHead,children:[u.jsx(E_,{size:14}),u.jsx("span",{children:"SINAV"})]}),u.jsxs("div",{className:ne.statValue,children:[ue.quizCount," Adet"]})]})]}),u.jsx("button",{className:ne.viewDetailsBtn,children:"DETAYLARI GRNTLE"})]},O))}),U.length===0&&u.jsx("div",{className:ne.emptyState,children:u.jsx("p",{children:"Henz atanm bir snfnz veya snavnz bulunmuyor."})}),u.jsx("div",{style:{marginTop:"40px"},children:u.jsx(sw,{onDataGenerated:C})})]}),pe=w.useMemo(()=>{if(!l)return null;const ue=P.filter(Y=>{if(Y.status!=="published"&&Y.status!=="closed")return!1;const F=Y.classId?.replace(/[^a-zA-Z0-9]/g,"").toUpperCase()||"",oe=l.replace(/[^a-zA-Z0-9]/g,"").toUpperCase();return Y.classId===l||F&&F===oe?!0:B.some(he=>he.quizId===Y.id&&z.find(Ne=>Ne.id===he.studentId)?.classId===l)}).map(Y=>{const F=B.filter(me=>me.quizId===Y.id),oe=F.length>0?Math.round(F.reduce((me,he)=>me+(he.percentage||0),0)/F.length):0;return{...Y,avgScore:oe,submissionCount:F.length}}),O=ue.length>0?Math.round(ue.reduce((Y,F)=>Y+F.avgScore,0)/ue.length):0;return{className:l,quizzes:ue,overallAvg:O,totalSubmissions:ue.reduce((Y,F)=>Y+F.submissionCount,0)}},[l,P,B,z]),Re=()=>pe?u.jsxs("div",{className:ne.animateFadeIn,children:[u.jsx("div",{className:ne.breadcrumb,children:u.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>o("classes"),leftIcon:u.jsx(Ws,{size:16}),children:"Snflara Dn"})}),u.jsxs("div",{className:ne.detailHeader,children:[u.jsxs("div",{children:[u.jsxs("h1",{className:ne.detailTitle,children:[pe.className," Snf"]}),u.jsx("p",{className:ne.detailSubtitle,children:"Snav bazl performans analizi"})]}),u.jsxs("div",{className:ne.headerStats,children:[u.jsxs("div",{className:ne.headerStatItem,children:[u.jsx("span",{className:ne.hLabel,children:"Genel Baar"}),u.jsxs("span",{className:ne.hValue,style:{color:L(pe.overallAvg)},children:["%",pe.overallAvg]})]}),u.jsxs("div",{className:ne.headerStatItem,children:[u.jsx("span",{className:ne.hLabel,children:"Toplam Snav"}),u.jsx("span",{className:ne.hValue,children:pe.quizzes.length})]})]})]}),u.jsx("div",{className:ne.quizList,children:pe.quizzes.length>0?pe.quizzes.map(ue=>u.jsxs("div",{className:ne.quizCard,onClick:()=>{g(ue.id),o("quiz_detail")},children:[u.jsx("div",{className:ne.quizIcon,children:u.jsx(od,{size:24})}),u.jsxs("div",{className:ne.quizContent,children:[u.jsxs("div",{className:ne.quizMainInfo,children:[u.jsx("h3",{className:ne.quizTitle,children:ue.title.includes("-")?ue.title.split("-").slice(1).join("-").trim():ue.title}),u.jsxs("span",{className:ne.quizDate,children:[u.jsx(rd,{size:14}),D(ue.createdAt)]})]}),u.jsx("div",{className:ne.quizMeta,children:u.jsx("span",{className:ne.tag,children:ue.subject})})]}),u.jsxs("div",{className:ne.quizStats,children:[u.jsxs("div",{className:ne.qStat,children:[u.jsx("span",{className:ne.qLabel,children:"Katlm"}),u.jsx("span",{className:ne.qValue,children:ue.submissionCount})]}),u.jsxs("div",{className:ne.qStat,children:[u.jsx("span",{className:ne.qLabel,children:"Ortalama"}),u.jsxs("div",{className:ne.scoreBadge,style:{backgroundColor:`${L(ue.avgScore)}15`,color:L(ue.avgScore)},children:["%",ue.avgScore]})]}),u.jsx(Ks,{size:20,className:ne.arrow})]})]},ue.id)):u.jsx("div",{className:ne.emptyState,children:u.jsx("p",{children:"Bu snfa ait yaynlanm snav bulunamad."})})})]}):null,Z=w.useMemo(()=>{if(!m)return null;const ue=P.find(he=>he.id===m),O=B.filter(he=>he.quizId===m);if(!ue)return null;const Y=O.length>0?Math.round(O.reduce((he,Ne)=>he+(Ne.percentage||0),0)/O.length):0,F=O.map(he=>{const Ne=z.find(ce=>ce.id===he.studentId);return{submission:he,studentName:Ne?.displayName||"Bilinmeyen renci",score:he.percentage||0}}).sort((he,Ne)=>Ne.score-he.score),oe=ue.questions.map((he,Ne)=>{let ce=0;return O.forEach(fe=>{fe.answers.find(it=>it.questionId===he.id)?.isCorrect&&ce++}),{...he,index:Ne+1,correctPercentage:O.length>0?Math.round(ce/O.length*100):0}}),me=oe.filter(he=>he.correctPercentage<50);return{quiz:ue,avgScore:Y,participation:O.length,studentList:F,questionAnalysis:oe,lowPerformanceParams:me}},[m,P,B,z]),ge=()=>{if(!Z)return null;const{quiz:ue,avgScore:O,studentList:Y,questionAnalysis:F,lowPerformanceParams:oe}=Z;return u.jsxs("div",{className:ne.animateFadeIn,children:[u.jsx("div",{className:ne.breadcrumb,children:u.jsxs(ke,{variant:"ghost",size:"sm",onClick:()=>o("class_detail"),leftIcon:u.jsx(Ws,{size:16}),children:[l," Snavlarna Dn"]})}),u.jsxs("div",{className:ne.detailHeader,children:[u.jsxs("div",{children:[u.jsxs("div",{className:ne.tagRow,children:[u.jsx("span",{className:ne.tag,children:ue.subject}),u.jsx("span",{className:ne.dateTag,children:D(ue.createdAt)})]}),u.jsx("h1",{className:ne.detailTitle,children:ue.title.includes("-")?ue.title.split("-").slice(1).join("-").trim():ue.title})]}),u.jsxs("div",{className:ne.examScoreBig,style:{color:L(O)},children:[u.jsxs("div",{className:ne.scoreCircle,children:["%",O]}),u.jsx("span",{children:"Snf Ortalamas"})]})]}),u.jsxs("div",{className:ne.reportGrid,children:[u.jsx("div",{className:ne.colLeft,children:u.jsxs(df,{className:ne.sectionCard,children:[u.jsxs("div",{className:`${ne.cardHeader} ${ne.collapsibleHeader}`,onClick:()=>X(!de),children:[u.jsxs("div",{className:ne.headerLeft,children:[u.jsx(qu,{size:20}),u.jsx("h3",{children:"renci Sralamas"})]}),u.jsx(Ks,{size:20,style:{transform:de?"rotate(90deg)":"none",transition:"transform 0.2s"}})]}),u.jsx("div",{className:`${ne.collapsibleContent} ${de?ne.open:""}`,children:u.jsxs("div",{className:ne.studentTable,children:[u.jsxs("div",{className:ne.tableHead,children:[u.jsx("span",{children:"renci"}),u.jsx("span",{children:"Puan"}),u.jsx("span",{children:"Detay"})]}),u.jsxs("div",{className:ne.tableBody,children:[Y.map((me,he)=>u.jsxs("div",{className:ne.tableRow,style:{cursor:"pointer"},onClick:()=>{v(me.submission.id),o("student_detail")},children:[u.jsxs("div",{className:ne.stName,children:[u.jsx("div",{className:ne.avatar,children:me.studentName.charAt(0)}),me.studentName]}),u.jsx("div",{className:ne.stScore,style:{color:L(me.score)},children:me.score}),u.jsx("div",{className:ne.stDetail,children:u.jsx(Ks,{size:16,color:"#94a3b8"})})]},he)),Y.length===0&&u.jsx("div",{className:ne.emptyTable,children:"Henz katlm yok."})]})]})})]})}),u.jsx("div",{className:ne.colRight,children:u.jsxs(df,{className:ne.sectionCard,children:[u.jsxs("div",{className:`${ne.cardHeader} ${ne.collapsibleHeader}`,onClick:()=>I(!k),children:[u.jsxs("div",{className:ne.headerLeft,children:[u.jsx(zx,{size:20}),u.jsx("h3",{children:"Soru Analizi"})]}),u.jsx(Ks,{size:20,style:{transform:k?"rotate(90deg)":"none",transition:"transform 0.2s"}})]}),u.jsxs("div",{className:`${ne.collapsibleContent} ${k?ne.open:""}`,children:[oe.length>0&&u.jsxs("div",{className:ne.warningBox,children:[u.jsx(qx,{size:16}),u.jsxs("span",{children:[u.jsxs("strong",{children:[oe.length," soru"]})," snf genelinde %50'nin altnda baar ald."]})]}),u.jsx("div",{className:ne.questionGrid,children:F.map(me=>u.jsxs("div",{className:ne.qStatItem,children:[u.jsxs("div",{className:ne.qTop,children:[u.jsxs("span",{className:ne.qIdx,children:["Soru ",me.index]}),u.jsxs("span",{className:ne.qPrc,style:{color:L(me.correctPercentage)},children:["%",me.correctPercentage]})]}),u.jsx("div",{className:ne.qProg,children:u.jsx("div",{className:ne.qFill,style:{width:`${me.correctPercentage}%`,backgroundColor:L(me.correctPercentage)}})})]},me.id))})]})]})})]})]})},Ae=w.useMemo(()=>{if(!_||!m)return null;const ue=B.find(F=>F.id===_),O=P.find(F=>F.id===m),Y=z.find(F=>F.id===ue?.studentId);return!ue||!O||!Y?null:{quiz:O,submission:ue,student:Y}},[_,m,B,P,z]),Fe=()=>{if(!Ae)return null;const{quiz:ue,submission:O,student:Y}=Ae;return u.jsxs("div",{className:ne.animateFadeIn,children:[u.jsx("div",{className:ne.breadcrumb,children:u.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>o("quiz_detail"),leftIcon:u.jsx(Ws,{size:16}),children:"Genel Sonulara Dn"})}),u.jsxs("div",{className:ne.detailHeader,children:[u.jsxs("div",{children:[u.jsx("h1",{className:ne.detailTitle,children:Y.displayName}),u.jsx("p",{className:ne.detailSubtitle,children:ue.title.includes("-")?ue.title.split("-").slice(1).join("-").trim():ue.title})]}),u.jsxs("div",{className:ne.examScoreBig,style:{color:L(O.percentage||0)},children:[u.jsxs("div",{className:ne.scoreCircle,children:["%",O.percentage]}),u.jsx("span",{children:"renci Puan"})]})]}),u.jsx("div",{className:ne.questionsContainer,children:ue.questions.map((F,oe)=>{const me=O.answers.find(Ne=>Ne.questionId===F.id),he=me?.isCorrect;return u.jsxs(df,{className:`${ne.questionResultCard} ${he?ne.correctCard:ne.incorrectCard}`,children:[u.jsxs("div",{className:ne.qResultHeader,children:[u.jsxs("span",{className:ne.qNumber,children:["Soru ",oe+1]}),he?u.jsxs("span",{className:ne.statusCorrect,children:[u.jsx(Vx,{size:16})," Doru"]}):u.jsxs("span",{className:ne.statusIncorrect,children:[u.jsx(MM,{size:16})," Yanl"]})]}),u.jsx("div",{className:ne.qText,children:F.question}),u.jsxs("div",{className:ne.optionsList,children:[F.type==="multiple_choice"&&F.options.map(Ne=>{const ce=me?.selectedOptionIds?.includes(Ne.id),fe=Ne.isCorrect;let we=ne.optionItem;return ce&&fe?we+=` ${ne.optCorrectSelected}`:ce&&!fe?we+=` ${ne.optWrongSelected}`:!ce&&fe&&(we+=` ${ne.optCorrectMissed}`),u.jsxs("div",{className:we,children:[u.jsxs("div",{className:ne.optMarker,children:[ce&&fe&&u.jsx(To,{size:14}),ce&&!fe&&u.jsx(Ao,{size:14}),!ce&&fe&&u.jsx(To,{size:14})]}),Ne.text]},Ne.id)}),F.type==="true_false"&&u.jsxs("div",{className:ne.booleanResult,children:[u.jsx("div",{className:`${ne.optionItem} ${me?.booleanAnswer===!0?he?ne.optCorrectSelected:ne.optWrongSelected:F.correctAnswer===!0?ne.optCorrectMissed:""}`,children:"Doru"}),u.jsx("div",{className:`${ne.optionItem} ${me?.booleanAnswer===!1?he?ne.optCorrectSelected:ne.optWrongSelected:F.correctAnswer===!1?ne.optCorrectMissed:""}`,children:"Yanl"})]})]})]},F.id)})})]})};return N?u.jsx("div",{className:ne.page,children:u.jsx("div",{className:ne.loadingState,children:u.jsx(_s,{size:"lg"})})}):u.jsxs("div",{className:ne.page,children:[a==="classes"&&A(),a==="class_detail"&&Re(),a==="quiz_detail"&&ge(),a==="student_detail"&&Fe()]})},S$="_page_16pjs_1",A$="_loadingWrapper_16pjs_15",x$="_header_16pjs_31",w$="_headerTop_16pjs_39",I$="_greeting_16pjs_55",R$="_studentName_16pjs_71",N$="_subtitle_16pjs_85",C$="_vibrantPulseBtn_16pjs_97",k$="_contextBar_16pjs_231",j$="_contextItem_16pjs_251",D$="_contextLabel_16pjs_263",O$="_contextValue_16pjs_279",M$="_statsGrid_16pjs_307",z$="_statCard_16pjs_321",L$="_statIcon_16pjs_357",P$="_statContent_16pjs_381",V$="_statValue_16pjs_389",U$="_statLabel_16pjs_407",B$="_statDecor_16pjs_421",q$="_blue_16pjs_439",H$="_purple_16pjs_449",$$="_orange_16pjs_459",F$="_green_16pjs_469",G$="_contentGrid_16pjs_481",Q$="_section_16pjs_493",K$="_sectionHeader_16pjs_509",Y$="_sectionTitle_16pjs_523",W$="_seeAllBtn_16pjs_537",X$="_list_16pjs_569",Z$="_listItem_16pjs_581",J$="_itemIcon_16pjs_619",eF="_resultIcon_16pjs_643",tF="_itemInfo_16pjs_653",nF="_itemTitle_16pjs_661",sF="_itemMeta_16pjs_675",iF="_itemArrow_16pjs_693",aF="_empty_16pjs_713",Se={page:S$,loadingWrapper:A$,header:x$,headerTop:w$,greeting:I$,studentName:R$,subtitle:N$,vibrantPulseBtn:C$,contextBar:k$,contextItem:j$,contextLabel:D$,contextValue:O$,statsGrid:M$,statCard:z$,statIcon:L$,statContent:P$,statValue:V$,statLabel:U$,statDecor:B$,blue:q$,purple:H$,orange:$$,green:F$,contentGrid:G$,section:Q$,sectionHeader:K$,sectionTitle:Y$,seeAllBtn:W$,list:X$,listItem:Z$,itemIcon:J$,resultIcon:eF,itemInfo:tF,itemTitle:nF,itemMeta:sF,itemArrow:iF,empty:aF},rF=()=>{const{user:s}=Ft(),e=In(),t=s,[a,o]=w.useState([]),[l,d]=w.useState([]),[m,g]=w.useState({}),[_,v]=w.useState(!0);w.useEffect(()=>{(async()=>{if(s)try{v(!0);const[N,M]=await Promise.all([Vy(),tw(s.id)]),P=M.filter(z=>z.status==="submitted"||z.status==="graded"),j=new Set(P.map(z=>z.quizId)),B={};N.forEach(z=>B[z.id]=z);const H=Array.from(new Set(P.map(z=>z.quizId))).filter(z=>!B[z]);H.length>0&&await Promise.all(H.map(async z=>{const G=await xr(z);G&&(B[z]=G)})),g(B),o(N.filter(z=>!j.has(z.id))),d(P)}catch(N){console.error("Dashboard data error:",N)}finally{v(!1)}})()},[s]);const b=l.length>0?Math.round(l.reduce((S,N)=>S+(N.percentage||0),0)/l.length):0;return _?u.jsx("div",{className:Se.loadingWrapper,children:u.jsx(_s,{size:"lg"})}):u.jsxs("div",{className:Se.page,children:[u.jsxs("div",{className:Se.header,children:[u.jsxs("div",{className:Se.headerTop,children:[u.jsxs("div",{children:[u.jsxs("h1",{className:Se.greeting,children:["Merhaba, ",u.jsx("span",{className:Se.studentName,children:s?.displayName?.split(" ")[0]||"renci"})," "]}),u.jsx("p",{className:Se.subtitle,children:"Snavlarn zmeye ve baarn artrmaya hazr msn?"})]}),u.jsx("div",{className:Se.headerActions,children:u.jsx(ke,{variant:"danger",className:Se.vibrantPulseBtn,onClick:()=>e(ye.STUDENT.QUIZZES),children:"SINAVLARA GT"})})]}),u.jsxs("div",{className:Se.contextBar,children:[u.jsxs("div",{className:Se.contextItem,children:[u.jsx("label",{className:Se.contextLabel,children:"KURUMUM"}),u.jsxs("div",{className:Se.contextValue,children:[u.jsx(Jl,{size:16}),u.jsx("span",{children:"Enderun Koleji Merkez"})]})]}),u.jsxs("div",{className:Se.contextItem,children:[u.jsx("label",{className:Se.contextLabel,children:"SINIFIM"}),u.jsxs("div",{className:Se.contextValue,children:[u.jsx(Bx,{size:16}),u.jsx("span",{children:t?.classId||"9-A"})]})]})]})]}),u.jsxs("div",{className:Se.statsGrid,children:[u.jsxs("div",{className:`${Se.statCard} ${Se.blue}`,onClick:()=>e(ye.STUDENT.QUIZZES),children:[u.jsx("div",{className:Se.statIcon,children:u.jsx(Uu,{size:24})}),u.jsxs("div",{className:Se.statContent,children:[u.jsx("span",{className:Se.statValue,children:a.length}),u.jsx("span",{className:Se.statLabel,children:"AKTF SINAV"})]}),u.jsx("div",{className:Se.statDecor,children:u.jsx(Uu,{size:80})})]}),u.jsxs("div",{className:`${Se.statCard} ${Se.purple}`,onClick:()=>e(ye.STUDENT.RESULTS),children:[u.jsx("div",{className:Se.statIcon,children:u.jsx(ho,{size:24})}),u.jsxs("div",{className:Se.statContent,children:[u.jsx("span",{className:Se.statValue,children:l.length}),u.jsx("span",{className:Se.statLabel,children:"TAMAMLANAN"})]}),u.jsx("div",{className:Se.statDecor,children:u.jsx(ho,{size:80})})]}),u.jsxs("div",{className:`${Se.statCard} ${Se.orange}`,onClick:()=>e(ye.STUDENT.RESULTS),children:[u.jsx("div",{className:Se.statIcon,children:u.jsx(fT,{size:24})}),u.jsxs("div",{className:Se.statContent,children:[u.jsxs("span",{className:Se.statValue,children:["%",b]}),u.jsx("span",{className:Se.statLabel,children:"BAARI ORT."})]}),u.jsx("div",{className:Se.statDecor,children:u.jsx(fT,{size:80})})]}),u.jsxs("div",{className:`${Se.statCard} ${Se.green}`,children:[u.jsx("div",{className:Se.statIcon,children:u.jsx(Bu,{size:24})}),u.jsxs("div",{className:Se.statContent,children:[u.jsx("span",{className:Se.statValue,children:"12"}),u.jsx("span",{className:Se.statLabel,children:"SORU ZLD"})]}),u.jsx("div",{className:Se.statDecor,children:u.jsx(Bu,{size:80})})]})]}),u.jsxs("div",{className:Se.contentGrid,children:[u.jsxs("div",{className:Se.section,children:[u.jsxs("div",{className:Se.sectionHeader,children:[u.jsx("h2",{className:Se.sectionTitle,children:"Sana Atanan Snavlar"}),u.jsx("button",{className:Se.seeAllBtn,onClick:()=>e(ye.STUDENT.QUIZZES),children:"Tmn Gr"})]}),u.jsxs("div",{className:Se.list,children:[a.slice(0,3).map(S=>u.jsxs("div",{className:Se.listItem,onClick:()=>e(ye.STUDENT.QUIZ_PLAYER.replace(":id",S.id)),children:[u.jsx("div",{className:Se.itemIcon,children:u.jsx(fm,{size:20})}),u.jsxs("div",{className:Se.itemInfo,children:[u.jsx("h4",{className:Se.itemTitle,children:S.title}),u.jsxs("div",{className:Se.itemMeta,children:[u.jsxs("span",{children:[S.questions.length," Soru"]}),u.jsx("span",{children:""}),u.jsxs("span",{children:[S.estimatedDuration," Dakika"]})]})]}),u.jsx(Ks,{className:Se.itemArrow,size:20})]},S.id)),a.length===0&&u.jsx("div",{className:Se.empty,children:"Atanm yeni bir snavn yok."})]})]}),u.jsxs("div",{className:Se.section,children:[u.jsxs("div",{className:Se.sectionHeader,children:[u.jsx("h2",{className:Se.sectionTitle,children:"Son Snav Sonularn"}),u.jsx("button",{className:Se.seeAllBtn,onClick:()=>e(ye.STUDENT.RESULTS),children:"Tmn Gr"})]}),u.jsxs("div",{className:Se.list,children:[l.slice(0,3).map(S=>{const N=m[S.quizId];return u.jsxs("div",{className:Se.listItem,onClick:()=>e(ye.STUDENT.QUIZ_RESULT.replace(":id",S.id)),children:[u.jsx("div",{className:`${Se.itemIcon} ${Se.resultIcon}`,children:u.jsx(ho,{size:20})}),u.jsxs("div",{className:Se.itemInfo,children:[u.jsx("h4",{className:Se.itemTitle,children:N?.title||"Ykleniyor..."}),u.jsxs("div",{className:Se.itemMeta,children:[u.jsxs("span",{style:{color:S.percentage>=60?"#10b981":"#f59e0b",fontWeight:800},children:["%",S.percentage," Baar"]}),u.jsx("span",{children:""}),u.jsx(rd,{size:12,style:{marginRight:4}}),u.jsx("span",{children:S.submittedAt?new Date(S.submittedAt).toLocaleDateString("tr-TR"):"-"})]})]}),u.jsx(Ks,{className:Se.itemArrow,size:20})]},S.id)}),l.length===0&&u.jsx("div",{className:Se.empty,children:"Henz tamamladn bir snav yok."})]})]})]})]})},oF=({quizId:s,questions:e,timeLimit:t,onComplete:a})=>{const[o,l]=w.useState(0),[d,m]=w.useState({}),[g,_]=w.useState(t?t*60:void 0),[v,b]=w.useState(!1),[S,N]=w.useState(!1),M=`quiz_session_${s}`;w.useEffect(()=>{if(!s)return;const z=localStorage.getItem(M);if(z)try{const G=JSON.parse(z);m(G.answers||{}),l(G.currentIndex||0),G.timeRemaining&&_(G.timeRemaining)}catch(G){console.error("Failed to load quiz session",G)}N(!0)},[s]),w.useEffect(()=>{if(!S||!s||e.length===0)return;if(v){localStorage.removeItem(M);return}const z={answers:d,currentIndex:o,timeRemaining:g,updatedAt:Date.now()};localStorage.setItem(M,JSON.stringify(z))},[d,o,g,v,s,S,e.length]),w.useEffect(()=>{if(g===void 0||v||!S)return;if(g<=0){H(!0);return}const z=setInterval(()=>{_(G=>G!==void 0?G-1:void 0)},1e3);return()=>clearInterval(z)},[g,v,S]);const P=z=>{if(v)return;const G=e[o];G&&m(de=>({...de,[G.id]:z}))},j=()=>{o<e.length-1&&l(z=>z+1)},B=()=>{o>0&&l(z=>z-1)},H=w.useCallback(async(z=!1)=>{const G=Object.keys(d).length;if(!z&&G===0)throw new Error("Hibir soruya cevap vermediniz. Ltfen en az bir soruyu yantlayn.");try{a&&await a({quizId:s,answers:d,completedAt:new Date,timeSpent:t?t*60-(g||0):0}),localStorage.removeItem(M),b(!0)}catch(de){throw console.error("Completion error:",de),de}},[d,s,t,g,a]);return{currentQuestionIndex:o,currentQuestion:e[o],answers:d,timeRemaining:g,isCompleted:v,handleAnswerChange:P,handleNext:j,handlePrevious:B,handleComplete:H,progress:(o+1)/e.length*100}},lF="_page_1eesw_1",cF="_loadingWrapper_1eesw_8",uF="_errorWrapper_1eesw_9",dF="_playerHeader_1eesw_20",hF="_headerLeft_1eesw_32",fF="_backBreadcrumb_1eesw_38",mF="_quizInfo_1eesw_58",pF="_quizTitle_1eesw_64",gF="_quizBadge_1eesw_71",_F="_headerRight_1eesw_83",yF="_timerBox_1eesw_89",vF="_progressBox_1eesw_103",bF="_progressLabel_1eesw_107",EF="_progressBar_1eesw_117",TF="_progressFill_1eesw_124",SF="_mainContent_1eesw_132",AF="_questionContainer_1eesw_139",xF="_questionCard_1eesw_147",wF="_navigation_1eesw_155",IF="_navBtn_1eesw_162",RF="_finishBtn_1eesw_173",zt={page:lF,loadingWrapper:cF,errorWrapper:uF,playerHeader:dF,headerLeft:hF,backBreadcrumb:fF,quizInfo:mF,quizTitle:pF,quizBadge:gF,headerRight:_F,timerBox:yF,progressBox:vF,progressLabel:bF,progressBar:EF,progressFill:TF,mainContent:SF,questionContainer:AF,questionCard:xF,navigation:wF,navBtn:IF,finishBtn:RF},NF=()=>{const{id:s}=Fu(),e=In(),{user:t}=Ft(),{addToast:a}=xn(),o=ao.useRef(!1),[l,d]=w.useState(null),[m,g]=w.useState(!0),[_,v]=w.useState(null),[b,S]=w.useState(null),[N,M]=w.useState(!1);w.useEffect(()=>{t&&(async()=>{if(!(!s||!t||o.current)){o.current=!0;try{const L=await xr(s);if(!L){v("Quiz bulunamad."),g(!1);return}const U=(await Uy(s,t.id)).find(A=>A.status==="in_progress");if(U)S(U.id);else try{const A=await S9(s,t.id);S(A.id)}catch(A){if(A.message==="Maximum attempts reached")v("Bu snav iin maksimum deneme hakknz doldurdunuz.");else throw A;g(!1);return}d(L)}catch(L){console.error("Quiz init error:",L),v("Quiz yklenirken bir hata olutu.")}finally{g(!1)}}})()},[s,t]);const{currentQuestionIndex:P,currentQuestion:j,answers:B,timeRemaining:H,handleAnswerChange:z,handleNext:G,handlePrevious:de,handleComplete:X}=oF({quizId:s||"",questions:l?.questions||[],timeLimit:l?.settings?.timeLimit,onComplete:async C=>{if(!(!b||N)){M(!0);try{const L=Object.entries(C.answers).map(([D,U])=>{const A=l?.questions.find(Re=>Re.id===D);if(!A)return null;const pe={questionId:D,questionType:A.type};return A.type==="multiple_choice"?pe.selectedOptionIds=[U]:A.type==="true_false"&&(pe.booleanAnswer=U),pe}).filter(Boolean);await x9(b,L),a({type:"success",title:"Baarl",message:"Snav baaryla gnderildi."}),e(`/student/quiz/result/${b}`)}catch(L){console.error("Submission error:",L),M(!1)}}}});if(m)return u.jsxs("div",{className:zt.loadingWrapper,children:[u.jsx(_s,{size:"lg"}),u.jsx("p",{children:"Snav hazrlanyor..."})]});if(_)return u.jsxs("div",{className:zt.errorWrapper,children:[u.jsx("h2",{children:" Hata"}),u.jsx("p",{children:_}),u.jsx(ke,{onClick:()=>e("/student"),children:"Panele Dn"})]});if(!l)return null;const k=P===l.questions.length-1,I=(P+1)/l.questions.length*100;return u.jsxs("div",{className:zt.page,children:[u.jsxs("div",{className:zt.playerHeader,children:[u.jsxs("div",{className:zt.headerLeft,children:[u.jsxs("button",{className:zt.backBreadcrumb,onClick:()=>e("/student"),children:[u.jsx(Ws,{size:16}),u.jsx("span",{children:"Geri"})]}),u.jsxs("div",{className:zt.quizInfo,children:[u.jsx("h1",{className:zt.quizTitle,children:l.title}),u.jsx("div",{className:zt.quizBadge,children:l.subject})]})]}),u.jsxs("div",{className:zt.headerRight,children:[H!==void 0&&u.jsxs("div",{className:zt.timerBox,children:[u.jsx(Zl,{size:18}),u.jsxs("span",{children:[Math.floor(H/60),":",(H%60).toString().padStart(2,"0")]})]}),u.jsxs("div",{className:zt.progressBox,children:[u.jsxs("div",{className:zt.progressLabel,children:[u.jsx(tz,{size:16}),u.jsxs("span",{children:["Soru ",P+1," / ",l.questions.length]})]}),u.jsx("div",{className:zt.progressBar,children:u.jsx("div",{className:zt.progressFill,style:{width:`${I}%`}})})]})]})]}),u.jsx("main",{className:zt.mainContent,children:u.jsxs("div",{className:zt.questionContainer,children:[u.jsx("div",{className:zt.questionCard,children:u.jsx(qy,{question:j,answer:B[j.id],onAnswerChange:z,readOnly:N})}),u.jsxs("div",{className:zt.navigation,children:[u.jsx(ke,{variant:"outline",onClick:de,disabled:P===0||N,className:zt.navBtn,leftIcon:u.jsx(Ws,{size:18}),children:"nceki Soru"}),k?u.jsx(ke,{variant:"primary",className:zt.finishBtn,onClick:()=>{const C=l.questions.length-Object.keys(B).length;if(C>0){a({type:"warning",title:"Dikkat",message:`Henz cevaplamadnz ${C} soru var. Ltfen tm sorular yantlayn.`});return}X()},isLoading:N,leftIcon:u.jsx(fa,{size:18}),children:"Snav Tamamla"}):u.jsx(ke,{variant:"primary",onClick:G,disabled:N,className:zt.navBtn,rightIcon:u.jsx(hf,{size:18}),children:"Sonraki Soru"})]})]})})]})},CF="_page_1f5bo_1",kF="_header_1f5bo_20",jF="_title_1f5bo_24",DF="_subtitle_1f5bo_32",OF="_tabBar_1f5bo_38",MF="_tabItem_1f5bo_48",zF="_tabActive_1f5bo_68",LF="_quizList_1f5bo_74",PF="_quizItem_1f5bo_80",VF="_itemActive_1f5bo_100",UF="_quizIcon_1f5bo_105",BF="_itemCompleted_1f5bo_110",qF="_quizInfo_1f5bo_138",HF="_quizTitle_1f5bo_142",$F="_quizMeta_1f5bo_149",FF="_duration_1f5bo_158",GF="_statusWrapper_1f5bo_164",QF="_badge_1f5bo_168",KF="_badgePublished_1f5bo_178",YF="_badgeSuccess_1f5bo_186",WF="_startLink_1f5bo_194",XF="_completedLink_1f5bo_204",ZF="_actionArrow_1f5bo_219",JF="_emptyState_1f5bo_227",eG="_emptyIcon_1f5bo_236",tG="_loadingContainer_1f5bo_254",lt={page:CF,header:kF,title:jF,subtitle:DF,tabBar:OF,tabItem:MF,tabActive:zF,quizList:LF,quizItem:PF,itemActive:VF,quizIcon:UF,itemCompleted:BF,quizInfo:qF,quizTitle:HF,quizMeta:$F,duration:FF,statusWrapper:GF,badge:QF,badgePublished:KF,badgeSuccess:YF,startLink:WF,completedLink:XF,actionArrow:ZF,emptyState:JF,emptyIcon:eG,loadingContainer:tG},nG=()=>{const s=In(),{user:e}=Ft(),[t,a]=w.useState([]),[o,l]=w.useState([]),[d,m]=w.useState(!0),[g,_]=w.useState("active");w.useEffect(()=>{(async()=>{if(e)try{const[P,j]=await Promise.all([Vy(),Uy("",e.id)]),B=e?.classId,H=P.filter(z=>!z.classIds||z.classIds.length===0?!0:B&&z.classIds.includes(B));a(H),l(j)}catch(P){console.error("Failed to fetch quizzes:",P)}finally{m(!1)}})()},[e]);const v=new Set(o.filter(M=>M.status==="submitted"||M.status==="graded").map(M=>M.quizId)),b=t.filter(M=>!v.has(M.id)),S=t.filter(M=>v.has(M.id)),N=g==="active"?b:S;return d?u.jsx("div",{className:lt.page,children:u.jsxs("div",{className:lt.loadingContainer,children:[u.jsx(_s,{size:"lg"}),u.jsx("p",{children:"Snavlar ykleniyor..."})]})}):u.jsxs("div",{className:lt.page,children:[u.jsx("div",{className:lt.header,children:u.jsxs("div",{className:lt.headerTitle,children:[u.jsx("h1",{className:lt.title,children:"Snavlarm"}),u.jsx("p",{className:lt.subtitle,children:"Eitim yolculuundaki tm snavlarn buradan takip edebilirsin."})]})}),u.jsxs("div",{className:lt.tabBar,children:[u.jsxs("button",{className:`${lt.tabItem} ${g==="active"?lt.tabActive:""}`,onClick:()=>_("active"),children:[u.jsx(E_,{size:20}),u.jsxs("span",{children:["Aktif Snavlar (",b.length,")"]})]}),u.jsxs("button",{className:`${lt.tabItem} ${g==="completed"?lt.tabActive:""}`,onClick:()=>_("completed"),children:[u.jsx(ho,{size:20}),u.jsxs("span",{children:["Tamamlananlar (",S.length,")"]})]})]}),N.length===0?u.jsxs("div",{className:lt.emptyState,children:[u.jsx("div",{className:lt.emptyIcon,children:g==="active"?u.jsx(Uu,{size:64,strokeWidth:1}):u.jsx(ho,{size:64,strokeWidth:1})}),u.jsx("h3",{children:g==="active"?"Henz aktif bir snav yok":"Henz tamamladn bir snav yok"}),u.jsx("p",{children:g==="active"?"retmenlerin yeni snavlar yaynladnda burada grnecektir.":"zdn snavlarn sonularn bu alandan inceleyebilirsin."})]}):u.jsx("div",{className:lt.quizList,children:N.map(M=>{const P=o.find(B=>B.quizId===M.id),j=P?.status==="submitted"||P?.status==="graded";return u.jsxs("div",{className:`${lt.quizItem} ${j?lt.itemCompleted:lt.itemActive}`,onClick:()=>{s(j?`/student/quiz/result/${P?.id}`:`/student/quiz/${M.id}`)},children:[u.jsx("div",{className:lt.quizIcon,children:j?u.jsx(Vx,{size:24}):u.jsx(E_,{size:24})}),u.jsxs("div",{className:lt.quizInfo,children:[u.jsx("div",{className:lt.quizTitle,children:M.title}),u.jsxs("div",{className:lt.quizMeta,children:[u.jsx("span",{children:M.subject||"Genel"}),u.jsx("span",{children:""}),u.jsxs("span",{children:[M.questions.length," Soru"]}),u.jsx("span",{children:""}),u.jsxs("div",{className:lt.duration,children:[u.jsx(Zl,{size:16}),u.jsxs("span",{children:[M.estimatedDuration," dk"]})]})]}),u.jsx("div",{className:lt.statusWrapper,children:j?u.jsxs("span",{className:`${lt.badge} ${lt.badgeSuccess}`,children:["TAMAMLANDI (%",P?.percentage,")"]}):u.jsx("span",{className:`${lt.badge} ${lt.badgePublished}`,children:"YAYINDA"})})]}),u.jsx("div",{className:lt.quizActions,children:u.jsxs("div",{className:j?lt.completedLink:lt.startLink,children:[j?"Sonuca Git":"Snava Bala",u.jsx(Ks,{size:20,className:lt.actionArrow})]})})]},M.id)})})]})},sG="_page_g50p6_3",iG="_loadingWrapper_g50p6_9",aG="_errorWrapper_g50p6_10",rG="_header_g50p6_21",oG="_headerTop_g50p6_41",lG="_breadcrumbArea_g50p6_48",cG="_backBtn_g50p6_54",uG="_titleGroup_g50p6_73",dG="_title_g50p6_73",hG="_subtitle_g50p6_86",fG="_summaryGrid_g50p6_105",mG="_statsRow_g50p6_116",pG="_statItem_g50p6_122",gG="_statIcon_g50p6_143",_G="_statInfo_g50p6_154",yG="_statVal_g50p6_160",vG="_statLabel_g50p6_166",bG="_main_g50p6_112",EG="_sectionHeader_g50p6_181",TG="_questionList_g50p6_194",SG="_questionItem_g50p6_200",AG="_qCorrect_g50p6_218",xG="_qIncorrect_g50p6_222",wG="_qHeader_g50p6_226",IG="_qMeta_g50p6_233",RG="_qNum_g50p6_239",NG="_qPoints_g50p6_246",CG="_correctBadge_g50p6_255",kG="_incorrectBadge_g50p6_265",jG="_qViewerBox_g50p6_275",DG="_teacherNote_g50p6_281",OG="_footerActions_g50p6_297",MG="_vibrantBtn_g50p6_304",Le={page:sG,loadingWrapper:iG,errorWrapper:aG,header:rG,headerTop:oG,breadcrumbArea:lG,backBtn:cG,titleGroup:uG,title:dG,subtitle:hG,summaryGrid:fG,statsRow:mG,statItem:pG,statIcon:gG,statInfo:_G,statVal:yG,statLabel:vG,main:bG,sectionHeader:EG,questionList:TG,questionItem:SG,qCorrect:AG,qIncorrect:xG,qHeader:wG,qMeta:IG,qNum:RG,qPoints:NG,correctBadge:CG,incorrectBadge:kG,qViewerBox:jG,teacherNote:DG,footerActions:OG,vibrantBtn:MG},zG=()=>{const{id:s}=Fu(),e=In(),[t,a]=w.useState(null),[o,l]=w.useState(null),[d,m]=w.useState(!0),[g,_]=w.useState(null);w.useEffect(()=>{(async()=>{if(s)try{const j=await A9(s);if(!j){_("Sonu bulunamad."),m(!1);return}a(j);const B=await xr(j.quizId);B?l(B):_("lgili snav bilgisi bulunamad.")}catch{_("Veriler yklenirken bir hata olutu.")}finally{m(!1)}})()},[s]);const v=P=>{if(!P||P===0)return"0 dk";const j=P>1e5?Math.floor(P/1e3):P,B=Math.floor(j/3600),H=Math.floor(j%3600/60),z=j%60;return B>0?`${B} sa ${H} dk`:H>0?`${H} dk`:`${z} sn`},b=P=>P.questionType==="multiple_choice"?P.selectedOptionIds?.[0]:P.questionType==="true_false"?P.booleanAnswer:null;if(d)return u.jsxs("div",{className:Le.loadingWrapper,children:[u.jsx(_s,{size:"lg"}),u.jsx("p",{children:"Sonular hazrlanyor..."})]});if(g||!t||!o)return u.jsxs("div",{className:Le.errorWrapper,children:[u.jsx("h2",{children:" Hata"}),u.jsx("p",{children:g||"Veriye ulalamad"}),u.jsx(ke,{onClick:()=>e("/student"),children:"Panele Dn"})]});const{percentage:S=0,score:N=0,totalPoints:M}=t;return u.jsxs("div",{className:Le.page,children:[u.jsx("div",{className:Le.breadcrumbArea,children:u.jsxs("button",{className:Le.backBtn,onClick:()=>e("/student"),children:[u.jsx(Ws,{size:16}),u.jsx("span",{children:"Geri Dn"})]})}),u.jsxs("header",{className:Le.header,children:[u.jsx("div",{className:Le.headerTop,children:u.jsxs("div",{className:Le.titleGroup,children:[u.jsx("h1",{className:Le.title,children:o.title}),u.jsx("p",{className:Le.subtitle,children:"PERFORMANS ANALZ RAPORU"})]})}),u.jsx("div",{className:Le.summaryGrid,children:u.jsxs("div",{className:Le.statsRow,children:[u.jsxs("div",{className:Le.statItem,children:[u.jsx(b_,{className:Le.statIcon,size:20}),u.jsxs("div",{className:Le.statInfo,children:[u.jsxs("span",{className:Le.statVal,children:["%",S]}),u.jsx("span",{className:Le.statLabel,children:"Baar"})]})]}),u.jsxs("div",{className:Le.statItem,children:[u.jsx(Bu,{className:Le.statIcon,size:20}),u.jsxs("div",{className:Le.statInfo,children:[u.jsxs("span",{className:Le.statVal,children:[N," / ",M]}),u.jsx("span",{className:Le.statLabel,children:"Toplam Puan"})]})]}),u.jsxs("div",{className:Le.statItem,children:[u.jsx(Zl,{className:Le.statIcon,size:20}),u.jsxs("div",{className:Le.statInfo,children:[u.jsx("span",{className:Le.statVal,children:v(t.duration)}),u.jsx("span",{className:Le.statLabel,children:"Sre"})]})]}),u.jsxs("div",{className:Le.statItem,children:[u.jsx(Gx,{className:Le.statIcon,size:20}),u.jsxs("div",{className:Le.statInfo,children:[u.jsxs("span",{className:Le.statVal,children:[t.attemptNumber,"."]}),u.jsx("span",{className:Le.statLabel,children:"Deneme"})]})]})]})})]}),u.jsxs("main",{className:Le.main,children:[u.jsxs("div",{className:Le.sectionHeader,children:[u.jsx(Oy,{size:20}),u.jsx("h2",{children:"Soru Detaylar ve Yantlar"})]}),u.jsx("div",{className:Le.questionList,children:o.questions.map((P,j)=>{const B=t.answers.find(z=>z.questionId===P.id),H=B?.isCorrect;return u.jsxs("div",{className:`${Le.questionItem} ${H?Le.qCorrect:Le.qIncorrect}`,children:[u.jsxs("div",{className:Le.qHeader,children:[u.jsxs("div",{className:Le.qMeta,children:[u.jsxs("span",{className:Le.qNum,children:["SORU ",j+1]}),u.jsxs("span",{className:Le.qPoints,children:[P.points," Puan"]})]}),u.jsx("div",{className:Le.statusBadge,children:H?u.jsxs("div",{className:Le.correctBadge,children:[u.jsx(To,{size:14})," DORU"]}):u.jsxs("div",{className:Le.incorrectBadge,children:[u.jsx(Ao,{size:14})," YANLI"]})})]}),u.jsx("div",{className:Le.qViewerBox,children:u.jsx(qy,{question:P,answer:B?b(B):null,onAnswerChange:()=>{},readOnly:!0,showFeedback:!0})}),B?.feedback&&u.jsxs("div",{className:Le.teacherNote,children:[u.jsx(b_,{size:16}),u.jsxs("p",{children:[u.jsx("strong",{children:"Deerlendirme Notu:"})," ",B.feedback]})]})]},P.id)})}),u.jsxs("div",{className:Le.footerActions,children:[u.jsx(ke,{variant:"ghost",onClick:()=>e("/student/results"),leftIcon:u.jsx(Ks,{size:18}),children:"Tm Gemii Grntle"}),u.jsx(ke,{variant:"primary",className:Le.vibrantBtn,onClick:()=>e("/student"),children:"Panele Dn"})]})]})]})},LG="_page_1ol4h_3",PG="_loadingWrapper_1ol4h_10",VG="_breadcrumb_1ol4h_18",UG="_backBtn_1ol4h_22",BG="_header_1ol4h_43",qG="_title_1ol4h_51",HG="_subtitle_1ol4h_59",$G="_statsSummary_1ol4h_65",FG="_statBox_1ol4h_70",GG="_statIcon_1ol4h_81",QG="_statData_1ol4h_92",KG="_statVal_1ol4h_97",YG="_statLbl_1ol4h_104",WG="_filterBar_1ol4h_114",XG="_searchBox_1ol4h_120",ZG="_filterBtn_1ol4h_151",JG="_list_1ol4h_171",eQ="_resultItem_1ol4h_177",tQ="_resultMain_1ol4h_195",nQ="_itemIcon_1ol4h_202",sQ="_itemContent_1ol4h_218",iQ="_itemTitle_1ol4h_223",aQ="_itemMeta_1ol4h_233",rQ="_metaItem_1ol4h_239",oQ="_subjectTag_1ol4h_248",lQ="_resultRight_1ol4h_258",cQ="_scoreGroup_1ol4h_265",uQ="_scorePoints_1ol4h_272",dQ="_percentageBadge_1ol4h_278",hQ="_actionIcon_1ol4h_286",fQ="_empty_1ol4h_296",mQ="_vibrantBtn_1ol4h_314",Ke={page:LG,loadingWrapper:PG,breadcrumb:VG,backBtn:UG,header:BG,title:qG,subtitle:HG,statsSummary:$G,statBox:FG,statIcon:GG,statData:QG,statVal:KG,statLbl:YG,filterBar:WG,searchBox:XG,filterBtn:ZG,list:JG,resultItem:eQ,resultMain:tQ,itemIcon:nQ,itemContent:sQ,itemTitle:iQ,itemMeta:aQ,metaItem:rQ,subjectTag:oQ,resultRight:lQ,scoreGroup:cQ,scorePoints:uQ,percentageBadge:dQ,actionIcon:hQ,empty:fQ,vibrantBtn:mQ},pQ=()=>{const{user:s}=Ft(),e=In(),[t,a]=w.useState([]),[o,l]=w.useState({}),[d,m]=w.useState(!0);w.useEffect(()=>{(async()=>{if(s)try{const M=(await tw(s.id)).filter(B=>B.status==="submitted"||B.status==="graded");a(M);const P=Array.from(new Set(M.map(B=>B.quizId))),j={};await Promise.all(P.map(async B=>{const H=await xr(B);H&&(j[B]=H)})),l(j)}catch(N){console.error("Failed to fetch results:",N)}finally{m(!1)}})()},[s]);const[g,_]=w.useState(""),v=t.filter(S=>(o[S.quizId]?.title?.toLowerCase()||"").includes(g.toLowerCase())),b=t.length>0?Math.round(t.reduce((S,N)=>S+(N.percentage||0),0)/t.length):0;return d?u.jsx("div",{className:Ke.loadingWrapper,children:u.jsx(_s,{size:"lg"})}):u.jsxs("div",{className:Ke.page,children:[u.jsx("div",{className:Ke.breadcrumb,children:u.jsxs("button",{className:Ke.backBtn,onClick:()=>e("/student"),children:[u.jsx(Ws,{size:18}),u.jsx("span",{children:"Panele Dn"})]})}),u.jsxs("div",{className:Ke.header,children:[u.jsxs("div",{className:Ke.headerInfo,children:[u.jsx("h1",{className:Ke.title,children:"Baar Gemiim"}),u.jsx("p",{className:Ke.subtitle,children:"zdn tm snavlarn detayl analizleri burada."})]}),u.jsxs("div",{className:Ke.statsSummary,children:[u.jsxs("div",{className:Ke.statBox,children:[u.jsx("div",{className:Ke.statIcon,children:u.jsx(ho,{size:18})}),u.jsxs("div",{className:Ke.statData,children:[u.jsx("span",{className:Ke.statVal,children:t.length}),u.jsx("span",{className:Ke.statLbl,children:"SINAV"})]})]}),u.jsxs("div",{className:Ke.statBox,children:[u.jsx("div",{className:Ke.statIcon,children:u.jsx(Oy,{size:18})}),u.jsxs("div",{className:Ke.statData,children:[u.jsxs("span",{className:Ke.statVal,children:["%",b]}),u.jsx("span",{className:Ke.statLbl,children:"ORTALAMA"})]})]})]})]}),u.jsxs("div",{className:Ke.filterBar,children:[u.jsxs("div",{className:Ke.searchBox,children:[u.jsx(wz,{size:18}),u.jsx("input",{type:"text",placeholder:"Snav ad ara...",value:g,onChange:S=>_(S.target.value)})]}),u.jsxs("div",{className:Ke.filterBtn,children:[u.jsx(QM,{size:18}),u.jsx("span",{children:"Filtrele"})]})]}),u.jsxs("div",{className:Ke.list,children:[v.map(S=>{const N=o[S.quizId],M=S.percentage>=85?"#10b981":S.percentage>=60?"#f59e0b":"#ef4444";return u.jsxs("div",{className:Ke.resultItem,onClick:()=>e(`/student/quiz/result/${S.id}`),children:[u.jsxs("div",{className:Ke.resultMain,children:[u.jsx("div",{className:Ke.itemIcon,style:{color:M},children:u.jsx(b_,{size:24})}),u.jsxs("div",{className:Ke.itemContent,children:[u.jsx("h3",{className:Ke.itemTitle,children:N?.title||"Snav Sonucu"}),u.jsxs("div",{className:Ke.itemMeta,children:[u.jsxs("div",{className:Ke.metaItem,children:[u.jsx(rd,{size:14}),u.jsx("span",{children:S.submittedAt?new Date(S.submittedAt).toLocaleDateString("tr-TR"):"-"})]}),u.jsx("div",{className:Ke.metaItem,children:u.jsx("span",{className:Ke.subjectTag,children:N?.subject||"Genel"})})]})]})]}),u.jsxs("div",{className:Ke.resultRight,children:[u.jsxs("div",{className:Ke.scoreGroup,children:[u.jsxs("span",{className:Ke.scorePoints,children:[S.score," / ",S.totalPoints]}),u.jsxs("div",{className:Ke.percentageBadge,style:{backgroundColor:`${M}15`,color:M},children:["%",S.percentage]})]}),u.jsx("div",{className:Ke.actionIcon,children:u.jsx(Ks,{size:20})})]})]},S.id)}),v.length===0&&u.jsxs("div",{className:Ke.empty,children:[u.jsx(ho,{size:48,strokeWidth:1}),u.jsx("h3",{children:g?"Sonu bulunamad":"Henz bir snav sonucun yok"}),u.jsx("p",{children:g?"Araman deitirmeyi dene.":"Snavlar zdkten sonra baar analizlerini burada grebilirsin."}),!g&&u.jsx(ke,{variant:"primary",className:Ke.vibrantBtn,onClick:()=>e("/student/quizzes"),children:"Snavlar zmeye Bala"})]})]})]})},Ug=({title:s})=>u.jsxs("div",{style:{padding:"2rem"},children:[u.jsx("h1",{style:{fontSize:"1.5rem",fontWeight:600},children:s}),u.jsx("p",{style:{color:"#64748b",marginTop:"0.5rem"},children:"Bu sayfa yaknda eklenecek."})]}),gQ=()=>{const{setFirebaseUser:s,setUser:e,setLoading:t,setInitialized:a}=Ft();return w.useEffect(()=>{const o=lk(um,async l=>{if(s(l),l)try{const d=await jo(zn(St,"users",l.uid));d.exists()&&e({id:d.id,...d.data()})}catch(d){console.error("Error fetching user:",d)}else e(null);t(!1),a(!0)});return()=>o()},[s,e,t,a]),u.jsxs(gR,{children:[u.jsxs(FI,{children:[u.jsx(Lt,{path:ye.LOGIN,element:u.jsx(m9,{})}),u.jsx(Lt,{path:ye.HOME,element:u.jsx(mf,{to:ye.LOGIN,replace:!0})}),u.jsx(Lt,{path:ye.REGISTER,element:u.jsx(Ug,{title:"Kayt Ol"})}),u.jsx(Lt,{path:ye.FORGOT_PASSWORD,element:u.jsx(Ug,{title:"ifremi Unuttum"})}),u.jsxs(Lt,{element:u.jsx(jn,{children:u.jsx(KL,{})}),children:[u.jsx(Lt,{path:ye.TEACHER.DASHBOARD,element:u.jsx(jn,{allowedRoles:["teacher"],children:u.jsx(LP,{})})}),u.jsx(Lt,{path:ye.TEACHER.SESSIONS,element:u.jsx(jn,{allowedRoles:["teacher"],children:u.jsx(_V,{})})}),u.jsx(Lt,{path:ye.TEACHER.NEW_SESSION,element:u.jsx(jn,{allowedRoles:["teacher"],children:u.jsx(xU,{})})}),u.jsx(Lt,{path:ye.TEACHER.SESSION_DETAIL,element:u.jsx(jn,{allowedRoles:["teacher"],children:u.jsx(RB,{})})}),u.jsx(Lt,{path:ye.TEACHER.QUIZZES,element:u.jsx(jn,{allowedRoles:["teacher"],children:u.jsx(Mq,{})})}),u.jsx(Lt,{path:ye.TEACHER.NEW_QUIZ,element:u.jsx(jn,{allowedRoles:["teacher"],children:u.jsx(gT,{})})}),u.jsx(Lt,{path:ye.TEACHER.QUIZ_EDIT,element:u.jsx(jn,{allowedRoles:["teacher"],children:u.jsx(gT,{})})}),u.jsx(Lt,{path:ye.TEACHER.QUIZ_RESULTS,element:u.jsx(jn,{allowedRoles:["teacher"],children:u.jsx(Qq,{})})}),u.jsx(Lt,{path:ye.TEACHER.REPORTS,element:u.jsx(jn,{allowedRoles:["teacher"],children:u.jsx(T$,{})})}),u.jsx(Lt,{path:ye.STUDENT.DASHBOARD,element:u.jsx(jn,{allowedRoles:["student"],children:u.jsx(rF,{})})}),u.jsx(Lt,{path:ye.STUDENT.QUIZZES,element:u.jsx(jn,{allowedRoles:["student"],children:u.jsx(nG,{})})}),u.jsx(Lt,{path:ye.STUDENT.QUIZ_PLAYER,element:u.jsx(jn,{allowedRoles:["student"],children:u.jsx(NF,{})})}),u.jsx(Lt,{path:ye.STUDENT.QUIZ_RESULT,element:u.jsx(jn,{allowedRoles:["student"],children:u.jsx(zG,{})})}),u.jsx(Lt,{path:ye.STUDENT.RESULTS,element:u.jsx(jn,{allowedRoles:["student"],children:u.jsx(pQ,{})})}),u.jsx(Lt,{path:ye.ADMIN.DASHBOARD,element:u.jsx(jn,{allowedRoles:["admin"],children:u.jsx(Ug,{title:"Ynetici Paneli"})})})]}),u.jsx(Lt,{path:"*",element:u.jsx(mf,{to:ye.LOGIN,replace:!0})})]}),u.jsx(Y5,{})]})};F2.createRoot(document.getElementById("root")).render(u.jsx(ao.StrictMode,{children:u.jsx(gQ,{})}));
